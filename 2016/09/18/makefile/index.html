<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>makefile | smallsilver&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="GNU make/ The shadow around the body is distracting.  /body { box-shadow: 0 0 0 0; }Short Table of Contents1 Overview of make2 An Introduction to Makefiles3 Writing Makefiles4 Writing Rules5 Writing R">
<meta property="og:type" content="article">
<meta property="og:title" content="makefile">
<meta property="og:url" content="http://wangdongen.cn/2016/09/18/makefile/index.html">
<meta property="og:site_name" content="smallsilver's blog">
<meta property="og:description" content="GNU make/ The shadow around the body is distracting.  /body { box-shadow: 0 0 0 0; }Short Table of Contents1 Overview of make2 An Introduction to Makefiles3 Writing Makefiles4 Writing Rules5 Writing R">
<meta property="og:updated_time" content="2016-09-18T07:45:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="makefile">
<meta name="twitter:description" content="GNU make/ The shadow around the body is distracting.  /body { box-shadow: 0 0 0 0; }Short Table of Contents1 Overview of make2 An Introduction to Makefiles3 Writing Makefiles4 Writing Rules5 Writing R">
  
    <link rel="alternate" href="/atom.xml" title="smallsilver&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-79606812-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">smallsilver&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
	<!--
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
        -->
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://wangdongen.cn"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-makefile" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/18/makefile/" class="article-date">
  <time datetime="2016-09-18T06:55:41.000Z" itemprop="datePublished">2016-09-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      makefile
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <html><!-- This file documents the GNU make utility, which determines
automatically which pieces of a large program need to be recompiled,
and issues the commands to recompile them.

This is Edition 0.74, last updated 21 May 2016,
of The GNU Make Manual, for GNU make version 4.2.

Copyright (C) 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995,
1996, 1997, 1998, 1999, 2000, 2002, 2003, 2004, 2005, 2006, 2007,
2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016 Free Software
Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with the Front-Cover Texts being "A GNU Manual,"
and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.1, http://www.gnu.org/software/texinfo/ --><head><br><title>GNU make</title><br><br><meta name="description" content="GNU make"><br><meta name="keywords" content="GNU make"><br><meta name="resource-type" content="document"><br><meta name="distribution" content="global"><br><meta name="Generator" content="makeinfo"><br><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><br><link href="#Top" rel="start" title="Top"><br><link href="#Concept-Index" rel="index" title="Concept Index"><br><link href="#SEC_Contents" rel="contents" title="Table of Contents"><br><link href="dir.html#Top" rel="up" title="(dir)"><br><style type="text/css"><br><!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
--><br>/<em> The shadow around the body is distracting.  </em>/<br>body { box-shadow: 0 0 0 0; }<br></style><br><link rel="stylesheet" type="text/css" href="/software/gnulib/manual.css"><br></head><br><body lang="en"><br><h2 class="shortcontents-heading">Short Table of Contents</h2><br><div class="shortcontents"><br><ul class="no-bullet"><br><li><a name="stoc-Overview-of-make" href="#toc-Overview-of-make">1 Overview of <code>make</code></a></li><br><li><a name="stoc-An-Introduction-to-Makefiles" href="#toc-An-Introduction-to-Makefiles">2 An Introduction to Makefiles</a></li><br><li><a name="stoc-Writing-Makefiles" href="#toc-Writing-Makefiles">3 Writing Makefiles</a></li><br><li><a name="stoc-Writing-Rules" href="#toc-Writing-Rules">4 Writing Rules</a></li><br><li><a name="stoc-Writing-Recipes-in-Rules" href="#toc-Writing-Recipes-in-Rules">5 Writing Recipes in Rules</a></li><br><li><a name="stoc-How-to-Use-Variables" href="#toc-How-to-Use-Variables">6 How to Use Variables</a></li><br><li><a name="stoc-Conditional-Parts-of-Makefiles" href="#toc-Conditional-Parts-of-Makefiles">7 Conditional Parts of Makefiles</a></li><br><li><a name="stoc-Functions-for-Transforming-Text" href="#toc-Functions-for-Transforming-Text">8 Functions for Transforming Text</a></li><br><li><a name="stoc-How-to-Run-make" href="#toc-How-to-Run-make">9 How to Run <code>make</code></a></li><br><li><a name="stoc-Using-Implicit-Rules" href="#toc-Using-Implicit-Rules">10 Using Implicit Rules</a></li><br><li><a name="stoc-Using-make-to-Update-Archive-Files" href="#toc-Using-make-to-Update-Archive-Files">11 Using <code>make</code> to Update Archive Files</a></li><br><li><a name="stoc-Extending-GNU-make" href="#toc-Extending-GNU-make">12 Extending GNU <code>make</code></a></li><br><li><a name="stoc-Integrating-GNU-make" href="#toc-Integrating-GNU-make">13 Integrating GNU <code>make</code></a></li><br><li><a name="stoc-Features-of-GNU-make" href="#toc-Features-of-GNU-make">14 Features of GNU <code>make</code></a></li><br><li><a name="stoc-Incompatibilities-and-Missing-Features" href="#toc-Incompatibilities-and-Missing-Features">15 Incompatibilities and Missing Features</a></li><br><li><a name="stoc-Makefile-Conventions-1" href="#toc-Makefile-Conventions-1">16 Makefile Conventions</a></li><br><li><a name="stoc-Quick-Reference-1" href="#toc-Quick-Reference-1">Appendix A Quick Reference</a></li><br><li><a name="stoc-Errors-Generated-by-Make" href="#toc-Errors-Generated-by-Make">Appendix B Errors Generated by Make</a></li><br><li><a name="stoc-Complex-Makefile-Example" href="#toc-Complex-Makefile-Example">Appendix C Complex Makefile Example</a></li><br><li><a name="stoc-Index-of-Concepts" href="#toc-Index-of-Concepts">Index of Concepts</a></li><br><li><a name="stoc-Index-of-Functions_002c-Variables_002c-_0026-Directives" href="#toc-Index-of-Functions_002c-Variables_002c-_0026-Directives">Index of Functions, Variables, &amp; Directives</a></li><br></ul><br></div><br><br><a name="SEC_Contents"></a><br><h2 class="contents-heading">Table of Contents</h2><br><br><div class="contents"><br><br><ul class="no-bullet"><br>  <li><a name="toc-Overview-of-make" href="#Overview">1 Overview of <code>make</code></a><br>  <ul class="no-bullet"><br>    <li><a name="toc-How-to-Read-This-Manual" href="#Reading">1.1 How to Read This Manual</a></li><br>    <li><a name="toc-Problems-and-Bugs" href="#Bugs">1.2 Problems and Bugs</a></li><br>  </ul></li><br>  <li><a name="toc-An-Introduction-to-Makefiles" href="#Introduction">2 An Introduction to Makefiles</a><br>  <ul class="no-bullet"><br>    <li><a name="toc-What-a-Rule-Looks-Like" href="#Rule-Introduction">2.1 What a Rule Looks Like</a></li><br>    <li><a name="toc-A-Simple-Makefile" href="#Simple-Makefile">2.2 A Simple Makefile</a></li><br>    <li><a name="toc-How-make-Processes-a-Makefile" href="#How-Make-Works">2.3 How <code>make</code> Processes a Makefile</a></li><br>    <li><a name="toc-Variables-Make-Makefiles-Simpler" href="#Variables-Simplify">2.4 Variables Make Makefiles Simpler</a></li><br>    <li><a name="toc-Letting-make-Deduce-the-Recipes" href="#make-Deduces">2.5 Letting <code>make</code> Deduce the Recipes</a></li><br>    <li><a name="toc-Another-Style-of-Makefile" href="#Combine-By-Prerequisite">2.6 Another Style of Makefile</a></li><br>    <li><a name="toc-Rules-for-Cleaning-the-Directory" href="#Cleanup">2.7 Rules for Cleaning the Directory</a></li><br>  </ul></li><br>  <li><a name="toc-Writing-Makefiles" href="#Makefiles">3 Writing Makefiles</a><br>  <ul class="no-bullet"><br>    <li><a name="toc-What-Makefiles-Contain" href="#Makefile-Contents">3.1 What Makefiles Contain</a><br>    <ul class="no-bullet"><br>      <li><a name="toc-Splitting-Long-Lines" href="#Splitting-Lines">3.1.1 Splitting Long Lines</a></li><br>    </ul></li><br>    <li><a name="toc-What-Name-to-Give-Your-Makefile" href="#Makefile-Names">3.2 What Name to Give Your Makefile</a></li><br>    <li><a name="toc-Including-Other-Makefiles" href="#Include">3.3 Including Other Makefiles</a></li><br>    <li><a name="toc-The-Variable-MAKEFILES" href="#MAKEFILES-Variable">3.4 The Variable <code>MAKEFILES</code></a></li><br>    <li><a name="toc-How-Makefiles-Are-Remade" href="#Remaking-Makefiles">3.5 How Makefiles Are Remade</a></li><br>    <li><a name="toc-Overriding-Part-of-Another-Makefile" href="#Overriding-Makefiles">3.6 Overriding Part of Another Makefile</a></li><br>    <li><a name="toc-How-make-Reads-a-Makefile" href="#Reading-Makefiles">3.7 How <code>make</code> Reads a Makefile</a></li><br>    <li><a name="toc-Secondary-Expansion-1" href="#Secondary-Expansion">3.8 Secondary Expansion</a></li><br>  </ul></li><br>  <li><a name="toc-Writing-Rules" href="#Rules">4 Writing Rules</a><br>  <ul class="no-bullet"><br>    <li><a name="toc-Rule-Example-1" href="#Rule-Example">4.1 Rule Example</a></li><br>    <li><a name="toc-Rule-Syntax-1" href="#Rule-Syntax">4.2 Rule Syntax</a></li><br>    <li><a name="toc-Types-of-Prerequisites" href="#Prerequisite-Types">4.3 Types of Prerequisites</a></li><br>    <li><a name="toc-Using-Wildcard-Characters-in-File-Names" href="#Wildcards">4.4 Using Wildcard Characters in File Names</a><br>    <ul class="no-bullet"><br>      <li><a name="toc-Wildcard-Examples-1" href="#Wildcard-Examples">4.4.1 Wildcard Examples</a></li><br>      <li><a name="toc-Pitfalls-of-Using-Wildcards" href="#Wildcard-Pitfall">4.4.2 Pitfalls of Using Wildcards</a></li><br>      <li><a name="toc-The-Function-wildcard" href="#Wildcard-Function">4.4.3 The Function <code>wildcard</code></a></li><br>    </ul></li><br>    <li><a name="toc-Searching-Directories-for-Prerequisites" href="#Directory-Search">4.5 Searching Directories for Prerequisites</a><br>    <ul class="no-bullet"><br>      <li><a name="toc-VPATH_003a-Search-Path-for-All-Prerequisites" href="#General-Search">4.5.1 <code>VPATH</code>: Search Path for All Prerequisites</a></li><br>      <li><a name="toc-The-vpath-Directive" href="#Selective-Search">4.5.2 The <code>vpath</code> Directive</a></li><br>      <li><a name="toc-How-Directory-Searches-are-Performed" href="#Search-Algorithm">4.5.3 How Directory Searches are Performed</a></li><br>      <li><a name="toc-Writing-Recipes-with-Directory-Search" href="#Recipes_002fSearch">4.5.4 Writing Recipes with Directory Search</a></li><br>      <li><a name="toc-Directory-Search-and-Implicit-Rules" href="#Implicit_002fSearch">4.5.5 Directory Search and Implicit Rules</a></li><br>      <li><a name="toc-Directory-Search-for-Link-Libraries" href="#Libraries_002fSearch">4.5.6 Directory Search for Link Libraries</a></li><br>    </ul></li><br>    <li><a name="toc-Phony-Targets-1" href="#Phony-Targets">4.6 Phony Targets</a></li><br>    <li><a name="toc-Rules-without-Recipes-or-Prerequisites" href="#Force-Targets">4.7 Rules without Recipes or Prerequisites</a></li><br>    <li><a name="toc-Empty-Target-Files-to-Record-Events" href="#Empty-Targets">4.8 Empty Target Files to Record Events</a></li><br>    <li><a name="toc-Special-Built_002din-Target-Names" href="#Special-Targets">4.9 Special Built-in Target Names</a></li><br>    <li><a name="toc-Multiple-Targets-in-a-Rule" href="#Multiple-Targets">4.10 Multiple Targets in a Rule</a></li><br>    <li><a name="toc-Multiple-Rules-for-One-Target" href="#Multiple-Rules">4.11 Multiple Rules for One Target</a></li><br>    <li><a name="toc-Static-Pattern-Rules" href="#Static-Pattern">4.12 Static Pattern Rules</a><br>    <ul class="no-bullet"><br>      <li><a name="toc-Syntax-of-Static-Pattern-Rules" href="#Static-Usage">4.12.1 Syntax of Static Pattern Rules</a></li><br>      <li><a name="toc-Static-Pattern-Rules-versus-Implicit-Rules" href="#Static-versus-Implicit">4.12.2 Static Pattern Rules versus Implicit Rules</a></li><br>    </ul></li><br>    <li><a name="toc-Double_002dColon-Rules" href="#Double_002dColon">4.13 Double-Colon Rules</a></li><br>    <li><a name="toc-Generating-Prerequisites-Automatically" href="#Automatic-Prerequisites">4.14 Generating Prerequisites Automatically</a></li><br>  </ul></li><br>  <li><a name="toc-Writing-Recipes-in-Rules" href="#Recipes">5 Writing Recipes in Rules</a><br>  <ul class="no-bullet"><br>    <li><a name="toc-Recipe-Syntax-1" href="#Recipe-Syntax">5.1 Recipe Syntax</a><br>    <ul class="no-bullet"><br>      <li><a name="toc-Splitting-Recipe-Lines-1" href="#Splitting-Recipe-Lines">5.1.1 Splitting Recipe Lines</a></li><br>      <li><a name="toc-Using-Variables-in-Recipes" href="#Variables-in-Recipes">5.1.2 Using Variables in Recipes</a></li><br>    </ul></li><br>    <li><a name="toc-Recipe-Echoing" href="#Echoing">5.2 Recipe Echoing</a></li><br>    <li><a name="toc-Recipe-Execution" href="#Execution">5.3 Recipe Execution</a><br>    <ul class="no-bullet"><br>      <li><a name="toc-Using-One-Shell" href="#One-Shell">5.3.1 Using One Shell</a></li><br>      <li><a name="toc-Choosing-the-Shell-1" href="#Choosing-the-Shell">5.3.2 Choosing the Shell</a></li><br>    </ul></li><br>    <li><a name="toc-Parallel-Execution" href="#Parallel">5.4 Parallel Execution</a><br>    <ul class="no-bullet"><br>      <li><a name="toc-Output-During-Parallel-Execution" href="#Parallel-Output">5.4.1 Output During Parallel Execution</a></li><br>      <li><a name="toc-Input-During-Parallel-Execution" href="#Parallel-Input">5.4.2 Input During Parallel Execution</a></li><br>    </ul></li><br>    <li><a name="toc-Errors-in-Recipes" href="#Errors">5.5 Errors in Recipes</a></li><br>    <li><a name="toc-Interrupting-or-Killing-make" href="#Interrupts">5.6 Interrupting or Killing <code>make</code></a></li><br>    <li><a name="toc-Recursive-Use-of-make" href="#Recursion">5.7 Recursive Use of <code>make</code></a><br>    <ul class="no-bullet"><br>      <li><a name="toc-How-the-MAKE-Variable-Works" href="#MAKE-Variable">5.7.1 How the <code>MAKE</code> Variable Works</a></li><br>      <li><a name="toc-Communicating-Variables-to-a-Sub_002dmake" href="#Variables_002fRecursion">5.7.2 Communicating Variables to a Sub-<code>make</code></a></li><br>      <li><a name="toc-Communicating-Options-to-a-Sub_002dmake" href="#Options_002fRecursion">5.7.3 Communicating Options to a Sub-<code>make</code></a></li><br>      <li><a name="toc-The-_002d_002dprint_002ddirectory-Option" href="#g_t_002dw-Option">5.7.4 The ‘<samp>–print-directory</samp>’ Option</a></li><br>    </ul></li><br>    <li><a name="toc-Defining-Canned-Recipes" href="#Canned-Recipes">5.8 Defining Canned Recipes</a></li><br>    <li><a name="toc-Using-Empty-Recipes" href="#Empty-Recipes">5.9 Using Empty Recipes</a></li><br>  </ul></li><br>  <li><a name="toc-How-to-Use-Variables" href="#Using-Variables">6 How to Use Variables</a><br>  <ul class="no-bullet"><br>    <li><a name="toc-Basics-of-Variable-References" href="#Reference">6.1 Basics of Variable References</a></li><br>    <li><a name="toc-The-Two-Flavors-of-Variables" href="#Flavors">6.2 The Two Flavors of Variables</a></li><br>    <li><a name="toc-Advanced-Features-for-Reference-to-Variables" href="#Advanced">6.3 Advanced Features for Reference to Variables</a><br>    <ul class="no-bullet"><br>      <li><a name="toc-Substitution-References" href="#Substitution-Refs">6.3.1 Substitution References</a></li><br>      <li><a name="toc-Computed-Variable-Names" href="#Computed-Names">6.3.2 Computed Variable Names</a></li><br>    </ul></li><br>    <li><a name="toc-How-Variables-Get-Their-Values" href="#Values">6.4 How Variables Get Their Values</a></li><br>    <li><a name="toc-Setting-Variables" href="#Setting">6.5 Setting Variables</a></li><br>    <li><a name="toc-Appending-More-Text-to-Variables" href="#Appending">6.6 Appending More Text to Variables</a></li><br>    <li><a name="toc-The-override-Directive" href="#Override-Directive">6.7 The <code>override</code> Directive</a></li><br>    <li><a name="toc-Defining-Multi_002dLine-Variables" href="#Multi_002dLine">6.8 Defining Multi-Line Variables</a></li><br>    <li><a name="toc-Undefining-Variables" href="#Undefine-Directive">6.9 Undefining Variables</a></li><br>    <li><a name="toc-Variables-from-the-Environment" href="#Environment">6.10 Variables from the Environment</a></li><br>    <li><a name="toc-Target_002dspecific-Variable-Values" href="#Target_002dspecific">6.11 Target-specific Variable Values</a></li><br>    <li><a name="toc-Pattern_002dspecific-Variable-Values" href="#Pattern_002dspecific">6.12 Pattern-specific Variable Values</a></li><br>    <li><a name="toc-Suppressing-Inheritance-1" href="#Suppressing-Inheritance">6.13 Suppressing Inheritance</a></li><br>    <li><a name="toc-Other-Special-Variables" href="#Special-Variables">6.14 Other Special Variables</a></li><br>  </ul></li><br>  <li><a name="toc-Conditional-Parts-of-Makefiles" href="#Conditionals">7 Conditional Parts of Makefiles</a><br>  <ul class="no-bullet"><br>    <li><a name="toc-Example-of-a-Conditional" href="#Conditional-Example">7.1 Example of a Conditional</a></li><br>    <li><a name="toc-Syntax-of-Conditionals" href="#Conditional-Syntax">7.2 Syntax of Conditionals</a></li><br>    <li><a name="toc-Conditionals-that-Test-Flags" href="#Testing-Flags">7.3 Conditionals that Test Flags</a></li><br>  </ul></li><br>  <li><a name="toc-Functions-for-Transforming-Text" href="#Functions">8 Functions for Transforming Text</a><br>  <ul class="no-bullet"><br>    <li><a name="toc-Function-Call-Syntax" href="#Syntax-of-Functions">8.1 Function Call Syntax</a></li><br>    <li><a name="toc-Functions-for-String-Substitution-and-Analysis" href="#Text-Functions">8.2 Functions for String Substitution and Analysis</a></li><br>    <li><a name="toc-Functions-for-File-Names" href="#File-Name-Functions">8.3 Functions for File Names</a></li><br>    <li><a name="toc-Functions-for-Conditionals" href="#Conditional-Functions">8.4 Functions for Conditionals</a></li><br>    <li><a name="toc-The-foreach-Function" href="#Foreach-Function">8.5 The <code>foreach</code> Function</a></li><br>    <li><a name="toc-The-file-Function" href="#File-Function">8.6 The <code>file</code> Function</a></li><br>    <li><a name="toc-The-call-Function" href="#Call-Function">8.7 The <code>call</code> Function</a></li><br>    <li><a name="toc-The-value-Function" href="#Value-Function">8.8 The <code>value</code> Function</a></li><br>    <li><a name="toc-The-eval-Function" href="#Eval-Function">8.9 The <code>eval</code> Function</a></li><br>    <li><a name="toc-The-origin-Function" href="#Origin-Function">8.10 The <code>origin</code> Function</a></li><br>    <li><a name="toc-The-flavor-Function" href="#Flavor-Function">8.11 The <code>flavor</code> Function</a></li><br>    <li><a name="toc-Functions-That-Control-Make" href="#Make-Control-Functions">8.12 Functions That Control Make</a></li><br>    <li><a name="toc-The-shell-Function" href="#Shell-Function">8.13 The <code>shell</code> Function</a></li><br>    <li><a name="toc-The-guile-Function" href="#Guile-Function">8.14 The <code>guile</code> Function</a></li><br>  </ul></li><br>  <li><a name="toc-How-to-Run-make" href="#Running">9 How to Run <code>make</code></a><br>  <ul class="no-bullet"><br>    <li><a name="toc-Arguments-to-Specify-the-Makefile" href="#Makefile-Arguments">9.1 Arguments to Specify the Makefile</a></li><br>    <li><a name="toc-Arguments-to-Specify-the-Goals" href="#Goals">9.2 Arguments to Specify the Goals</a></li><br>    <li><a name="toc-Instead-of-Executing-Recipes" href="#Instead-of-Execution">9.3 Instead of Executing Recipes</a></li><br>    <li><a name="toc-Avoiding-Recompilation-of-Some-Files" href="#Avoiding-Compilation">9.4 Avoiding Recompilation of Some Files</a></li><br>    <li><a name="toc-Overriding-Variables" href="#Overriding">9.5 Overriding Variables</a></li><br>    <li><a name="toc-Testing-the-Compilation-of-a-Program" href="#Testing">9.6 Testing the Compilation of a Program</a></li><br>    <li><a name="toc-Summary-of-Options" href="#Options-Summary">9.7 Summary of Options</a></li><br>  </ul></li><br>  <li><a name="toc-Using-Implicit-Rules" href="#Implicit-Rules">10 Using Implicit Rules</a><br>  <ul class="no-bullet"><br>    <li><a name="toc-Using-Implicit-Rules-1" href="#Using-Implicit">10.1 Using Implicit Rules</a></li><br>    <li><a name="toc-Catalogue-of-Built_002dIn-Rules" href="#Catalogue-of-Rules">10.2 Catalogue of Built-In Rules</a></li><br>    <li><a name="toc-Variables-Used-by-Implicit-Rules" href="#Implicit-Variables">10.3 Variables Used by Implicit Rules</a></li><br>    <li><a name="toc-Chains-of-Implicit-Rules" href="#Chained-Rules">10.4 Chains of Implicit Rules</a></li><br>    <li><a name="toc-Defining-and-Redefining-Pattern-Rules" href="#Pattern-Rules">10.5 Defining and Redefining Pattern Rules</a><br>    <ul class="no-bullet"><br>      <li><a name="toc-Introduction-to-Pattern-Rules" href="#Pattern-Intro">10.5.1 Introduction to Pattern Rules</a></li><br>      <li><a name="toc-Pattern-Rule-Examples" href="#Pattern-Examples">10.5.2 Pattern Rule Examples</a></li><br>      <li><a name="toc-Automatic-Variables-1" href="#Automatic-Variables">10.5.3 Automatic Variables</a></li><br>      <li><a name="toc-How-Patterns-Match" href="#Pattern-Match">10.5.4 How Patterns Match</a></li><br>      <li><a name="toc-Match_002dAnything-Pattern-Rules" href="#Match_002dAnything-Rules">10.5.5 Match-Anything Pattern Rules</a></li><br>      <li><a name="toc-Canceling-Implicit-Rules" href="#Canceling-Rules">10.5.6 Canceling Implicit Rules</a></li><br>    </ul></li><br>    <li><a name="toc-Defining-Last_002dResort-Default-Rules" href="#Last-Resort">10.6 Defining Last-Resort Default Rules</a></li><br>    <li><a name="toc-Old_002dFashioned-Suffix-Rules" href="#Suffix-Rules">10.7 Old-Fashioned Suffix Rules</a></li><br>    <li><a name="toc-Implicit-Rule-Search-Algorithm" href="#Implicit-Rule-Search">10.8 Implicit Rule Search Algorithm</a></li><br>  </ul></li><br>  <li><a name="toc-Using-make-to-Update-Archive-Files" href="#Archives">11 Using <code>make</code> to Update Archive Files</a><br>  <ul class="no-bullet"><br>    <li><a name="toc-Archive-Members-as-Targets" href="#Archive-Members">11.1 Archive Members as Targets</a></li><br>    <li><a name="toc-Implicit-Rule-for-Archive-Member-Targets" href="#Archive-Update">11.2 Implicit Rule for Archive Member Targets</a><br>    <ul class="no-bullet"><br>      <li><a name="toc-Updating-Archive-Symbol-Directories" href="#Archive-Symbols">11.2.1 Updating Archive Symbol Directories</a></li><br>    </ul></li><br>    <li><a name="toc-Dangers-When-Using-Archives" href="#Archive-Pitfalls">11.3 Dangers When Using Archives</a></li><br>    <li><a name="toc-Suffix-Rules-for-Archive-Files" href="#Archive-Suffix-Rules">11.4 Suffix Rules for Archive Files</a></li><br>  </ul></li><br>  <li><a name="toc-Extending-GNU-make" href="#Extending-make">12 Extending GNU <code>make</code></a><br>  <ul class="no-bullet"><br>    <li><a name="toc-GNU-Guile-Integration" href="#Guile-Integration">12.1 GNU Guile Integration</a><br>    <ul class="no-bullet"><br>      <li><a name="toc-Conversion-of-Guile-Types" href="#Guile-Types">12.1.1 Conversion of Guile Types</a></li><br>      <li><a name="toc-Interfaces-from-Guile-to-make" href="#Guile-Interface">12.1.2 Interfaces from Guile to <code>make</code></a></li><br>      <li><a name="toc-Example-Using-Guile-in-make" href="#Guile-Example">12.1.3 Example Using Guile in <code>make</code></a></li><br>    </ul></li><br>    <li><a name="toc-Loading-Dynamic-Objects" href="#Loading-Objects">12.2 Loading Dynamic Objects</a><br>    <ul class="no-bullet"><br>      <li><a name="toc-The-load-Directive" href="#load-Directive">12.2.1 The <code>load</code> Directive</a></li><br>      <li><a name="toc-How-Loaded-Objects-Are-Remade" href="#Remaking-Loaded-Objects">12.2.2 How Loaded Objects Are Remade</a></li><br>      <li><a name="toc-Loaded-Object-Interface" href="#Loaded-Object-API">12.2.3 Loaded Object Interface</a></li><br>      <li><a name="toc-Example-Loaded-Object" href="#Loaded-Object-Example">12.2.4 Example Loaded Object</a></li><br>    </ul></li><br>  </ul></li><br>  <li><a name="toc-Integrating-GNU-make" href="#Integrating-make">13 Integrating GNU <code>make</code></a><br>  <ul class="no-bullet"><br>    <li><a name="toc-Sharing-Job-Slots-with-GNU-make" href="#Job-Slots">13.1 Sharing Job Slots with GNU <code>make</code></a><br>    <ul class="no-bullet"><br>      <li><a name="toc-POSIX-Jobserver-Interaction" href="#POSIX-Jobserver">13.1.1 POSIX Jobserver Interaction</a></li><br>      <li><a name="toc-Windows-Jobserver-Interaction" href="#Windows-Jobserver">13.1.2 Windows Jobserver Interaction</a></li><br>    </ul></li><br>    <li><a name="toc-Synchronized-Terminal-Output" href="#Terminal-Output">13.2 Synchronized Terminal Output</a></li><br>  </ul></li><br>  <li><a name="toc-Features-of-GNU-make" href="#Features">14 Features of GNU <code>make</code></a></li><br>  <li><a name="toc-Incompatibilities-and-Missing-Features" href="#Missing">15 Incompatibilities and Missing Features</a></li><br>  <li><a name="toc-Makefile-Conventions-1" href="#Makefile-Conventions">16 Makefile Conventions</a><br>  <ul class="no-bullet"><br>    <li><a name="toc-General-Conventions-for-Makefiles" href="#Makefile-Basics">16.1 General Conventions for Makefiles</a></li><br>    <li><a name="toc-Utilities-in-Makefiles-1" href="#Utilities-in-Makefiles">16.2 Utilities in Makefiles</a></li><br>    <li><a name="toc-Variables-for-Specifying-Commands" href="#Command-Variables">16.3 Variables for Specifying Commands</a></li><br>    <li><a name="toc-DESTDIR_003a-Support-for-Staged-Installs" href="#DESTDIR">16.4 <code>DESTDIR</code>: Support for Staged Installs</a></li><br>    <li><a name="toc-Variables-for-Installation-Directories" href="#Directory-Variables">16.5 Variables for Installation Directories</a></li><br>    <li><a name="toc-Standard-Targets-for-Users" href="#Standard-Targets">16.6 Standard Targets for Users</a></li><br>    <li><a name="toc-Install-Command-Categories-1" href="#Install-Command-Categories">16.7 Install Command Categories</a></li><br>  </ul></li><br>  <li><a name="toc-Quick-Reference-1" href="#Quick-Reference">Appendix A Quick Reference</a></li><br>  <li><a name="toc-Errors-Generated-by-Make" href="#Error-Messages">Appendix B Errors Generated by Make</a></li><br>  <li><a name="toc-Complex-Makefile-Example" href="#Complex-Makefile">Appendix C Complex Makefile Example</a><br>  <ul class="no-bullet"><br>    <li><a name="toc-GNU-Free-Documentation-License-1" href="#GNU-Free-Documentation-License">C.1 GNU Free Documentation License</a></li><br>  </ul></li><br>  <li><a name="toc-Index-of-Concepts" href="#Concept-Index">Index of Concepts</a></li><br>  <li><a name="toc-Index-of-Functions_002c-Variables_002c-_0026-Directives" href="#Name-Index">Index of Functions, Variables, &amp; Directives</a></li><br></ul><br></div><br><br><br><a name="Top"></a><br><div class="header"><br><p><br>Next: <a href="#Overview" accesskey="n" rel="next">Overview</a>, Previous: <a href="dir.html#Top" accesskey="p" rel="prev">(dir)</a>, Up: <a href="dir.html#Top" accesskey="u" rel="up">(dir)</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="GNU-make"></a><br><h1 class="top">GNU <code>make</code></h1><br><br><p>This file documents the GNU <code>make</code> utility, which determines<br>automatically which pieces of a large program need to be recompiled,<br>and issues the commands to recompile them.<br></p><br><p>This is Edition 0.74, last updated 21 May 2016,<br>of <cite>The GNU Make Manual</cite>, for GNU <code>make</code> version 4.2.<br></p><br><p>Copyright © 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995,<br>1996, 1997, 1998, 1999, 2000, 2002, 2003, 2004, 2005, 2006, 2007,<br>2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016 Free Software<br>Foundation, Inc.<br></p><br><blockquote><br><p>Permission is granted to copy, distribute and/or modify this document<br>under the terms of the GNU Free Documentation License, Version 1.3 or<br>any later version published by the Free Software Foundation; with no<br>Invariant Sections, with the Front-Cover Texts being “A GNU Manual,”<br>and with the Back-Cover Texts as in (a) below.  A copy of the<br>license is included in the section entitled “GNU Free Documentation<br>License.”<br></p><br><p>(a) The FSF’s Back-Cover Text is: “You have the freedom to copy and<br>modify this GNU manual.  Buying copies from the FSF supports it in<br>developing GNU and promoting software freedom.”<br></p></blockquote><br><br><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Overview" accesskey="1">Overview</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Overview of <code>make</code>.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Introduction" accesskey="2">Introduction</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">An introduction to <code>make</code>.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Makefiles" accesskey="3">Makefiles</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Makefiles tell <code>make</code> what to do.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Rules" accesskey="4">Rules</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Rules describe when a file must be remade.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Recipes" accesskey="5">Recipes</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Recipes say how to remake a file.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Using-Variables" accesskey="6">Using Variables</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">You can use variables to avoid repetition.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Conditionals" accesskey="7">Conditionals</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Use or ignore parts of the makefile based<br>                                  on the values of variables.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Functions" accesskey="8">Functions</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Many powerful ways to manipulate text.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Running" accesskey="9">Invoking make</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to invoke <code>make</code> on the command line.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Implicit-Rules">Implicit Rules</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Use implicit rules to treat many files alike,<br>                                  based on their file names.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Archives">Archives</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How <code>make</code> can update library archives.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Extending-make">Extending make</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Using extensions to <code>make</code>.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Integrating-make">Integrating make</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Integrating <code>make</code> with other tools.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Features">Features</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Features GNU <code>make</code> has over other <code>make</code>s.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Missing">Missing</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">What GNU <code>make</code> lacks from other <code>make</code>s.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Makefile-Conventions">Makefile Conventions</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Conventions for writing makefiles for<br>                                  GNU programs.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Quick-Reference">Quick Reference</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">A quick reference for experienced users.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Error-Messages">Error Messages</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">A list of common errors generated by <code>make</code>.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Complex-Makefile">Complex Makefile</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">A real example of a straightforward,<br>                                  but nontrivial, makefile.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">License for copying this manual.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Concept-Index">Concept Index</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Index of Concepts.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Name-Index">Name Index</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Index of Functions, Variables, &amp; Directives.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br></pre></th></tr><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"> — The Detailed Node Listing —<br><br>Overview of <code>make</code><br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Preparing">Preparing</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Preparing and running <code>make</code>.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Reading">Reading</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">On reading this text.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Bugs">Bugs</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Problems and bugs.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>An Introduction to Makefiles<br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Rule-Introduction">Rule Introduction</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">What a rule looks like.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Simple-Makefile">Simple Makefile</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">A simple makefile.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#How-Make-Works">How Make Works</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How <code>make</code> processes this makefile.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Variables-Simplify">Variables Simplify</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Variables make makefiles simpler.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#make-Deduces">make Deduces</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Letting <code>make</code> deduce the recipes.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Combine-By-Prerequisite">Combine By Prerequisite</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Another style of makefile.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Cleanup">Cleanup</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Rules for cleaning the directory.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>Writing Makefiles<br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Makefile-Contents">Makefile Contents</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">What makefiles contain.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Makefile-Names">Makefile Names</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to name your makefile.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Include">Include</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How one makefile can use another makefile.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#MAKEFILES-Variable">MAKEFILES Variable</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">The environment can specify extra makefiles.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Remaking-Makefiles">Remaking Makefiles</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How makefiles get remade.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Overriding-Makefiles">Overriding Makefiles</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to override part of one makefile<br>                                  with another makefile.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Reading-Makefiles">Reading Makefiles</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How makefiles are parsed.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Secondary-Expansion">Secondary Expansion</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How and when secondary expansion is performed.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>What Makefiles Contain<br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Splitting-Lines">Splitting Lines</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Splitting long lines in makefiles<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>Writing Rules<br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Rule-Example">Rule Example</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">An example explained.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Rule-Syntax">Rule Syntax</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">General syntax explained.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Prerequisite-Types">Prerequisite Types</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">There are two types of prerequisites.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Wildcards">Wildcards</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Using wildcard characters such as ‘<em>’.<br></em></td></tr><br><tr><td align="left" valign="top">• <a href="#Directory-Search">Directory Search</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Searching other directories for source files.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Phony-Targets">Phony Targets</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Using a target that is not a real file’s name.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Force-Targets">Force Targets</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">You can use a target without a recipe<br>                                  or prerequisites to mark other targets<br>                                  as phony.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Empty-Targets">Empty Targets</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">When only the date matters and the<br>                                  files are empty.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Special-Targets">Special Targets</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Targets with special built-in meanings.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Multiple-Targets">Multiple Targets</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">When to make use of several targets in a rule.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Multiple-Rules">Multiple Rules</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to use several rules with the same target.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Static-Pattern">Static Pattern</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Static pattern rules apply to multiple targets<br>                                  and can vary the prerequisites according to<br>                                  the target name.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Double_002dColon">Double-Colon</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to use a special kind of rule to allow<br>                                  several independent rules for one target.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Automatic-Prerequisites">Automatic Prerequisites</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to automatically generate rules giving<br>                                  prerequisites from source files themselves.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>Using Wildcard Characters in File Names<br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Wildcard-Examples">Wildcard Examples</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Several examples.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Wildcard-Pitfall">Wildcard Pitfall</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Problems to avoid.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Wildcard-Function">Wildcard Function</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to cause wildcard expansion where<br>                                  it does not normally take place.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>Searching Directories for Prerequisites<br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#General-Search">General Search</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Specifying a search path that applies<br>                                  to every prerequisite.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Selective-Search">Selective Search</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Specifying a search path<br>                                  for a specified class of names.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Search-Algorithm">Search Algorithm</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">When and how search paths are applied.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Recipes_002fSearch">Recipes/Search</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to write recipes that work together<br>                                  with search paths.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Implicit_002fSearch">Implicit/Search</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How search paths affect implicit rules.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Libraries_002fSearch">Libraries/Search</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Directory search for link libraries.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>Static Pattern Rules<br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Static-Usage">Static Usage</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">The syntax of static pattern rules.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Static-versus-Implicit">Static versus Implicit</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">When are they better than implicit rules?<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>Writing Recipes in Rules<br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Recipe-Syntax">Recipe Syntax</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Recipe syntax features and pitfalls.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Echoing">Echoing</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to control when recipes are echoed.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Execution">Execution</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How recipes are executed.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Parallel">Parallel</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How recipes can be executed in parallel.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Errors">Errors</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">What happens after a recipe execution error.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Interrupts">Interrupts</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">What happens when a recipe is interrupted.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Recursion">Recursion</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Invoking <code>make</code> from makefiles.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Canned-Recipes">Canned Recipes</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Defining canned recipes.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Empty-Recipes">Empty Recipes</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Defining useful, do-nothing recipes.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>Recipe Syntax<br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Splitting-Recipe-Lines">Splitting Recipe Lines</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Breaking long recipe lines for readability.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Variables-in-Recipes">Variables in Recipes</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Using <code>make</code> variables in recipes.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>Recipe Execution<br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#One-Shell">One Shell</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">One shell for all lines in a recipe.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Choosing-the-Shell">Choosing the Shell</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How <code>make</code> chooses the shell used<br>                                  to run recipes.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>Parallel Execution<br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Parallel-Output">Parallel Output</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Handling output during parallel execution<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Parallel-Input">Parallel Input</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Handling input during parallel execution<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>Recursive Use of <code>make</code><br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#MAKE-Variable">MAKE Variable</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">The special effects of using ‘<samp>$(MAKE)</samp>’.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Variables_002fRecursion">Variables/Recursion</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to communicate variables to a sub-<code>make</code>.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Options_002fRecursion">Options/Recursion</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to communicate options to a sub-<code>make</code>.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#g_t_002dw-Option">-w Option</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How the ‘<samp>-w</samp>’ or ‘<samp>–print-directory</samp>’ option<br>                                  helps debug use of recursive <code>make</code> commands.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>How to Use Variables<br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Reference">Reference</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to use the value of a variable.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Flavors">Flavors</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Variables come in two flavors.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Advanced">Advanced</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Advanced features for referencing a variable.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Values">Values</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">All the ways variables get their values.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Setting">Setting</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to set a variable in the makefile.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Appending">Appending</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to append more text to the old value<br>                                  of a variable.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Override-Directive">Override Directive</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to set a variable in the makefile even if<br>                                  the user has set it with a command argument.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Multi_002dLine">Multi-Line</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">An alternate way to set a variable<br>                                  to a multi-line string.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Undefine-Directive">Undefine Directive</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to undefine a variable so that it appears<br>                                  as if it was never set.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Environment">Environment</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Variable values can come from the environment.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Target_002dspecific">Target-specific</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Variable values can be defined on a per-target<br>                                  basis.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Pattern_002dspecific">Pattern-specific</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Target-specific variable values can be applied<br>                                  to a group of targets that match a pattern.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Suppressing-Inheritance">Suppressing Inheritance</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Suppress inheritance of variables.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Special-Variables">Special Variables</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Variables with special meaning or behavior.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>Advanced Features for Reference to Variables<br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Substitution-Refs">Substitution Refs</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Referencing a variable with<br>                                  substitutions on the value.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Computed-Names">Computed Names</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Computing the name of the variable to refer to.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>Conditional Parts of Makefiles<br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Conditional-Example">Conditional Example</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Example of a conditional<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Conditional-Syntax">Conditional Syntax</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">The syntax of conditionals.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Testing-Flags">Testing Flags</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Conditionals that test flags.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>Functions for Transforming Text<br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Syntax-of-Functions">Syntax of Functions</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to write a function call.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Text-Functions">Text Functions</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">General-purpose text manipulation functions.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#File-Name-Functions">File Name Functions</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Functions for manipulating file names.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Conditional-Functions">Conditional Functions</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Functions that implement conditions.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Foreach-Function">Foreach Function</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Repeat some text with controlled variation.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#File-Function">File Function</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Write text to a file.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Call-Function">Call Function</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Expand a user-defined function.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Value-Function">Value Function</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Return the un-expanded value of a variable.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Eval-Function">Eval Function</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Evaluate the arguments as makefile syntax.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Origin-Function">Origin Function</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Find where a variable got its value.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Flavor-Function">Flavor Function</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Find out the flavor of a variable.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Make-Control-Functions">Make Control Functions</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Functions that control how make runs.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Shell-Function">Shell Function</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Substitute the output of a shell command.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Guile-Function">Guile Function</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Use GNU Guile embedded scripting language.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>How to Run <code>make</code><br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Makefile-Arguments">Makefile Arguments</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to specify which makefile to use.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Goals">Goals</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to use goal arguments to specify which<br>                                  parts of the makefile to use.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Instead-of-Execution">Instead of Execution</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to use mode flags to specify what<br>                                  kind of thing to do with the recipes<br>                                  in the makefile other than simply<br>                                  execute them.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Avoiding-Compilation">Avoiding Compilation</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to avoid recompiling certain files.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Overriding">Overriding</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to override a variable to specify<br>                                  an alternate compiler and other things.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Testing">Testing</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to proceed past some errors, to<br>                                  test compilation.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Options-Summary">Options Summary</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Summary of Options<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>Using Implicit Rules<br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Using-Implicit">Using Implicit</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to use an existing implicit rule<br>                                  to get the recipes for updating a file.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Catalogue-of-Rules">Catalogue of Rules</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">A list of built-in rules.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Implicit-Variables">Implicit Variables</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to change what predefined rules do.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Chained-Rules">Chained Rules</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to use a chain of implicit rules.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Pattern-Rules">Pattern Rules</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to define new implicit rules.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Last-Resort">Last Resort</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to define a recipe for rules which<br>                                  cannot find any.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Suffix-Rules">Suffix Rules</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">The old-fashioned style of implicit rule.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Implicit-Rule-Search">Implicit Rule Search</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">The precise algorithm for applying<br>                                  implicit rules.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>Defining and Redefining Pattern Rules<br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Pattern-Intro">Pattern Intro</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">An introduction to pattern rules.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Pattern-Examples">Pattern Examples</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Examples of pattern rules.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Automatic-Variables">Automatic Variables</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to use automatic variables in the<br>                                  recipe of implicit rules.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Pattern-Match">Pattern Match</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How patterns match.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Match_002dAnything-Rules">Match-Anything Rules</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Precautions you should take prior to<br>                                  defining rules that can match any<br>                                  target file whatever.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Canceling-Rules">Canceling Rules</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to override or cancel built-in rules.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>Using <code>make</code> to Update Archive Files<br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Archive-Members">Archive Members</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Archive members as targets.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Archive-Update">Archive Update</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">The implicit rule for archive member targets.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Archive-Pitfalls">Archive Pitfalls</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Dangers to watch out for when using archives.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Archive-Suffix-Rules">Archive Suffix Rules</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">You can write a special kind of suffix rule<br>                                  for updating archives.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>Implicit Rule for Archive Member Targets<br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Archive-Symbols">Archive Symbols</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to update archive symbol directories.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>Extending GNU <code>make</code><br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Guile-Integration">Guile Integration</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Using Guile as an embedded scripting language.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Loading-Objects">Loading Objects</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Loading dynamic objects as extensions.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>GNU Guile Integration<br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Guile-Types">Guile Types</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Converting Guile types to <code>make</code> strings.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Guile-Interface">Guile Interface</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Invoking <code>make</code> functions from Guile.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Guile-Example">Guile Example</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Example using Guile in <code>make</code>.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>Loading Dynamic Objects<br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#load-Directive">load Directive</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Loading dynamic objects as extensions.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Remaking-Loaded-Objects">Remaking Loaded Objects</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How loaded objects get remade.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Loaded-Object-API">Loaded Object API</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Programmatic interface for loaded objects.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Loaded-Object-Example">Loaded Object Example</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Example of a loaded object<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>Integrating GNU <code>make</code><br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#Job-Slots">Job Slots</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Share job slots with GNU <code>make</code>.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Terminal-Output">Terminal Output</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Control output to terminals.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br>Sharing Job Slots with GNU <code>make</code><br><br></pre></th></tr><tr><td align="left" valign="top">• <a href="#POSIX-Jobserver">POSIX Jobserver</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Using the jobserver on POSIX systems.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Windows-Jobserver">Windows Jobserver</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Using the jobserver on Windows systems.<br></td></tr><br><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment"><br></pre></th></tr></tbody></table><br><br><hr><br><a name="Overview"></a><br><div class="header"><br><p><br>Next: <a href="#Introduction" accesskey="n" rel="next">Introduction</a>, Previous: <a href="#Top" accesskey="p" rel="prev">Top</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Overview-of-make"></a><br><h2 class="chapter">1 Overview of <code>make</code></h2><br><br><p>The <code>make</code> utility automatically determines which pieces of a large<br>program need to be recompiled, and issues commands to recompile them.<br>This manual describes GNU <code>make</code>, which was implemented by Richard<br>Stallman and Roland McGrath.  Development since Version 3.76 has been<br>handled by Paul D. Smith.<br></p><br><p>GNU <code>make</code> conforms to section 6.2 of <cite>IEEE Standard<br>1003.2-1992</cite> (POSIX.2).<br><a name="index-POSIX"></a><br><a name="index-IEEE-Standard-1003_002e2"></a><br><a name="index-standards-conformance"></a><br></p><br><p>Our examples show C programs, since they are most common, but you can use<br><code>make</code> with any programming language whose compiler can be run with a<br>shell command.  Indeed, <code>make</code> is not limited to programs.  You can<br>use it to describe any task where some files must be updated automatically<br>from others whenever the others change.<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Preparing" accesskey="1">Preparing</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Preparing and running <code>make</code>.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Reading" accesskey="2">Reading</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">On reading this text.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Bugs" accesskey="3">Bugs</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Problems and bugs.<br></td></tr><br></tbody></table><br><br><hr><br><a name="Preparing"></a><br><div class="header"><br><p><br>Next: <a href="#Reading" accesskey="n" rel="next">Reading</a>, Previous: <a href="#Overview" accesskey="p" rel="prev">Overview</a>, Up: <a href="#Overview" accesskey="u" rel="up">Overview</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><h4 class="node-heading">Preparing</h4><br><a name="Preparing-and-Running-Make"></a><br><h3 class="heading">Preparing and Running Make</h3><br><br><p>To prepare to use <code>make</code>, you must write a file called<br>the <em>makefile</em> that describes the relationships among files<br>in your program and provides commands for updating each file.<br>In a program, typically, the executable file is updated from object<br>files, which are in turn made by compiling source files.<br></p><br><p>Once a suitable makefile exists, each time you change some source files,<br>this simple shell command:<br></p><br><div class="example"><br><pre class="example">make<br></pre></div><br><br><p>suffices to perform all necessary recompilations.  The <code>make</code> program<br>uses the makefile data base and the last-modification times of the files to<br>decide which of the files need to be updated.  For each of those files, it<br>issues the recipes recorded in the data base.<br></p><br><p>You can provide command line arguments to <code>make</code> to control which<br>files should be recompiled, or how.  See <a href="#Running">How to Run<br><code>make</code></a>.<br></p><br><hr><br><a name="Reading"></a><br><div class="header"><br><p><br>Next: <a href="#Bugs" accesskey="n" rel="next">Bugs</a>, Previous: <a href="#Preparing" accesskey="p" rel="prev">Preparing</a>, Up: <a href="#Overview" accesskey="u" rel="up">Overview</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="How-to-Read-This-Manual"></a><br><h3 class="section">1.1 How to Read This Manual</h3><br><br><p>If you are new to <code>make</code>, or are looking for a general<br>introduction, read the first few sections of each chapter, skipping the<br>later sections.  In each chapter, the first few sections contain<br>introductory or general information and the later sections contain<br>specialized or technical information.<br>The exception is the second chapter, <a href="#Introduction">An<br>Introduction to Makefiles</a>, all of which is introductory.<br></p><br><p>If you are familiar with other <code>make</code> programs, see <a href="#Features">Features of GNU <code>make</code></a>, which lists the enhancements GNU<br><code>make</code> has, and <a href="#Missing">Incompatibilities and Missing<br>Features</a>, which explains the few things GNU <code>make</code> lacks that<br>others have.<br></p><br><p>For a quick summary, see <a href="#Options-Summary">Options Summary</a>, <a href="#Quick-Reference">Quick Reference</a>,<br>and <a href="#Special-Targets">Special Targets</a>.<br></p><br><hr><br><a name="Bugs"></a><br><div class="header"><br><p><br>Previous: <a href="#Reading" accesskey="p" rel="prev">Reading</a>, Up: <a href="#Overview" accesskey="u" rel="up">Overview</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Problems-and-Bugs"></a><br><h3 class="section">1.2 Problems and Bugs</h3><br><a name="index-reporting-bugs"></a><br><a name="index-bugs_002c-reporting"></a><br><a name="index-problems-and-bugs_002c-reporting"></a><br><br><p>If you have problems with GNU <code>make</code> or think you’ve found a bug,<br>please report it to the developers; we cannot promise to do anything but<br>we might well want to fix it.<br></p><br><p>Before reporting a bug, make sure you’ve actually found a real bug.<br>Carefully reread the documentation and see if it really says you can do<br>what you’re trying to do.  If it’s not clear whether you should be able<br>to do something or not, report that too; it’s a bug in the<br>documentation!<br></p><br><p>Before reporting a bug or trying to fix it yourself, try to isolate it<br>to the smallest possible makefile that reproduces the problem.  Then<br>send us the makefile and the exact results <code>make</code> gave you,<br>including any error or warning messages.  Please don’t paraphrase<br>these messages: it’s best to cut and paste them into your report.<br>When generating this small makefile, be sure to not use any non-free<br>or unusual tools in your recipes: you can almost always emulate what<br>such a tool would do with simple shell commands.  Finally, be sure to<br>explain what you expected to occur; this will help us decide whether<br>the problem was really in the documentation.<br></p><br><p>Once you have a precise problem you can report it in one of two ways.<br>Either send electronic mail to:<br></p><br><div class="example"><br><pre class="example">    bug-make@gnu.org<br></pre></div><br><br><p>or use our Web-based project management tool, at:<br></p><br><div class="example"><br><pre class="example">    <a href="http://savannah.gnu.org/projects/make/" target="_blank" rel="external">http://savannah.gnu.org/projects/make/</a><br></pre></div><br><br><p>In addition to the information above, please be careful to include the<br>version number of <code>make</code> you are using.  You can get this<br>information with the command ‘<samp>make –version</samp>’.  Be sure also to<br>include the type of machine and operating system you are using.  One<br>way to obtain this information is by looking at the final lines of<br>output from the command ‘<samp>make –help</samp>’.<br></p><br><hr><br><a name="Introduction"></a><br><div class="header"><br><p><br>Next: <a href="#Makefiles" accesskey="n" rel="next">Makefiles</a>, Previous: <a href="#Overview" accesskey="p" rel="prev">Overview</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="An-Introduction-to-Makefiles"></a><br><h2 class="chapter">2 An Introduction to Makefiles</h2><br><br><p>You need a file called a <em>makefile</em> to tell <code>make</code> what to do.<br>Most often, the makefile tells <code>make</code> how to compile and link a<br>program.<br><a name="index-makefile"></a><br></p><br><p>In this chapter, we will discuss a simple makefile that describes how to<br>compile and link a text editor which consists of eight C source files<br>and three header files.  The makefile can also tell <code>make</code> how to<br>run miscellaneous commands when explicitly asked (for example, to remove<br>certain files as a clean-up operation).  To see a more complex example<br>of a makefile, see <a href="#Complex-Makefile">Complex Makefile</a>.<br></p><br><p>When <code>make</code> recompiles the editor, each changed C source file<br>must be recompiled.  If a header file has changed, each C source file<br>that includes the header file must be recompiled to be safe.  Each<br>compilation produces an object file corresponding to the source file.<br>Finally, if any source file has been recompiled, all the object files,<br>whether newly made or saved from previous compilations, must be linked<br>together to produce the new executable editor.<br><a name="index-recompilation"></a><br><a name="index-editor"></a><br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Rule-Introduction" accesskey="1">Rule Introduction</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">What a rule looks like.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Simple-Makefile" accesskey="2">Simple Makefile</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">A simple makefile.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#How-Make-Works" accesskey="3">How Make Works</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How <code>make</code> processes this makefile.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Variables-Simplify" accesskey="4">Variables Simplify</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Variables make makefiles simpler.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#make-Deduces" accesskey="5">make Deduces</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Letting <code>make</code> deduce the recipes.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Combine-By-Prerequisite" accesskey="6">Combine By Prerequisite</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Another style of makefile.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Cleanup" accesskey="7">Cleanup</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Rules for cleaning the directory.<br></td></tr><br></tbody></table><br><br><hr><br><a name="Rule-Introduction"></a><br><div class="header"><br><p><br>Next: <a href="#Simple-Makefile" accesskey="n" rel="next">Simple Makefile</a>, Previous: <a href="#Introduction" accesskey="p" rel="prev">Introduction</a>, Up: <a href="#Introduction" accesskey="u" rel="up">Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="What-a-Rule-Looks-Like"></a><br><h3 class="section">2.1 What a Rule Looks Like</h3><br><a name="index-rule_002c-introduction-to"></a><br><a name="index-makefile-rule-parts"></a><br><a name="index-parts-of-makefile-rule"></a><br><br><p>A simple makefile consists of “rules” with the following shape:<br></p><br><a name="index-targets_002c-introduction-to"></a><br><a name="index-prerequisites_002c-introduction-to"></a><br><a name="index-recipes_002c-introduction-to"></a><br><div class="example"><br><pre class="example"><var>target</var> … : <var>prerequisites</var> …<br>        <var>recipe</var><br>        …<br>        …<br></pre></div><br><br><p>A <em>target</em> is usually the name of a file that is generated by a<br>program; examples of targets are executable or object files.  A target<br>can also be the name of an action to carry out, such as ‘<samp>clean</samp>’<br>(see <a href="#Phony-Targets">Phony Targets</a>).<br></p><br><p>A <em>prerequisite</em> is a file that is used as input to create the<br>target.  A target often depends on several files.<br></p><br><a name="index-tabs-in-rules"></a><br><p>A <em>recipe</em> is an action that <code>make</code> carries out.  A recipe<br>may have more than one command, either on the same line or each on its<br>own line.  <strong>Please note:</strong> you need to put a tab character at<br>the beginning of every recipe line!  This is an obscurity that catches<br>the unwary.  If you prefer to prefix your recipes with a character<br>other than tab, you can set the <code>.RECIPEPREFIX</code> variable to an<br>alternate character (see <a href="#Special-Variables">Special Variables</a>).<br></p><br><p>Usually a recipe is in a rule with prerequisites and serves to create a<br>target file if any of the prerequisites change.  However, the rule that<br>specifies a recipe for the target need not have prerequisites.  For<br>example, the rule containing the delete command associated with the<br>target ‘<samp>clean</samp>’ does not have prerequisites.<br></p><br><p>A <em>rule</em>, then, explains how and when to remake certain files<br>which are the targets of the particular rule.  <code>make</code> carries out<br>the recipe on the prerequisites to create or update the target.  A<br>rule can also explain how and when to carry out an action.<br>See <a href="#Rules">Writing Rules</a>.<br></p><br><p>A makefile may contain other text besides rules, but a simple makefile<br>need only contain rules.  Rules may look somewhat more complicated<br>than shown in this template, but all fit the pattern more or less.<br></p><br><hr><br><a name="Simple-Makefile"></a><br><div class="header"><br><p><br>Next: <a href="#How-Make-Works" accesskey="n" rel="next">How Make Works</a>, Previous: <a href="#Rule-Introduction" accesskey="p" rel="prev">Rule Introduction</a>, Up: <a href="#Introduction" accesskey="u" rel="up">Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="A-Simple-Makefile"></a><br><h3 class="section">2.2 A Simple Makefile</h3><br><a name="index-simple-makefile"></a><br><a name="index-makefile_002c-simple"></a><br><br><p>Here is a straightforward makefile that describes the way an<br>executable file called <code>edit</code> depends on eight object files<br>which, in turn, depend on eight C source and three header files.<br></p><br><p>In this example, all the C files include <samp>defs.h</samp>, but only those<br>defining editing commands include <samp>command.h</samp>, and only low<br>level files that change the editor buffer include <samp>buffer.h</samp>.<br></p><br><div class="example"><br><pre class="example">edit : main.o kbd.o command.o display.o \<br>       insert.o search.o files.o utils.o<br>        cc -o edit main.o kbd.o command.o display.o \<br>                   insert.o search.o files.o utils.o<br><br>main.o : main.c defs.h<br>        cc -c main.c<br>kbd.o : kbd.c defs.h command.h<br>        cc -c kbd.c<br>command.o : command.c defs.h command.h<br>        cc -c command.c<br>display.o : display.c defs.h buffer.h<br>        cc -c display.c<br>insert.o : insert.c defs.h buffer.h<br>        cc -c insert.c<br>search.o : search.c defs.h buffer.h<br>        cc -c search.c<br>files.o : files.c defs.h buffer.h command.h<br>        cc -c files.c<br>utils.o : utils.c defs.h<br>        cc -c utils.c<br>clean :<br>        rm edit main.o kbd.o command.o display.o \<br>           insert.o search.o files.o utils.o<br></pre></div><br><br><p>We split each long line into two lines using backslash/newline; this is<br>like using one long line, but is easier to read.  See <a href="#Splitting-Lines">Splitting Long Lines</a>.<br><a name="index-continuation-lines"></a><br><a name="index-_005c-_0028backslash_0029_002c-for-continuation-lines"></a><br><a name="index-backslash-_0028_005c_0029_002c-for-continuation-lines"></a><br><a name="index-quoting-newline_002c-in-makefile"></a><br><a name="index-newline_002c-quoting_002c-in-makefile"></a><br></p><br><p>To use this makefile to create the executable file called <samp>edit</samp>,<br>type:<br></p><br><div class="example"><br><pre class="example">make<br></pre></div><br><br><p>To use this makefile to delete the executable file and all the object<br>files from the directory, type:<br></p><br><div class="example"><br><pre class="example">make clean<br></pre></div><br><br><p>In the example makefile, the targets include the executable file<br>‘<samp>edit</samp>’, and the object files ‘<samp>main.o</samp>’ and ‘<samp>kbd.o</samp>’.  The<br>prerequisites are files such as ‘<samp>main.c</samp>’ and ‘<samp>defs.h</samp>’.<br>In fact, each ‘<samp>.o</samp>’ file is both a target and a prerequisite.<br>Recipes include ‘<samp>cc&nbsp;<span class="nolinebreak">-c</span>&nbsp;main.c</samp>’<!-- /@w --> and ‘<samp>cc&nbsp;<span class="nolinebreak">-c</span>&nbsp;kbd.c</samp>’<!-- /@w -->.<br></p><br><p>When a target is a file, it needs to be recompiled or relinked if any<br>of its prerequisites change.  In addition, any prerequisites that are<br>themselves automatically generated should be updated first.  In this<br>example, <samp>edit</samp> depends on each of the eight object files; the<br>object file <samp>main.o</samp> depends on the source file <samp>main.c</samp> and<br>on the header file <samp>defs.h</samp>.<br></p><br><p>A recipe may follow each line that contains a target and<br>prerequisites.  These recipes say how to update the target file.  A<br>tab character (or whatever character is specified by the<br><code>.RECIPEPREFIX</code> variable; see <a href="#Special-Variables">Special Variables</a>) must come at<br>the beginning of every line in the recipe to distinguish recipes from<br>other lines in the makefile.  (Bear in mind that <code>make</code> does not<br>know anything about how the recipes work.  It is up to you to supply<br>recipes that will update the target file properly.  All <code>make</code><br>does is execute the recipe you have specified when the target file<br>needs to be updated.)<br><a name="index-recipe"></a><br></p><br><p>The target ‘<samp>clean</samp>’ is not a file, but merely the name of an<br>action.  Since you normally do not want to carry out the actions in<br>this rule, ‘<samp>clean</samp>’ is not a prerequisite of any other rule.<br>Consequently, <code>make</code> never does anything with it unless you tell<br>it specifically.  Note that this rule not only is not a prerequisite,<br>it also does not have any prerequisites, so the only purpose of the<br>rule is to run the specified recipe.  Targets that do not refer to<br>files but are just actions are called <em>phony targets</em>.<br>See <a href="#Phony-Targets">Phony Targets</a>, for information about this kind of target.<br>See <a href="#Errors">Errors in Recipes</a>, to see how to cause <code>make</code><br>to ignore errors from <code>rm</code> or any other command.<br><a name="index-clean-target"></a><br><a name="index-rm-_0028shell-command_0029"></a><br></p><br><hr><br><a name="How-Make-Works"></a><br><div class="header"><br><p><br>Next: <a href="#Variables-Simplify" accesskey="n" rel="next">Variables Simplify</a>, Previous: <a href="#Simple-Makefile" accesskey="p" rel="prev">Simple Makefile</a>, Up: <a href="#Introduction" accesskey="u" rel="up">Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="How-make-Processes-a-Makefile"></a><br><h3 class="section">2.3 How <code>make</code> Processes a Makefile</h3><br><a name="index-processing-a-makefile"></a><br><a name="index-makefile_002c-how-make-processes"></a><br><br><p>By default, <code>make</code> starts with the first target (not targets whose<br>names start with ‘<samp>.</samp>’).  This is called the <em>default goal</em>.<br>(<em>Goals</em> are the targets that <code>make</code> strives ultimately to<br>update.    You can override this behavior using the command line<br>(see <a href="#Goals">Arguments to Specify the Goals</a>) or with the<br><code>.DEFAULT_GOAL</code> special variable (see <a href="#Special-Variables">Other Special Variables</a>).<br><a name="index-default-goal"></a><br><a name="index-goal_002c-default"></a><br><a name="index-goal"></a><br></p><br><p>In the simple example of the previous section, the default goal is to<br>update the executable program <samp>edit</samp>; therefore, we put that rule<br>first.<br></p><br><p>Thus, when you give the command:<br></p><br><div class="example"><br><pre class="example">make<br></pre></div><br><br><p><code>make</code> reads the makefile in the current directory and begins by<br>processing the first rule.  In the example, this rule is for relinking<br><samp>edit</samp>; but before <code>make</code> can fully process this rule, it<br>must process the rules for the files that <samp>edit</samp> depends on,<br>which in this case are the object files.  Each of these files is<br>processed according to its own rule.  These rules say to update each<br>‘<samp>.o</samp>’ file by compiling its source file.  The recompilation must<br>be done if the source file, or any of the header files named as<br>prerequisites, is more recent than the object file, or if the object<br>file does not exist.<br></p><br><p>The other rules are processed because their targets appear as<br>prerequisites of the goal.  If some other rule is not depended on by the<br>goal (or anything it depends on, etc.), that rule is not processed,<br>unless you tell <code>make</code> to do so (with a command such as<br><code>make&nbsp;clean</code><!-- /@w -->).<br></p><br><p>Before recompiling an object file, <code>make</code> considers updating its<br>prerequisites, the source file and header files.  This makefile does not<br>specify anything to be done for them—the ‘<samp>.c</samp>’ and ‘<samp>.h</samp>’ files<br>are not the targets of any rules—so <code>make</code> does nothing for these<br>files.  But <code>make</code> would update automatically generated C programs,<br>such as those made by Bison or Yacc, by their own rules at this time.<br></p><br><p>After recompiling whichever object files need it, <code>make</code> decides<br>whether to relink <samp>edit</samp>.  This must be done if the file<br><samp>edit</samp> does not exist, or if any of the object files are newer than<br>it.  If an object file was just recompiled, it is now newer than<br><samp>edit</samp>, so <samp>edit</samp> is relinked.<br><a name="index-relinking"></a><br></p><br><p>Thus, if we change the file <samp>insert.c</samp> and run <code>make</code>,<br><code>make</code> will compile that file to update <samp>insert.o</samp>, and then<br>link <samp>edit</samp>.  If we change the file <samp>command.h</samp> and run<br><code>make</code>, <code>make</code> will recompile the object files <samp>kbd.o</samp>,<br><samp>command.o</samp> and <samp>files.o</samp> and then link the file <samp>edit</samp>.<br></p><br><hr><br><a name="Variables-Simplify"></a><br><div class="header"><br><p><br>Next: <a href="#make-Deduces" accesskey="n" rel="next">make Deduces</a>, Previous: <a href="#How-Make-Works" accesskey="p" rel="prev">How Make Works</a>, Up: <a href="#Introduction" accesskey="u" rel="up">Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Variables-Make-Makefiles-Simpler"></a><br><h3 class="section">2.4 Variables Make Makefiles Simpler</h3><br><a name="index-variables"></a><br><a name="index-simplifying-with-variables"></a><br><br><p>In our example, we had to list all the object files twice in the rule for<br><samp>edit</samp> (repeated here):<br></p><br><div class="example"><br><pre class="example">edit : main.o kbd.o command.o display.o \<br>              insert.o search.o files.o utils.o<br>        cc -o edit main.o kbd.o command.o display.o \<br>                   insert.o search.o files.o utils.o<br></pre></div><br><br><a name="index-objects"></a><br><p>Such duplication is error-prone; if a new object file is added to the<br>system, we might add it to one list and forget the other.  We can eliminate<br>the risk and simplify the makefile by using a variable.  <em>Variables</em><br>allow a text string to be defined once and substituted in multiple places<br>later (see <a href="#Using-Variables">How to Use Variables</a>).<br></p><br><a name="index-OBJECTS"></a><br><a name="index-objs"></a><br><a name="index-OBJS"></a><br><a name="index-obj"></a><br><a name="index-OBJ"></a><br><p>It is standard practice for every makefile to have a variable named<br><code>objects</code>, <code>OBJECTS</code>, <code>objs</code>, <code>OBJS</code>, <code>obj</code>,<br>or <code>OBJ</code> which is a list of all object file names.  We would<br>define such a variable <code>objects</code> with a line like this in the<br>makefile:<br></p><br><div class="example"><br><pre class="example">objects = main.o kbd.o command.o display.o \<br>          insert.o search.o files.o utils.o<br></pre></div><br><br><p>Then, each place we want to put a list of the object file names, we can<br>substitute the variable’s value by writing ‘<samp>$(objects)</samp>’<br>(see <a href="#Using-Variables">How to Use Variables</a>).<br></p><br><p>Here is how the complete simple makefile looks when you use a variable<br>for the object files:<br></p><br><div class="example"><br><pre class="example">objects = main.o kbd.o command.o display.o \<br>          insert.o search.o files.o utils.o<br><br>edit : $(objects)<br>        cc -o edit $(objects)<br>main.o : main.c defs.h<br>        cc -c main.c<br>kbd.o : kbd.c defs.h command.h<br>        cc -c kbd.c<br>command.o : command.c defs.h command.h<br>        cc -c command.c<br>display.o : display.c defs.h buffer.h<br>        cc -c display.c<br>insert.o : insert.c defs.h buffer.h<br>        cc -c insert.c<br>search.o : search.c defs.h buffer.h<br>        cc -c search.c<br>files.o : files.c defs.h buffer.h command.h<br>        cc -c files.c<br>utils.o : utils.c defs.h<br>        cc -c utils.c<br>clean :<br>        rm edit $(objects)<br></pre></div><br><br><hr><br><a name="make-Deduces"></a><br><div class="header"><br><p><br>Next: <a href="#Combine-By-Prerequisite" accesskey="n" rel="next">Combine By Prerequisite</a>, Previous: <a href="#Variables-Simplify" accesskey="p" rel="prev">Variables Simplify</a>, Up: <a href="#Introduction" accesskey="u" rel="up">Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Letting-make-Deduce-the-Recipes"></a><br><h3 class="section">2.5 Letting <code>make</code> Deduce the Recipes</h3><br><a name="index-deducing-recipes-_0028implicit-rules_0029"></a><br><a name="index-implicit-rule_002c-introduction-to"></a><br><a name="index-rule_002c-implicit_002c-introduction-to"></a><br><br><p>It is not necessary to spell out the recipes for compiling the individual<br>C source files, because <code>make</code> can figure them out: it has an<br><em>implicit rule</em> for updating a ‘<samp>.o</samp>’ file from a correspondingly<br>named ‘<samp>.c</samp>’ file using a ‘<samp>cc -c</samp>’ command.  For example, it will<br>use the recipe ‘<samp>cc -c main.c -o main.o</samp>’ to compile <samp>main.c</samp> into<br><samp>main.o</samp>.  We can therefore omit the recipes from the rules for the<br>object files.  See <a href="#Implicit-Rules">Using Implicit Rules</a>.<br></p><br><p>When a ‘<samp>.c</samp>’ file is used automatically in this way, it is also<br>automatically added to the list of prerequisites.  We can therefore omit<br>the ‘<samp>.c</samp>’ files from the prerequisites, provided we omit the recipe.<br></p><br><p>Here is the entire example, with both of these changes, and a variable<br><code>objects</code> as suggested above:<br></p><br><div class="example"><br><pre class="example">objects = main.o kbd.o command.o display.o \<br>          insert.o search.o files.o utils.o<br><br>edit : $(objects)<br>        cc -o edit $(objects)<br><br>main.o : defs.h<br>kbd.o : defs.h command.h<br>command.o : defs.h command.h<br>display.o : defs.h buffer.h<br>insert.o : defs.h buffer.h<br>search.o : defs.h buffer.h<br>files.o : defs.h buffer.h command.h<br>utils.o : defs.h<br><br>.PHONY : clean<br>clean :<br>        rm edit $(objects)<br></pre></div><br><br><p>This is how we would write the makefile in actual practice.  (The<br>complications associated with ‘<samp>clean</samp>’ are described elsewhere.<br>See <a href="#Phony-Targets">Phony Targets</a>, and <a href="#Errors">Errors in Recipes</a>.)<br></p><br><p>Because implicit rules are so convenient, they are important.  You<br>will see them used frequently.<br></p><br><hr><br><a name="Combine-By-Prerequisite"></a><br><div class="header"><br><p><br>Next: <a href="#Cleanup" accesskey="n" rel="next">Cleanup</a>, Previous: <a href="#make-Deduces" accesskey="p" rel="prev">make Deduces</a>, Up: <a href="#Introduction" accesskey="u" rel="up">Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Another-Style-of-Makefile"></a><br><h3 class="section">2.6 Another Style of Makefile</h3><br><a name="index-combining-rules-by-prerequisite"></a><br><br><p>When the objects of a makefile are created only by implicit rules, an<br>alternative style of makefile is possible.  In this style of makefile,<br>you group entries by their prerequisites instead of by their targets.<br>Here is what one looks like:<br></p><br><div class="example"><br><pre class="example">objects = main.o kbd.o command.o display.o \<br>          insert.o search.o files.o utils.o<br><br>edit : $(objects)<br>        cc -o edit $(objects)<br><br>$(objects) : defs.h<br>kbd.o command.o files.o : command.h<br>display.o insert.o search.o files.o : buffer.h<br></pre></div><br><br><p>Here <samp>defs.h</samp> is given as a prerequisite of all the object files;<br><samp>command.h</samp> and <samp>buffer.h</samp> are prerequisites of the specific<br>object files listed for them.<br></p><br><p>Whether this is better is a matter of taste: it is more compact, but some<br>people dislike it because they find it clearer to put all the information<br>about each target in one place.<br></p><br><hr><br><a name="Cleanup"></a><br><div class="header"><br><p><br>Previous: <a href="#Combine-By-Prerequisite" accesskey="p" rel="prev">Combine By Prerequisite</a>, Up: <a href="#Introduction" accesskey="u" rel="up">Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Rules-for-Cleaning-the-Directory"></a><br><h3 class="section">2.7 Rules for Cleaning the Directory</h3><br><a name="index-cleaning-up"></a><br><a name="index-removing_002c-to-clean-up"></a><br><br><p>Compiling a program is not the only thing you might want to write rules<br>for.  Makefiles commonly tell how to do a few other things besides<br>compiling a program: for example, how to delete all the object files<br>and executables so that the directory is ‘<samp>clean</samp>’.<br></p><br><a name="index-clean-target-1"></a><br><p>Here is how we<br>could write a <code>make</code> rule for cleaning our example editor:<br></p><br><div class="example"><br><pre class="example">clean:<br>        rm edit $(objects)<br></pre></div><br><br><p>In practice, we might want to write the rule in a somewhat more<br>complicated manner to handle unanticipated situations.  We would do this:<br></p><br><div class="example"><br><pre class="example">.PHONY : clean<br>clean :<br>        -rm edit $(objects)<br></pre></div><br><br><p>This prevents <code>make</code> from getting confused by an actual file<br>called <samp>clean</samp> and causes it to continue in spite of errors from<br><code>rm</code>.  (See <a href="#Phony-Targets">Phony Targets</a>, and <a href="#Errors">Errors in<br>Recipes</a>.)<br></p><br><p>A rule such as this should not be placed at the beginning of the<br>makefile, because we do not want it to run by default!  Thus, in the<br>example makefile, we want the rule for <code>edit</code>, which recompiles<br>the editor, to remain the default goal.<br></p><br><p>Since <code>clean</code> is not a prerequisite of <code>edit</code>, this rule will not<br>run at all if we give the command ‘<samp>make</samp>’ with no arguments.  In<br>order to make the rule run, we have to type ‘<samp>make clean</samp>’.<br>See <a href="#Running">How to Run <code>make</code></a>.<br></p><br><hr><br><a name="Makefiles"></a><br><div class="header"><br><p><br>Next: <a href="#Rules" accesskey="n" rel="next">Rules</a>, Previous: <a href="#Introduction" accesskey="p" rel="prev">Introduction</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Writing-Makefiles"></a><br><h2 class="chapter">3 Writing Makefiles</h2><br><br><a name="index-makefile_002c-how-to-write"></a><br><p>The information that tells <code>make</code> how to recompile a system comes from<br>reading a data base called the <em>makefile</em>.<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Makefile-Contents" accesskey="1">Makefile Contents</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">What makefiles contain.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Makefile-Names" accesskey="2">Makefile Names</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to name your makefile.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Include" accesskey="3">Include</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How one makefile can use another makefile.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#MAKEFILES-Variable" accesskey="4">MAKEFILES Variable</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">The environment can specify extra makefiles.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Remaking-Makefiles" accesskey="5">Remaking Makefiles</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How makefiles get remade.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Overriding-Makefiles" accesskey="6">Overriding Makefiles</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to override part of one makefile<br>                                  with another makefile.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Reading-Makefiles" accesskey="7">Reading Makefiles</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How makefiles are parsed.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Secondary-Expansion" accesskey="8">Secondary Expansion</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How and when secondary expansion is performed.<br></td></tr><br></tbody></table><br><br><hr><br><a name="Makefile-Contents"></a><br><div class="header"><br><p><br>Next: <a href="#Makefile-Names" accesskey="n" rel="next">Makefile Names</a>, Previous: <a href="#Makefiles" accesskey="p" rel="prev">Makefiles</a>, Up: <a href="#Makefiles" accesskey="u" rel="up">Makefiles</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="What-Makefiles-Contain"></a><br><h3 class="section">3.1 What Makefiles Contain</h3><br><br><p>Makefiles contain five kinds of things: <em>explicit rules</em>,<br><em>implicit rules</em>, <em>variable definitions</em>, <em>directives</em>,<br>and <em>comments</em>.  Rules, variables, and directives are described at<br>length in later chapters.<br></p><br><ul><br><li> <a name="index-rule_002c-explicit_002c-definition-of"></a><br><a name="index-explicit-rule_002c-definition-of"></a><br>An <em>explicit rule</em> says when and how to remake one or more files,<br>called the rule’s <em>targets</em>.  It lists the other files that the<br>targets depend on, called the <em>prerequisites</em> of the target, and<br>may also give a recipe to use to create or update the targets.<br>See <a href="#Rules">Writing Rules</a>.<br><br></li><li> <a name="index-rule_002c-implicit_002c-definition-of"></a><br><a name="index-implicit-rule_002c-definition-of"></a><br>An <em>implicit rule</em> says when and how to remake a class of files<br>based on their names.  It describes how a target may depend on a file<br>with a name similar to the target and gives a recipe to create or<br>update such a target.  See <a href="#Implicit-Rules">Using Implicit Rules</a>.<br><br></li><li> <a name="index-variable-definition"></a><br>A <em>variable definition</em> is a line that specifies a text string<br>value for a variable that can be substituted into the text later.  The<br>simple makefile example shows a variable definition for <code>objects</code><br>as a list of all object files (see <a href="#Variables-Simplify">Variables<br>Make Makefiles Simpler</a>).<br><br></li><li> <a name="index-directive"></a><br>A <em>directive</em> is an instruction for <code>make</code> to do something<br>special while reading the makefile.  These include:<br><br><ul><br><li> Reading another makefile (see <a href="#Include">Including Other Makefiles</a>).<br><br></li><li> Deciding (based on the values of variables) whether to use or<br>ignore a part of the makefile (see <a href="#Conditionals">Conditional Parts of Makefiles</a>).<br><br></li><li> Defining a variable from a verbatim string containing multiple lines<br>(see <a href="#Multi_002dLine">Defining Multi-Line Variables</a>).<br></li></ul><br><br></li><li> <a name="index-comments_002c-in-makefile"></a><br><a name="index-_0023-_0028comments_0029_002c-in-makefile"></a><br>‘<samp>#</samp>’ in a line of a makefile starts a <em>comment</em>.  It and the<br>rest of the line are ignored, except that a trailing backslash not<br>escaped by another backslash will continue the comment across multiple<br>lines.  A line containing just a comment (with perhaps spaces before<br>it) is effectively blank, and is ignored.  If you want a literal<br><code>#</code>, escape it with a backslash (e.g., <code>#</code>).  Comments may<br>appear on any line in the makefile, although they are treated<br>specially in certain situations.<br><br><p>You cannot use comments within variable references or function calls:<br>any instance of <code>#</code> will be treated literally (rather than as the<br>start of a comment) inside a variable reference or function call.<br></p><br><p>Comments within a recipe are passed to the shell, just as with any<br>other recipe text.  The shell decides how to interpret it: whether or<br>not this is a comment is up to the shell.<br></p><br><p>Within a <code>define</code> directive, comments are not ignored during the<br>definition of the variable, but rather kept intact in the value of the<br>variable.  When the variable is expanded they will either be treated<br>as <code>make</code> comments or as recipe text, depending on the context in<br>which the variable is evaluated.<br></p></li></ul><br><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Splitting-Lines" accesskey="1">Splitting Lines</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Splitting long lines in makefiles<br></td></tr><br></tbody></table><br><br><hr><br><a name="Splitting-Lines"></a><br><div class="header"><br><p><br>Previous: <a href="#Makefile-Contents" accesskey="p" rel="prev">Makefile Contents</a>, Up: <a href="#Makefile-Contents" accesskey="u" rel="up">Makefile Contents</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Splitting-Long-Lines"></a><br><h4 class="subsection">3.1.1 Splitting Long Lines</h4><br><a name="index-splitting-long-lines"></a><br><a name="index-long-lines_002c-splitting"></a><br><a name="index-backslash-_0028_005c_0029_002c-to-quote-newlines"></a><br><br><p>Makefiles use a “line-based” syntax in which the newline character<br>is special and marks the end of a statement.  GNU <code>make</code> has no<br>limit on the length of a statement line, up to the amount of memory in<br>your computer.<br></p><br><p>However, it is difficult to read lines which are too long to display<br>without wrapping or scrolling.  So, you can format your makefiles for<br>readability by adding newlines into the middle of a statement: you do<br>this by escaping the internal newlines with a backslash (<code>\</code>)<br>character.  Where we need to make a distinction we will refer to<br>“physical lines” as a single line ending with a newline (regardless<br>of whether it is escaped) and a “logical line” being a complete<br>statement including all escaped newlines up to the first non-escaped<br>newline.<br></p><br><p>The way in which backslash/newline combinations are handled depends on<br>whether the statement is a recipe line or a non-recipe line.  Handling<br>of backslash/newline in a recipe line is discussed later<br>(see <a href="#Splitting-Recipe-Lines">Splitting Recipe Lines</a>).<br></p><br><p>Outside of recipe lines, backslash/newlines are converted into a<br>single space character.  Once that is done, all whitespace around the<br>backslash/newline is condensed into a single space: this includes all<br>whitespace preceding the backslash, all whitespace at the beginning of<br>the line after the backslash/newline, and any consecutive<br>backslash/newline combinations.<br></p><br><p>If the <code>.POSIX</code> special target is defined then backslash/newline<br>handling is modified slightly to conform to POSIX.2: first, whitespace<br>preceding a backslash is not removed and second, consecutive<br>backslash/newlines are not condensed.<br></p><br><hr><br><a name="Makefile-Names"></a><br><div class="header"><br><p><br>Next: <a href="#Include" accesskey="n" rel="next">Include</a>, Previous: <a href="#Makefile-Contents" accesskey="p" rel="prev">Makefile Contents</a>, Up: <a href="#Makefiles" accesskey="u" rel="up">Makefiles</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="What-Name-to-Give-Your-Makefile"></a><br><h3 class="section">3.2 What Name to Give Your Makefile</h3><br><a name="index-makefile-name"></a><br><a name="index-name-of-makefile"></a><br><a name="index-default-makefile-name"></a><br><a name="index-file-name-of-makefile"></a><br><br><p>By default, when <code>make</code> looks for the makefile, it tries the<br>following names, in order: <samp>GNUmakefile</samp>, <samp>makefile</samp><br>and <samp>Makefile</samp>.<br><a name="index-Makefile"></a><br><a name="index-GNUmakefile"></a><br><a name="index-makefile-1"></a><br></p><br><a name="index-README"></a><br><p>Normally you should call your makefile either <samp>makefile</samp> or<br><samp>Makefile</samp>.  (We recommend <samp>Makefile</samp> because it appears<br>prominently near the beginning of a directory listing, right near other<br>important files such as <samp>README</samp>.)  The first name checked,<br><samp>GNUmakefile</samp>, is not recommended for most makefiles.  You should<br>use this name if you have a makefile that is specific to GNU<br><code>make</code>, and will not be understood by other versions of<br><code>make</code>.  Other <code>make</code> programs look for <samp>makefile</samp> and<br><samp>Makefile</samp>, but not <samp>GNUmakefile</samp>.<br></p><br><p>If <code>make</code> finds none of these names, it does not use any makefile.<br>Then you must specify a goal with a command argument, and <code>make</code><br>will attempt to figure out how to remake it using only its built-in<br>implicit rules.  See <a href="#Implicit-Rules">Using Implicit Rules</a>.<br></p><br><a name="index-_002df"></a><br><a name="index-_002d_002dfile"></a><br><a name="index-_002d_002dmakefile"></a><br><p>If you want to use a nonstandard name for your makefile, you can specify<br>the makefile name with the ‘<samp>-f</samp>’ or ‘<samp>–file</samp>’ option.  The<br>arguments ‘<samp><span class="nolinebreak">-f</span>&nbsp;<var>name</var></samp>’<!-- /@w --> or ‘<samp><span class="nolinebreak">–file=</span><var>name</var></samp>’<!-- /@w --> tell<br><code>make</code> to read the file <var>name</var> as the makefile.  If you use<br>more than one ‘<samp>-f</samp>’ or ‘<samp>–file</samp>’ option, you can specify several<br>makefiles.  All the makefiles are effectively concatenated in the order<br>specified.  The default makefile names <samp>GNUmakefile</samp>,<br><samp>makefile</samp> and <samp>Makefile</samp> are not checked automatically if you<br>specify ‘<samp>-f</samp>’ or ‘<samp>–file</samp>’.<br><a name="index-specifying-makefile-name"></a><br><a name="index-makefile-name_002c-how-to-specify"></a><br><a name="index-name-of-makefile_002c-how-to-specify"></a><br><a name="index-file-name-of-makefile_002c-how-to-specify"></a><br></p><br><hr><br><a name="Include"></a><br><div class="header"><br><p><br>Next: <a href="#MAKEFILES-Variable" accesskey="n" rel="next">MAKEFILES Variable</a>, Previous: <a href="#Makefile-Names" accesskey="p" rel="prev">Makefile Names</a>, Up: <a href="#Makefiles" accesskey="u" rel="up">Makefiles</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Including-Other-Makefiles"></a><br><h3 class="section">3.3 Including Other Makefiles</h3><br><a name="index-including-other-makefiles"></a><br><a name="index-makefile_002c-including"></a><br><br><a name="index-include"></a><br><p>The <code>include</code> directive tells <code>make</code> to suspend reading the<br>current makefile and read one or more other makefiles before continuing.<br>The directive is a line in the makefile that looks like this:<br></p><br><div class="example"><br><pre class="example">include <var>filenames</var>…<br></pre></div><br><br><p><var>filenames</var> can contain shell file name patterns.  If<br><var>filenames</var> is empty, nothing is included and no error is printed.<br><a name="index-shell-file-name-pattern-_0028in-include_0029"></a><br><a name="index-shell-wildcards-_0028in-include_0029"></a><br><a name="index-wildcard_002c-in-include"></a><br></p><br><p>Extra spaces are allowed and ignored at the beginning of the line, but<br>the first character must not be a tab (or the value of<br><code>.RECIPEPREFIX</code>)—if the line begins with a tab, it will be<br>considered a recipe line.  Whitespace is required between<br><code>include</code> and the file names, and between file names; extra<br>whitespace is ignored there and at the end of the directive.  A<br>comment starting with ‘<samp>#</samp>’ is allowed at the end of the line.  If<br>the file names contain any variable or function references, they are<br>expanded.  See <a href="#Using-Variables">How to Use Variables</a>.<br></p><br><p>For example, if you have three <samp>.mk</samp> files, <samp>a.mk</samp>,<br><samp>b.mk</samp>, and <samp>c.mk</samp>, and <code>$(bar)</code> expands to<br><code>bish bash</code>, then the following expression<br></p><br><div class="example"><br><pre class="example">include foo .mk $(bar)<br></pre></div><br><br><p>is equivalent to<br></p><br><div class="example"><br><pre class="example">include foo a.mk b.mk c.mk bish bash<br></pre></div><br><br><p>When <code>make</code> processes an <code>include</code> directive, it suspends<br>reading of the containing makefile and reads from each listed file in<br>turn.  When that is finished, <code>make</code> resumes reading the<br>makefile in which the directive appears.<br></p><br><p>One occasion for using <code>include</code> directives is when several programs,<br>handled by individual makefiles in various directories, need to use a<br>common set of variable definitions<br>(see <a href="#Setting">Setting Variables</a>) or pattern rules<br>(see <a href="#Pattern-Rules">Defining and Redefining Pattern Rules</a>).<br></p><br><p>Another such occasion is when you want to generate prerequisites from<br>source files automatically; the prerequisites can be put in a file that<br>is included by the main makefile.  This practice is generally cleaner<br>than that of somehow appending the prerequisites to the end of the main<br>makefile as has been traditionally done with other versions of<br><code>make</code>.  See <a href="#Automatic-Prerequisites">Automatic Prerequisites</a>.<br><a name="index-prerequisites_002c-automatic-generation"></a><br><a name="index-automatic-generation-of-prerequisites"></a><br><a name="index-generating-prerequisites-automatically"></a><br></p><br><a name="index-_002dI"></a><br><a name="index-_002d_002dinclude_002ddir"></a><br><a name="index-included-makefiles_002c-default-directories"></a><br><a name="index-default-directories-for-included-makefiles"></a><br><a name="index-_002fusr_002fgnu_002finclude"></a><br><a name="index-_002fusr_002flocal_002finclude"></a><br><a name="index-_002fusr_002finclude"></a><br><p>If the specified name does not start with a slash, and the file is not<br>found in the current directory, several other directories are searched.<br>First, any directories you have specified with the ‘<samp>-I</samp>’ or<br>‘<samp>–include-dir</samp>’ option are searched<br>(see <a href="#Options-Summary">Summary of Options</a>).<br>Then the following directories (if they exist)<br>are searched, in this order:<br><samp><var>prefix</var>/include</samp> (normally <samp>/usr/local/include</samp><br><a name="DOCF1" href="#FOOT1"><sup>1</sup></a>)<br><samp>/usr/gnu/include</samp>,<br><samp>/usr/local/include</samp>, <samp>/usr/include</samp>.<br></p><br><p>If an included makefile cannot be found in any of these directories, a<br>warning message is generated, but it is not an immediately fatal error;<br>processing of the makefile containing the <code>include</code> continues.<br>Once it has finished reading makefiles, <code>make</code> will try to remake<br>any that are out of date or don’t exist.<br>See <a href="#Remaking-Makefiles">How Makefiles Are Remade</a>.<br>Only after it has tried to find a way to remake a makefile and failed,<br>will <code>make</code> diagnose the missing makefile as a fatal error.<br></p><br><p>If you want <code>make</code> to simply ignore a makefile which does not exist<br>or cannot be remade, with no error message, use the <code><span class="nolinebreak">-include</span></code><!-- /@w --><br>directive instead of <code>include</code>, like this:<br></p><br><div class="example"><br><pre class="example">-include <var>filenames</var>…<br></pre></div><br><br><p>This acts like <code>include</code> in every way except that there is no<br>error (not even a warning) if any of the <var>filenames</var> (or any<br>prerequisites of any of the <var>filenames</var>) do not exist or cannot be<br>remade.<br></p><br><p>For compatibility with some other <code>make</code> implementations,<br><code>sinclude</code> is another name for <code><span class="nolinebreak">-include</span></code><!-- /@w -->.<br></p><br><hr><br><a name="MAKEFILES-Variable"></a><br><div class="header"><br><p><br>Next: <a href="#Remaking-Makefiles" accesskey="n" rel="next">Remaking Makefiles</a>, Previous: <a href="#Include" accesskey="p" rel="prev">Include</a>, Up: <a href="#Makefiles" accesskey="u" rel="up">Makefiles</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="The-Variable-MAKEFILES"></a><br><h3 class="section">3.4 The Variable <code>MAKEFILES</code></h3><br><a name="index-makefile_002c-and-MAKEFILES-variable"></a><br><a name="index-including-_0028MAKEFILES-variable_0029"></a><br><br><a name="index-MAKEFILES"></a><br><p>If the environment variable <code>MAKEFILES</code> is defined, <code>make</code><br>considers its value as a list of names (separated by whitespace) of<br>additional makefiles to be read before the others.  This works much<br>like the <code>include</code> directive: various directories are searched<br>for those files (see <a href="#Include">Including Other Makefiles</a>).  In<br>addition, the default goal is never taken from one of these makefiles<br>(or any makefile included by them) and it is not an error if the files<br>listed in <code>MAKEFILES</code> are not found.<br></p><br><a name="index-recursion_002c-and-MAKEFILES-variable"></a><br><p>The main use of <code>MAKEFILES</code> is in communication between recursive<br>invocations of <code>make</code> (see <a href="#Recursion">Recursive Use of<br><code>make</code></a>).  It usually is not desirable to set the environment<br>variable before a top-level invocation of <code>make</code>, because it is<br>usually better not to mess with a makefile from outside.  However, if<br>you are running <code>make</code> without a specific makefile, a makefile in<br><code>MAKEFILES</code> can do useful things to help the built-in implicit<br>rules work better, such as defining search paths (see <a href="#Directory-Search">Directory Search</a>).<br></p><br><p>Some users are tempted to set <code>MAKEFILES</code> in the environment<br>automatically on login, and program makefiles to expect this to be done.<br>This is a very bad idea, because such makefiles will fail to work if run by<br>anyone else.  It is much better to write explicit <code>include</code> directives<br>in the makefiles.  See <a href="#Include">Including Other Makefiles</a>.<br></p><br><hr><br><a name="Remaking-Makefiles"></a><br><div class="header"><br><p><br>Next: <a href="#Overriding-Makefiles" accesskey="n" rel="next">Overriding Makefiles</a>, Previous: <a href="#MAKEFILES-Variable" accesskey="p" rel="prev">MAKEFILES Variable</a>, Up: <a href="#Makefiles" accesskey="u" rel="up">Makefiles</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="How-Makefiles-Are-Remade"></a><br><h3 class="section">3.5 How Makefiles Are Remade</h3><br><a name="index-updating-makefiles"></a><br><a name="index-remaking-makefiles"></a><br><a name="index-makefile_002c-remaking-of"></a><br><p>Sometimes makefiles can be remade from other files, such as RCS or SCCS<br>files.  If a makefile can be remade from other files, you probably want<br><code>make</code> to get an up-to-date version of the makefile to read in.<br></p><br><p>To this end, after reading in all makefiles, <code>make</code> will consider<br>each as a goal target and attempt to update it.  If a makefile has a<br>rule which says how to update it (found either in that very makefile or<br>in another one) or if an implicit rule applies to it (see <a href="#Implicit-Rules">Using Implicit Rules</a>), it will be updated if necessary.  After<br>all makefiles have been checked, if any have actually been changed,<br><code>make</code> starts with a clean slate and reads all the makefiles over<br>again.  (It will also attempt to update each of them over again, but<br>normally this will not change them again, since they are already up to<br>date.)<br></p><br><p>If you know that one or more of your makefiles cannot be remade and<br>you want to keep <code>make</code> from performing an implicit rule search<br>on them, perhaps for efficiency reasons, you can use any normal method<br>of preventing implicit rule look-up to do so.  For example, you can<br>write an explicit rule with the makefile as the target, and an empty<br>recipe (see <a href="#Empty-Recipes">Using Empty Recipes</a>).<br></p><br><p>If the makefiles specify a double-colon rule to remake a file with<br>a recipe but no prerequisites, that file will always be remade<br>(see <a href="#Double_002dColon">Double-Colon</a>).  In the case of makefiles, a makefile that has a<br>double-colon rule with a recipe but no prerequisites will be remade every<br>time <code>make</code> is run, and then again after <code>make</code> starts over<br>and reads the makefiles in again.  This would cause an infinite loop:<br><code>make</code> would constantly remake the makefile, and never do anything<br>else.  So, to avoid this, <code>make</code> will <strong>not</strong> attempt to<br>remake makefiles which are specified as targets of a double-colon rule<br>with a recipe but no prerequisites.<br></p><br><p>If you do not specify any makefiles to be read with ‘<samp>-f</samp>’ or<br>‘<samp>–file</samp>’ options, <code>make</code> will try the default makefile names;<br>see <a href="#Makefile-Names">What Name to Give Your Makefile</a>.  Unlike<br>makefiles explicitly requested with ‘<samp>-f</samp>’ or ‘<samp>–file</samp>’ options,<br><code>make</code> is not certain that these makefiles should exist.  However,<br>if a default makefile does not exist but can be created by running<br><code>make</code> rules, you probably want the rules to be run so that the<br>makefile can be used.<br></p><br><p>Therefore, if none of the default makefiles exists, <code>make</code> will try<br>to make each of them in the same order in which they are searched for<br>(see <a href="#Makefile-Names">What Name to Give Your Makefile</a>)<br>until it succeeds in making one, or it runs out of names to try.  Note<br>that it is not an error if <code>make</code> cannot find or make any makefile;<br>a makefile is not always necessary.<br></p><br><p>When you use the ‘<samp>-t</samp>’ or ‘<samp>–touch</samp>’ option<br>(see <a href="#Instead-of-Execution">Instead of Executing Recipes</a>),<br>you would not want to use an out-of-date makefile to decide which<br>targets to touch.  So the ‘<samp>-t</samp>’ option has no effect on updating<br>makefiles; they are really updated even if ‘<samp>-t</samp>’ is specified.<br>Likewise, ‘<samp>-q</samp>’ (or ‘<samp>–question</samp>’) and ‘<samp>-n</samp>’ (or<br>‘<samp>–just-print</samp>’) do not prevent updating of makefiles, because an<br>out-of-date makefile would result in the wrong output for other targets.<br>Thus, ‘<samp>make -f mfile -n foo</samp>’ will update <samp>mfile</samp>, read it in,<br>and then print the recipe to update <samp>foo</samp> and its prerequisites<br>without running it.  The recipe printed for <samp>foo</samp> will be the one<br>specified in the updated contents of <samp>mfile</samp>.<br></p><br><p>However, on occasion you might actually wish to prevent updating of even<br>the makefiles.  You can do this by specifying the makefiles as goals in<br>the command line as well as specifying them as makefiles.  When the<br>makefile name is specified explicitly as a goal, the options ‘<samp>-t</samp>’<br>and so on do apply to them.<br></p><br><p>Thus, ‘<samp>make -f mfile -n mfile foo</samp>’ would read the makefile<br><samp>mfile</samp>, print the recipe needed to update it without actually<br>running it, and then print the recipe needed to update <samp>foo</samp><br>without running that.  The recipe for <samp>foo</samp> will be the one<br>specified by the existing contents of <samp>mfile</samp>.<br></p><br><hr><br><a name="Overriding-Makefiles"></a><br><div class="header"><br><p><br>Next: <a href="#Reading-Makefiles" accesskey="n" rel="next">Reading Makefiles</a>, Previous: <a href="#Remaking-Makefiles" accesskey="p" rel="prev">Remaking Makefiles</a>, Up: <a href="#Makefiles" accesskey="u" rel="up">Makefiles</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Overriding-Part-of-Another-Makefile"></a><br><h3 class="section">3.6 Overriding Part of Another Makefile</h3><br><br><a name="index-overriding-makefiles"></a><br><a name="index-makefile_002c-overriding"></a><br><p>Sometimes it is useful to have a makefile that is mostly just like<br>another makefile.  You can often use the ‘<samp>include</samp>’ directive to<br>include one in the other, and add more targets or variable definitions.<br>However, it is invalid for two makefiles to give different recipes for<br>the same target.  But there is another way.<br></p><br><a name="index-match_002danything-rule_002c-used-to-override"></a><br><p>In the containing makefile (the one that wants to include the other),<br>you can use a match-anything pattern rule to say that to remake any<br>target that cannot be made from the information in the containing<br>makefile, <code>make</code> should look in another makefile.<br>See <a href="#Pattern-Rules">Pattern Rules</a>, for more information on pattern rules.<br></p><br><p>For example, if you have a makefile called <samp>Makefile</samp> that says how<br>to make the target ‘<samp>foo</samp>’ (and other targets), you can write a<br>makefile called <samp>GNUmakefile</samp> that contains:<br></p><br><div class="example"><br><pre class="example">foo:<br>        frobnicate &gt; foo<br><br>%: force<br>        @$(MAKE) -f Makefile $@<br>force: ;<br></pre></div><br><br><p>If you say ‘<samp>make foo</samp>’, <code>make</code> will find <samp>GNUmakefile</samp>,<br>read it, and see that to make <samp>foo</samp>, it needs to run the recipe<br>‘<samp>frobnicate &gt; foo</samp>’.  If you say ‘<samp>make bar</samp>’, <code>make</code> will<br>find no way to make <samp>bar</samp> in <samp>GNUmakefile</samp>, so it will use the<br>recipe from the pattern rule: ‘<samp>make -f Makefile bar</samp>’.  If<br><samp>Makefile</samp> provides a rule for updating <samp>bar</samp>, <code>make</code><br>will apply the rule.  And likewise for any other target that<br><samp>GNUmakefile</samp> does not say how to make.<br></p><br><p>The way this works is that the pattern rule has a pattern of just<br>‘<samp>%</samp>’, so it matches any target whatever.  The rule specifies a<br>prerequisite <samp>force</samp>, to guarantee that the recipe will be run even<br>if the target file already exists.  We give the <samp>force</samp> target an<br>empty recipe to prevent <code>make</code> from searching for an implicit rule to<br>build it—otherwise it would apply the same match-anything rule to<br><samp>force</samp> itself and create a prerequisite loop!<br></p><br><hr><br><a name="Reading-Makefiles"></a><br><div class="header"><br><p><br>Next: <a href="#Secondary-Expansion" accesskey="n" rel="next">Secondary Expansion</a>, Previous: <a href="#Overriding-Makefiles" accesskey="p" rel="prev">Overriding Makefiles</a>, Up: <a href="#Makefiles" accesskey="u" rel="up">Makefiles</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="How-make-Reads-a-Makefile"></a><br><h3 class="section">3.7 How <code>make</code> Reads a Makefile</h3><br><a name="index-reading-makefiles"></a><br><a name="index-makefile_002c-parsing"></a><br><br><p>GNU <code>make</code> does its work in two distinct phases.  During the first<br>phase it reads all the makefiles, included makefiles, etc. and<br>internalizes all the variables and their values, implicit and explicit<br>rules, and constructs a dependency graph of all the targets and their<br>prerequisites.  During the second phase, <code>make</code> uses these internal<br>structures to determine what targets will need to be rebuilt and to<br>invoke the rules necessary to do so.<br></p><br><p>It’s important to understand this two-phase approach because it has a<br>direct impact on how variable and function expansion happens; this is<br>often a source of some confusion when writing makefiles.  Here we will<br>present a summary of the phases in which expansion happens for different<br>constructs within the makefile.  We say that expansion is<br><em>immediate</em> if it happens during the first phase: in this case<br><code>make</code> will expand any variables or functions in that section of a<br>construct as the makefile is parsed.  We say that expansion is<br><em>deferred</em> if expansion is not performed immediately.  Expansion of<br>a deferred construct is not performed until either the construct appears<br>later in an immediate context, or until the second phase.<br></p><br><p>You may not be familiar with some of these constructs yet.  You can<br>reference this section as you become familiar with them, in later<br>chapters.<br></p><br><a name="Variable-Assignment"></a><br><h4 class="subheading">Variable Assignment</h4><br><a name="index-_002b_003d_002c-expansion"></a><br><a name="index-_003d_002c-expansion"></a><br><a name="index-_003f_003d_002c-expansion"></a><br><a name="index-_002b_003d_002c-expansion-1"></a><br><a name="index-_0021_003d_002c-expansion"></a><br><a name="index-define_002c-expansion"></a><br><br><p>Variable definitions are parsed as follows:<br></p><br><div class="example"><br><pre class="example"><var>immediate</var> = <var>deferred</var><br><var>immediate</var> ?= <var>deferred</var><br><var>immediate</var> := <var>immediate</var><br><var>immediate</var> ::= <var>immediate</var><br><var>immediate</var> += <var>deferred</var> or <var>immediate</var><br><var>immediate</var> != <var>immediate</var><br><br>define <var>immediate</var><br>  <var>deferred</var><br>endef<br><br>define <var>immediate</var> =<br>  <var>deferred</var><br>endef<br><br>define <var>immediate</var> ?=<br>  <var>deferred</var><br>endef<br><br>define <var>immediate</var> :=<br>  <var>immediate</var><br>endef<br><br>define <var>immediate</var> ::=<br>  <var>immediate</var><br>endef<br><br>define <var>immediate</var> +=<br>  <var>deferred</var> or <var>immediate</var><br>endef<br><br>define <var>immediate</var> !=<br>  <var>immediate</var><br>endef<br></pre></div><br><br><p>For the append operator, ‘<samp>+=</samp>’, the right-hand side is considered<br>immediate if the variable was previously set as a simple variable<br>(‘<samp>:=</samp>’ or ‘<samp>::=</samp>’), and deferred otherwise.<br></p><br><p>For the shell assignment operator, ‘<samp>!=</samp>’, the right-hand side is<br>evaluated immediately and handed to the shell.  The result is stored in the<br>variable named on the left, and that variable becomes a simple variable<br>(and will thus be re-evaluated on each reference).<br></p><br><a name="Conditional-Directives"></a><br><h4 class="subheading">Conditional Directives</h4><br><a name="index-ifdef_002c-expansion"></a><br><a name="index-ifeq_002c-expansion"></a><br><a name="index-ifndef_002c-expansion"></a><br><a name="index-ifneq_002c-expansion"></a><br><br><p>Conditional directives are parsed immediately.  This means, for<br>example, that automatic variables cannot be used in conditional<br>directives, as automatic variables are not set until the recipe for<br>that rule is invoked.  If you need to use automatic variables in a<br>conditional directive you <em>must</em> move the condition into the<br>recipe and use shell conditional syntax instead.<br></p><br><a name="Rule-Definition"></a><br><h4 class="subheading">Rule Definition</h4><br><a name="index-target_002c-expansion"></a><br><a name="index-prerequisite_002c-expansion"></a><br><a name="index-implicit-rule_002c-expansion"></a><br><a name="index-pattern-rule_002c-expansion"></a><br><a name="index-explicit-rule_002c-expansion"></a><br><br><p>A rule is always expanded the same way, regardless of the form:<br></p><br><div class="example"><br><pre class="example"><var>immediate</var> : <var>immediate</var> ; <var>deferred</var><br>        <var>deferred</var><br></pre></div><br><br><p>That is, the target and prerequisite sections are expanded immediately,<br>and the recipe used to construct the target is always deferred.  This<br>general rule is true for explicit rules, pattern rules, suffix rules,<br>static pattern rules, and simple prerequisite definitions.<br></p><br><hr><br><a name="Secondary-Expansion"></a><br><div class="header"><br><p><br>Previous: <a href="#Reading-Makefiles" accesskey="p" rel="prev">Reading Makefiles</a>, Up: <a href="#Makefiles" accesskey="u" rel="up">Makefiles</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Secondary-Expansion-1"></a><br><h3 class="section">3.8 Secondary Expansion</h3><br><a name="index-secondary-expansion"></a><br><a name="index-expansion_002c-secondary"></a><br><br><a name="index-_002eSECONDEXPANSION"></a><br><p>In the previous section we learned that GNU <code>make</code> works in two<br>distinct phases: a read-in phase and a target-update phase<br>(see <a href="#Reading-Makefiles">How <code>make</code> Reads a Makefile</a>).  GNU<br>make also has the ability to enable a <em>second expansion</em> of the<br>prerequisites (only) for some or all targets defined in the makefile.<br>In order for this second expansion to occur, the special target<br><code>.SECONDEXPANSION</code> must be defined before the first prerequisite<br>list that makes use of this feature.<br></p><br><p>If that special target is defined then in between the two phases<br>mentioned above, right at the end of the read-in phase, all the<br>prerequisites of the targets defined after the special target are<br>expanded a <em>second time</em>.  In most circumstances this secondary<br>expansion will have no effect, since all variable and function<br>references will have been expanded during the initial parsing of the<br>makefiles.  In order to take advantage of the secondary expansion<br>phase of the parser, then, it’s necessary to <em>escape</em> the<br>variable or function reference in the makefile.  In this case the<br>first expansion merely un-escapes the reference but doesn’t expand it,<br>and expansion is left to the secondary expansion phase.  For example,<br>consider this makefile:<br></p><br><div class="example"><br><pre class="example">.SECONDEXPANSION:<br>ONEVAR = onefile<br>TWOVAR = twofile<br>myfile: $(ONEVAR) $$(TWOVAR)<br></pre></div><br><br><p>After the first expansion phase the prerequisites list of the<br><samp>myfile</samp> target will be <code>onefile</code> and <code>$(TWOVAR)</code>; the<br>first (unescaped) variable reference to <var>ONEVAR</var> is expanded,<br>while the second (escaped) variable reference is simply unescaped,<br>without being recognized as a variable reference.  Now during the<br>secondary expansion the first word is expanded again but since it<br>contains no variable or function references it remains the value<br><samp>onefile</samp>, while the second word is now a normal reference to the<br>variable <var>TWOVAR</var>, which is expanded to the value <samp>twofile</samp>.<br>The final result is that there are two prerequisites, <samp>onefile</samp><br>and <samp>twofile</samp>.<br></p><br><p>Obviously, this is not a very interesting case since the same result<br>could more easily have been achieved simply by having both variables<br>appear, unescaped, in the prerequisites list.  One difference becomes<br>apparent if the variables are reset; consider this example:<br></p><br><div class="example"><br><pre class="example">.SECONDEXPANSION:<br>AVAR = top<br>onefile: $(AVAR)<br>twofile: $$(AVAR)<br>AVAR = bottom<br></pre></div><br><br><p>Here the prerequisite of <samp>onefile</samp> will be expanded immediately,<br>and resolve to the value <samp>top</samp>, while the prerequisite of<br><samp>twofile</samp> will not be full expanded until the secondary expansion<br>and yield a value of <samp>bottom</samp>.<br></p><br><p>This is marginally more exciting, but the true power of this feature<br>only becomes apparent when you discover that secondary expansions<br>always take place within the scope of the automatic variables for that<br>target.  This means that you can use variables such as <code>$@</code>,<br><code>$<em></em></code>, etc. during the second expansion and they will have their<br>expected values, just as in the recipe.  All you have to do is defer<br>the expansion by escaping the <code>$</code>.  Also, secondary expansion<br>occurs for both explicit and implicit (pattern) rules.  Knowing this,<br>the possible uses for this feature increase dramatically.  For<br>example:<br></p><br><div class="example"><br><pre class="example">.SECONDEXPANSION:<br>main_OBJS := main.o try.o test.o<br>lib_OBJS := lib.o api.o<br><br>main lib: $$($$@_OBJS)<br></pre></div><br><br><p>Here, after the initial expansion the prerequisites of both the<br><samp>main</samp> and <samp>lib</samp> targets will be <code>$($@_OBJS)</code>.  During<br>the secondary expansion, the <code>$@</code> variable is set to the name of<br>the target and so the expansion for the <samp>main</samp> target will yield<br><code>$(main_OBJS)</code>, or <code>main.o try.o test.o</code>, while the<br>secondary expansion for the <samp>lib</samp> target will yield<br><code>$(lib_OBJS)</code>, or <code>lib.o api.o</code>.<br></p><br><p>You can also mix in functions here, as long as they are properly escaped:<br></p><br><div class="example"><br><pre class="example">main_SRCS := main.c try.c test.c<br>lib_SRCS := lib.c api.c<br><br>.SECONDEXPANSION:<br>main lib: $$(patsubst %.c,%.o,$$($$@_SRCS))<br></pre></div><br><br><p>This version allows users to specify source files rather than object<br>files, but gives the same resulting prerequisites list as the previous<br>example.<br></p><br><p>Evaluation of automatic variables during the secondary expansion<br>phase, especially of the target name variable <code>$$@</code>, behaves<br>similarly to evaluation within recipes.  However, there are some<br>subtle differences and “corner cases” which come into play for the<br>different types of rule definitions that <code>make</code> understands.  The<br>subtleties of using the different automatic variables are described<br>below.<br></p><br><a name="Secondary-Expansion-of-Explicit-Rules"></a><br><h4 class="subheading">Secondary Expansion of Explicit Rules</h4><br><a name="index-secondary-expansion-and-explicit-rules"></a><br><a name="index-explicit-rules_002c-secondary-expansion-of"></a><br><br><p>During the secondary expansion of explicit rules, <code>$$@</code> and<br><code>$$%</code> evaluate, respectively, to the file name of the target and,<br>when the target is an archive member, the target member name.  The<br><code>$$&lt;</code> variable evaluates to the first prerequisite in the first<br>rule for this target.  <code>$$^</code> and <code>$$+</code> evaluate to the list<br>of all prerequisites of rules <em>that have already appeared</em> for<br>the same target (<code>$$+</code> with repetitions and <code>$$^</code><br>without).  The following example will help illustrate these behaviors:<br></p><br><div class="example"><br><pre class="example">.SECONDEXPANSION:<br><br>foo: foo.1 bar.1 $$&lt; $$^ $$+    # line #1<br><br>foo: foo.2 bar.2 $$&lt; $$^ $$+    # line #2<br><br>foo: foo.3 bar.3 $$&lt; $$^ $$+    # line #3<br></pre></div><br><br><p>In the first prerequisite list, all three variables (<code>$$&lt;</code>,<br><code>$$^</code>, and <code>$$+</code>) expand to the empty string.  In the<br>second, they will have values <code>foo.1</code>, <code>foo.1 bar.1</code>, and<br><code>foo.1 bar.1</code> respectively.  In the third they will have values<br><code>foo.1</code>, <code>foo.1 bar.1 foo.2 bar.2</code>, and <code>foo.1 bar.1<br>foo.2 bar.2 foo.1 foo.1 bar.1 foo.1 bar.1</code> respectively.<br></p><br><p>Rules undergo secondary expansion in makefile order, except that<br>the rule with the recipe is always evaluated last.<br></p><br><p>The variables <code>$$?</code> and <code>$$</code> are not available and expand<br>to the empty string.<br></p><br><a name="Secondary-Expansion-of-Static-Pattern-Rules"></a><br><h4 class="subheading">Secondary Expansion of Static Pattern Rules</h4><br><a name="index-secondary-expansion-and-static-pattern-rules"></a><br><a name="index-static-pattern-rules_002c-secondary-expansion-of"></a><br><br><p>Rules for secondary expansion of static pattern rules are identical to<br>those for explicit rules, above, with one exception: for static<br>pattern rules the <code>$$<em></em></code> variable is set to the pattern stem.  As<br>with explicit rules, <code>$$?</code> is not available and expands to the<br>empty string.<br></p><br><a name="Secondary-Expansion-of-Implicit-Rules"></a><br><h4 class="subheading">Secondary Expansion of Implicit Rules</h4><br><a name="index-secondary-expansion-and-implicit-rules"></a><br><a name="index-implicit-rules_002c-secondary-expansion-of"></a><br><br><p>As <code>make</code> searches for an implicit rule, it substitutes the stem<br>and then performs secondary expansion for every rule with a matching<br>target pattern.  The value of the automatic variables is derived in<br>the same fashion as for static pattern rules.  As an example:<br></p><br><div class="example"><br><pre class="example">.SECONDEXPANSION:<br><br>foo: bar<br><br>foo foz: fo%: bo%<br><br>%oo: $$&lt; $$^ $$+ $$<br></pre></div><br><br><p>When the implicit rule is tried for target <samp>foo</samp>, <code>$$&lt;</code><br>expands to <samp>bar</samp>, <code>$$^</code> expands to <samp>bar boo</samp>,<br><code>$$+</code> also expands to <samp>bar boo</samp>, and <code>$$<em></em></code> expands to<br><samp>f</samp>.<br></p><br><p>Note that the directory prefix (D), as described in <a href="#Implicit-Rule-Search">Implicit Rule Search Algorithm</a>, is appended (after<br>expansion) to all the patterns in the prerequisites list.  As an<br>example:<br></p><br><div class="example"><br><pre class="example">.SECONDEXPANSION:<br><br>/tmp/foo.o:<br><br>%.o: $$(addsuffix /%.c,foo bar) foo.h<br>        @echo $^<br></pre></div><br><br><p>The prerequisite list printed, after the secondary expansion and<br>directory prefix reconstruction, will be <samp>/tmp/foo/foo.c<br>/tmp/bar/foo.c foo.h</samp>.  If you are not interested in this<br>reconstruction, you can use <code>$$</code> instead of <code>%</code> in the<br>prerequisites list.<br></p><br><hr><br><a name="Rules"></a><br><div class="header"><br><p><br>Next: <a href="#Recipes" accesskey="n" rel="next">Recipes</a>, Previous: <a href="#Makefiles" accesskey="p" rel="prev">Makefiles</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Writing-Rules"></a><br><h2 class="chapter">4 Writing Rules</h2><br><a name="index-writing-rules"></a><br><a name="index-rule_002c-how-to-write"></a><br><a name="index-target"></a><br><a name="index-prerequisite"></a><br><br><p>A <em>rule</em> appears in the makefile and says when and how to remake<br>certain files, called the rule’s <em>targets</em> (most often only one per rule).<br>It lists the other files that are the <em>prerequisites</em> of the target, and<br>the <em>recipe</em> to use to create or update the target.<br></p><br><a name="index-default-goal-1"></a><br><a name="index-goal_002c-default-1"></a><br><p>The order of rules is not significant, except for determining the<br><em>default goal</em>: the target for <code>make</code> to consider, if you do<br>not otherwise specify one.  The default goal is the target of the first<br>rule in the first makefile.  If the first rule has multiple targets,<br>only the first target is taken as the default.  There are two<br>exceptions: a target starting with a period is not a default unless it<br>contains one or more slashes, ‘<samp>/</samp>’, as well; and, a target that<br>defines a pattern rule has no effect on the default goal.<br>(See <a href="#Pattern-Rules">Defining and Redefining Pattern Rules</a>.)<br></p><br><p>Therefore, we usually write the makefile so that the first rule is the<br>one for compiling the entire program or all the programs described by<br>the makefile (often with a target called ‘<samp>all</samp>’).<br>See <a href="#Goals">Arguments to Specify the Goals</a>.<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Rule-Example" accesskey="1">Rule Example</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">An example explained.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Rule-Syntax" accesskey="2">Rule Syntax</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">General syntax explained.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Prerequisite-Types" accesskey="3">Prerequisite Types</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">There are two types of prerequisites.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Wildcards" accesskey="4">Wildcards</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Using wildcard characters such as ‘<em>’.<br></em></td></tr><br><tr><td align="left" valign="top">• <a href="#Directory-Search" accesskey="5">Directory Search</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Searching other directories for source files.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Phony-Targets" accesskey="6">Phony Targets</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Using a target that is not a real file’s name.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Force-Targets" accesskey="7">Force Targets</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">You can use a target without a recipe<br>                                  or prerequisites to mark other targets<br>                                  as phony.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Empty-Targets" accesskey="8">Empty Targets</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">When only the date matters and the<br>                                  files are empty.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Special-Targets" accesskey="9">Special Targets</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Targets with special built-in meanings.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Multiple-Targets">Multiple Targets</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">When to make use of several targets in a rule.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Multiple-Rules">Multiple Rules</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to use several rules with the same target.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Static-Pattern">Static Pattern</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Static pattern rules apply to multiple targets<br>                                  and can vary the prerequisites according to<br>                                  the target name.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Double_002dColon">Double-Colon</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to use a special kind of rule to allow<br>                                  several independent rules for one target.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Automatic-Prerequisites">Automatic Prerequisites</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to automatically generate rules giving<br>                                  prerequisites from source files themselves.<br></td></tr><br></tbody></table><br><br><hr><br><a name="Rule-Example"></a><br><div class="header"><br><p><br>Next: <a href="#Rule-Syntax" accesskey="n" rel="next">Rule Syntax</a>, Previous: <a href="#Rules" accesskey="p" rel="prev">Rules</a>, Up: <a href="#Rules" accesskey="u" rel="up">Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Rule-Example-1"></a><br><h3 class="section">4.1 Rule Example</h3><br><br><p>Here is an example of a rule:<br></p><br><div class="example"><br><pre class="example">foo.o : foo.c defs.h       # module for twiddling the frobs<br>        cc -c -g foo.c<br></pre></div><br><br><p>Its target is <samp>foo.o</samp> and its prerequisites are <samp>foo.c</samp> and<br><samp>defs.h</samp>.  It has one command in the recipe: ‘<samp>cc -c -g foo.c</samp>’.<br>The recipe starts with a tab to identify it as a recipe.<br></p><br><p>This rule says two things:<br></p><br><ul><br><li> How to decide whether <samp>foo.o</samp> is out of date: it is out of date<br>if it does not exist, or if either <samp>foo.c</samp> or <samp>defs.h</samp> is<br>more recent than it.<br><br></li><li> How to update the file <samp>foo.o</samp>: by running <code>cc</code> as stated.<br>The recipe does not explicitly mention <samp>defs.h</samp>, but we presume<br>that <samp>foo.c</samp> includes it, and that that is why <samp>defs.h</samp> was<br>added to the prerequisites.<br></li></ul><br><br><hr><br><a name="Rule-Syntax"></a><br><div class="header"><br><p><br>Next: <a href="#Prerequisite-Types" accesskey="n" rel="next">Prerequisite Types</a>, Previous: <a href="#Rule-Example" accesskey="p" rel="prev">Rule Example</a>, Up: <a href="#Rules" accesskey="u" rel="up">Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Rule-Syntax-1"></a><br><h3 class="section">4.2 Rule Syntax</h3><br><br><a name="index-rule-syntax"></a><br><a name="index-syntax-of-rules"></a><br><p>In general, a rule looks like this:<br></p><br><div class="example"><br><pre class="example"><var>targets</var> : <var>prerequisites</var><br>        <var>recipe</var><br>        …<br></pre></div><br><br><p>or like this:<br></p><br><div class="example"><br><pre class="example"><var>targets</var> : <var>prerequisites</var> ; <var>recipe</var><br>        <var>recipe</var><br>        …<br></pre></div><br><br><a name="index-targets"></a><br><a name="index-rule-targets"></a><br><p>The <var>targets</var> are file names, separated by spaces.  Wildcard<br>characters may be used (see <a href="#Wildcards">Using Wildcard Characters<br>in File Names</a>) and a name of the form <samp><var>a</var>(<var>m</var>)</samp><br>represents member <var>m</var> in archive file <var>a</var><br>(see <a href="#Archive-Members">Archive Members as Targets</a>).<br>Usually there is only one<br>target per rule, but occasionally there is a reason to have more<br>(see <a href="#Multiple-Targets">Multiple Targets in a Rule</a>).<br></p><br><a name="index-recipes"></a><br><a name="index-tab-character-_0028in-commands_0029"></a><br><p>The <var>recipe</var> lines start with a tab character (or the first<br>character in the value of the <code>.RECIPEPREFIX</code> variable;<br>see <a href="#Special-Variables">Special Variables</a>).  The first recipe line may appear on the line<br>after the prerequisites, with a tab character, or may appear on the<br>same line, with a semicolon.  Either way, the effect is the same.<br>There are other differences in the syntax of recipes.<br>See <a href="#Recipes">Writing Recipes in Rules</a>.<br></p><br><a name="index-dollar-sign-_0028_0024_0029_002c-in-rules"></a><br><a name="index-_0024_002c-in-rules"></a><br><a name="index-rules_002c-and-_0024"></a><br><p>Because dollar signs are used to start <code>make</code> variable<br>references, if you really want a dollar sign in a target or<br>prerequisite you must write two of them, ‘<samp>$$</samp>’ (see <a href="#Using-Variables">How to Use Variables</a>).  If you have enabled secondary<br>expansion (see <a href="#Secondary-Expansion">Secondary Expansion</a>) and you want a literal dollar<br>sign in the prerequisites list, you must actually write <em>four</em><br>dollar signs (‘<samp>$$$$</samp>’).<br></p><br><p>You may split a long line by inserting a backslash followed by a<br>newline, but this is not required, as <code>make</code> places no limit on<br>the length of a line in a makefile.<br></p><br><p>A rule tells <code>make</code> two things: when the targets are out of date,<br>and how to update them when necessary.<br></p><br><a name="index-prerequisites"></a><br><a name="index-rule-prerequisites"></a><br><p>The criterion for being out of date is specified in terms of the<br><var>prerequisites</var>, which consist of file names separated by spaces.<br>(Wildcards and archive members (see <a href="#Archives">Archives</a>) are allowed here too.)<br>A target is out of date if it does not exist or if it is older than any<br>of the prerequisites (by comparison of last-modification times).  The<br>idea is that the contents of the target file are computed based on<br>information in the prerequisites, so if any of the prerequisites changes,<br>the contents of the existing target file are no longer necessarily<br>valid.<br></p><br><p>How to update is specified by a <var>recipe</var>.  This is one or more<br>lines to be executed by the shell (normally ‘<samp>sh</samp>’), but with some<br>extra features (see <a href="#Recipes">Writing Recipes in Rules</a>).<br></p><br><hr><br><a name="Prerequisite-Types"></a><br><div class="header"><br><p><br>Next: <a href="#Wildcards" accesskey="n" rel="next">Wildcards</a>, Previous: <a href="#Rule-Syntax" accesskey="p" rel="prev">Rule Syntax</a>, Up: <a href="#Rules" accesskey="u" rel="up">Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Types-of-Prerequisites"></a><br><h3 class="section">4.3 Types of Prerequisites</h3><br><a name="index-prerequisite-types"></a><br><a name="index-types-of-prerequisites"></a><br><br><a name="index-prerequisites_002c-normal"></a><br><a name="index-normal-prerequisites"></a><br><a name="index-prerequisites_002c-order_002donly"></a><br><a name="index-order_002donly-prerequisites"></a><br><p>There are actually two different types of prerequisites understood by<br>GNU <code>make</code>: normal prerequisites such as described in the<br>previous section, and <em>order-only</em> prerequisites.  A normal<br>prerequisite makes two statements: first, it imposes an order in which<br>recipes will be invoked: the recipes for all prerequisites of a target<br>will be completed before the recipe for the target is run.  Second, it<br>imposes a dependency relationship: if any prerequisite is newer than<br>the target, then the target is considered out-of-date and must be<br>rebuilt.<br></p><br><p>Normally, this is exactly what you want: if a target’s prerequisite is<br>updated, then the target should also be updated.<br></p><br><p>Occasionally, however, you have a situation where you want to impose a<br>specific ordering on the rules to be invoked <em>without</em> forcing<br>the target to be updated if one of those rules is executed.  In that<br>case, you want to define <em>order-only</em> prerequisites.  Order-only<br>prerequisites can be specified by placing a pipe symbol (<code>|</code>)<br>in the prerequisites list: any prerequisites to the left of the pipe<br>symbol are normal; any prerequisites to the right are order-only:<br></p><br><div class="example"><br><pre class="example"><var>targets</var> : <var>normal-prerequisites</var> | <var>order-only-prerequisites</var><br></pre></div><br><br><p>The normal prerequisites section may of course be empty.  Also, you<br>may still declare multiple lines of prerequisites for the same target:<br>they are appended appropriately (normal prerequisites are appended to<br>the list of normal prerequisites; order-only prerequisites are<br>appended to the list of order-only prerequisites).  Note that if you<br>declare the same file to be both a normal and an order-only<br>prerequisite, the normal prerequisite takes precedence (since they<br>have a strict superset of the behavior of an order-only prerequisite).<br></p><br><p>Consider an example where your targets are to be placed in a separate<br>directory, and that directory might not exist before <code>make</code> is<br>run.  In this situation, you want the directory to be created before<br>any targets are placed into it but, because the timestamps on<br>directories change whenever a file is added, removed, or renamed, we<br>certainly don’t want to rebuild all the targets whenever the<br>directory’s timestamp changes.  One way to manage this is with<br>order-only prerequisites: make the directory an order-only<br>prerequisite on all the targets:<br></p><br><div class="example"><br><pre class="example">OBJDIR := objdir<br>OBJS := $(addprefix $(OBJDIR)/,foo.o bar.o baz.o)<br><br>$(OBJDIR)/%.o : %.c<br>        $(COMPILE.c) $(OUTPUT_OPTION) $&lt;<br><br>all: $(OBJS)<br><br>$(OBJS): | $(OBJDIR)<br><br>$(OBJDIR):<br>        mkdir $(OBJDIR)<br></pre></div><br><br><p>Now the rule to create the <samp>objdir</samp> directory will be run, if<br>needed, before any ‘<samp>.o</samp>’ is built, but no ‘<samp>.o</samp>’ will be built<br>because the <samp>objdir</samp> directory timestamp changed.<br></p><br><hr><br><a name="Wildcards"></a><br><div class="header"><br><p><br>Next: <a href="#Directory-Search" accesskey="n" rel="next">Directory Search</a>, Previous: <a href="#Prerequisite-Types" accesskey="p" rel="prev">Prerequisite Types</a>, Up: <a href="#Rules" accesskey="u" rel="up">Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Using-Wildcard-Characters-in-File-Names"></a><br><h3 class="section">4.4 Using Wildcard Characters in File Names</h3><br><a name="index-wildcard"></a><br><a name="index-file-name-with-wildcards"></a><br><a name="index-globbing-_0028wildcards_0029"></a><br><br><a name="index-_002a-_0028wildcard-character_0029"></a><br><a name="index-_003f-_0028wildcard-character_0029"></a><br><a name="index-_005b_2026_005d-_0028wildcard-characters_0029"></a><br><p>A single file name can specify many files using <em>wildcard characters</em>.<br>The wildcard characters in <code>make</code> are ‘<samp></samp>’, ‘<samp>?</samp>’ and<br>‘<samp>[…]</samp>’, the same as in the Bourne shell.  For example, <samp><em>.c</em></samp><br>specifies a list of all the files (in the working directory) whose names<br>end in ‘<samp>.c</samp>’.<br></p><br><a name="index-_007e-_0028tilde_0029"></a><br><a name="index-tilde-_0028_007e_0029"></a><br><a name="index-home-directory"></a><br><p>The character ‘<samp>~</samp>’ at the beginning of a file name also has special<br>significance.  If alone, or followed by a slash, it represents your home<br>directory.  For example <samp>~/bin</samp> expands to <samp>/home/you/bin</samp>.<br>If the ‘<samp>~</samp>’ is followed by a word, the string represents the home<br>directory of the user named by that word.  For example <samp>~john/bin</samp><br>expands to <samp>/home/john/bin</samp>.  On systems which don’t have a home<br>directory for each user (such as MS-DOS or MS-Windows), this<br>functionality can be simulated by setting the environment variable<br><var>HOME</var>.<br></p><br><p>Wildcard expansion is performed by <code>make</code> automatically in<br>targets and in prerequisites.  In recipes, the shell is responsible<br>for wildcard expansion.  In other contexts, wildcard expansion happens<br>only if you request it explicitly with the <code>wildcard</code> function.<br></p><br><p>The special significance of a wildcard character can be turned off by<br>preceding it with a backslash.  Thus, <samp>foo\bar</samp> would refer to a<br>specific file whose name consists of ‘<samp>foo</samp>’, an asterisk, and<br>‘<samp>bar</samp>’.<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Wildcard-Examples" accesskey="1">Wildcard Examples</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Several examples.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Wildcard-Pitfall" accesskey="2">Wildcard Pitfall</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Problems to avoid.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Wildcard-Function" accesskey="3">Wildcard Function</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to cause wildcard expansion where<br>                                  it does not normally take place.<br></td></tr><br></tbody></table><br><br><hr><br><a name="Wildcard-Examples"></a><br><div class="header"><br><p><br>Next: <a href="#Wildcard-Pitfall" accesskey="n" rel="next">Wildcard Pitfall</a>, Previous: <a href="#Wildcards" accesskey="p" rel="prev">Wildcards</a>, Up: <a href="#Wildcards" accesskey="u" rel="up">Wildcards</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Wildcard-Examples-1"></a><br><h4 class="subsection">4.4.1 Wildcard Examples</h4><br><br><p>Wildcards can be used in the recipe of a rule, where they are expanded<br>by the shell.  For example, here is a rule to delete all the object files:<br></p><br><div class="example"><br><pre class="example">clean:<br>        rm -f <em>.o<br></em></pre></div><br><a name="index-rm-_0028shell-command_0029-1"></a><br><br><p>Wildcards are also useful in the prerequisites of a rule.  With the<br>following rule in the makefile, ‘<samp>make print</samp>’ will print all the<br>‘<samp>.c</samp>’ files that have changed since the last time you printed them:<br></p><br><div class="example"><br><pre class="example">print: .c<br>        lpr -p $?<br>        touch print<br></pre></div><br><br><a name="index-print-target"></a><br><a name="index-lpr-_0028shell-command_0029"></a><br><a name="index-touch-_0028shell-command_0029"></a><br><p>This rule uses <samp>print</samp> as an empty target file; see <a href="#Empty-Targets">Empty Target Files to Record Events</a>.  (The automatic variable<br>‘<samp>$?</samp>’ is used to print only those files that have changed; see<br><a href="#Automatic-Variables">Automatic Variables</a>.)<br></p><br><p>Wildcard expansion does not happen when you define a variable.  Thus, if<br>you write this:<br></p><br><div class="example"><br><pre class="example">objects = <em>.o<br></em></pre></div><br><br><p>then the value of the variable <code>objects</code> is the actual string<br>‘<samp>.o</samp>’.  However, if you use the value of <code>objects</code> in a<br>target or prerequisite, wildcard expansion will take place there.  If<br>you use the value of <code>objects</code> in a recipe, the shell may perform<br>wildcard expansion when the recipe runs.  To set <code>objects</code> to the<br>expansion, instead use:<br></p><br><div class="example"><br><pre class="example">objects := $(wildcard <em>.o)<br></em></pre></div><br><br><p>See <a href="#Wildcard-Function">Wildcard Function</a>.<br></p><br><hr><br><a name="Wildcard-Pitfall"></a><br><div class="header"><br><p><br>Next: <a href="#Wildcard-Function" accesskey="n" rel="next">Wildcard Function</a>, Previous: <a href="#Wildcard-Examples" accesskey="p" rel="prev">Wildcard Examples</a>, Up: <a href="#Wildcards" accesskey="u" rel="up">Wildcards</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Pitfalls-of-Using-Wildcards"></a><br><h4 class="subsection">4.4.2 Pitfalls of Using Wildcards</h4><br><a name="index-wildcard-pitfalls"></a><br><a name="index-pitfalls-of-wildcards"></a><br><a name="index-mistakes-with-wildcards"></a><br><a name="index-errors-with-wildcards"></a><br><a name="index-problems-with-wildcards"></a><br><br><p>Now here is an example of a naive way of using wildcard expansion, that<br>does not do what you would intend.  Suppose you would like to say that the<br>executable file <samp>foo</samp> is made from all the object files in the<br>directory, and you write this:<br></p><br><div class="example"><br><pre class="example">objects = .o<br><br>foo : $(objects)<br>        cc -o foo $(CFLAGS) $(objects)<br></pre></div><br><br><p>The value of <code>objects</code> is the actual string ‘<samp><em>.o</em></samp>’.  Wildcard<br>expansion happens in the rule for <samp>foo</samp>, so that each <em>existing</em><br>‘<samp>.o</samp>’ file becomes a prerequisite of <samp>foo</samp> and will be recompiled if<br>necessary.<br></p><br><p>But what if you delete all the ‘<samp>.o</samp>’ files?  When a wildcard matches<br>no files, it is left as it is, so then <samp>foo</samp> will depend on the<br>oddly-named file <samp>.o</samp>.  Since no such file is likely to exist,<br><code>make</code> will give you an error saying it cannot figure out how to<br>make <samp><em>.o</em></samp>.  This is not what you want!<br></p><br><p>Actually it is possible to obtain the desired result with wildcard<br>expansion, but you need more sophisticated techniques, including the<br><code>wildcard</code> function and string substitution.<br>See <a href="#Wildcard-Function">The Function <code>wildcard</code></a>.<br></p><br><a name="index-wildcards-and-MS_002dDOS_002fMS_002dWindows-backslashes"></a><br><a name="index-backslashes-in-pathnames-and-wildcard-expansion"></a><br><br><p>Microsoft operating systems (MS-DOS and MS-Windows) use backslashes to<br>separate directories in pathnames, like so:<br></p><br><div class="example"><br><pre class="example">  c:\foo\bar\baz.c<br></pre></div><br><br><p>This is equivalent to the Unix-style <samp>c:/foo/bar/baz.c</samp> (the<br><samp>c:</samp> part is the so-called drive letter).  When <code>make</code> runs on<br>these systems, it supports backslashes as well as the Unix-style forward<br>slashes in pathnames.  However, this support does <em>not</em> include the<br>wildcard expansion, where backslash is a quote character.  Therefore,<br>you <em>must</em> use Unix-style slashes in these cases.<br></p><br><br><hr><br><a name="Wildcard-Function"></a><br><div class="header"><br><p><br>Previous: <a href="#Wildcard-Pitfall" accesskey="p" rel="prev">Wildcard Pitfall</a>, Up: <a href="#Wildcards" accesskey="u" rel="up">Wildcards</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="The-Function-wildcard"></a><br><h4 class="subsection">4.4.3 The Function <code>wildcard</code></h4><br><a name="index-wildcard-1"></a><br><br><p>Wildcard expansion happens automatically in rules.  But wildcard expansion<br>does not normally take place when a variable is set, or inside the<br>arguments of a function.  If you want to do wildcard expansion in such<br>places, you need to use the <code>wildcard</code> function, like this:<br></p><br><div class="example"><br><pre class="example">$(wildcard <var>pattern</var>…)<br></pre></div><br><br><p>This string, used anywhere in a makefile, is replaced by a<br>space-separated list of names of existing files that match one of the<br>given file name patterns.  If no existing file name matches a pattern,<br>then that pattern is omitted from the output of the <code>wildcard</code><br>function.  Note that this is different from how unmatched wildcards<br>behave in rules, where they are used verbatim rather than ignored<br>(see <a href="#Wildcard-Pitfall">Wildcard Pitfall</a>).<br></p><br><p>One use of the <code>wildcard</code> function is to get a list of all the C source<br>files in a directory, like this:<br></p><br><div class="example"><br><pre class="example">$(wildcard .c)<br></pre></div><br><br><p>We can change the list of C source files into a list of object files by<br>replacing the ‘<samp>.c</samp>’ suffix with ‘<samp>.o</samp>’ in the result, like this:<br></p><br><div class="example"><br><pre class="example">$(patsubst %.c,%.o,$(wildcard <em>.c))<br></em></pre></div><br><br><p>(Here we have used another function, <code>patsubst</code>.<br>See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.)<br></p><br><p>Thus, a makefile to compile all C source files in the directory and then<br>link them together could be written as follows:<br></p><br><div class="example"><br><pre class="example">objects := $(patsubst %.c,%.o,$(wildcard .c))<br><br>foo : $(objects)<br>        cc -o foo $(objects)<br></pre></div><br><br><p>(This takes advantage of the implicit rule for compiling C programs, so<br>there is no need to write explicit rules for compiling the files.<br>See <a href="#Flavors">The Two Flavors of Variables</a>, for an explanation of<br>‘<samp>:=</samp>’, which is a variant of ‘<samp>=</samp>’.)<br></p><br><hr><br><a name="Directory-Search"></a><br><div class="header"><br><p><br>Next: <a href="#Phony-Targets" accesskey="n" rel="next">Phony Targets</a>, Previous: <a href="#Wildcards" accesskey="p" rel="prev">Wildcards</a>, Up: <a href="#Rules" accesskey="u" rel="up">Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Searching-Directories-for-Prerequisites"></a><br><h3 class="section">4.5 Searching Directories for Prerequisites</h3><br><a name="index-VPATH"></a><br><a name="index-vpath-1"></a><br><a name="index-vpath"></a><br><a name="index-search-path-for-prerequisites-_0028VPATH_0029"></a><br><a name="index-directory-search-_0028VPATH_0029"></a><br><br><p>For large systems, it is often desirable to put sources in a separate<br>directory from the binaries.  The <em>directory search</em> features of<br><code>make</code> facilitate this by searching several directories<br>automatically to find a prerequisite.  When you redistribute the files<br>among directories, you do not need to change the individual rules,<br>just the search paths.<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#General-Search" accesskey="1">General Search</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Specifying a search path that applies<br>                                  to every prerequisite.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Selective-Search" accesskey="2">Selective Search</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Specifying a search path<br>                                  for a specified class of names.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Search-Algorithm" accesskey="3">Search Algorithm</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">When and how search paths are applied.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Recipes_002fSearch" accesskey="4">Recipes/Search</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to write recipes that work together<br>                                  with search paths.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Implicit_002fSearch" accesskey="5">Implicit/Search</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How search paths affect implicit rules.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Libraries_002fSearch" accesskey="6">Libraries/Search</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Directory search for link libraries.<br></td></tr><br></tbody></table><br><br><hr><br><a name="General-Search"></a><br><div class="header"><br><p><br>Next: <a href="#Selective-Search" accesskey="n" rel="next">Selective Search</a>, Previous: <a href="#Directory-Search" accesskey="p" rel="prev">Directory Search</a>, Up: <a href="#Directory-Search" accesskey="u" rel="up">Directory Search</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="VPATH_003a-Search-Path-for-All-Prerequisites"></a><br><h4 class="subsection">4.5.1 <code>VPATH</code>: Search Path for All Prerequisites</h4><br><a name="index-VPATH-1"></a><br><br><p>The value of the <code>make</code> variable <code>VPATH</code> specifies a list of<br>directories that <code>make</code> should search.  Most often, the<br>directories are expected to contain prerequisite files that are not in the<br>current directory; however, <code>make</code> uses <code>VPATH</code> as a search<br>list for both prerequisites and targets of rules.<br></p><br><p>Thus, if a file that is listed as a target or prerequisite does not exist<br>in the current directory, <code>make</code> searches the directories listed in<br><code>VPATH</code> for a file with that name.  If a file is found in one of<br>them, that file may become the prerequisite (see below).  Rules may then<br>specify the names of files in the prerequisite list as if they all<br>existed in the current directory.  See <a href="#Recipes_002fSearch">Writing Recipes with Directory Search</a>.<br></p><br><p>In the <code>VPATH</code> variable, directory names are separated by colons or<br>blanks.  The order in which directories are listed is the order followed<br>by <code>make</code> in its search.  (On MS-DOS and MS-Windows, semi-colons<br>are used as separators of directory names in <code>VPATH</code>, since the<br>colon can be used in the pathname itself, after the drive letter.)<br></p><br><p>For example,<br></p><br><div class="example"><br><pre class="example">VPATH = src:../headers<br></pre></div><br><br><p>specifies a path containing two directories, <samp>src</samp> and<br><samp>../headers</samp>, which <code>make</code> searches in that order.<br></p><br><p>With this value of <code>VPATH</code>, the following rule,<br></p><br><div class="example"><br><pre class="example">foo.o : foo.c<br></pre></div><br><br><p>is interpreted as if it were written like this:<br></p><br><div class="example"><br><pre class="example">foo.o : src/foo.c<br></pre></div><br><br><p>assuming the file <samp>foo.c</samp> does not exist in the current directory but<br>is found in the directory <samp>src</samp>.<br></p><br><hr><br><a name="Selective-Search"></a><br><div class="header"><br><p><br>Next: <a href="#Search-Algorithm" accesskey="n" rel="next">Search Algorithm</a>, Previous: <a href="#General-Search" accesskey="p" rel="prev">General Search</a>, Up: <a href="#Directory-Search" accesskey="u" rel="up">Directory Search</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="The-vpath-Directive"></a><br><h4 class="subsection">4.5.2 The <code>vpath</code> Directive</h4><br><a name="index-vpath-2"></a><br><br><p>Similar to the <code>VPATH</code> variable, but more selective, is the<br><code>vpath</code> directive (note lower case), which allows you to specify a<br>search path for a particular class of file names: those that match a<br>particular pattern.  Thus you can supply certain search directories for<br>one class of file names and other directories (or none) for other file<br>names.<br></p><br><p>There are three forms of the <code>vpath</code> directive:<br></p><br><dl compact="compact"><br><dt><code>vpath <var>pattern</var> <var>directories</var></code></dt><br><dd><p>Specify the search path <var>directories</var> for file names that match<br><var>pattern</var>.<br></p><br><p>The search path, <var>directories</var>, is a list of directories to be<br>searched, separated by colons (semi-colons on MS-DOS and MS-Windows) or<br>blanks, just like the search path used in the <code>VPATH</code> variable.<br></p><br></dd><br><dt><code>vpath <var>pattern</var></code></dt><br><dd><p>Clear out the search path associated with <var>pattern</var>.<br></p><br></dd><br><dt><code>vpath</code></dt><br><dd><br><p>Clear all search paths previously specified with <code>vpath</code> directives.<br></p></dd><br></dl><br><br><p>A <code>vpath</code> pattern is a string containing a ‘<samp>%</samp>’ character.  The<br>string must match the file name of a prerequisite that is being searched<br>for, the ‘<samp>%</samp>’ character matching any sequence of zero or more<br>characters (as in pattern rules; see <a href="#Pattern-Rules">Defining and<br>Redefining Pattern Rules</a>).  For example, <code>%.h</code> matches files that<br>end in <code>.h</code>.  (If there is no ‘<samp>%</samp>’, the pattern must match the<br>prerequisite exactly, which is not useful very often.)<br></p><br><a name="index-_0025_002c-quoting-in-vpath"></a><br><a name="index-_0025_002c-quoting-with-_005c-_0028backslash_0029"></a><br><a name="index-_005c-_0028backslash_0029_002c-to-quote-_0025"></a><br><a name="index-backslash-_0028_005c_0029_002c-to-quote-_0025"></a><br><a name="index-quoting-_0025_002c-in-vpath"></a><br><p>‘<samp>%</samp>’ characters in a <code>vpath</code> directive’s pattern can be quoted<br>with preceding backslashes (‘<samp>\</samp>’).  Backslashes that would otherwise<br>quote ‘<samp>%</samp>’ characters can be quoted with more backslashes.<br>Backslashes that quote ‘<samp>%</samp>’ characters or other backslashes are<br>removed from the pattern before it is compared to file names.  Backslashes<br>that are not in danger of quoting ‘<samp>%</samp>’ characters go unmolested.<br></p><br><p>When a prerequisite fails to exist in the current directory, if the<br><var>pattern</var> in a <code>vpath</code> directive matches the name of the<br>prerequisite file, then the <var>directories</var> in that directive are searched<br>just like (and before) the directories in the <code>VPATH</code> variable.<br></p><br><p>For example,<br></p><br><div class="example"><br><pre class="example">vpath %.h ../headers<br></pre></div><br><br><p>tells <code>make</code> to look for any prerequisite whose name ends in <samp>.h</samp><br>in the directory <samp>../headers</samp> if the file is not found in the current<br>directory.<br></p><br><p>If several <code>vpath</code> patterns match the prerequisite file’s name, then<br><code>make</code> processes each matching <code>vpath</code> directive one by one,<br>searching all the directories mentioned in each directive.  <code>make</code><br>handles multiple <code>vpath</code> directives in the order in which they<br>appear in the makefile; multiple directives with the same pattern are<br>independent of each other.<br></p><br><p>Thus,<br></p><br><div class="example"><br><pre class="example">vpath %.c foo<br>vpath %   blish<br>vpath %.c bar<br></pre></div><br><br><p>will look for a file ending in ‘<samp>.c</samp>’ in <samp>foo</samp>, then<br><samp>blish</samp>, then <samp>bar</samp>, while<br></p><br><div class="example"><br><pre class="example">vpath %.c foo:bar<br>vpath %   blish<br></pre></div><br><br><p>will look for a file ending in ‘<samp>.c</samp>’ in <samp>foo</samp>, then<br><samp>bar</samp>, then <samp>blish</samp>.<br></p><br><hr><br><a name="Search-Algorithm"></a><br><div class="header"><br><p><br>Next: <a href="#Recipes_002fSearch" accesskey="n" rel="next">Recipes/Search</a>, Previous: <a href="#Selective-Search" accesskey="p" rel="prev">Selective Search</a>, Up: <a href="#Directory-Search" accesskey="u" rel="up">Directory Search</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="How-Directory-Searches-are-Performed"></a><br><h4 class="subsection">4.5.3 How Directory Searches are Performed</h4><br><a name="index-algorithm-for-directory-search"></a><br><a name="index-directory-search-algorithm"></a><br><br><p>When a prerequisite is found through directory search, regardless of type<br>(general or selective), the pathname located may not be the one that<br><code>make</code> actually provides you in the prerequisite list.  Sometimes<br>the path discovered through directory search is thrown away.<br></p><br><p>The algorithm <code>make</code> uses to decide whether to keep or abandon a<br>path found via directory search is as follows:<br></p><br><ol><br><li> If a target file does not exist at the path specified in the makefile,<br>directory search is performed.<br><br></li><li> If the directory search is successful, that path is kept and this file<br>is tentatively stored as the target.<br><br></li><li> All prerequisites of this target are examined using this same method.<br><br></li><li> After processing the prerequisites, the target may or may not need to be<br>rebuilt:<br><br><ol><br><li> If the target does <em>not</em> need to be rebuilt, the path to the file<br>found during directory search is used for any prerequisite lists which<br>contain this target.  In short, if <code>make</code> doesn’t need to rebuild<br>the target then you use the path found via directory search.<br><br></li><li> If the target <em>does</em> need to be rebuilt (is out-of-date), the<br>pathname found during directory search is <em>thrown away</em>, and the<br>target is rebuilt using the file name specified in the makefile.  In<br>short, if <code>make</code> must rebuild, then the target is rebuilt locally,<br>not in the directory found via directory search.<br></li></ol><br></li></ol><br><br><p>This algorithm may seem complex, but in practice it is quite often<br>exactly what you want.<br></p><br><a name="index-traditional-directory-search-_0028GPATH_0029"></a><br><a name="index-directory-search_002c-traditional-_0028GPATH_0029"></a><br><p>Other versions of <code>make</code> use a simpler algorithm: if the file does<br>not exist, and it is found via directory search, then that pathname is<br>always used whether or not the target needs to be built.  Thus, if the<br>target is rebuilt it is created at the pathname discovered during<br>directory search.<br></p><br><a name="index-GPATH"></a><br><p>If, in fact, this is the behavior you want for some or all of your<br>directories, you can use the <code>GPATH</code> variable to indicate this to<br><code>make</code>.<br></p><br><p><code>GPATH</code> has the same syntax and format as <code>VPATH</code> (that is, a<br>space- or colon-delimited list of pathnames).  If an out-of-date target<br>is found by directory search in a directory that also appears in<br><code>GPATH</code>, then that pathname is not thrown away.  The target is<br>rebuilt using the expanded path.<br></p><br><hr><br><a name="Recipes_002fSearch"></a><br><div class="header"><br><p><br>Next: <a href="#Implicit_002fSearch" accesskey="n" rel="next">Implicit/Search</a>, Previous: <a href="#Search-Algorithm" accesskey="p" rel="prev">Search Algorithm</a>, Up: <a href="#Directory-Search" accesskey="u" rel="up">Directory Search</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Writing-Recipes-with-Directory-Search"></a><br><h4 class="subsection">4.5.4 Writing Recipes with Directory Search</h4><br><a name="index-recipes_002c-and-directory-search"></a><br><a name="index-directory-search-_0028VPATH_0029_002c-and-recipes"></a><br><br><p>When a prerequisite is found in another directory through directory search,<br>this cannot change the recipe of the rule; they will execute as written.<br>Therefore, you must write the recipe with care so that it will look for<br>the prerequisite in the directory where <code>make</code> finds it.<br></p><br><p>This is done with the <em>automatic variables</em> such as ‘<samp>$^</samp>’<br>(see <a href="#Automatic-Variables">Automatic Variables</a>).<br>For instance, the value of ‘<samp>$^</samp>’ is a<br>list of all the prerequisites of the rule, including the names of<br>the directories in which they were found, and the value of<br>‘<samp>$@</samp>’ is the target.  Thus:<br></p><br><div class="example"><br><pre class="example">foo.o : foo.c<br>        cc -c $(CFLAGS) $^ -o $@<br></pre></div><br><br><p>(The variable <code>CFLAGS</code> exists so you can specify flags for C<br>compilation by implicit rules; we use it here for consistency so it will<br>affect all C compilations uniformly;<br>see <a href="#Implicit-Variables">Variables Used by Implicit Rules</a>.)<br></p><br><p>Often the prerequisites include header files as well, which you do not<br>want to mention in the recipe.  The automatic variable ‘<samp>$&lt;</samp>’ is<br>just the first prerequisite:<br></p><br><div class="example"><br><pre class="example">VPATH = src:../headers<br>foo.o : foo.c defs.h hack.h<br>        cc -c $(CFLAGS) $&lt; -o $@<br></pre></div><br><br><hr><br><a name="Implicit_002fSearch"></a><br><div class="header"><br><p><br>Next: <a href="#Libraries_002fSearch" accesskey="n" rel="next">Libraries/Search</a>, Previous: <a href="#Recipes_002fSearch" accesskey="p" rel="prev">Recipes/Search</a>, Up: <a href="#Directory-Search" accesskey="u" rel="up">Directory Search</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Directory-Search-and-Implicit-Rules"></a><br><h4 class="subsection">4.5.5 Directory Search and Implicit Rules</h4><br><a name="index-VPATH_002c-and-implicit-rules"></a><br><a name="index-directory-search-_0028VPATH_0029_002c-and-implicit-rules"></a><br><a name="index-search-path-for-prerequisites-_0028VPATH_0029_002c-and-implicit-rules"></a><br><a name="index-implicit-rule_002c-and-directory-search"></a><br><a name="index-implicit-rule_002c-and-VPATH"></a><br><a name="index-rule_002c-implicit_002c-and-directory-search"></a><br><a name="index-rule_002c-implicit_002c-and-VPATH"></a><br><br><p>The search through the directories specified in <code>VPATH</code> or with<br><code>vpath</code> also happens during consideration of implicit rules<br>(see <a href="#Implicit-Rules">Using Implicit Rules</a>).<br></p><br><p>For example, when a file <samp>foo.o</samp> has no explicit rule, <code>make</code><br>considers implicit rules, such as the built-in rule to compile<br><samp>foo.c</samp> if that file exists.  If such a file is lacking in the<br>current directory, the appropriate directories are searched for it.  If<br><samp>foo.c</samp> exists (or is mentioned in the makefile) in any of the<br>directories, the implicit rule for C compilation is applied.<br></p><br><p>The recipes of implicit rules normally use automatic variables as a<br>matter of necessity; consequently they will use the file names found by<br>directory search with no extra effort.<br></p><br><hr><br><a name="Libraries_002fSearch"></a><br><div class="header"><br><p><br>Previous: <a href="#Implicit_002fSearch" accesskey="p" rel="prev">Implicit/Search</a>, Up: <a href="#Directory-Search" accesskey="u" rel="up">Directory Search</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Directory-Search-for-Link-Libraries"></a><br><h4 class="subsection">4.5.6 Directory Search for Link Libraries</h4><br><a name="index-link-libraries_002c-and-directory-search"></a><br><a name="index-libraries-for-linking_002c-directory-search"></a><br><a name="index-directory-search-_0028VPATH_0029_002c-and-link-libraries"></a><br><a name="index-VPATH_002c-and-link-libraries"></a><br><a name="index-search-path-for-prerequisites-_0028VPATH_0029_002c-and-link-libraries"></a><br><a name="index-_002dl-_0028library-search_0029"></a><br><a name="index-link-libraries_002c-patterns-matching"></a><br><a name="index-_002eLIBPATTERNS_002c-and-link-libraries"></a><br><a name="index-_002eLIBPATTERNS"></a><br><br><p>Directory search applies in a special way to libraries used with the<br>linker.  This special feature comes into play when you write a prerequisite<br>whose name is of the form ‘<samp>-l<var>name</var></samp>’.  (You can tell something<br>strange is going on here because the prerequisite is normally the name of a<br>file, and the <em>file name</em> of a library generally looks like<br><samp>lib<var>name</var>.a</samp>, not like ‘<samp>-l<var>name</var></samp>’.)<br></p><br><p>When a prerequisite’s name has the form ‘<samp>-l<var>name</var></samp>’, <code>make</code><br>handles it specially by searching for the file <samp>lib<var>name</var>.so</samp>,<br>and, if it is not found, for the file <samp>lib<var>name</var>.a</samp> in the current<br>directory, in directories specified by matching <code>vpath</code><br>search paths and the <code>VPATH</code> search path, and then in the<br>directories <samp>/lib</samp>, <samp>/usr/lib</samp>, and <samp><var>prefix</var>/lib</samp><br>(normally <samp>/usr/local/lib</samp>, but MS-DOS/MS-Windows versions of<br><code>make</code> behave as if <var>prefix</var> is defined to be the root of the<br>DJGPP installation tree).<br></p><br><p>For example, if there is a <samp>/usr/lib/libcurses.a</samp> library on your<br>system (and no <samp>/usr/lib/libcurses.so</samp> file), then<br></p><br><div class="example"><br><pre class="example">foo : foo.c -lcurses<br>        cc $^ -o $@<br></pre></div><br><br><p>would cause the command ‘<samp>cc foo.c /usr/lib/libcurses.a -o foo</samp>’ to<br>be executed when <samp>foo</samp> is older than <samp>foo.c</samp> or than<br><samp>/usr/lib/libcurses.a</samp>.<br></p><br><p>Although the default set of files to be searched for is<br><samp>lib<var>name</var>.so</samp> and <samp>lib<var>name</var>.a</samp>, this is customizable<br>via the <code>.LIBPATTERNS</code> variable.  Each word in the value of this<br>variable is a pattern string.  When a prerequisite like<br>‘<samp>-l<var>name</var></samp>’ is seen, <code>make</code> will replace the percent in<br>each pattern in the list with <var>name</var> and perform the above directory<br>searches using each library file name.<br></p><br><p>The default value for <code>.LIBPATTERNS</code> is ‘<samp>lib%.so lib%.a</samp>’,<br>which provides the default behavior described above.<br></p><br><p>You can turn off link library expansion completely by setting this<br>variable to an empty value.<br></p><br><hr><br><a name="Phony-Targets"></a><br><div class="header"><br><p><br>Next: <a href="#Force-Targets" accesskey="n" rel="next">Force Targets</a>, Previous: <a href="#Directory-Search" accesskey="p" rel="prev">Directory Search</a>, Up: <a href="#Rules" accesskey="u" rel="up">Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Phony-Targets-1"></a><br><h3 class="section">4.6 Phony Targets</h3><br><a name="index-phony-targets"></a><br><a name="index-targets_002c-phony"></a><br><a name="index-targets-without-a-file"></a><br><br><p>A phony target is one that is not really the name of a file; rather it<br>is just a name for a recipe to be executed when you make an explicit<br>request.  There are two reasons to use a phony target: to avoid a<br>conflict with a file of the same name, and to improve performance.<br></p><br><p>If you write a rule whose recipe will not create the target file, the<br>recipe will be executed every time the target comes up for remaking.<br>Here is an example:<br></p><br><div class="example"><br><pre class="example">clean:<br>        rm <em>.o temp<br></em></pre></div><br><br><p>Because the <code>rm</code> command does not create a file named <samp>clean</samp>,<br>probably no such file will ever exist.  Therefore, the <code>rm</code> command<br>will be executed every time you say ‘<samp>make clean</samp>’.<br><a name="index-rm-_0028shell-command_0029-2"></a><br></p><br><a name="index-_002ePHONY"></a><br><p>In this example, the <samp>clean</samp> target will not work properly if a<br>file named <samp>clean</samp> is ever created in this directory.  Since it<br>has no prerequisites, <samp>clean</samp> would always be considered up to<br>date and its recipe would not be executed.  To avoid this problem you<br>can explicitly declare the target to be phony by making it a<br>prerequisite of the special target <code>.PHONY</code><br>(see <a href="#Special-Targets">Special Built-in Target Names</a>) as follows:<br></p><br><div class="example"><br><pre class="example">.PHONY: clean<br>clean:<br>        rm .o temp<br></pre></div><br><br><p>Once this is done, ‘<samp>make clean</samp>’ will run the recipe regardless of<br>whether there is a file named <samp>clean</samp>.<br></p><br><p>Phony targets are also useful in conjunction with recursive<br>invocations of <code>make</code> (see <a href="#Recursion">Recursive Use of <code>make</code></a>).<br>In this situation the makefile will often contain a variable which<br>lists a number of sub-directories to be built.  A simplistic way to<br>handle this is to define one rule with a recipe that loops over the<br>sub-directories, like this:<br></p><br><div class="example"><br><pre class="example">SUBDIRS = foo bar baz<br><br>subdirs:<br>        for dir in $(SUBDIRS); do \<br>          $(MAKE) -C $$dir; \<br>        done<br></pre></div><br><br><p>There are problems with this method, however.  First, any error<br>detected in a sub-make is ignored by this rule, so it will continue<br>to build the rest of the directories even when one fails.  This can be<br>overcome by adding shell commands to note the error and exit, but then<br>it will do so even if <code>make</code> is invoked with the <code>-k</code><br>option, which is unfortunate.  Second, and perhaps more importantly,<br>you cannot take advantage of <code>make</code>’s ability to build targets in<br>parallel (see <a href="#Parallel">Parallel Execution</a>), since there is only<br>one rule.<br></p><br><p>By declaring the sub-directories as <code>.PHONY</code> targets (you must do<br>this as the sub-directory obviously always exists; otherwise it won’t<br>be built) you can remove these problems:<br></p><br><div class="example"><br><pre class="example">SUBDIRS = foo bar baz<br><br>.PHONY: subdirs $(SUBDIRS)<br><br>subdirs: $(SUBDIRS)<br><br>$(SUBDIRS):<br>        $(MAKE) -C $@<br><br>foo: baz<br></pre></div><br><br><p>Here we’ve also declared that the <samp>foo</samp> sub-directory cannot be<br>built until after the <samp>baz</samp> sub-directory is complete; this kind of<br>relationship declaration is particularly important when attempting<br>parallel builds.<br></p><br><p>The implicit rule search (see <a href="#Implicit-Rules">Implicit Rules</a>) is skipped for<br><code>.PHONY</code> targets.  This is why declaring a target as<br><code>.PHONY</code> is good for performance, even if you are not worried<br>about the actual file existing.<br></p><br><p>A phony target should not be a prerequisite of a real target file; if it<br>is, its recipe will be run every time <code>make</code> goes to update that<br>file.  As long as a phony target is never a prerequisite of a real<br>target, the phony target recipe will be executed only when the phony<br>target is a specified goal (see <a href="#Goals">Arguments to Specify the<br>Goals</a>).<br></p><br><p>Phony targets can have prerequisites.  When one directory contains multiple<br>programs, it is most convenient to describe all of the programs in one<br>makefile <samp>./Makefile</samp>.  Since the target remade by default will be the<br>first one in the makefile, it is common to make this a phony target named<br>‘<samp>all</samp>’ and give it, as prerequisites, all the individual programs.  For<br>example:<br></p><br><div class="example"><br><pre class="example">all : prog1 prog2 prog3<br>.PHONY : all<br><br>prog1 : prog1.o utils.o<br>        cc -o prog1 prog1.o utils.o<br><br>prog2 : prog2.o<br>        cc -o prog2 prog2.o<br><br>prog3 : prog3.o sort.o utils.o<br>        cc -o prog3 prog3.o sort.o utils.o<br></pre></div><br><br><p>Now you can say just ‘<samp>make</samp>’ to remake all three programs, or<br>specify as arguments the ones to remake (as in ‘<samp>make prog1<br>prog3</samp>’).  Phoniness is not inherited: the prerequisites of a phony<br>target are not themselves phony, unless explicitly declared to be so.<br></p><br><p>When one phony target is a prerequisite of another, it serves as a subroutine<br>of the other.  For example, here ‘<samp>make cleanall</samp>’ will delete the<br>object files, the difference files, and the file <samp>program</samp>:<br></p><br><div class="example"><br><pre class="example">.PHONY: cleanall cleanobj cleandiff<br><br>cleanall : cleanobj cleandiff<br>        rm program<br><br>cleanobj :<br>        rm <em>.o<br><br>cleandiff :<br>        rm </em>.diff<br></pre></div><br><br><hr><br><a name="Force-Targets"></a><br><div class="header"><br><p><br>Next: <a href="#Empty-Targets" accesskey="n" rel="next">Empty Targets</a>, Previous: <a href="#Phony-Targets" accesskey="p" rel="prev">Phony Targets</a>, Up: <a href="#Rules" accesskey="u" rel="up">Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Rules-without-Recipes-or-Prerequisites"></a><br><h3 class="section">4.7 Rules without Recipes or Prerequisites</h3><br><a name="index-force-targets"></a><br><a name="index-targets_002c-force"></a><br><a name="index-FORCE"></a><br><a name="index-rule_002c-no-recipe-or-prerequisites"></a><br><br><p>If a rule has no prerequisites or recipe, and the target of the rule<br>is a nonexistent file, then <code>make</code> imagines this target to have<br>been updated whenever its rule is run.  This implies that all targets<br>depending on this one will always have their recipe run.<br></p><br><p>An example will illustrate this:<br></p><br><div class="example"><br><pre class="example">clean: FORCE<br>        rm $(objects)<br>FORCE:<br></pre></div><br><br><p>Here the target ‘<samp>FORCE</samp>’ satisfies the special conditions, so the<br>target <samp>clean</samp> that depends on it is forced to run its recipe.<br>There is nothing special about the name ‘<samp>FORCE</samp>’, but that is one<br>name commonly used this way.<br></p><br><p>As you can see, using ‘<samp>FORCE</samp>’ this way has the same results as using<br>‘<samp>.PHONY: clean</samp>’.<br></p><br><p>Using ‘<samp>.PHONY</samp>’ is more explicit and more efficient.  However,<br>other versions of <code>make</code> do not support ‘<samp>.PHONY</samp>’; thus<br>‘<samp>FORCE</samp>’ appears in many makefiles.  See <a href="#Phony-Targets">Phony Targets</a>.<br></p><br><hr><br><a name="Empty-Targets"></a><br><div class="header"><br><p><br>Next: <a href="#Special-Targets" accesskey="n" rel="next">Special Targets</a>, Previous: <a href="#Force-Targets" accesskey="p" rel="prev">Force Targets</a>, Up: <a href="#Rules" accesskey="u" rel="up">Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Empty-Target-Files-to-Record-Events"></a><br><h3 class="section">4.8 Empty Target Files to Record Events</h3><br><a name="index-empty-targets"></a><br><a name="index-targets_002c-empty"></a><br><a name="index-recording-events-with-empty-targets"></a><br><br><p>The <em>empty target</em> is a variant of the phony target; it is used to hold<br>recipes for an action that you request explicitly from time to time.<br>Unlike a phony target, this target file can really exist; but the file’s<br>contents do not matter, and usually are empty.<br></p><br><p>The purpose of the empty target file is to record, with its<br>last-modification time, when the rule’s recipe was last executed.  It<br>does so because one of the commands in the recipe is a <code>touch</code><br>command to update the target file.<br></p><br><p>The empty target file should have some prerequisites (otherwise it<br>doesn’t make sense).  When you ask to remake the empty target, the<br>recipe is executed if any prerequisite is more recent than the target;<br>in other words, if a prerequisite has changed since the last time you<br>remade the target.  Here is an example:<br></p><br><div class="example"><br><pre class="example">print: foo.c bar.c<br>        lpr -p $?<br>        touch print<br></pre></div><br><a name="index-print-target-1"></a><br><a name="index-lpr-_0028shell-command_0029-1"></a><br><a name="index-touch-_0028shell-command_0029-1"></a><br><br><p>With this rule, ‘<samp>make print</samp>’ will execute the <code>lpr</code> command if<br>either source file has changed since the last ‘<samp>make print</samp>’.  The<br>automatic variable ‘<samp>$?</samp>’ is used to print only those files that have<br>changed (see <a href="#Automatic-Variables">Automatic Variables</a>).<br></p><br><hr><br><a name="Special-Targets"></a><br><div class="header"><br><p><br>Next: <a href="#Multiple-Targets" accesskey="n" rel="next">Multiple Targets</a>, Previous: <a href="#Empty-Targets" accesskey="p" rel="prev">Empty Targets</a>, Up: <a href="#Rules" accesskey="u" rel="up">Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Special-Built_002din-Target-Names"></a><br><h3 class="section">4.9 Special Built-in Target Names</h3><br><a name="index-special-targets"></a><br><a name="index-built_002din-special-targets"></a><br><a name="index-targets_002c-built_002din-special"></a><br><br><p>Certain names have special meanings if they appear as targets.<br></p><br><dl compact="compact"><br><dd><a name="index-_002ePHONY-1"></a><br></dd><br><dt><code>.PHONY</code></dt><br><dd><br><p>The prerequisites of the special target <code>.PHONY</code> are considered to<br>be phony targets.  When it is time to consider such a target,<br><code>make</code> will run its recipe unconditionally, regardless of<br>whether a file with that name exists or what its last-modification<br>time is.  See <a href="#Phony-Targets">Phony Targets</a>.<br></p><br><a name="index-_002eSUFFIXES"></a><br></dd><br><dt><code>.SUFFIXES</code></dt><br><dd><br><p>The prerequisites of the special target <code>.SUFFIXES</code> are the list<br>of suffixes to be used in checking for suffix rules.<br>See <a href="#Suffix-Rules">Old-Fashioned Suffix Rules</a>.<br></p><br><a name="index-_002eDEFAULT"></a><br></dd><br><dt><code>.DEFAULT</code></dt><br><dd><br><p>The recipe specified for <code>.DEFAULT</code> is used for any target for<br>which no rules are found (either explicit rules or implicit rules).<br>See <a href="#Last-Resort">Last Resort</a>.  If a <code>.DEFAULT</code> recipe is specified, every<br>file mentioned as a prerequisite, but not as a target in a rule, will have<br>that recipe executed on its behalf.  See <a href="#Implicit-Rule-Search">Implicit Rule Search Algorithm</a>.<br></p><br><a name="index-_002ePRECIOUS"></a><br></dd><br><dt><code>.PRECIOUS</code></dt><br><dd><a name="index-precious-targets"></a><br><a name="index-preserving-with-_002ePRECIOUS"></a><br><br><p>The targets which <code>.PRECIOUS</code> depends on are given the following<br>special treatment: if <code>make</code> is killed or interrupted during the<br>execution of their recipes, the target is not deleted.<br>See <a href="#Interrupts">Interrupting or Killing <code>make</code></a>.  Also, if the<br>target is an intermediate file, it will not be deleted after it is no<br>longer needed, as is normally done.  See <a href="#Chained-Rules">Chains of<br>Implicit Rules</a>.  In this latter respect it overlaps with the<br><code>.SECONDARY</code> special target.<br></p><br><p>You can also list the target pattern of an implicit rule (such as<br>‘<samp>%.o</samp>’) as a prerequisite file of the special target <code>.PRECIOUS</code><br>to preserve intermediate files created by rules whose target patterns<br>match that file’s name.<br></p><br><a name="index-_002eINTERMEDIATE"></a><br></dd><br><dt><code>.INTERMEDIATE</code></dt><br><dd><a name="index-intermediate-targets_002c-explicit"></a><br><br><p>The targets which <code>.INTERMEDIATE</code> depends on are treated as<br>intermediate files.  See <a href="#Chained-Rules">Chains of Implicit Rules</a>.<br><code>.INTERMEDIATE</code> with no prerequisites has no effect.<br></p><br><a name="index-_002eSECONDARY"></a><br></dd><br><dt><code>.SECONDARY</code></dt><br><dd><a name="index-secondary-targets"></a><br><a name="index-preserving-with-_002eSECONDARY"></a><br><br><p>The targets which <code>.SECONDARY</code> depends on are treated as<br>intermediate files, except that they are never automatically deleted.<br>See <a href="#Chained-Rules">Chains of Implicit Rules</a>.<br></p><br><p><code>.SECONDARY</code> with no prerequisites causes all targets to be treated<br>as secondary (i.e., no target is removed because it is considered<br>intermediate).<br></p><br><a name="index-_002eSECONDEXPANSION-1"></a><br></dd><br><dt><code>.SECONDEXPANSION</code></dt><br><dd><br><p>If <code>.SECONDEXPANSION</code> is mentioned as a target anywhere in the<br>makefile, then all prerequisite lists defined <em>after</em> it appears<br>will be expanded a second time after all makefiles have been read in.<br>See <a href="#Secondary-Expansion">Secondary Expansion</a>.<br></p><br><a name="index-_002eDELETE_005fON_005fERROR"></a><br></dd><br><dt><code>.DELETE_ON_ERROR</code></dt><br><dd><a name="index-removing-targets-on-failure"></a><br><br><p>If <code>.DELETE_ON_ERROR</code> is mentioned as a target anywhere in the<br>makefile, then <code>make</code> will delete the target of a rule if it has<br>changed and its recipe exits with a nonzero exit status, just as it<br>does when it receives a signal.  See <a href="#Errors">Errors in Recipes</a>.<br></p><br><a name="index-_002eIGNORE"></a><br></dd><br><dt><code>.IGNORE</code></dt><br><dd><br><p>If you specify prerequisites for <code>.IGNORE</code>, then <code>make</code> will<br>ignore errors in execution of the recipe for those particular files.<br>The recipe for <code>.IGNORE</code> (if any) is ignored.<br></p><br><p>If mentioned as a target with no prerequisites, <code>.IGNORE</code> says to<br>ignore errors in execution of recipes for all files.  This usage of<br>‘<samp>.IGNORE</samp>’ is supported only for historical compatibility.  Since<br>this affects every recipe in the makefile, it is not very useful; we<br>recommend you use the more selective ways to ignore errors in specific<br>recipes.  See <a href="#Errors">Errors in Recipes</a>.<br></p><br><a name="index-_002eLOW_005fRESOLUTION_005fTIME"></a><br></dd><br><dt><code>.LOW_RESOLUTION_TIME</code></dt><br><dd><br><p>If you specify prerequisites for <code>.LOW_RESOLUTION_TIME</code>,<br><code>make</code> assumes that these files are created by commands that<br>generate low resolution time stamps.  The recipe for the<br><code>.LOW_RESOLUTION_TIME</code> target are ignored.<br></p><br><p>The high resolution file time stamps of many modern file systems<br>lessen the chance of <code>make</code> incorrectly concluding that a file<br>is up to date.  Unfortunately, some hosts do not provide a way to set a<br>high resolution file time stamp, so commands like ‘<samp>cp -p</samp>’ that<br>explicitly set a file’s time stamp must discard its sub-second part.<br>If a file is created by such a command, you should list it as a<br>prerequisite of <code>.LOW_RESOLUTION_TIME</code> so that <code>make</code><br>does not mistakenly conclude that the file is out of date.  For<br>example:<br></p><br><div class="example"><br><pre class="example">.LOW_RESOLUTION_TIME: dst<br>dst: src<br>        cp -p src dst<br></pre></div><br><br><p>Since ‘<samp>cp -p</samp>’ discards the sub-second part of <samp>src</samp>’s time<br>stamp, <samp>dst</samp> is typically slightly older than <samp>src</samp> even when<br>it is up to date.  The <code>.LOW_RESOLUTION_TIME</code> line causes<br><code>make</code> to consider <samp>dst</samp> to be up to date if its time stamp<br>is at the start of the same second that <samp>src</samp>’s time stamp is in.<br></p><br><p>Due to a limitation of the archive format, archive member time stamps<br>are always low resolution.  You need not list archive members as<br>prerequisites of <code>.LOW_RESOLUTION_TIME</code>, as <code>make</code> does this<br>automatically.<br></p><br><a name="index-_002eSILENT"></a><br></dd><br><dt><code>.SILENT</code></dt><br><dd><br><p>If you specify prerequisites for <code>.SILENT</code>, then <code>make</code> will<br>not print the recipe used to remake those particular files before<br>executing them.  The recipe for <code>.SILENT</code> is ignored.<br></p><br><p>If mentioned as a target with no prerequisites, <code>.SILENT</code> says not<br>to print any recipes before executing them.  This usage of<br>‘<samp>.SILENT</samp>’ is supported only for historical compatibility.  We<br>recommend you use the more selective ways to silence specific recipes.<br>See <a href="#Echoing">Recipe Echoing</a>.  If you want to silence all recipes<br>for a particular run of <code>make</code>, use the ‘<samp>-s</samp>’ or<br>‘<samp><span class="nolinebreak">–silent</span></samp>’<!-- /@w --> option (see <a href="#Options-Summary">Options Summary</a>).<br></p><br><a name="index-_002eEXPORT_005fALL_005fVARIABLES"></a><br></dd><br><dt><code>.EXPORT_ALL_VARIABLES</code></dt><br><dd><br><p>Simply by being mentioned as a target, this tells <code>make</code> to<br>export all variables to child processes by default.<br>See <a href="#Variables_002fRecursion">Communicating Variables to a<br>Sub-<code>make</code></a>.<br></p><br><a name="index-_002eNOTPARALLEL"></a><br></dd><br><dt><code>.NOTPARALLEL</code></dt><br><dd><a name="index-parallel-execution_002c-overriding"></a><br><br><p>If <code>.NOTPARALLEL</code> is mentioned as a target, then this invocation<br>of <code>make</code> will be run serially, even if the ‘<samp>-j</samp>’ option is<br>given.  Any recursively invoked <code>make</code> command will still run<br>recipes in parallel (unless its makefile also contains this target).<br>Any prerequisites on this target are ignored.<br></p><br><a name="index-_002eONESHELL"></a><br></dd><br><dt><code>.ONESHELL</code></dt><br><dd><a name="index-recipe-execution_002c-single-invocation"></a><br><br><p>If <code>.ONESHELL</code> is mentioned as a target, then when a target is<br>built all lines of the recipe will be given to a single invocation of<br>the shell rather than each line being invoked separately<br>(see <a href="#Execution">Recipe Execution</a>).<br></p><br><a name="index-_002ePOSIX"></a><br></dd><br><dt><code>.POSIX</code></dt><br><dd><a name="index-POSIX_002dconforming-mode_002c-setting"></a><br><br><p>If <code>.POSIX</code> is mentioned as a target, then the makefile will be<br>parsed and run in POSIX-conforming mode.  This does <em>not</em> mean<br>that only POSIX-conforming makefiles will be accepted: all advanced<br>GNU <code>make</code> features are still available.  Rather, this target<br>causes <code>make</code> to behave as required by POSIX in those areas<br>where <code>make</code>’s default behavior differs.<br></p><br><p>In particular, if this target is mentioned then recipes will be<br>invoked as if the shell had been passed the <code>-e</code> flag: the first<br>failing command in a recipe will cause the recipe to fail immediately.<br></p></dd><br></dl><br><br><p>Any defined implicit rule suffix also counts as a special target if it<br>appears as a target, and so does the concatenation of two suffixes, such<br>as ‘<samp>.c.o</samp>’.  These targets are suffix rules, an obsolete way of<br>defining implicit rules (but a way still widely used).  In principle, any<br>target name could be special in this way if you break it in two and add<br>both pieces to the suffix list.  In practice, suffixes normally begin with<br>‘<samp>.</samp>’, so these special target names also begin with ‘<samp>.</samp>’.<br>See <a href="#Suffix-Rules">Old-Fashioned Suffix Rules</a>.<br></p><br><hr><br><a name="Multiple-Targets"></a><br><div class="header"><br><p><br>Next: <a href="#Multiple-Rules" accesskey="n" rel="next">Multiple Rules</a>, Previous: <a href="#Special-Targets" accesskey="p" rel="prev">Special Targets</a>, Up: <a href="#Rules" accesskey="u" rel="up">Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Multiple-Targets-in-a-Rule"></a><br><h3 class="section">4.10 Multiple Targets in a Rule</h3><br><a name="index-multiple-targets"></a><br><a name="index-several-targets-in-a-rule"></a><br><a name="index-targets_002c-multiple"></a><br><a name="index-rule_002c-with-multiple-targets"></a><br><br><p>A rule with multiple targets is equivalent to writing many rules, each with<br>one target, and all identical aside from that.  The same recipe applies to<br>all the targets, but its effect may vary because you can substitute the<br>actual target name into the recipe using ‘<samp>$@</samp>’.  The rule contributes<br>the same prerequisites to all the targets also.<br></p><br><p>This is useful in two cases.<br></p><br><ul><br><li> You want just prerequisites, no recipe.  For example:<br><br><div class="example"><br><pre class="example">kbd.o command.o files.o: command.h<br></pre></div><br><br><p>gives an additional prerequisite to each of the three object files<br>mentioned.<br></p><br></li><li> Similar recipes work for all the targets.  The recipes do not need<br>to be absolutely identical, since the automatic variable ‘<samp>$@</samp>’<br>can be used to substitute the particular target to be remade into the<br>commands (see <a href="#Automatic-Variables">Automatic Variables</a>).  For example:<br><br><div class="example"><br><pre class="example">bigoutput littleoutput : text.g<br>        generate text.g -$(subst output,,$@) &gt; $@<br></pre></div><br><a name="index-subst"></a><br><br><p>is equivalent to<br></p><br><div class="example"><br><pre class="example">bigoutput : text.g<br>        generate text.g -big &gt; bigoutput<br>littleoutput : text.g<br>        generate text.g -little &gt; littleoutput<br></pre></div><br><br><p>Here we assume the hypothetical program <code>generate</code> makes two<br>types of output, one if given ‘<samp>-big</samp>’ and one if given<br>‘<samp>-little</samp>’.<br>See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>,<br>for an explanation of the <code>subst</code> function.<br></p></li></ul><br><br><p>Suppose you would like to vary the prerequisites according to the<br>target, much as the variable ‘<samp>$@</samp>’ allows you to vary the recipe.<br>You cannot do this with multiple targets in an ordinary rule, but you<br>can do it with a <em>static pattern rule</em>.  See <a href="#Static-Pattern">Static Pattern Rules</a>.<br></p><br><hr><br><a name="Multiple-Rules"></a><br><div class="header"><br><p><br>Next: <a href="#Static-Pattern" accesskey="n" rel="next">Static Pattern</a>, Previous: <a href="#Multiple-Targets" accesskey="p" rel="prev">Multiple Targets</a>, Up: <a href="#Rules" accesskey="u" rel="up">Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Multiple-Rules-for-One-Target"></a><br><h3 class="section">4.11 Multiple Rules for One Target</h3><br><a name="index-multiple-rules-for-one-target"></a><br><a name="index-several-rules-for-one-target"></a><br><a name="index-rule_002c-multiple-for-one-target"></a><br><a name="index-target_002c-multiple-rules-for-one"></a><br><br><p>One file can be the target of several rules.  All the prerequisites<br>mentioned in all the rules are merged into one list of prerequisites for<br>the target.  If the target is older than any prerequisite from any rule,<br>the recipe is executed.<br></p><br><p>There can only be one recipe to be executed for a file.  If more than<br>one rule gives a recipe for the same file, <code>make</code> uses the last<br>one given and prints an error message.  (As a special case, if the<br>file’s name begins with a dot, no error message is printed.  This odd<br>behavior is only for compatibility with other implementations of<br><code>make</code>… you should avoid using it).  Occasionally it is<br>useful to have the same target invoke multiple recipes which are<br>defined in different parts of your makefile; you can use<br><em>double-colon rules</em> (see <a href="#Double_002dColon">Double-Colon</a>) for this.<br></p><br><p>An extra rule with just prerequisites can be used to give a few extra<br>prerequisites to many files at once.  For example, makefiles often<br>have a variable, such as <code>objects</code>, containing a list of all the<br>compiler output files in the system being made.  An easy way to say<br>that all of them must be recompiled if <samp>config.h</samp> changes is to<br>write the following:<br></p><br><div class="example"><br><pre class="example">objects = foo.o bar.o<br>foo.o : defs.h<br>bar.o : defs.h test.h<br>$(objects) : config.h<br></pre></div><br><br><p>This could be inserted or taken out without changing the rules that really<br>specify how to make the object files, making it a convenient form to use if<br>you wish to add the additional prerequisite intermittently.<br></p><br><p>Another wrinkle is that the additional prerequisites could be<br>specified with a variable that you set with a command line argument to<br><code>make</code> (see <a href="#Overriding">Overriding Variables</a>).  For example,<br></p><br><div class="example"><br><pre class="example">extradeps=<br>$(objects) : $(extradeps)<br></pre></div><br><br><p>means that the command ‘<samp>make extradeps=foo.h</samp>’ will consider<br><samp>foo.h</samp> as a prerequisite of each object file, but plain ‘<samp>make</samp>’<br>will not.<br></p><br><p>If none of the explicit rules for a target has a recipe, then <code>make</code><br>searches for an applicable implicit rule to find one<br>see <a href="#Implicit-Rules">Using Implicit Rules</a>).<br></p><br><hr><br><a name="Static-Pattern"></a><br><div class="header"><br><p><br>Next: <a href="#Double_002dColon" accesskey="n" rel="next">Double-Colon</a>, Previous: <a href="#Multiple-Rules" accesskey="p" rel="prev">Multiple Rules</a>, Up: <a href="#Rules" accesskey="u" rel="up">Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Static-Pattern-Rules"></a><br><h3 class="section">4.12 Static Pattern Rules</h3><br><a name="index-static-pattern-rule"></a><br><a name="index-rule_002c-static-pattern"></a><br><a name="index-pattern-rules_002c-static-_0028not-implicit_0029"></a><br><a name="index-varying-prerequisites"></a><br><a name="index-prerequisites_002c-varying-_0028static-pattern_0029"></a><br><br><p><em>Static pattern rules</em> are rules which specify multiple targets and<br>construct the prerequisite names for each target based on the target name.<br>They are more general than ordinary rules with multiple targets because the<br>targets do not have to have identical prerequisites.  Their prerequisites must<br>be <em>analogous</em>, but not necessarily <em>identical</em>.<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Static-Usage" accesskey="1">Static Usage</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">The syntax of static pattern rules.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Static-versus-Implicit" accesskey="2">Static versus Implicit</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">When are they better than implicit rules?<br></td></tr><br></tbody></table><br><br><hr><br><a name="Static-Usage"></a><br><div class="header"><br><p><br>Next: <a href="#Static-versus-Implicit" accesskey="n" rel="next">Static versus Implicit</a>, Previous: <a href="#Static-Pattern" accesskey="p" rel="prev">Static Pattern</a>, Up: <a href="#Static-Pattern" accesskey="u" rel="up">Static Pattern</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Syntax-of-Static-Pattern-Rules"></a><br><h4 class="subsection">4.12.1 Syntax of Static Pattern Rules</h4><br><a name="index-static-pattern-rule_002c-syntax-of"></a><br><a name="index-pattern-rules_002c-static_002c-syntax-of"></a><br><br><p>Here is the syntax of a static pattern rule:<br></p><br><div class="example"><br><pre class="example"><var>targets</var> …: <var>target-pattern</var>: <var>prereq-patterns</var> …<br>        <var>recipe</var><br>        …<br></pre></div><br><br><p>The <var>targets</var> list specifies the targets that the rule applies to.<br>The targets can contain wildcard characters, just like the targets of<br>ordinary rules (see <a href="#Wildcards">Using Wildcard Characters in File<br>Names</a>).<br></p><br><a name="index-target-pattern_002c-static-_0028not-implicit_0029"></a><br><a name="index-stem"></a><br><p>The <var>target-pattern</var> and <var>prereq-patterns</var> say how to compute the<br>prerequisites of each target.  Each target is matched against the<br><var>target-pattern</var> to extract a part of the target name, called the<br><em>stem</em>.  This stem is substituted into each of the <var>prereq-patterns</var><br>to make the prerequisite names (one from each <var>prereq-pattern</var>).<br></p><br><p>Each pattern normally contains the character ‘<samp>%</samp>’ just once.  When the<br><var>target-pattern</var> matches a target, the ‘<samp>%</samp>’ can match any part of<br>the target name; this part is called the <em>stem</em>.  The rest of the<br>pattern must match exactly.  For example, the target <samp>foo.o</samp> matches<br>the pattern ‘<samp>%.o</samp>’, with ‘<samp>foo</samp>’ as the stem.  The targets<br><samp>foo.c</samp> and <samp>foo.out</samp> do not match that pattern.<br></p><br><a name="index-prerequisite-pattern_002c-static-_0028not-implicit_0029"></a><br><p>The prerequisite names for each target are made by substituting the stem<br>for the ‘<samp>%</samp>’ in each prerequisite pattern.  For example, if one<br>prerequisite pattern is <samp>%.c</samp>, then substitution of the stem<br>‘<samp>foo</samp>’ gives the prerequisite name <samp>foo.c</samp>.  It is legitimate<br>to write a prerequisite pattern that does not contain ‘<samp>%</samp>’; then this<br>prerequisite is the same for all targets.<br></p><br><a name="index-_0025_002c-quoting-in-static-pattern"></a><br><a name="index-_0025_002c-quoting-with-_005c-_0028backslash_0029-1"></a><br><a name="index-_005c-_0028backslash_0029_002c-to-quote-_0025-1"></a><br><a name="index-backslash-_0028_005c_0029_002c-to-quote-_0025-1"></a><br><a name="index-quoting-_0025_002c-in-static-pattern"></a><br><p>‘<samp>%</samp>’ characters in pattern rules can be quoted with preceding<br>backslashes (‘<samp>\</samp>’).  Backslashes that would otherwise quote ‘<samp>%</samp>’<br>characters can be quoted with more backslashes.  Backslashes that quote<br>‘<samp>%</samp>’ characters or other backslashes are removed from the pattern<br>before it is compared to file names or has a stem substituted into it.<br>Backslashes that are not in danger of quoting ‘<samp>%</samp>’ characters go<br>unmolested.  For example, the pattern <samp>the\%weird\%pattern\</samp> has<br>‘<samp>the%weird\</samp>’ preceding the operative ‘<samp>%</samp>’ character, and<br>‘<samp>pattern\</samp>’ following it.  The final two backslashes are left alone<br>because they cannot affect any ‘<samp>%</samp>’ character.<br></p><br><p>Here is an example, which compiles each of <samp>foo.o</samp> and <samp>bar.o</samp><br>from the corresponding <samp>.c</samp> file:<br></p><br><div class="example"><br><pre class="example">objects = foo.o bar.o<br><br>all: $(objects)<br><br>$(objects): %.o: %.c<br>        $(CC) -c $(CFLAGS) $&lt; -o $@<br></pre></div><br><br><p>Here ‘<samp>$&lt;</samp>’ is the automatic variable that holds the name of the<br>prerequisite and ‘<samp>$@</samp>’ is the automatic variable that holds the name<br>of the target; see <a href="#Automatic-Variables">Automatic Variables</a>.<br></p><br><p>Each target specified must match the target pattern; a warning is issued<br>for each target that does not.  If you have a list of files, only some of<br>which will match the pattern, you can use the <code>filter</code> function to<br>remove non-matching file names (see <a href="#Text-Functions">Functions for String Substitution and Analysis</a>):<br></p><br><div class="example"><br><pre class="example">files = foo.elc bar.o lose.o<br><br>$(filter %.o,$(files)): %.o: %.c<br>        $(CC) -c $(CFLAGS) $&lt; -o $@<br>$(filter %.elc,$(files)): %.elc: %.el<br>        emacs -f batch-byte-compile $&lt;<br></pre></div><br><br><p>In this example the result of ‘<samp>$(filter %.o,$(files))</samp>’ is<br><samp>bar.o lose.o</samp>, and the first static pattern rule causes each of<br>these object files to be updated by compiling the corresponding C source<br>file.  The result of ‘<samp>$(filter&nbsp;%.elc,$(files))</samp>’<!-- /@w --> is<br><samp>foo.elc</samp>, so that file is made from <samp>foo.el</samp>.<br></p><br><p>Another example shows how to use <code>$<em></em></code> in static pattern rules:<br><a name="index-_0024_002a_002c-and-static-pattern"></a><br></p><br><div class="example"><br><pre class="example">bigoutput littleoutput : %output : text.g<br>        generate text.g -$ &gt; $@<br></pre></div><br><br><p>When the <code>generate</code> command is run, <code>$<em></em></code> will expand to the<br>stem, either ‘<samp>big</samp>’ or ‘<samp>little</samp>’.<br></p><br><hr><br><a name="Static-versus-Implicit"></a><br><div class="header"><br><p><br>Previous: <a href="#Static-Usage" accesskey="p" rel="prev">Static Usage</a>, Up: <a href="#Static-Pattern" accesskey="u" rel="up">Static Pattern</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Static-Pattern-Rules-versus-Implicit-Rules"></a><br><h4 class="subsection">4.12.2 Static Pattern Rules versus Implicit Rules</h4><br><a name="index-rule_002c-static-pattern-versus-implicit"></a><br><a name="index-static-pattern-rule_002c-versus-implicit"></a><br><br><p>A static pattern rule has much in common with an implicit rule defined as a<br>pattern rule (see <a href="#Pattern-Rules">Defining and Redefining Pattern Rules</a>).<br>Both have a pattern for the target and patterns for constructing the<br>names of prerequisites.  The difference is in how <code>make</code> decides<br><em>when</em> the rule applies.<br></p><br><p>An implicit rule <em>can</em> apply to any target that matches its pattern,<br>but it <em>does</em> apply only when the target has no recipe otherwise<br>specified, and only when the prerequisites can be found.  If more than one<br>implicit rule appears applicable, only one applies; the choice depends on<br>the order of rules.<br></p><br><p>By contrast, a static pattern rule applies to the precise list of targets<br>that you specify in the rule.  It cannot apply to any other target and it<br>invariably does apply to each of the targets specified.  If two conflicting<br>rules apply, and both have recipes, that’s an error.<br></p><br><p>The static pattern rule can be better than an implicit rule for these<br>reasons:<br></p><br><ul><br><li> You may wish to override the usual implicit rule for a few<br>files whose names cannot be categorized syntactically but<br>can be given in an explicit list.<br><br></li><li> If you cannot be sure of the precise contents of the directories<br>you are using, you may not be sure which other irrelevant files<br>might lead <code>make</code> to use the wrong implicit rule.  The choice<br>might depend on the order in which the implicit rule search is done.<br>With static pattern rules, there is no uncertainty: each rule applies<br>to precisely the targets specified.<br></li></ul><br><br><hr><br><a name="Double_002dColon"></a><br><div class="header"><br><p><br>Next: <a href="#Automatic-Prerequisites" accesskey="n" rel="next">Automatic Prerequisites</a>, Previous: <a href="#Static-Pattern" accesskey="p" rel="prev">Static Pattern</a>, Up: <a href="#Rules" accesskey="u" rel="up">Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Double_002dColon-Rules"></a><br><h3 class="section">4.13 Double-Colon Rules</h3><br><a name="index-double_002dcolon-rules"></a><br><a name="index-rule_002c-double_002dcolon-_0028_003a_003a_0029"></a><br><a name="index-multiple-rules-for-one-target-_0028_003a_003a_0029"></a><br><a name="index-_003a_003a-rules-_0028double_002dcolon_0029"></a><br><br><p><em>Double-colon</em> rules are explicit rules written with ‘<samp>::</samp>’<br>instead of ‘<samp>:</samp>’ after the target names.  They are handled<br>differently from ordinary rules when the same target appears in more<br>than one rule.  Pattern rules with double-colons have an entirely<br>different meaning (see <a href="#Match_002dAnything-Rules">Match-Anything Rules</a>).<br></p><br><p>When a target appears in multiple rules, all the rules must be the same<br>type: all ordinary, or all double-colon.  If they are double-colon, each<br>of them is independent of the others.  Each double-colon rule’s recipe<br>is executed if the target is older than any prerequisites of that rule.<br>If there are no prerequisites for that rule, its recipe is always<br>executed (even if the target already exists).  This can result in<br>executing none, any, or all of the double-colon rules.<br></p><br><p>Double-colon rules with the same target are in fact completely separate<br>from one another.  Each double-colon rule is processed individually, just<br>as rules with different targets are processed.<br></p><br><p>The double-colon rules for a target are executed in the order they appear<br>in the makefile.  However, the cases where double-colon rules really make<br>sense are those where the order of executing the recipes would not matter.<br></p><br><p>Double-colon rules are somewhat obscure and not often very useful; they<br>provide a mechanism for cases in which the method used to update a target<br>differs depending on which prerequisite files caused the update, and such<br>cases are rare.<br></p><br><p>Each double-colon rule should specify a recipe; if it does not, an<br>implicit rule will be used if one applies.<br>See <a href="#Implicit-Rules">Using Implicit Rules</a>.<br></p><br><hr><br><a name="Automatic-Prerequisites"></a><br><div class="header"><br><p><br>Previous: <a href="#Double_002dColon" accesskey="p" rel="prev">Double-Colon</a>, Up: <a href="#Rules" accesskey="u" rel="up">Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Generating-Prerequisites-Automatically"></a><br><h3 class="section">4.14 Generating Prerequisites Automatically</h3><br><a name="index-prerequisites_002c-automatic-generation-1"></a><br><a name="index-automatic-generation-of-prerequisites-1"></a><br><a name="index-generating-prerequisites-automatically-1"></a><br><br><p>In the makefile for a program, many of the rules you need to write often<br>say only that some object file depends on some header<br>file.  For example, if <samp>main.c</samp> uses <samp>defs.h</samp> via an<br><code>#include</code>, you would write:<br></p><br><div class="example"><br><pre class="example">main.o: defs.h<br></pre></div><br><br><p>You need this rule so that <code>make</code> knows that it must remake<br><samp>main.o</samp> whenever <samp>defs.h</samp> changes.  You can see that for a<br>large program you would have to write dozens of such rules in your<br>makefile.  And, you must always be very careful to update the makefile<br>every time you add or remove an <code>#include</code>.<br><a name="index-_0023include"></a><br></p><br><a name="index-_002dM-_0028to-compiler_0029"></a><br><p>To avoid this hassle, most modern C compilers can write these rules for<br>you, by looking at the <code>#include</code> lines in the source files.<br>Usually this is done with the ‘<samp>-M</samp>’ option to the compiler.<br>For example, the command:<br></p><br><div class="example"><br><pre class="example">cc -M main.c<br></pre></div><br><br><p>generates the output:<br></p><br><div class="example"><br><pre class="example">main.o : main.c defs.h<br></pre></div><br><br><p>Thus you no longer have to write all those rules yourself.<br>The compiler will do it for you.<br></p><br><p>Note that such a rule constitutes mentioning <samp>main.o</samp> in a<br>makefile, so it can never be considered an intermediate file by<br>implicit rule search.  This means that <code>make</code> won’t ever remove<br>the file after using it; see <a href="#Chained-Rules">Chains of Implicit<br>Rules</a>.<br></p><br><a name="index-make-depend"></a><br><p>With old <code>make</code> programs, it was traditional practice to use this<br>compiler feature to generate prerequisites on demand with a command like<br>‘<samp>make depend</samp>’.  That command would create a file <samp>depend</samp><br>containing all the automatically-generated prerequisites; then the<br>makefile could use <code>include</code> to read them in (see <a href="#Include">Include</a>).<br></p><br><p>In GNU <code>make</code>, the feature of remaking makefiles makes this<br>practice obsolete—you need never tell <code>make</code> explicitly to<br>regenerate the prerequisites, because it always regenerates any makefile<br>that is out of date.  See <a href="#Remaking-Makefiles">Remaking Makefiles</a>.<br></p><br><p>The practice we recommend for automatic prerequisite generation is to have<br>one makefile corresponding to each source file.  For each source file<br><samp><var>name</var>.c</samp> there is a makefile <samp><var>name</var>.d</samp> which lists<br>what files the object file <samp><var>name</var>.o</samp> depends on.  That way<br>only the source files that have changed need to be rescanned to produce<br>the new prerequisites.<br></p><br><p>Here is the pattern rule to generate a file of prerequisites (i.e., a makefile)<br>called <samp><var>name</var>.d</samp> from a C source file called <samp><var>name</var>.c</samp>:<br></p><br><div class="smallexample"><br><pre class="smallexample">%.d: %.c<br>        @set -e; rm -f $@; \<br>         $(CC) -M $(CPPFLAGS) $&lt; &gt; $@.$$$$; \<br>         sed ‘s,($).o[ :]<em>,\1.o $@ : ,g’ &lt; $@.$$$$ &gt; $@; \<br>         rm -f $@.$$$$<br></em></pre></div><br><br><p>See <a href="#Pattern-Rules">Pattern Rules</a>, for information on defining pattern rules.  The<br>‘<samp>-e</samp>’ flag to the shell causes it to exit immediately if the<br><code>$(CC)</code> command (or any other command) fails (exits with a<br>nonzero status).<br><a name="index-_002de-_0028shell-flag_0029"></a><br></p><br><a name="index-_002dMM-_0028to-GNU-compiler_0029"></a><br><p>With the GNU C compiler, you may wish to use the ‘<samp>-MM</samp>’ flag instead<br>of ‘<samp>-M</samp>’.  This omits prerequisites on system header files.<br>See <a href="http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html#Preprocessor-Options" target="_blank" rel="external">Options Controlling the Preprocessor</a> in <cite>Using GNU CC</cite>, for details.<br></p><br><a name="index-sed-_0028shell-command_0029"></a><br><p>The purpose of the <code>sed</code> command is to translate (for example):<br></p><br><div class="example"><br><pre class="example">main.o : main.c defs.h<br></pre></div><br><br><p>into:<br></p><br><div class="example"><br><pre class="example">main.o main.d : main.c defs.h<br></pre></div><br><br><p><a name="index-_002ed"></a><br>This makes each ‘<samp>.d</samp>’ file depend on all the source and header files<br>that the corresponding ‘<samp>.o</samp>’ file depends on.  <code>make</code> then<br>knows it must regenerate the prerequisites whenever any of the source or<br>header files changes.<br></p><br><p>Once you’ve defined the rule to remake the ‘<samp>.d</samp>’ files,<br>you then use the <code>include</code> directive to read them all in.<br>See <a href="#Include">Include</a>.  For example:<br></p><br><div class="example"><br><pre class="example">sources = foo.c bar.c<br><br>include $(sources:.c=.d)<br></pre></div><br><br><p>(This example uses a substitution variable reference to translate the<br>list of source files ‘<samp>foo.c bar.c</samp>’ into a list of prerequisite<br>makefiles, ‘<samp>foo.d bar.d</samp>’.  See <a href="#Substitution-Refs">Substitution Refs</a>, for full<br>information on substitution references.)  Since the ‘<samp>.d</samp>’ files are<br>makefiles like any others, <code>make</code> will remake them as necessary<br>with no further work from you.  See <a href="#Remaking-Makefiles">Remaking Makefiles</a>.<br></p><br><p>Note that the ‘<samp>.d</samp>’ files contain target definitions; you should<br>be sure to place the <code>include</code> directive <em>after</em> the first,<br>default goal in your makefiles or run the risk of having a random<br>object file become the default goal.<br>See <a href="#How-Make-Works">How Make Works</a>.<br></p><br><hr><br><a name="Recipes"></a><br><div class="header"><br><p><br>Next: <a href="#Using-Variables" accesskey="n" rel="next">Using Variables</a>, Previous: <a href="#Rules" accesskey="p" rel="prev">Rules</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Writing-Recipes-in-Rules"></a><br><h2 class="chapter">5 Writing Recipes in Rules</h2><br><a name="index-recipes-1"></a><br><a name="index-recipes_002c-how-to-write"></a><br><a name="index-writing-recipes"></a><br><br><p>The recipe of a rule consists of one or more shell command lines to<br>be executed, one at a time, in the order they appear.  Typically, the<br>result of executing these commands is that the target of the rule is<br>brought up to date.<br></p><br><p>Users use many different shell programs, but recipes in makefiles are<br>always interpreted by <samp>/bin/sh</samp> unless the makefile specifies<br>otherwise.  See <a href="#Execution">Recipe Execution</a>.<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Recipe-Syntax" accesskey="1">Recipe Syntax</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Recipe syntax features and pitfalls.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Echoing" accesskey="2">Echoing</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to control when recipes are echoed.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Execution" accesskey="3">Execution</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How recipes are executed.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Parallel" accesskey="4">Parallel</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How recipes can be executed in parallel.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Errors" accesskey="5">Errors</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">What happens after a recipe execution error.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Interrupts" accesskey="6">Interrupts</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">What happens when a recipe is interrupted.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Recursion" accesskey="7">Recursion</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Invoking <code>make</code> from makefiles.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Canned-Recipes" accesskey="8">Canned Recipes</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Defining canned recipes.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Empty-Recipes" accesskey="9">Empty Recipes</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Defining useful, do-nothing recipes.<br></td></tr><br></tbody></table><br><br><hr><br><a name="Recipe-Syntax"></a><br><div class="header"><br><p><br>Next: <a href="#Echoing" accesskey="n" rel="next">Echoing</a>, Previous: <a href="#Recipes" accesskey="p" rel="prev">Recipes</a>, Up: <a href="#Recipes" accesskey="u" rel="up">Recipes</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Recipe-Syntax-1"></a><br><h3 class="section">5.1 Recipe Syntax</h3><br><a name="index-recipe-syntax"></a><br><a name="index-syntax-of-recipe"></a><br><br><p>Makefiles have the unusual property that there are really two distinct<br>syntaxes in one file.  Most of the makefile uses <code>make</code> syntax<br>(see <a href="#Makefiles">Writing Makefiles</a>).  However, recipes are meant<br>to be interpreted by the shell and so they are written using shell<br>syntax.  The <code>make</code> program does not try to understand shell<br>syntax: it performs only a very few specific translations on the<br>content of the recipe before handing it to the shell.<br></p><br><p>Each line in the recipe must start with a tab (or the first character<br>in the value of the <code>.RECIPEPREFIX</code> variable; see <a href="#Special-Variables">Special Variables</a>), except that the first recipe line may be attached to the<br>target-and-prerequisites line with a semicolon in between.  <em>Any</em><br>line in the makefile that begins with a tab and appears in a “rule<br>context” (that is, after a rule has been started until another rule<br>or variable definition) will be considered part of a recipe for that<br>rule.  Blank lines and lines of just comments may appear among the<br>recipe lines; they are ignored.<br></p><br><p>Some consequences of these rules include:<br></p><br><ul><br><li> A blank line that begins with a tab is not blank: it’s an empty<br>recipe (see <a href="#Empty-Recipes">Empty Recipes</a>).<br><br></li><li> <a name="index-comments_002c-in-recipes"></a><br><a name="index-recipes_002c-comments-in"></a><br><a name="index-_0023-_0028comments_0029_002c-in-recipes"></a><br>A comment in a recipe is not a <code>make</code> comment; it will be<br>passed to the shell as-is.  Whether the shell treats it as a comment<br>or not depends on your shell.<br><br></li><li> A variable definition in a “rule context” which is indented by a tab<br>as the first character on the line, will be considered part of a<br>recipe, not a <code>make</code> variable definition, and passed to the<br>shell.<br><br></li><li> A conditional expression (<code>ifdef</code>, <code>ifeq</code>,<br>etc. see <a href="#Conditional-Syntax">Syntax of Conditionals</a>) in a “rule<br>context” which is indented by a tab as the first character on the<br>line, will be considered part of a recipe and be passed to the shell.<br><br></li></ul><br><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Splitting-Recipe-Lines" accesskey="1">Splitting Recipe Lines</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Breaking long recipe lines for readability.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Variables-in-Recipes" accesskey="2">Variables in Recipes</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Using <code>make</code> variables in recipes.<br></td></tr><br></tbody></table><br><br><hr><br><a name="Splitting-Recipe-Lines"></a><br><div class="header"><br><p><br>Next: <a href="#Variables-in-Recipes" accesskey="n" rel="next">Variables in Recipes</a>, Previous: <a href="#Recipe-Syntax" accesskey="p" rel="prev">Recipe Syntax</a>, Up: <a href="#Recipe-Syntax" accesskey="u" rel="up">Recipe Syntax</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Splitting-Recipe-Lines-1"></a><br><h4 class="subsection">5.1.1 Splitting Recipe Lines</h4><br><a name="index-recipes_002c-splitting"></a><br><a name="index-splitting-recipes"></a><br><a name="index-recipes_002c-backslash-_0028_005c_0029-in"></a><br><a name="index-recipes_002c-quoting-newlines-in"></a><br><a name="index-backslash-_0028_005c_0029_002c-in-recipes"></a><br><a name="index-_005c-_0028backslash_0029_002c-in-recipes"></a><br><a name="index-quoting-newline_002c-in-recipes"></a><br><a name="index-newline_002c-quoting_002c-in-recipes"></a><br><br><p>One of the few ways in which <code>make</code> does interpret recipes is<br>checking for a backslash just before the newline.  As in normal<br>makefile syntax, a single logical recipe line can be split into<br>multiple physical lines in the makefile by placing a backslash before<br>each newline.  A sequence of lines like this is considered a single<br>recipe line, and one instance of the shell will be invoked to run it.<br></p><br><p>However, in contrast to how they are treated in other places in a<br>makefile (see <a href="#Splitting-Lines">Splitting Long Lines</a>),<br>backslash/newline pairs are <em>not</em> removed from the recipe.  Both<br>the backslash and the newline characters are preserved and passed to<br>the shell.  How the backslash/newline is interpreted depends on your<br>shell.  If the first character of the next line after the<br>backslash/newline is the recipe prefix character (a tab by default;<br>see <a href="#Special-Variables">Special Variables</a>), then that character (and only that<br>character) is removed.  Whitespace is never added to the recipe.<br></p><br><p>For example, the recipe for the all target in this makefile:<br></p><br><div class="example"><br><pre class="example">all :<br>        @echo no\<br>space<br>        @echo no\<br>        space<br>        @echo one \<br>        space<br>        @echo one\<br>         space<br></pre></div><br><br><p>consists of four separate shell commands where the output is:<br></p><br><div class="example"><br><pre class="example">nospace<br>nospace<br>one space<br>one space<br></pre></div><br><br><p>As a more complex example, this makefile:<br></p><br><div class="example"><br><pre class="example">all : ; @echo ‘hello \<br>        world’ ; echo “hello \<br>    world”<br></pre></div><br><br><p>will invoke one shell with a command of:<br></p><br><div class="example"><br><pre class="example">echo ‘hello \<br>world’ ; echo “hello \<br>    world”<br></pre></div><br><br><p>which, according to shell quoting rules, will yield the following output:<br></p><br><div class="example"><br><pre class="example">hello \<br>world<br>hello     world<br></pre></div><br><br><p>Notice how the backslash/newline pair was removed inside the string<br>quoted with double quotes (<code>“…”</code>), but not from the string<br>quoted with single quotes (<code>‘…’</code>).  This is the way the<br>default shell (<samp>/bin/sh</samp>) handles backslash/newline pairs.  If<br>you specify a different shell in your makefiles it may treat them<br>differently.<br></p><br><p>Sometimes you want to split a long line inside of single quotes, but<br>you don’t want the backslash/newline to appear in the quoted content.<br>This is often the case when passing scripts to languages such as Perl,<br>where extraneous backslashes inside the script can change its meaning<br>or even be a syntax error.  One simple way of handling this is to<br>place the quoted string, or even the entire command, into a<br><code>make</code> variable then use the variable in the recipe.  In this<br>situation the newline quoting rules for makefiles will be used, and<br>the backslash/newline will be removed.  If we rewrite our example<br>above using this method:<br></p><br><div class="example"><br><pre class="example">HELLO = ‘hello \<br>world’<br><br>all : ; @echo $(HELLO)<br></pre></div><br><br><p>we will get output like this:<br></p><br><div class="example"><br><pre class="example">hello world<br></pre></div><br><br><p>If you like, you can also use target-specific variables<br>(see <a href="#Target_002dspecific">Target-specific Variable Values</a>) to obtain<br>a tighter correspondence between the variable and the recipe that<br>uses it.<br></p><br><hr><br><a name="Variables-in-Recipes"></a><br><div class="header"><br><p><br>Previous: <a href="#Splitting-Recipe-Lines" accesskey="p" rel="prev">Splitting Recipe Lines</a>, Up: <a href="#Recipe-Syntax" accesskey="u" rel="up">Recipe Syntax</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Using-Variables-in-Recipes"></a><br><h4 class="subsection">5.1.2 Using Variables in Recipes</h4><br><a name="index-variable-references-in-recipes"></a><br><a name="index-recipes_002c-using-variables-in"></a><br><br><p>The other way in which <code>make</code> processes recipes is by expanding<br>any variable references in them (see <a href="#Reference">Basics of Variable<br>References</a>).  This occurs after make has finished reading all the<br>makefiles and the target is determined to be out of date; so, the<br>recipes for targets which are not rebuilt are never expanded.<br></p><br><p>Variable and function references in recipes have identical syntax and<br>semantics to references elsewhere in the makefile.  They also have the<br>same quoting rules: if you want a dollar sign to appear in your<br>recipe, you must double it (‘<samp>$$</samp>’).  For shells like the default<br>shell, that use dollar signs to introduce variables, it’s important to<br>keep clear in your mind whether the variable you want to reference is<br>a <code>make</code> variable (use a single dollar sign) or a shell variable<br>(use two dollar signs).  For example:<br></p><br><div class="example"><br><pre class="example">LIST = one two three<br>all:<br>        for i in $(LIST); do \<br>            echo $$i; \<br>        done<br></pre></div><br><br><p>results in the following command being passed to the shell:<br></p><br><div class="example"><br><pre class="example">for i in one two three; do \<br>    echo $i; \<br>done<br></pre></div><br><br><p>which generates the expected result:<br></p><br><div class="example"><br><pre class="example">one<br>two<br>three<br></pre></div><br><br><hr><br><a name="Echoing"></a><br><div class="header"><br><p><br>Next: <a href="#Execution" accesskey="n" rel="next">Execution</a>, Previous: <a href="#Recipe-Syntax" accesskey="p" rel="prev">Recipe Syntax</a>, Up: <a href="#Recipes" accesskey="u" rel="up">Recipes</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Recipe-Echoing"></a><br><h3 class="section">5.2 Recipe Echoing</h3><br><a name="index-echoing-of-recipes"></a><br><a name="index-silent-operation"></a><br><a name="index-_0040-_0028in-recipes_0029"></a><br><a name="index-recipes_002c-echoing"></a><br><a name="index-printing-of-recipes"></a><br><br><p>Normally <code>make</code> prints each line of the recipe before it is<br>executed.  We call this <em>echoing</em> because it gives the appearance<br>that you are typing the lines yourself.<br></p><br><p>When a line starts with ‘<samp>@</samp>’, the echoing of that line is suppressed.<br>The ‘<samp>@</samp>’ is discarded before the line is passed to the shell.<br>Typically you would use this for a command whose only effect is to print<br>something, such as an <code>echo</code> command to indicate progress through<br>the makefile:<br></p><br><div class="example"><br><pre class="example">@echo About to make distribution files<br></pre></div><br><br><a name="index-_002dn"></a><br><a name="index-_002d_002djust_002dprint"></a><br><a name="index-_002d_002ddry_002drun"></a><br><a name="index-_002d_002drecon"></a><br><p>When <code>make</code> is given the flag ‘<samp>-n</samp>’ or ‘<samp>–just-print</samp>’ it<br>only echoes most recipes, without executing them.  See <a href="#Options-Summary">Summary of Options</a>.  In this case even the recipe lines<br>starting with ‘<samp>@</samp>’ are printed.  This flag is useful for finding<br>out which recipes <code>make</code> thinks are necessary without actually<br>doing them.<br></p><br><a name="index-_002ds"></a><br><a name="index-_002d_002dsilent"></a><br><a name="index-_002d_002dquiet"></a><br><a name="index-_002eSILENT-1"></a><br><p>The ‘<samp>-s</samp>’ or ‘<samp>–silent</samp>’<br>flag to <code>make</code> prevents all echoing, as if all recipes<br>started with ‘<samp>@</samp>’.  A rule in the makefile for the special target<br><code>.SILENT</code> without prerequisites has the same effect<br>(see <a href="#Special-Targets">Special Built-in Target Names</a>).<br><code>.SILENT</code> is essentially obsolete since ‘<samp>@</samp>’ is more flexible.<br></p><br><hr><br><a name="Execution"></a><br><div class="header"><br><p><br>Next: <a href="#Parallel" accesskey="n" rel="next">Parallel</a>, Previous: <a href="#Echoing" accesskey="p" rel="prev">Echoing</a>, Up: <a href="#Recipes" accesskey="u" rel="up">Recipes</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Recipe-Execution"></a><br><h3 class="section">5.3 Recipe Execution</h3><br><a name="index-recipe_002c-execution"></a><br><a name="index-execution_002c-of-recipes"></a><br><a name="index-SHELL-_0028recipe-execution_0029"></a><br><br><p>When it is time to execute recipes to update a target, they are<br>executed by invoking a new sub-shell for each line of the recipe,<br>unless the <code>.ONESHELL</code> special target is in effect<br>(see <a href="#One-Shell">Using One Shell</a>)  (In practice, <code>make</code> may<br>take shortcuts that do not affect the results.)<br></p><br><a name="index-cd-_0028shell-command_0029"></a><br><a name="index-shell-variables_002c-setting-in-recipes"></a><br><a name="index-recipes-setting-shell-variables"></a><br><p><strong>Please note:</strong> this implies that setting shell variables and<br>invoking shell commands such as <code>cd</code> that set a context local to<br>each process will not affect the following lines in the recipe.<a name="DOCF2" href="#FOOT2"><sup>2</sup></a>  If you want to use <code>cd</code> to affect the next statement,<br>put both statements in a single recipe line.  Then <code>make</code> will<br>invoke one shell to run the entire line, and the shell will execute<br>the statements in sequence.  For example:<br></p><br><div class="example"><br><pre class="example">foo : bar/lose<br>        cd $(@D) &amp;&amp; gobble $(@F) &gt; ../$@<br></pre></div><br><br><p>Here we use the shell AND operator (<code>&amp;&amp;</code>) so that if the<br><code>cd</code> command fails, the script will fail without trying to invoke<br>the <code>gobble</code> command in the wrong directory, which could cause<br>problems (in this case it would certainly cause <samp>../foo</samp> to be<br>truncated, at least).<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#One-Shell" accesskey="1">One Shell</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">One shell for all lines in a recipe.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Choosing-the-Shell" accesskey="2">Choosing the Shell</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How <code>make</code> chooses the shell used<br>                                  to run recipes.<br></td></tr><br></tbody></table><br><br><hr><br><a name="One-Shell"></a><br><div class="header"><br><p><br>Next: <a href="#Choosing-the-Shell" accesskey="n" rel="next">Choosing the Shell</a>, Previous: <a href="#Execution" accesskey="p" rel="prev">Execution</a>, Up: <a href="#Execution" accesskey="u" rel="up">Execution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Using-One-Shell"></a><br><h4 class="subsection">5.3.1 Using One Shell</h4><br><a name="index-recipe-lines_002c-single-shell"></a><br><a name="index-_002eONESHELL_002c-use-of"></a><br><a name="index-_002eONESHELL-1"></a><br><br><p>Sometimes you would prefer that all the lines in the recipe be passed<br>to a single invocation of the shell.  There are generally two<br>situations where this is useful: first, it can improve performance in<br>makefiles where recipes consist of many command lines, by avoiding<br>extra processes.  Second, you might want newlines to be included in<br>your recipe command (for example perhaps you are using a very<br>different interpreter as your <code>SHELL</code>).  If the <code>.ONESHELL</code><br>special target appears anywhere in the makefile then <em>all</em><br>recipe lines for each target will be provided to a single invocation<br>of the shell.  Newlines between recipe lines will be preserved.  For<br>example:<br></p><br><div class="example"><br><pre class="example">.ONESHELL:<br>foo : bar/lose<br>        cd $(@D)<br>        gobble $(@F) &gt; ../$@<br></pre></div><br><br><p>would now work as expected even though the commands are on different<br>recipe lines.<br></p><br><p>If <code>.ONESHELL</code> is provided, then only the first line of the<br>recipe will be checked for the special prefix characters (‘<samp>@</samp>’,<br>‘<samp>-</samp>’, and ‘<samp>+</samp>’).  Subsequent lines will include the special<br>characters in the recipe line when the <code>SHELL</code> is invoked.  If<br>you want your recipe to start with one of these special characters<br>you’ll need to arrange for them to not be the first characters on the<br>first line, perhaps by adding a comment or similar.  For example, this<br>would be a syntax error in Perl because the first ‘<samp>@</samp>’ is removed<br>by make:<br></p><br><div class="example"><br><pre class="example">.ONESHELL:<br>SHELL = /usr/bin/perl<br>.SHELLFLAGS = -e<br>show :<br>        @f = qw(a b c);<br>        print “@f\n”;<br></pre></div><br><br><p>However, either of these alternatives would work properly:<br></p><br><div class="example"><br><pre class="example">.ONESHELL:<br>SHELL = /usr/bin/perl<br>.SHELLFLAGS = -e<br>show :<br>        # Make sure “@” is not the first character on the first line<br>        @f = qw(a b c);<br>        print “@f\n”;<br></pre></div><br><br><p>or<br></p><br><div class="example"><br><pre class="example">.ONESHELL:<br>SHELL = /usr/bin/perl<br>.SHELLFLAGS = -e<br>show :<br>        my @f = qw(a b c);<br>        print “@f\n”;<br></pre></div><br><br><p>As a special feature, if <code>SHELL</code> is determined to be a<br>POSIX-style shell, the special prefix characters in “internal”<br>recipe lines will <em>removed</em> before the recipe is processed.  This<br>feature is intended to allow existing makefiles to add the<br><code>.ONESHELL</code> special target and still run properly without<br>extensive modifications.  Since the special prefix characters are not<br>legal at the beginning of a line in a POSIX shell script this is not a<br>loss in functionality.  For example, this works as expected:<br></p><br><div class="example"><br><pre class="example">.ONESHELL:<br>foo : bar/lose<br>        @cd $(@D)<br>        @gobble $(@F) &gt; ../$@<br></pre></div><br><br><p>Even with this special feature, however, makefiles with<br><code>.ONESHELL</code> will behave differently in ways that could be<br>noticeable.  For example, normally if any line in the recipe fails,<br>that causes the rule to fail and no more recipe lines are processed.<br>Under <code>.ONESHELL</code> a failure of any but the final recipe line will<br>not be noticed by <code>make</code>.  You can modify <code>.SHELLFLAGS</code> to<br>add the <code>-e</code> option to the shell which will cause any failure<br>anywhere in the command line to cause the shell to fail, but this<br>could itself cause your recipe to behave differently.  Ultimately you<br>may need to harden your recipe lines to allow them to work with<br><code>.ONESHELL</code>.<br></p><br><hr><br><a name="Choosing-the-Shell"></a><br><div class="header"><br><p><br>Previous: <a href="#One-Shell" accesskey="p" rel="prev">One Shell</a>, Up: <a href="#Execution" accesskey="u" rel="up">Execution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Choosing-the-Shell-1"></a><br><h4 class="subsection">5.3.2 Choosing the Shell</h4><br><a name="index-shell_002c-choosing-the"></a><br><a name="index-SHELL_002c-value-of"></a><br><a name="index-_002eSHELLFLAGS_002c-value-of"></a><br><br><a name="index-SHELL"></a><br><a name="index-_002eSHELLFLAGS"></a><br><p>The program used as the shell is taken from the variable <code>SHELL</code>.<br>If this variable is not set in your makefile, the program<br><samp>/bin/sh</samp> is used as the shell.  The argument(s) passed to the<br>shell are taken from the variable <code>.SHELLFLAGS</code>.  The default<br>value of <code>.SHELLFLAGS</code> is <code>-c</code> normally, or <code>-ec</code> in<br>POSIX-conforming mode.<br></p><br><a name="index-environment_002c-SHELL-in"></a><br><p>Unlike most variables, the variable <code>SHELL</code> is never set from the<br>environment.  This is because the <code>SHELL</code> environment variable is<br>used to specify your personal choice of shell program for interactive<br>use.  It would be very bad for personal choices like this to affect the<br>functioning of makefiles.  See <a href="#Environment">Variables from the<br>Environment</a>.<br></p><br><p>Furthermore, when you do set <code>SHELL</code> in your makefile that value<br>is <em>not</em> exported in the environment to recipe lines that<br><code>make</code> invokes.  Instead, the value inherited from the user’s<br>environment, if any, is exported.  You can override this behavior by<br>explicitly exporting <code>SHELL</code> (see <a href="#Variables_002fRecursion">Communicating Variables to a Sub-<code>make</code></a>), forcing it to be<br>passed in the environment to recipe lines.<br></p><br><a name="index-MAKESHELL-_0028MS_002dDOS-alternative-to-SHELL_0029"></a><br><p>However, on MS-DOS and MS-Windows the value of <code>SHELL</code> in the<br>environment <strong>is</strong> used, since on those systems most users do not<br>set this variable, and therefore it is most likely set specifically to<br>be used by <code>make</code>.  On MS-DOS, if the setting of <code>SHELL</code> is<br>not suitable for <code>make</code>, you can set the variable<br><code>MAKESHELL</code> to the shell that <code>make</code> should use; if set it<br>will be used as the shell instead of the value of <code>SHELL</code>.<br></p><br><a name="Choosing-a-Shell-in-DOS-and-Windows"></a><br><h4 class="subsubheading">Choosing a Shell in DOS and Windows</h4><br><a name="index-shell_002c-in-DOS-and-Windows"></a><br><a name="index-DOS_002c-choosing-a-shell-in"></a><br><a name="index-Windows_002c-choosing-a-shell-in"></a><br><br><p>Choosing a shell in MS-DOS and MS-Windows is much more complex than on<br>other systems.<br></p><br><a name="index-COMSPEC"></a><br><p>On MS-DOS, if <code>SHELL</code> is not set, the value of the variable<br><code>COMSPEC</code> (which is always set) is used instead.<br></p><br><a name="index-SHELL_002c-MS_002dDOS-specifics"></a><br><p>The processing of lines that set the variable <code>SHELL</code> in Makefiles<br>is different on MS-DOS.  The stock shell, <samp>command.com</samp>, is<br>ridiculously limited in its functionality and many users of <code>make</code><br>tend to install a replacement shell.  Therefore, on MS-DOS, <code>make</code><br>examines the value of <code>SHELL</code>, and changes its behavior based on<br>whether it points to a Unix-style or DOS-style shell.  This allows<br>reasonable functionality even if <code>SHELL</code> points to<br><samp>command.com</samp>.<br></p><br><p>If <code>SHELL</code> points to a Unix-style shell, <code>make</code> on MS-DOS<br>additionally checks whether that shell can indeed be found; if not, it<br>ignores the line that sets <code>SHELL</code>.  In MS-DOS, GNU <code>make</code><br>searches for the shell in the following places:<br></p><br><ol><br><li> In the precise place pointed to by the value of <code>SHELL</code>.  For<br>example, if the makefile specifies ‘<samp>SHELL = /bin/sh</samp>’, <code>make</code><br>will look in the directory <samp>/bin</samp> on the current drive.<br><br></li><li> In the current directory.<br><br></li><li> In each of the directories in the <code>PATH</code> variable, in order.<br><br></li></ol><br><br><p>In every directory it examines, <code>make</code> will first look for the<br>specific file (<samp>sh</samp> in the example above).  If this is not found,<br>it will also look in that directory for that file with one of the known<br>extensions which identify executable files.  For example <samp>.exe</samp>,<br><samp>.com</samp>, <samp>.bat</samp>, <samp>.btm</samp>, <samp>.sh</samp>, and some others.<br></p><br><p>If any of these attempts is successful, the value of <code>SHELL</code> will<br>be set to the full pathname of the shell as found.  However, if none of<br>these is found, the value of <code>SHELL</code> will not be changed, and thus<br>the line that sets it will be effectively ignored.  This is so<br><code>make</code> will only support features specific to a Unix-style shell if<br>such a shell is actually installed on the system where <code>make</code> runs.<br></p><br><p>Note that this extended search for the shell is limited to the cases<br>where <code>SHELL</code> is set from the Makefile; if it is set in the<br>environment or command line, you are expected to set it to the full<br>pathname of the shell, exactly as things are on Unix.<br></p><br><p>The effect of the above DOS-specific processing is that a Makefile that<br>contains ‘<samp>SHELL = /bin/sh</samp>’ (as many Unix makefiles do), will work<br>on MS-DOS unaltered if you have e.g. <samp>sh.exe</samp> installed in some<br>directory along your <code>PATH</code>.<br></p><br><a name="index-SHELL-1"></a><br><a name="index-_002eSHELLFLAGS-1"></a><br><br><hr><br><a name="Parallel"></a><br><div class="header"><br><p><br>Next: <a href="#Errors" accesskey="n" rel="next">Errors</a>, Previous: <a href="#Execution" accesskey="p" rel="prev">Execution</a>, Up: <a href="#Recipes" accesskey="u" rel="up">Recipes</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Parallel-Execution"></a><br><h3 class="section">5.4 Parallel Execution</h3><br><a name="index-recipes_002c-execution-in-parallel"></a><br><a name="index-parallel-execution"></a><br><a name="index-execution_002c-in-parallel"></a><br><a name="index-job-slots"></a><br><a name="index-_002dj"></a><br><a name="index-_002d_002djobs"></a><br><br><p>GNU <code>make</code> knows how to execute several recipes at once.<br>Normally, <code>make</code> will execute only one recipe at a time, waiting<br>for it to finish before executing the next.  However, the ‘<samp>-j</samp>’ or<br>‘<samp>–jobs</samp>’ option tells <code>make</code> to execute many recipes<br>simultaneously.  You can inhibit parallelism in a particular makefile<br>with the <code>.NOTPARALLEL</code> pseudo-target (see <a href="#Special-Targets">Special Built-in Target Names</a>).<br></p><br><p>On MS-DOS, the ‘<samp>-j</samp>’ option has no effect, since that system doesn’t<br>support multi-processing.<br></p><br><p>If the ‘<samp>-j</samp>’ option is followed by an integer, this is the number of<br>recipes to execute at once; this is called the number of <em>job slots</em>.<br>If there is nothing looking like an integer after the ‘<samp>-j</samp>’ option,<br>there is no limit on the number of job slots.  The default number of job<br>slots is one, which means serial execution (one thing at a time).<br></p><br><p>Handling recursive <code>make</code> invocations raises issues for parallel<br>execution.  For more information on this, see <a href="#Options_002fRecursion">Communicating Options to a Sub-<code>make</code></a>.<br></p><br><p>If a recipe fails (is killed by a signal or exits with a nonzero<br>status), and errors are not ignored for that recipe (see <a href="#Errors">Errors in Recipes</a>), the remaining recipe lines to remake the same<br>target will not be run.  If a recipe fails and the ‘<samp>-k</samp>’ or<br>‘<samp>–keep-going</samp>’ option was not given (see <a href="#Options-Summary">Summary of Options</a>), <code>make</code> aborts execution.  If make<br>terminates for any reason (including a signal) with child processes<br>running, it waits for them to finish before actually exiting.<br></p><br><a name="index-load-average"></a><br><a name="index-limiting-jobs-based-on-load"></a><br><a name="index-jobs_002c-limiting-based-on-load"></a><br><a name="index-_002dl-_0028load-average_0029"></a><br><a name="index-_002d_002dmax_002dload"></a><br><a name="index-_002d_002dload_002daverage"></a><br><p>When the system is heavily loaded, you will probably want to run fewer jobs<br>than when it is lightly loaded.  You can use the ‘<samp>-l</samp>’ option to tell<br><code>make</code> to limit the number of jobs to run at once, based on the load<br>average.  The ‘<samp>-l</samp>’ or ‘<samp>–max-load</samp>’<br>option is followed by a floating-point number.  For<br>example,<br></p><br><div class="example"><br><pre class="example">-l 2.5<br></pre></div><br><br><p>will not let <code>make</code> start more than one job if the load average is<br>above 2.5.  The ‘<samp>-l</samp>’ option with no following number removes the<br>load limit, if one was given with a previous ‘<samp>-l</samp>’ option.<br></p><br><p>More precisely, when <code>make</code> goes to start up a job, and it already has<br>at least one job running, it checks the current load average; if it is not<br>lower than the limit given with ‘<samp>-l</samp>’, <code>make</code> waits until the load<br>average goes below that limit, or until all the other jobs finish.<br></p><br><p>By default, there is no load limit.<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Parallel-Output" accesskey="1">Parallel Output</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Handling output during parallel execution<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Parallel-Input" accesskey="2">Parallel Input</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Handling input during parallel execution<br></td></tr><br></tbody></table><br><br><hr><br><a name="Parallel-Output"></a><br><div class="header"><br><p><br>Next: <a href="#Parallel-Input" accesskey="n" rel="next">Parallel Input</a>, Previous: <a href="#Parallel" accesskey="p" rel="prev">Parallel</a>, Up: <a href="#Parallel" accesskey="u" rel="up">Parallel</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Output-During-Parallel-Execution"></a><br><h4 class="subsection">5.4.1 Output During Parallel Execution</h4><br><a name="index-output-during-parallel-execution"></a><br><a name="index-parallel-execution_002c-output-during"></a><br><br><p>When running several recipes in parallel the output from each<br>recipe appears as soon as it is generated, with the result that<br>messages from different recipes may be interspersed, sometimes even<br>appearing on the same line.  This can make reading the output very<br>difficult.<br></p><br><a name="index-_002d_002doutput_002dsync"></a><br><a name="index-_002dO"></a><br><p>To avoid this you can use the ‘<samp>–output-sync</samp>’ (‘<samp>-O</samp>’) option.<br>This option instructs <code>make</code> to save the output from the commands<br>it invokes and print it all once the commands are completed.<br>Additionally, if there are multiple recursive <code>make</code> invocations<br>running in parallel, they will communicate so that only one of them is<br>generating output at a time.<br></p><br><p>If working directory printing is enabled (see <a href="#g_t_002dw-Option">The<br>‘<samp>–print-directory</samp>’ Option</a>), the enter/leave messages are<br>printed around each output grouping.  If you prefer not to see these<br>messages add the ‘<samp>–no-print-directory</samp>’ option to <code>MAKEFLAGS</code>.<br></p><br><p>There are four levels of granularity when synchronizing output,<br>specified by giving an argument to the option (e.g.,  ‘<samp>-Oline</samp>’ or<br>‘<samp>–output-sync=recurse</samp>’).<br></p><br><dl compact="compact"><br><dt><code>none</code></dt><br><dd><p>This is the default: all output is sent directly as it is generated and<br>no synchronization is performed.<br></p><br></dd><br><dt><code>line</code></dt><br><dd><p>Output from each individual line of the recipe is grouped and printed<br>as soon as that line is complete.  If a recipe consists of multiple<br>lines, they may be interspersed with lines from other recipes.<br></p><br></dd><br><dt><code>target</code></dt><br><dd><p>Output from the entire recipe for each target is grouped and printed<br>once the target is complete.  This is the default if the<br><code>–output-sync</code> or <code>-O</code> option is given with no argument.<br></p><br></dd><br><dt><code>recurse</code></dt><br><dd><p>Output from each recursive invocation of <code>make</code> is grouped and<br>printed once the recursive invocation is complete.<br></p><br></dd><br></dl><br><br><p>Regardless of the mode chosen, the total build time will be the same.<br>The only difference is in how the output appears.<br></p><br><p>The ‘<samp>target</samp>’ and ‘<samp>recurse</samp>’ modes both collect the output of<br>the entire recipe of a target and display it uninterrupted when the<br>recipe completes.  The difference between them is in how recipes that<br>contain recursive invocations of <code>make</code> are treated<br>(see <a href="#Recursion">Recursive Use of <code>make</code></a>).  For all recipes<br>which have no recursive lines, the ‘<samp>target</samp>’ and ‘<samp>recurse</samp>’<br>modes behave identically.<br></p><br><p>If the ‘<samp>recurse</samp>’ mode is chosen, recipes that contain recursive<br><code>make</code> invocations are treated the same as other targets: the<br>output from the recipe, including the output from the recursive<br><code>make</code>, is saved and printed after the entire recipe is complete.<br>This ensures output from all the targets built by a given recursive<br><code>make</code> instance are grouped together, which may make the output<br>easier to understand.  However it also leads to long periods of time<br>during the build where no output is seen, followed by large bursts of<br>output.  If you are not watching the build as it proceeds, but instead<br>viewing a log of the build after the fact, this may be the best option<br>for you.<br></p><br><p>If you are watching the output, the long gaps of quiet during the<br>build can be frustrating.  The ‘<samp>target</samp>’ output synchronization<br>mode detects when <code>make</code> is going to be invoked recursively,<br>using the standard methods, and it will not synchronize the output of<br>those lines.  The recursive <code>make</code> will perform the<br>synchronization for its targets and the output from each will be<br>displayed immediately when it completes.  Be aware that output from<br>recursive lines of the recipe are not synchronized (for example if<br>the recursive line prints a message before running <code>make</code>, that<br>message will not be synchronized).<br></p><br><p>The ‘<samp>line</samp>’ mode can be useful for front-ends that are watching<br>the output of <code>make</code> to track when recipes are started and<br>completed.<br></p><br><p>Some programs invoked by <code>make</code> may behave differently if they<br>determine they’re writing output to a terminal versus a file (often<br>described as “interactive” vs. “non-interactive” modes).  For<br>example, many programs that can display colorized output will not do<br>so if they determine they are not writing to a terminal.  If your<br>makefile invokes a program like this then using the output<br>synchronization options will cause the program to believe it’s running<br>in “non-interactive” mode even though the output will ultimately go<br>to the terminal.<br></p><br><hr><br><a name="Parallel-Input"></a><br><div class="header"><br><p><br>Previous: <a href="#Parallel-Output" accesskey="p" rel="prev">Parallel Output</a>, Up: <a href="#Parallel" accesskey="u" rel="up">Parallel</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Input-During-Parallel-Execution"></a><br><h4 class="subsection">5.4.2 Input During Parallel Execution</h4><br><a name="index-input-during-parallel-execution"></a><br><a name="index-parallel-execution_002c-input-during"></a><br><a name="index-standard-input"></a><br><br><p>Two processes cannot both take input from the same device at the same<br>time.  To make sure that only one recipe tries to take input from the<br>terminal at once, <code>make</code> will invalidate the standard input<br>streams of all but one running recipe.  If another recipe attempts to<br>read from standard input it will usually incur a fatal error (a<br>‘<samp>Broken pipe</samp>’ signal).<br><a name="index-broken-pipe"></a><br></p><br><p>It is unpredictable which recipe will have a valid standard input stream<br>(which will come from the terminal, or wherever you redirect the standard<br>input of <code>make</code>).  The first recipe run will always get it first, and<br>the first recipe started after that one finishes will get it next, and so<br>on.<br></p><br><p>We will change how this aspect of <code>make</code> works if we find a better<br>alternative.  In the mean time, you should not rely on any recipe using<br>standard input at all if you are using the parallel execution feature; but<br>if you are not using this feature, then standard input works normally in<br>all recipes.<br></p><br><hr><br><a name="Errors"></a><br><div class="header"><br><p><br>Next: <a href="#Interrupts" accesskey="n" rel="next">Interrupts</a>, Previous: <a href="#Parallel" accesskey="p" rel="prev">Parallel</a>, Up: <a href="#Recipes" accesskey="u" rel="up">Recipes</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Errors-in-Recipes"></a><br><h3 class="section">5.5 Errors in Recipes</h3><br><a name="index-errors-_0028in-recipes_0029"></a><br><a name="index-recipes_002c-errors-in"></a><br><a name="index-exit-status-_0028errors_0029"></a><br><br><p>After each shell invocation returns, <code>make</code> looks at its exit<br>status.  If the shell completed successfully (the exit status is<br>zero), the next line in the recipe is executed in a new shell; after<br>the last line is finished, the rule is finished.<br></p><br><p>If there is an error (the exit status is nonzero), <code>make</code> gives up on<br>the current rule, and perhaps on all rules.<br></p><br><p>Sometimes the failure of a certain recipe line does not indicate a problem.<br>For example, you may use the <code>mkdir</code> command to ensure that a<br>directory exists.  If the directory already exists, <code>mkdir</code> will<br>report an error, but you probably want <code>make</code> to continue regardless.<br></p><br><a name="index-_002d-_0028in-recipes_0029"></a><br><p>To ignore errors in a recipe line, write a ‘<samp>-</samp>’ at the beginning<br>of the line’s text (after the initial tab).  The ‘<samp>-</samp>’ is discarded<br>before the line is passed to the shell for execution.<br></p><br><p>For example,<br></p><br><div class="example"><br><pre class="example">clean:<br>        -rm -f .o<br></pre></div><br><a name="index-rm-_0028shell-command_0029-3"></a><br><br><p>This causes <code>make</code> to continue even if <code>rm</code> is unable to<br>remove a file.<br></p><br><a name="index-_002di"></a><br><a name="index-_002d_002dignore_002derrors"></a><br><a name="index-_002eIGNORE-1"></a><br><p>When you run <code>make</code> with the ‘<samp>-i</samp>’ or ‘<samp>–ignore-errors</samp>’<br>flag, errors are ignored in all recipes of all rules.  A rule in the<br>makefile for the special target <code>.IGNORE</code> has the same effect, if<br>there are no prerequisites.  These ways of ignoring errors are obsolete<br>because ‘<samp>-</samp>’ is more flexible.<br></p><br><p>When errors are to be ignored, because of either a ‘<samp>-</samp>’ or the<br>‘<samp>-i</samp>’ flag, <code>make</code> treats an error return just like success,<br>except that it prints out a message that tells you the status code<br>the shell exited with, and says that the error has been ignored.<br></p><br><p>When an error happens that <code>make</code> has not been told to ignore,<br>it implies that the current target cannot be correctly remade, and neither<br>can any other that depends on it either directly or indirectly.  No further<br>recipes will be executed for these targets, since their preconditions<br>have not been achieved.<br></p><br><br><a name="index-_002dk"></a><br><a name="index-_002d_002dkeep_002dgoing"></a><br><p>Normally <code>make</code> gives up immediately in this circumstance, returning a<br>nonzero status.  However, if the ‘<samp>-k</samp>’ or ‘<samp>–keep-going</samp>’<br>flag is specified, <code>make</code><br>continues to consider the other prerequisites of the pending targets,<br>remaking them if necessary, before it gives up and returns nonzero status.<br>For example, after an error in compiling one object file, ‘<samp>make -k</samp>’<br>will continue compiling other object files even though it already knows<br>that linking them will be impossible.  See <a href="#Options-Summary">Summary of Options</a>.<br></p><br><p>The usual behavior assumes that your purpose is to get the specified<br>targets up to date; once <code>make</code> learns that this is impossible, it<br>might as well report the failure immediately.  The ‘<samp>-k</samp>’ option says<br>that the real purpose is to test as many of the changes made in the<br>program as possible, perhaps to find several independent problems so<br>that you can correct them all before the next attempt to compile.  This<br>is why Emacs’ <code>compile</code> command passes the ‘<samp>-k</samp>’ flag by<br>default.<br><a name="index-Emacs-_0028M_002dx-compile_0029"></a><br></p><br><a name="index-_002eDELETE_005fON_005fERROR-1"></a><br><a name="index-deletion-of-target-files"></a><br><a name="index-removal-of-target-files"></a><br><a name="index-target_002c-deleting-on-error"></a><br><p>Usually when a recipe line fails, if it has changed the target file at all,<br>the file is corrupted and cannot be used—or at least it is not<br>completely updated.  Yet the file’s time stamp says that it is now up to<br>date, so the next time <code>make</code> runs, it will not try to update that<br>file.  The situation is just the same as when the shell is killed by a<br>signal; see <a href="#Interrupts">Interrupts</a>.  So generally the right thing to do is to<br>delete the target file if the recipe fails after beginning to change<br>the file.  <code>make</code> will do this if <code>.DELETE_ON_ERROR</code> appears<br>as a target.  This is almost always what you want <code>make</code> to do, but<br>it is not historical practice; so for compatibility, you must explicitly<br>request it.<br></p><br><hr><br><a name="Interrupts"></a><br><div class="header"><br><p><br>Next: <a href="#Recursion" accesskey="n" rel="next">Recursion</a>, Previous: <a href="#Errors" accesskey="p" rel="prev">Errors</a>, Up: <a href="#Recipes" accesskey="u" rel="up">Recipes</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Interrupting-or-Killing-make"></a><br><h3 class="section">5.6 Interrupting or Killing <code>make</code></h3><br><a name="index-interrupt"></a><br><a name="index-signal"></a><br><a name="index-deletion-of-target-files-1"></a><br><a name="index-removal-of-target-files-1"></a><br><a name="index-target_002c-deleting-on-interrupt"></a><br><a name="index-killing-_0028interruption_0029"></a><br><br><p>If <code>make</code> gets a fatal signal while a shell is executing, it may<br>delete the target file that the recipe was supposed to update.  This is<br>done if the target file’s last-modification time has changed since<br><code>make</code> first checked it.<br></p><br><p>The purpose of deleting the target is to make sure that it is remade from<br>scratch when <code>make</code> is next run.  Why is this?  Suppose you type<br><kbd>Ctrl-c</kbd> while a compiler is running, and it has begun to write an<br>object file <samp>foo.o</samp>.  The <kbd>Ctrl-c</kbd> kills the compiler, resulting<br>in an incomplete file whose last-modification time is newer than the source<br>file <samp>foo.c</samp>.  But <code>make</code> also receives the <kbd>Ctrl-c</kbd> signal<br>and deletes this incomplete file.  If <code>make</code> did not do this, the next<br>invocation of <code>make</code> would think that <samp>foo.o</samp> did not require<br>updating—resulting in a strange error message from the linker when it<br>tries to link an object file half of which is missing.<br></p><br><a name="index-_002ePRECIOUS-1"></a><br><p>You can prevent the deletion of a target file in this way by making the<br>special target <code>.PRECIOUS</code> depend on it.  Before remaking a target,<br><code>make</code> checks to see whether it appears on the prerequisites of<br><code>.PRECIOUS</code>, and thereby decides whether the target should be deleted<br>if a signal happens.  Some reasons why you might do this are that the<br>target is updated in some atomic fashion, or exists only to record a<br>modification-time (its contents do not matter), or must exist at all<br>times to prevent other sorts of trouble.<br></p><br><hr><br><a name="Recursion"></a><br><div class="header"><br><p><br>Next: <a href="#Canned-Recipes" accesskey="n" rel="next">Canned Recipes</a>, Previous: <a href="#Interrupts" accesskey="p" rel="prev">Interrupts</a>, Up: <a href="#Recipes" accesskey="u" rel="up">Recipes</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Recursive-Use-of-make"></a><br><h3 class="section">5.7 Recursive Use of <code>make</code></h3><br><a name="index-recursion"></a><br><a name="index-subdirectories_002c-recursion-for"></a><br><br><p>Recursive use of <code>make</code> means using <code>make</code> as a command in a<br>makefile.  This technique is useful when you want separate makefiles for<br>various subsystems that compose a larger system.  For example, suppose you<br>have a sub-directory <samp>subdir</samp> which has its own makefile, and you would<br>like the containing directory’s makefile to run <code>make</code> on the<br>sub-directory.  You can do it by writing this:<br></p><br><div class="example"><br><pre class="example">subsystem:<br>        cd subdir &amp;&amp; $(MAKE)<br></pre></div><br><br><p>or, equivalently, this (see <a href="#Options-Summary">Summary of Options</a>):<br></p><br><div class="example"><br><pre class="example">subsystem:<br>        $(MAKE) -C subdir<br></pre></div><br><a name="index-_002dC"></a><br><a name="index-_002d_002ddirectory"></a><br><br><p>You can write recursive <code>make</code> commands just by copying this example,<br>but there are many things to know about how they work and why, and about<br>how the sub-<code>make</code> relates to the top-level <code>make</code>.  You may<br>also find it useful to declare targets that invoke recursive<br><code>make</code> commands as ‘<samp>.PHONY</samp>’ (for more discussion on when<br>this is useful, see <a href="#Phony-Targets">Phony Targets</a>).<br></p><br><a name="index-CURDIR"></a><br><p>For your convenience, when GNU <code>make</code> starts (after it has<br>processed any <code>-C</code> options) it sets the variable <code>CURDIR</code> to<br>the pathname of the current working directory.  This value is never<br>touched by <code>make</code> again: in particular note that if you include<br>files from other directories the value of <code>CURDIR</code> does not<br>change.  The value has the same precedence it would have if it were<br>set in the makefile (by default, an environment variable <code>CURDIR</code><br>will not override this value).  Note that setting this variable has no<br>impact on the operation of <code>make</code> (it does not cause <code>make</code><br>to change its working directory, for example).<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#MAKE-Variable" accesskey="1">MAKE Variable</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">The special effects of using ‘<samp>$(MAKE)</samp>’.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Variables_002fRecursion" accesskey="2">Variables/Recursion</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to communicate variables to a sub-<code>make</code>.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Options_002fRecursion" accesskey="3">Options/Recursion</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to communicate options to a sub-<code>make</code>.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#g_t_002dw-Option" accesskey="4">-w Option</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How the ‘<samp>-w</samp>’ or ‘<samp>–print-directory</samp>’ option<br>                                  helps debug use of recursive <code>make</code> commands.<br></td></tr><br></tbody></table><br><br><hr><br><a name="MAKE-Variable"></a><br><div class="header"><br><p><br>Next: <a href="#Variables_002fRecursion" accesskey="n" rel="next">Variables/Recursion</a>, Previous: <a href="#Recursion" accesskey="p" rel="prev">Recursion</a>, Up: <a href="#Recursion" accesskey="u" rel="up">Recursion</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="How-the-MAKE-Variable-Works"></a><br><h4 class="subsection">5.7.1 How the <code>MAKE</code> Variable Works</h4><br><a name="index-MAKE"></a><br><a name="index-recursion_002c-and-MAKE-variable"></a><br><br><p>Recursive <code>make</code> commands should always use the variable <code>MAKE</code>,<br>not the explicit command name ‘<samp>make</samp>’, as shown here:<br></p><br><div class="example"><br><pre class="example">subsystem:<br>        cd subdir &amp;&amp; $(MAKE)<br></pre></div><br><br><p>The value of this variable is the file name with which <code>make</code> was<br>invoked.  If this file name was <samp>/bin/make</samp>, then the recipe executed<br>is ‘<samp>cd subdir &amp;&amp; /bin/make</samp>’.  If you use a special version of<br><code>make</code> to run the top-level makefile, the same special version will be<br>executed for recursive invocations.<br><a name="index-cd-_0028shell-command_0029-1"></a><br></p><br><a name="index-_002b_002c-and-recipes"></a><br><p>As a special feature, using the variable <code>MAKE</code> in the recipe of<br>a rule alters the effects of the ‘<samp>-t</samp>’ (‘<samp>–touch</samp>’), ‘<samp>-n</samp>’<br>(‘<samp>–just-print</samp>’), or ‘<samp>-q</samp>’ (‘<samp><span class="nolinebreak">–question</span></samp>’<!-- /@w -->) option.<br>Using the <code>MAKE</code> variable has the same effect as using a ‘<samp>+</samp>’<br>character at the beginning of the recipe line.  See <a href="#Instead-of-Execution">Instead of Executing the Recipes</a>.  This special feature<br>is only enabled if the <code>MAKE</code> variable appears directly in the<br>recipe: it does not apply if the <code>MAKE</code> variable is referenced<br>through expansion of another variable.  In the latter case you must<br>use the ‘<samp>+</samp>’ token to get these special effects.<br></p><br><p>Consider the command ‘<samp>make -t</samp>’ in the above example.  (The<br>‘<samp>-t</samp>’ option marks targets as up to date without actually running<br>any recipes; see <a href="#Instead-of-Execution">Instead of Execution</a>.)  Following the usual<br>definition of ‘<samp>-t</samp>’, a ‘<samp>make -t</samp>’ command in the example would<br>create a file named <samp>subsystem</samp> and do nothing else.  What you<br>really want it to do is run ‘<samp>cd&nbsp;subdir&nbsp;&amp;&amp;<!-- /@w --> make&nbsp;<span class="nolinebreak">-t</span><!-- /@w --></samp>’; but<br>that would require executing the recipe, and ‘<samp>-t</samp>’ says not to<br>execute recipes.<br><a name="index-_002dt_002c-and-recursion"></a><br><a name="index-recursion_002c-and-_002dt"></a><br><a name="index-_002d_002dtouch_002c-and-recursion"></a><br></p><br><p>The special feature makes this do what you want: whenever a recipe<br>line of a rule contains the variable <code>MAKE</code>, the flags ‘<samp>-t</samp>’,<br>‘<samp>-n</samp>’ and ‘<samp>-q</samp>’ do not apply to that line.  Recipe lines<br>containing <code>MAKE</code> are executed normally despite the presence of a<br>flag that causes most recipes not to be run.  The usual<br><code>MAKEFLAGS</code> mechanism passes the flags to the sub-<code>make</code><br>(see <a href="#Options_002fRecursion">Communicating Options to a<br>Sub-<code>make</code></a>), so your request to touch the files, or print the<br>recipes, is propagated to the subsystem.<br></p><br><hr><br><a name="Variables_002fRecursion"></a><br><div class="header"><br><p><br>Next: <a href="#Options_002fRecursion" accesskey="n" rel="next">Options/Recursion</a>, Previous: <a href="#MAKE-Variable" accesskey="p" rel="prev">MAKE Variable</a>, Up: <a href="#Recursion" accesskey="u" rel="up">Recursion</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Communicating-Variables-to-a-Sub_002dmake"></a><br><h4 class="subsection">5.7.2 Communicating Variables to a Sub-<code>make</code></h4><br><a name="index-sub_002dmake"></a><br><a name="index-environment_002c-and-recursion"></a><br><a name="index-exporting-variables"></a><br><a name="index-variables_002c-environment"></a><br><a name="index-variables_002c-exporting"></a><br><a name="index-recursion_002c-and-environment"></a><br><a name="index-recursion_002c-and-variables"></a><br><br><p>Variable values of the top-level <code>make</code> can be passed to the<br>sub-<code>make</code> through the environment by explicit request.  These<br>variables are defined in the sub-<code>make</code> as defaults, but they do<br>not override variables defined in the makefile used by<br>the sub-<code>make</code> unless you use the ‘<samp>-e</samp>’ switch (see <a href="#Options-Summary">Summary of Options</a>).<br></p><br><p>To pass down, or <em>export</em>, a variable, <code>make</code> adds the<br>variable and its value to the environment for running each line of the<br>recipe.  The sub-<code>make</code>, in turn, uses the environment to<br>initialize its table of variable values.  See <a href="#Environment">Variables from the Environment</a>.<br></p><br><p>Except by explicit request, <code>make</code> exports a variable only if it<br>is either defined in the environment initially or set on the command<br>line, and if its name consists only of letters, numbers, and underscores.<br>Some shells cannot cope with environment variable names consisting of<br>characters other than letters, numbers, and underscores.<br></p><br><a name="index-SHELL_002c-exported-value"></a><br><p>The value of the <code>make</code> variable <code>SHELL</code> is not exported.<br>Instead, the value of the <code>SHELL</code> variable from the invoking<br>environment is passed to the sub-<code>make</code>.  You can force<br><code>make</code> to export its value for <code>SHELL</code> by using the<br><code>export</code> directive, described below.  See <a href="#Choosing-the-Shell">Choosing the Shell</a>.<br></p><br><p>The special variable <code>MAKEFLAGS</code> is always exported (unless you<br>unexport it).  <code>MAKEFILES</code> is exported if you set it to anything.<br></p><br><p><code>make</code> automatically passes down variable values that were defined<br>on the command line, by putting them in the <code>MAKEFLAGS</code> variable.<br>See <a href="#Options_002fRecursion">Options/Recursion</a>.<br></p><br><p>Variables are <em>not</em> normally passed down if they were created by<br>default by <code>make</code> (see <a href="#Implicit-Variables">Variables Used by<br>Implicit Rules</a>).  The sub-<code>make</code> will define these for<br>itself.<br></p><br><a name="index-export"></a><br><p>If you want to export specific variables to a sub-<code>make</code>, use the<br><code>export</code> directive, like this:<br></p><br><div class="example"><br><pre class="example">export <var>variable</var> …<br></pre></div><br><br><p><a name="index-unexport"></a><br>If you want to <em>prevent</em> a variable from being exported, use the<br><code>unexport</code> directive, like this:<br></p><br><div class="example"><br><pre class="example">unexport <var>variable</var> …<br></pre></div><br><br><p>In both of these forms, the arguments to <code>export</code> and<br><code>unexport</code> are expanded, and so could be variables or functions<br>which expand to a (list of) variable names to be (un)exported.<br></p><br><p>As a convenience, you can define a variable and export it at the same<br>time by doing:<br></p><br><div class="example"><br><pre class="example">export <var>variable</var> = value<br></pre></div><br><br><p>has the same result as:<br></p><br><div class="example"><br><pre class="example"><var>variable</var> = value<br>export <var>variable</var><br></pre></div><br><br><p>and<br></p><br><div class="example"><br><pre class="example">export <var>variable</var> := value<br></pre></div><br><br><p>has the same result as:<br></p><br><div class="example"><br><pre class="example"><var>variable</var> := value<br>export <var>variable</var><br></pre></div><br><br><p>Likewise,<br></p><br><div class="example"><br><pre class="example">export <var>variable</var> += value<br></pre></div><br><br><p>is just like:<br></p><br><div class="example"><br><pre class="example"><var>variable</var> += value<br>export <var>variable</var><br></pre></div><br><br><p>See <a href="#Appending">Appending More Text to Variables</a>.<br></p><br><p>You may notice that the <code>export</code> and <code>unexport</code> directives<br>work in <code>make</code> in the same way they work in the shell, <code>sh</code>.<br></p><br><p>If you want all variables to be exported by default, you can use<br><code>export</code> by itself:<br></p><br><div class="example"><br><pre class="example">export<br></pre></div><br><br><p>This tells <code>make</code> that variables which are not explicitly mentioned<br>in an <code>export</code> or <code>unexport</code> directive should be exported.<br>Any variable given in an <code>unexport</code> directive will still <em>not</em><br>be exported.  If you use <code>export</code> by itself to export variables by<br>default, variables whose names contain characters other than<br>alphanumerics and underscores will not be exported unless specifically<br>mentioned in an <code>export</code> directive.<br></p><br><a name="index-_002eEXPORT_005fALL_005fVARIABLES-1"></a><br><p>The behavior elicited by an <code>export</code> directive by itself was the<br>default in older versions of GNU <code>make</code>.  If your makefiles depend<br>on this behavior and you want to be compatible with old versions of<br><code>make</code>, you can write a rule for the special target<br><code>.EXPORT_ALL_VARIABLES</code> instead of using the <code>export</code> directive.<br>This will be ignored by old <code>make</code>s, while the <code>export</code><br>directive will cause a syntax error.<br><a name="index-compatibility-in-exporting"></a><br></p><br><p>Likewise, you can use <code>unexport</code> by itself to tell <code>make</code><br><em>not</em> to export variables by default.  Since this is the default<br>behavior, you would only need to do this if <code>export</code> had been used<br>by itself earlier (in an included makefile, perhaps).  You<br><strong>cannot</strong> use <code>export</code> and <code>unexport</code> by themselves to<br>have variables exported for some recipes and not for others.  The last<br><code>export</code> or <code>unexport</code> directive that appears by itself<br>determines the behavior for the entire run of <code>make</code>.<br></p><br><a name="index-MAKELEVEL"></a><br><a name="index-recursion_002c-level-of"></a><br><p>As a special feature, the variable <code>MAKELEVEL</code> is changed when it<br>is passed down from level to level.  This variable’s value is a string<br>which is the depth of the level as a decimal number.  The value is<br>‘<samp>0</samp>’ for the top-level <code>make</code>; ‘<samp>1</samp>’ for a sub-<code>make</code>,<br>‘<samp>2</samp>’ for a sub-sub-<code>make</code>, and so on.  The incrementation<br>happens when <code>make</code> sets up the environment for a recipe.<br></p><br><p>The main use of <code>MAKELEVEL</code> is to test it in a conditional<br>directive (see <a href="#Conditionals">Conditional Parts of Makefiles</a>); this<br>way you can write a makefile that behaves one way if run recursively and<br>another way if run directly by you.<br></p><br><a name="index-MAKEFILES-1"></a><br><p>You can use the variable <code>MAKEFILES</code> to cause all sub-<code>make</code><br>commands to use additional makefiles.  The value of <code>MAKEFILES</code> is<br>a whitespace-separated list of file names.  This variable, if defined in<br>the outer-level makefile, is passed down through the environment; then<br>it serves as a list of extra makefiles for the sub-<code>make</code> to read<br>before the usual or specified ones.  See <a href="#MAKEFILES-Variable">The<br>Variable <code>MAKEFILES</code></a>.<br></p><br><hr><br><a name="Options_002fRecursion"></a><br><div class="header"><br><p><br>Next: <a href="#g_t_002dw-Option" accesskey="n" rel="next">-w Option</a>, Previous: <a href="#Variables_002fRecursion" accesskey="p" rel="prev">Variables/Recursion</a>, Up: <a href="#Recursion" accesskey="u" rel="up">Recursion</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Communicating-Options-to-a-Sub_002dmake"></a><br><h4 class="subsection">5.7.3 Communicating Options to a Sub-<code>make</code></h4><br><a name="index-options_002c-and-recursion"></a><br><a name="index-recursion_002c-and-options"></a><br><br><a name="index-MAKEFLAGS"></a><br><p>Flags such as ‘<samp>-s</samp>’ and ‘<samp>-k</samp>’ are passed automatically to the<br>sub-<code>make</code> through the variable <code>MAKEFLAGS</code>.  This variable is<br>set up automatically by <code>make</code> to contain the flag letters that<br><code>make</code> received.  Thus, if you do ‘<samp>make&nbsp;<span class="nolinebreak">-ks</span></samp>’<!-- /@w --> then<br><code>MAKEFLAGS</code> gets the value ‘<samp>ks</samp>’.<br></p><br><p>As a consequence, every sub-<code>make</code> gets a value for <code>MAKEFLAGS</code><br>in its environment.  In response, it takes the flags from that value and<br>processes them as if they had been given as arguments.<br>See <a href="#Options-Summary">Summary of Options</a>.<br></p><br><a name="index-command-line-variable-definitions_002c-and-recursion"></a><br><a name="index-variables_002c-command-line_002c-and-recursion"></a><br><a name="index-recursion_002c-and-command-line-variable-definitions"></a><br><p>Likewise variables defined on the command line are passed to the<br>sub-<code>make</code> through <code>MAKEFLAGS</code>.  Words in the value of<br><code>MAKEFLAGS</code> that contain ‘<samp>=</samp>’, <code>make</code> treats as variable<br>definitions just as if they appeared on the command line.<br>See <a href="#Overriding">Overriding Variables</a>.<br></p><br><a name="index-_002dC_002c-and-recursion"></a><br><a name="index-_002df_002c-and-recursion"></a><br><a name="index-_002do_002c-and-recursion"></a><br><a name="index-_002dW_002c-and-recursion"></a><br><a name="index-_002d_002ddirectory_002c-and-recursion"></a><br><a name="index-_002d_002dfile_002c-and-recursion"></a><br><a name="index-_002d_002dold_002dfile_002c-and-recursion"></a><br><a name="index-_002d_002dassume_002dold_002c-and-recursion"></a><br><a name="index-_002d_002dassume_002dnew_002c-and-recursion"></a><br><a name="index-_002d_002dnew_002dfile_002c-and-recursion"></a><br><a name="index-recursion_002c-and-_002dC"></a><br><a name="index-recursion_002c-and-_002df"></a><br><a name="index-recursion_002c-and-_002do"></a><br><a name="index-recursion_002c-and-_002dW"></a><br><p>The options ‘<samp>-C</samp>’, ‘<samp>-f</samp>’, ‘<samp>-o</samp>’, and ‘<samp>-W</samp>’ are not put<br>into <code>MAKEFLAGS</code>; these options are not passed down.<br></p><br><a name="index-_002dj_002c-and-recursion"></a><br><a name="index-_002d_002djobs_002c-and-recursion"></a><br><a name="index-recursion_002c-and-_002dj"></a><br><a name="index-job-slots_002c-and-recursion"></a><br><p>The ‘<samp>-j</samp>’ option is a special case (see <a href="#Parallel">Parallel Execution</a>).<br>If you set it to some numeric value ‘<samp>N</samp>’ and your operating system<br>supports it (most any UNIX system will; others typically won’t), the<br>parent <code>make</code> and all the sub-<code>make</code>s will communicate to<br>ensure that there are only ‘<samp>N</samp>’ jobs running at the same time<br>between them all.  Note that any job that is marked recursive<br>(see <a href="#Instead-of-Execution">Instead of Executing Recipes</a>)<br>doesn’t count against the total jobs (otherwise we could get ‘<samp>N</samp>’<br>sub-<code>make</code>s running and have no slots left over for any real work!)<br></p><br><p>If your operating system doesn’t support the above communication, then<br>no ‘<samp>-j</samp>’ is added to <code>MAKEFLAGS</code>, so that sub-<code>make</code>s<br>run in non-parallel mode.  If the ‘<samp><span class="nolinebreak">-j</span></samp>’<!-- /@w --> option were passed down<br>to sub-<code>make</code>s you would get many more jobs running in parallel<br>than you asked for.  If you give ‘<samp>-j</samp>’ with no numeric argument,<br>meaning to run as many jobs as possible in parallel, this is passed<br>down, since multiple infinities are no more than one.<br></p><br><p>If you do not want to pass the other flags down, you must change the<br>value of <code>MAKEFLAGS</code>, like this:<br></p><br><div class="example"><br><pre class="example">subsystem:<br>        cd subdir &amp;&amp; $(MAKE) MAKEFLAGS=<br></pre></div><br><br><a name="index-MAKEOVERRIDES"></a><br><p>The command line variable definitions really appear in the variable<br><code>MAKEOVERRIDES</code>, and <code>MAKEFLAGS</code> contains a reference to this<br>variable.  If you do want to pass flags down normally, but don’t want to<br>pass down the command line variable definitions, you can reset<br><code>MAKEOVERRIDES</code> to empty, like this:<br></p><br><div class="example"><br><pre class="example">MAKEOVERRIDES =<br></pre></div><br><br><p><a name="index-Arg-list-too-long"></a><br><a name="index-E2BIG"></a><br>This is not usually useful to do.  However, some systems have a small<br>fixed limit on the size of the environment, and putting so much<br>information into the value of <code>MAKEFLAGS</code> can exceed it.  If you<br>see the error message ‘<samp>Arg list too long</samp>’, this may be the problem.<br><a name="index-_002ePOSIX-1"></a><br><a name="index-POSIX-1"></a><br>(For strict compliance with POSIX.2, changing <code>MAKEOVERRIDES</code> does<br>not affect <code>MAKEFLAGS</code> if the special target ‘<samp>.POSIX</samp>’ appears<br>in the makefile.  You probably do not care about this.)<br></p><br><a name="index-MFLAGS"></a><br><p>A similar variable <code>MFLAGS</code> exists also, for historical<br>compatibility.  It has the same value as <code>MAKEFLAGS</code> except that it<br>does not contain the command line variable definitions, and it always<br>begins with a hyphen unless it is empty (<code>MAKEFLAGS</code> begins with a<br>hyphen only when it begins with an option that has no single-letter<br>version, such as ‘<samp>–warn-undefined-variables</samp>’).  <code>MFLAGS</code> was<br>traditionally used explicitly in the recursive <code>make</code> command, like<br>this:<br></p><br><div class="example"><br><pre class="example">subsystem:<br>        cd subdir &amp;&amp; $(MAKE) $(MFLAGS)<br></pre></div><br><br><p>but now <code>MAKEFLAGS</code> makes this usage redundant.  If you want your<br>makefiles to be compatible with old <code>make</code> programs, use this<br>technique; it will work fine with more modern <code>make</code> versions too.<br></p><br><a name="index-setting-options-from-environment"></a><br><a name="index-options_002c-setting-from-environment"></a><br><a name="index-setting-options-in-makefiles"></a><br><a name="index-options_002c-setting-in-makefiles"></a><br><p>The <code>MAKEFLAGS</code> variable can also be useful if you want to have<br>certain options, such as ‘<samp>-k</samp>’ (see <a href="#Options-Summary">Summary of<br>Options</a>), set each time you run <code>make</code>.  You simply put a value for<br><code>MAKEFLAGS</code> in your environment.  You can also set <code>MAKEFLAGS</code> in<br>a makefile, to specify additional flags that should also be in effect for<br>that makefile.  (Note that you cannot use <code>MFLAGS</code> this way.  That<br>variable is set only for compatibility; <code>make</code> does not interpret a<br>value you set for it in any way.)<br></p><br><p>When <code>make</code> interprets the value of <code>MAKEFLAGS</code> (either from the<br>environment or from a makefile), it first prepends a hyphen if the value<br>does not already begin with one.  Then it chops the value into words<br>separated by blanks, and parses these words as if they were options given<br>on the command line (except that ‘<samp>-C</samp>’, ‘<samp>-f</samp>’, ‘<samp>-h</samp>’,<br>‘<samp>-o</samp>’, ‘<samp>-W</samp>’, and their long-named versions are ignored; and there<br>is no error for an invalid option).<br></p><br><p>If you do put <code>MAKEFLAGS</code> in your environment, you should be sure not<br>to include any options that will drastically affect the actions of<br><code>make</code> and undermine the purpose of makefiles and of <code>make</code><br>itself.  For instance, the ‘<samp>-t</samp>’, ‘<samp>-n</samp>’, and ‘<samp>-q</samp>’ options, if<br>put in one of these variables, could have disastrous consequences and would<br>certainly have at least surprising and probably annoying effects.<br></p><br><p>If you’d like to run other implementations of <code>make</code> in addition<br>to GNU <code>make</code>, and hence do not want to add GNU<br><code>make</code>-specific flags to the <code>MAKEFLAGS</code> variable, you can<br>add them to the <code>GNUMAKEFLAGS</code> variable instead.  This variable<br>is parsed just before <code>MAKEFLAGS</code>, in the same way as<br><code>MAKEFLAGS</code>.  When <code>make</code> constructs <code>MAKEFLAGS</code> to<br>pass to a recursive <code>make</code> it will include all flags, even those<br>taken from <code>GNUMAKEFLAGS</code>.  As a result, after parsing<br><code>GNUMAKEFLAGS</code> GNU <code>make</code> sets this variable to the empty<br>string to avoid duplicating flags during recursion.<br></p><br><p>It’s best to use <code>GNUMAKEFLAGS</code> only with flags which won’t<br>materially change the behavior of your makefiles.  If your makefiles<br>require GNU make anyway then simply use <code>MAKEFLAGS</code>.  Flags such<br>as ‘<samp>–no-print-directory</samp>’ or ‘<samp>–output-sync</samp>’ may be<br>appropriate for <code>GNUMAKEFLAGS</code>.<br></p><br><hr><br><a name="g_t_002dw-Option"></a><br><div class="header"><br><p><br>Previous: <a href="#Options_002fRecursion" accesskey="p" rel="prev">Options/Recursion</a>, Up: <a href="#Recursion" accesskey="u" rel="up">Recursion</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="The-_002d_002dprint_002ddirectory-Option"></a><br><h4 class="subsection">5.7.4 The ‘<samp>–print-directory</samp>’ Option</h4><br><a name="index-directories_002c-printing-them"></a><br><a name="index-printing-directories"></a><br><a name="index-recursion_002c-and-printing-directories"></a><br><br><p>If you use several levels of recursive <code>make</code> invocations, the<br>‘<samp>-w</samp>’ or ‘<samp><span class="nolinebreak">–print-directory</span></samp>’<!-- /@w --> option can make the output a<br>lot easier to understand by showing each directory as <code>make</code><br>starts processing it and as <code>make</code> finishes processing it.  For<br>example, if ‘<samp>make -w</samp>’ is run in the directory <samp>/u/gnu/make</samp>,<br><code>make</code> will print a line of the form:<br></p><br><div class="example"><br><pre class="example">make: Entering directory <code>/u/gnu/make&#39;.
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;before doing anything else, and a line of the form:
&lt;/p&gt;
&lt;div class=&quot;example&quot;&gt;
&lt;pre class=&quot;example&quot;&gt;make: Leaving directory</code>/u/gnu/make’.<br></pre></div><br><br><p>when processing is completed.<br></p><br><a name="index-_002dC_002c-and-_002dw"></a><br><a name="index-_002d_002ddirectory_002c-and-_002d_002dprint_002ddirectory"></a><br><a name="index-recursion_002c-and-_002dw"></a><br><a name="index-_002dw_002c-and-_002dC"></a><br><a name="index-_002dw_002c-and-recursion"></a><br><a name="index-_002d_002dprint_002ddirectory_002c-and-_002d_002ddirectory"></a><br><a name="index-_002d_002dprint_002ddirectory_002c-and-recursion"></a><br><a name="index-_002d_002dno_002dprint_002ddirectory"></a><br><a name="index-_002d_002dprint_002ddirectory_002c-disabling"></a><br><a name="index-_002dw_002c-disabling"></a><br><p>Normally, you do not need to specify this option because ‘<samp>make</samp>’<br>does it for you: ‘<samp>-w</samp>’ is turned on automatically when you use the<br>‘<samp>-C</samp>’ option, and in sub-<code>make</code>s.  <code>make</code> will not<br>automatically turn on ‘<samp>-w</samp>’ if you also use ‘<samp>-s</samp>’, which says to<br>be silent, or if you use ‘<samp>–no-print-directory</samp>’ to explicitly<br>disable it.<br></p><br><hr><br><a name="Canned-Recipes"></a><br><div class="header"><br><p><br>Next: <a href="#Empty-Recipes" accesskey="n" rel="next">Empty Recipes</a>, Previous: <a href="#Recursion" accesskey="p" rel="prev">Recursion</a>, Up: <a href="#Recipes" accesskey="u" rel="up">Recipes</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Defining-Canned-Recipes"></a><br><h3 class="section">5.8 Defining Canned Recipes</h3><br><a name="index-canned-recipes"></a><br><a name="index-recipes_002c-canned"></a><br><a name="index-sequences-of-commands"></a><br><a name="index-commands_002c-sequences-of"></a><br><br><p>When the same sequence of commands is useful in making various<br>targets, you can define it as a canned sequence with the <code>define</code><br>directive, and refer to the canned sequence from the recipes for those<br>targets.  The canned sequence is actually a variable, so the name must<br>not conflict with other variable names.<br></p><br><p>Here is an example of defining a canned recipe:<br></p><br><div class="example"><br><pre class="example">define run-yacc =<br>yacc $(firstword $^)<br>mv y.tab.c $@<br>endef<br></pre></div><br><a name="index-yacc"></a><br><br><p>Here <code>run-yacc</code> is the name of the variable being defined;<br><code>endef</code> marks the end of the definition; the lines in between are the<br>commands.  The <code>define</code> directive does not expand variable references<br>and function calls in the canned sequence; the ‘<samp>$</samp>’ characters,<br>parentheses, variable names, and so on, all become part of the value of the<br>variable you are defining.<br>See <a href="#Multi_002dLine">Defining Multi-Line Variables</a>,<br>for a complete explanation of <code>define</code>.<br></p><br><p>The first command in this example runs Yacc on the first prerequisite of<br>whichever rule uses the canned sequence.  The output file from Yacc is<br>always named <samp>y.tab.c</samp>.  The second command moves the output to the<br>rule’s target file name.<br></p><br><p>To use the canned sequence, substitute the variable into the recipe of a<br>rule.  You can substitute it like any other variable<br>(see <a href="#Reference">Basics of Variable References</a>).<br>Because variables defined by <code>define</code> are recursively expanded<br>variables, all the variable references you wrote inside the <code>define</code><br>are expanded now.  For example:<br></p><br><div class="example"><br><pre class="example">foo.c : foo.y<br>        $(run-yacc)<br></pre></div><br><br><p>‘<samp>foo.y</samp>’ will be substituted for the variable ‘<samp>$^</samp>’ when it occurs in<br><code>run-yacc</code>’s value, and ‘<samp>foo.c</samp>’ for ‘<samp>$@</samp>’.<br></p><br><p>This is a realistic example, but this particular one is not needed in<br>practice because <code>make</code> has an implicit rule to figure out these<br>commands based on the file names involved<br>(see <a href="#Implicit-Rules">Using Implicit Rules</a>).<br></p><br><a name="index-_0040_002c-and-define"></a><br><a name="index-_002d_002c-and-define"></a><br><a name="index-_002b_002c-and-define"></a><br><p>In recipe execution, each line of a canned sequence is treated just as<br>if the line appeared on its own in the rule, preceded by a tab.  In<br>particular, <code>make</code> invokes a separate sub-shell for each line.  You<br>can use the special prefix characters that affect command lines<br>(‘<samp>@</samp>’, ‘<samp>-</samp>’, and ‘<samp>+</samp>’) on each line of a canned sequence.<br>See <a href="#Recipes">Writing Recipes in Rules</a>.<br>For example, using this canned sequence:<br></p><br><div class="example"><br><pre class="example">define frobnicate =<br>@echo “frobnicating target $@”<br>frob-step-1 $&lt; -o $@-step-1<br>frob-step-2 $@-step-1 -o $@<br>endef<br></pre></div><br><br><p><code>make</code> will not echo the first line, the <code>echo</code> command.<br>But it <em>will</em> echo the following two recipe lines.<br></p><br><p>On the other hand, prefix characters on the recipe line that refers to<br>a canned sequence apply to every line in the sequence.  So the rule:<br></p><br><div class="example"><br><pre class="example">frob.out: frob.in<br>        @$(frobnicate)<br></pre></div><br><br><p>does not echo <em>any</em> recipe lines.<br>(See <a href="#Echoing">Recipe Echoing</a>, for a full explanation of ‘<samp>@</samp>’.)<br></p><br><hr><br><a name="Empty-Recipes"></a><br><div class="header"><br><p><br>Previous: <a href="#Canned-Recipes" accesskey="p" rel="prev">Canned Recipes</a>, Up: <a href="#Recipes" accesskey="u" rel="up">Recipes</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Using-Empty-Recipes"></a><br><h3 class="section">5.9 Using Empty Recipes</h3><br><a name="index-empty-recipes"></a><br><a name="index-recipes_002c-empty"></a><br><br><p>It is sometimes useful to define recipes which do nothing.  This is done<br>simply by giving a recipe that consists of nothing but whitespace.  For<br>example:<br></p><br><div class="example"><br><pre class="example">target: ;<br></pre></div><br><br><p>defines an empty recipe for <samp>target</samp>.  You could also use a line<br>beginning with a recipe prefix character to define an empty recipe,<br>but this would be confusing because such a line looks empty.<br></p><br><a name="index-_002eDEFAULT_002c-and-empty-recipes"></a><br><p>You may be wondering why you would want to define a recipe that does<br>nothing.  One reason this is useful is to prevent a target from<br>getting implicit recipes (from implicit rules or the <code>.DEFAULT</code><br>special target; see <a href="#Implicit-Rules">Implicit Rules</a> and see <a href="#Last-Resort">Defining Last-Resort Default Rules</a>).<br></p><br><p>Empty recipes can also be used to avoid errors for targets that will<br>be created as a side-effect of another recipe: if the target does not<br>exist the empty recipe ensures that <code>make</code> won’t complain that it<br>doesn’t know how to build the target, and <code>make</code> will assume the<br>target is out of date.<br></p><br><p>You may be inclined to define empty recipes for targets that are not<br>actual files, but only exist so that their prerequisites can be<br>remade.  However, this is not the best way to do that, because the<br>prerequisites may not be remade properly if the target file actually<br>does exist.  See <a href="#Phony-Targets">Phony Targets</a>, for a better way to<br>do this.<br></p><br><hr><br><a name="Using-Variables"></a><br><div class="header"><br><p><br>Next: <a href="#Conditionals" accesskey="n" rel="next">Conditionals</a>, Previous: <a href="#Recipes" accesskey="p" rel="prev">Recipes</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="How-to-Use-Variables"></a><br><h2 class="chapter">6 How to Use Variables</h2><br><a name="index-variable"></a><br><a name="index-value"></a><br><a name="index-recursive-variable-expansion"></a><br><a name="index-simple-variable-expansion"></a><br><br><p>A <em>variable</em> is a name defined in a makefile to represent a string<br>of text, called the variable’s <em>value</em>.  These values are<br>substituted by explicit request into targets, prerequisites, recipes,<br>and other parts of the makefile.  (In some other versions of <code>make</code>,<br>variables are called <em>macros</em>.)<br><a name="index-macro"></a><br></p><br><p>Variables and functions in all parts of a makefile are expanded when<br>read, except for in recipes, the right-hand sides of variable<br>definitions using ‘<samp>=</samp>’, and the bodies of variable definitions<br>using the <code>define</code> directive.<br></p><br><p>Variables can represent lists of file names, options to pass to compilers,<br>programs to run, directories to look in for source files, directories to<br>write output in, or anything else you can imagine.<br></p><br><p>A variable name may be any sequence of characters not containing<br>‘<samp>:</samp>’, ‘<samp>#</samp>’, ‘<samp>=</samp>’, or whitespace.  However, variable names<br>containing characters other than letters, numbers, and underscores<br>should be considered carefully, as in some shells they cannot be<br>passed through the environment to a sub-<code>make</code><br>(see <a href="#Variables_002fRecursion">Communicating Variables to a<br>Sub-<code>make</code></a>).  Variable names beginning with ‘<samp>.</samp>’ and an<br>uppercase letter may be given special meaning in future versions of<br><code>make</code>.<br></p><br><p>Variable names are case-sensitive.  The names ‘<samp>foo</samp>’, ‘<samp>FOO</samp>’,<br>and ‘<samp>Foo</samp>’ all refer to different variables.<br></p><br><p>It is traditional to use upper case letters in variable names, but we<br>recommend using lower case letters for variable names that serve internal<br>purposes in the makefile, and reserving upper case for parameters that<br>control implicit rules or for parameters that the user should override with<br>command options (see <a href="#Overriding">Overriding Variables</a>).<br></p><br><p>A few variables have names that are a single punctuation character or<br>just a few characters.  These are the <em>automatic variables</em>, and<br>they have particular specialized uses.  See <a href="#Automatic-Variables">Automatic Variables</a>.<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Reference" accesskey="1">Reference</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to use the value of a variable.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Flavors" accesskey="2">Flavors</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Variables come in two flavors.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Advanced" accesskey="3">Advanced</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Advanced features for referencing a variable.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Values" accesskey="4">Values</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">All the ways variables get their values.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Setting" accesskey="5">Setting</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to set a variable in the makefile.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Appending" accesskey="6">Appending</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to append more text to the old value<br>                                  of a variable.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Override-Directive" accesskey="7">Override Directive</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to set a variable in the makefile even if<br>                                  the user has set it with a command argument.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Multi_002dLine" accesskey="8">Multi-Line</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">An alternate way to set a variable<br>                                  to a multi-line string.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Undefine-Directive" accesskey="9">Undefine Directive</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to undefine a variable so that it appears<br>                                  as if it was never set.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Environment">Environment</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Variable values can come from the environment.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Target_002dspecific">Target-specific</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Variable values can be defined on a per-target<br>                                  basis.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Pattern_002dspecific">Pattern-specific</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Target-specific variable values can be applied<br>                                  to a group of targets that match a pattern.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Suppressing-Inheritance">Suppressing Inheritance</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Suppress inheritance of variables.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Special-Variables">Special Variables</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Variables with special meaning or behavior.<br></td></tr><br></tbody></table><br><br><hr><br><a name="Reference"></a><br><div class="header"><br><p><br>Next: <a href="#Flavors" accesskey="n" rel="next">Flavors</a>, Previous: <a href="#Using-Variables" accesskey="p" rel="prev">Using Variables</a>, Up: <a href="#Using-Variables" accesskey="u" rel="up">Using Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Basics-of-Variable-References"></a><br><h3 class="section">6.1 Basics of Variable References</h3><br><a name="index-variables_002c-how-to-reference"></a><br><a name="index-reference-to-variables"></a><br><a name="index-_0024_002c-in-variable-reference"></a><br><a name="index-dollar-sign-_0028_0024_0029_002c-in-variable-reference"></a><br><br><p>To substitute a variable’s value, write a dollar sign followed by the name<br>of the variable in parentheses or braces: either ‘<samp>$(foo)</samp>’ or<br>‘<samp>${foo}</samp>’ is a valid reference to the variable <code>foo</code>.  This<br>special significance of ‘<samp>$</samp>’ is why you must write ‘<samp>$$</samp>’ to have<br>the effect of a single dollar sign in a file name or recipe.<br></p><br><p>Variable references can be used in any context: targets, prerequisites,<br>recipes, most directives, and new variable values.  Here is an<br>example of a common case, where a variable holds the names of all the<br>object files in a program:<br></p><br><div class="example"><br><pre class="example">objects = program.o foo.o utils.o<br>program : $(objects)<br>        cc -o program $(objects)<br><br>$(objects) : defs.h<br></pre></div><br><br><p>Variable references work by strict textual substitution.  Thus, the rule<br></p><br><div class="example"><br><pre class="example">foo = c<br>prog.o : prog.$(foo)<br>        $(foo)$(foo) -$(foo) prog.$(foo)<br></pre></div><br><br><p>could be used to compile a C program <samp>prog.c</samp>.  Since spaces before<br>the variable value are ignored in variable assignments, the value of<br><code>foo</code> is precisely ‘<samp>c</samp>’.  (Don’t actually write your makefiles<br>this way!)<br></p><br><p>A dollar sign followed by a character other than a dollar sign,<br>open-parenthesis or open-brace treats that single character as the<br>variable name.  Thus, you could reference the variable <code>x</code> with<br>‘<samp>$x</samp>’.  However, this practice is strongly discouraged, except in<br>the case of the automatic variables (see <a href="#Automatic-Variables">Automatic Variables</a>).<br></p><br><hr><br><a name="Flavors"></a><br><div class="header"><br><p><br>Next: <a href="#Advanced" accesskey="n" rel="next">Advanced</a>, Previous: <a href="#Reference" accesskey="p" rel="prev">Reference</a>, Up: <a href="#Using-Variables" accesskey="u" rel="up">Using Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="The-Two-Flavors-of-Variables"></a><br><h3 class="section">6.2 The Two Flavors of Variables</h3><br><a name="index-flavors-of-variables"></a><br><a name="index-recursive-variable-expansion-1"></a><br><a name="index-variables_002c-flavors"></a><br><a name="index-recursively-expanded-variables"></a><br><a name="index-variables_002c-recursively-expanded"></a><br><br><p>There are two ways that a variable in GNU <code>make</code> can have a value;<br>we call them the two <em>flavors</em> of variables.  The two flavors are<br>distinguished in how they are defined and in what they do when expanded.<br></p><br><a name="index-_003d"></a><br><p>The first flavor of variable is a <em>recursively expanded</em> variable.<br>Variables of this sort are defined by lines using ‘<samp>=</samp>’<br>(see <a href="#Setting">Setting Variables</a>) or by the <code>define</code> directive<br>(see <a href="#Multi_002dLine">Defining Multi-Line Variables</a>).  The value you specify<br>is installed verbatim; if it contains references to other variables,<br>these references are expanded whenever this variable is substituted (in<br>the course of expanding some other string).  When this happens, it is<br>called <em>recursive expansion</em>.<br></p><br><p>For example,<br></p><br><div class="example"><br><pre class="example">foo = $(bar)<br>bar = $(ugh)<br>ugh = Huh?<br><br>all:;echo $(foo)<br></pre></div><br><br><p>will echo ‘<samp>Huh?</samp>’: ‘<samp>$(foo)</samp>’ expands to ‘<samp>$(bar)</samp>’ which<br>expands to ‘<samp>$(ugh)</samp>’ which finally expands to ‘<samp>Huh?</samp>’.<br></p><br><p>This flavor of variable is the only sort supported by most other<br>versions of <code>make</code>.  It has its advantages and its disadvantages.<br>An advantage (most would say) is that:<br></p><br><div class="example"><br><pre class="example">CFLAGS = $(include_dirs) -O<br>include_dirs = -Ifoo -Ibar<br></pre></div><br><br><p>will do what was intended: when ‘<samp>CFLAGS</samp>’ is expanded in a recipe,<br>it will expand to ‘<samp>-Ifoo -Ibar -O</samp>’.  A major disadvantage is that you<br>cannot append something on the end of a variable, as in<br></p><br><div class="example"><br><pre class="example">CFLAGS = $(CFLAGS) -O<br></pre></div><br><br><p>because it will cause an infinite loop in the variable expansion.<br>(Actually <code>make</code> detects the infinite loop and reports an error.)<br><a name="index-loops-in-variable-expansion"></a><br><a name="index-variables_002c-loops-in-expansion"></a><br></p><br><p>Another disadvantage is that any functions<br>(see <a href="#Functions">Functions for Transforming Text</a>)<br>referenced in the definition will be executed every time the variable is<br>expanded.  This makes <code>make</code> run slower; worse, it causes the<br><code>wildcard</code> and <code>shell</code> functions to give unpredictable results<br>because you cannot easily control when they are called, or even how many<br>times.<br></p><br><p>To avoid all the problems and inconveniences of recursively expanded<br>variables, there is another flavor: simply expanded variables.<br></p><br><a name="index-simply-expanded-variables"></a><br><a name="index-variables_002c-simply-expanded"></a><br><a name="index-_003a_003d"></a><br><a name="index-_003a_003a_003d"></a><br><p><em>Simply expanded variables</em> are defined by lines using ‘<samp>:=</samp>’<br>or ‘<samp>::=</samp>’ (see <a href="#Setting">Setting Variables</a>).  Both forms are<br>equivalent in GNU <code>make</code>; however only the ‘<samp>::=</samp>’ form is<br>described by the POSIX standard (support for ‘<samp>::=</samp>’ was added to<br>the POSIX standard in 2012, so older versions of <code>make</code> won’t<br>accept this form either).<br></p><br><p>The value of a simply expanded variable is scanned<br>once and for all, expanding any references to other variables and<br>functions, when the variable is defined.  The actual value of the simply<br>expanded variable is the result of expanding the text that you write.<br>It does not contain any references to other variables; it contains their<br>values <em>as of the time this variable was defined</em>.  Therefore,<br></p><br><div class="example"><br><pre class="example">x := foo<br>y := $(x) bar<br>x := later<br></pre></div><br><br><p>is equivalent to<br></p><br><div class="example"><br><pre class="example">y := foo bar<br>x := later<br></pre></div><br><br><p>When a simply expanded variable is referenced, its value is substituted<br>verbatim.<br></p><br><p>Here is a somewhat more complicated example, illustrating the use of<br>‘<samp>:=</samp>’ in conjunction with the <code>shell</code> function.<br>(See <a href="#Shell-Function">The <code>shell</code> Function</a>.)  This example<br>also shows use of the variable <code>MAKELEVEL</code>, which is changed<br>when it is passed down from level to level.<br>(See <a href="#Variables_002fRecursion">Communicating Variables to a<br>Sub-<code>make</code></a>, for information about <code>MAKELEVEL</code>.)<br></p><br><a name="index-MAKELEVEL-1"></a><br><a name="index-MAKE-1"></a><br><div class="example"><br><pre class="example">ifeq (0,${MAKELEVEL})<br>whoami    := $(shell whoami)<br>host-type := $(shell arch)<br>MAKE := ${MAKE} host-type=${host-type} whoami=${whoami}<br>endif<br></pre></div><br><br><p>An advantage of this use of ‘<samp>:=</samp>’ is that a typical<br>‘descend into a directory’ recipe then looks like this:<br></p><br><div class="example"><br><pre class="example">${subdirs}:<br>        ${MAKE} -C $@ all<br></pre></div><br><br><p>Simply expanded variables generally make complicated makefile programming<br>more predictable because they work like variables in most programming<br>languages.  They allow you to redefine a variable using its own value (or<br>its value processed in some way by one of the expansion functions) and to<br>use the expansion functions much more efficiently<br>(see <a href="#Functions">Functions for Transforming Text</a>).<br></p><br><a name="index-spaces_002c-in-variable-values"></a><br><a name="index-whitespace_002c-in-variable-values"></a><br><a name="index-variables_002c-spaces-in-values"></a><br><p>You can also use them to introduce controlled leading whitespace into<br>variable values.  Leading whitespace characters are discarded from your<br>input before substitution of variable references and function calls;<br>this means you can include leading spaces in a variable value by<br>protecting them with variable references, like this:<br></p><br><div class="example"><br><pre class="example">nullstring :=<br>space := $(nullstring) # end of the line<br></pre></div><br><br><p>Here the value of the variable <code>space</code> is precisely one space.  The<br>comment ‘<samp>#&nbsp;end&nbsp;of&nbsp;the&nbsp;line</samp>’<!-- /@w --> is included here just for clarity.<br>Since trailing space characters are <em>not</em> stripped from variable<br>values, just a space at the end of the line would have the same effect<br>(but be rather hard to read).  If you put whitespace at the end of a<br>variable value, it is a good idea to put a comment like that at the end<br>of the line to make your intent clear.  Conversely, if you do <em>not</em><br>want any whitespace characters at the end of your variable value, you<br>must remember not to put a random comment on the end of the line after<br>some whitespace, such as this:<br></p><br><div class="example"><br><pre class="example">dir := /foo/bar    # directory to put the frobs in<br></pre></div><br><br><p>Here the value of the variable <code>dir</code> is ‘<samp>/foo/bar&nbsp;&nbsp;&nbsp;&nbsp;</samp>’<!-- /@w --><br>(with four trailing spaces), which was probably not the intention.<br>(Imagine something like ‘<samp>$(dir)/file</samp>’<!-- /@w --> with this definition!)<br></p><br><a name="index-conditional-variable-assignment"></a><br><a name="index-variables_002c-conditional-assignment"></a><br><a name="index-_003f_003d"></a><br><p>There is another assignment operator for variables, ‘<samp>?=</samp>’.  This<br>is called a conditional variable assignment operator, because it only<br>has an effect if the variable is not yet defined.  This statement:<br></p><br><div class="example"><br><pre class="example">FOO ?= bar<br></pre></div><br><br><p>is exactly equivalent to this<br>(see <a href="#Origin-Function">The <code>origin</code> Function</a>):<br></p><br><div class="example"><br><pre class="example">ifeq ($(origin FOO), undefined)<br>  FOO = bar<br>endif<br></pre></div><br><br><p>Note that a variable set to an empty value is still defined, so<br>‘<samp>?=</samp>’ will not set that variable.<br></p><br><hr><br><a name="Advanced"></a><br><div class="header"><br><p><br>Next: <a href="#Values" accesskey="n" rel="next">Values</a>, Previous: <a href="#Flavors" accesskey="p" rel="prev">Flavors</a>, Up: <a href="#Using-Variables" accesskey="u" rel="up">Using Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Advanced-Features-for-Reference-to-Variables"></a><br><h3 class="section">6.3 Advanced Features for Reference to Variables</h3><br><a name="index-reference-to-variables-1"></a><br><br><p>This section describes some advanced features you can use to reference<br>variables in more flexible ways.<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Substitution-Refs" accesskey="1">Substitution Refs</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Referencing a variable with<br>                                  substitutions on the value.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Computed-Names" accesskey="2">Computed Names</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Computing the name of the variable to refer to.<br></td></tr><br></tbody></table><br><br><hr><br><a name="Substitution-Refs"></a><br><div class="header"><br><p><br>Next: <a href="#Computed-Names" accesskey="n" rel="next">Computed Names</a>, Previous: <a href="#Advanced" accesskey="p" rel="prev">Advanced</a>, Up: <a href="#Advanced" accesskey="u" rel="up">Advanced</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Substitution-References"></a><br><h4 class="subsection">6.3.1 Substitution References</h4><br><a name="index-modified-variable-reference"></a><br><a name="index-substitution-variable-reference"></a><br><a name="index-variables_002c-modified-reference"></a><br><a name="index-variables_002c-substitution-reference"></a><br><br><a name="index-variables_002c-substituting-suffix-in"></a><br><a name="index-suffix_002c-substituting-in-variables"></a><br><p>A <em>substitution reference</em> substitutes the value of a variable with<br>alterations that you specify.  It has the form<br>‘<samp>$(<var>var</var>:<var>a</var>=<var>b</var>)</samp>’ (or<br>‘<samp>${<var>var</var>:<var>a</var>=<var>b</var>}</samp>’) and its meaning is to take the value<br>of the variable <var>var</var>, replace every <var>a</var> at the end of a word with<br><var>b</var> in that value, and substitute the resulting string.<br></p><br><p>When we say “at the end of a word”, we mean that <var>a</var> must appear<br>either followed by whitespace or at the end of the value in order to be<br>replaced; other occurrences of <var>a</var> in the value are unaltered.  For<br>example:<br></p><br><div class="example"><br><pre class="example">foo := a.o b.o c.o<br>bar := $(foo:.o=.c)<br></pre></div><br><br><p>sets ‘<samp>bar</samp>’ to ‘<samp>a.c b.c c.c</samp>’.  See <a href="#Setting">Setting Variables</a>.<br></p><br><p>A substitution reference is actually an abbreviation for use of the<br><code>patsubst</code> expansion function (see <a href="#Text-Functions">Functions for String Substitution and Analysis</a>).  We provide<br>substitution references as well as <code>patsubst</code> for compatibility with<br>other implementations of <code>make</code>.<br></p><br><a name="index-patsubst"></a><br><p>Another type of substitution reference lets you use the full power of<br>the <code>patsubst</code> function.  It has the same form<br>‘<samp>$(<var>var</var>:<var>a</var>=<var>b</var>)</samp>’ described above, except that now<br><var>a</var> must contain a single ‘<samp>%</samp>’ character.  This case is<br>equivalent to ‘<samp>$(patsubst <var>a</var>,<var>b</var>,$(<var>var</var>))</samp>’.<br>See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>,<br>for a description of the <code>patsubst</code> function.<br></p><br><div class="example"><br><pre class="example">For example:<br></pre><pre class="example"><br>foo := a.o b.o c.o<br>bar := $(foo:%.o=%.c)<br></pre></div><br><br><p>sets ‘<samp>bar</samp>’ to ‘<samp>a.c b.c c.c</samp>’.<br></p><br><hr><br><a name="Computed-Names"></a><br><div class="header"><br><p><br>Previous: <a href="#Substitution-Refs" accesskey="p" rel="prev">Substitution Refs</a>, Up: <a href="#Advanced" accesskey="u" rel="up">Advanced</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Computed-Variable-Names"></a><br><h4 class="subsection">6.3.2 Computed Variable Names</h4><br><a name="index-nested-variable-reference"></a><br><a name="index-computed-variable-name"></a><br><a name="index-variables_002c-computed-names"></a><br><a name="index-variables_002c-nested-references"></a><br><a name="index-variables_002c-_0024-in-name"></a><br><a name="index-_0024_002c-in-variable-name"></a><br><a name="index-dollar-sign-_0028_0024_0029_002c-in-variable-name"></a><br><br><p>Computed variable names are a complicated concept needed only for<br>sophisticated makefile programming.  For most purposes you need not<br>consider them, except to know that making a variable with a dollar sign<br>in its name might have strange results.  However, if you are the type<br>that wants to understand everything, or you are actually interested in<br>what they do, read on.<br></p><br><p>Variables may be referenced inside the name of a variable.  This is<br>called a <em>computed variable name</em> or a <em>nested variable<br>reference</em>.  For example,<br></p><br><div class="example"><br><pre class="example">x = y<br>y = z<br>a := $($(x))<br></pre></div><br><br><p>defines <code>a</code> as ‘<samp>z</samp>’: the ‘<samp>$(x)</samp>’ inside ‘<samp>$($(x))</samp>’ expands<br>to ‘<samp>y</samp>’, so ‘<samp>$($(x))</samp>’ expands to ‘<samp>$(y)</samp>’ which in turn expands<br>to ‘<samp>z</samp>’.  Here the name of the variable to reference is not stated<br>explicitly; it is computed by expansion of ‘<samp>$(x)</samp>’.  The reference<br>‘<samp>$(x)</samp>’ here is nested within the outer variable reference.<br></p><br><p>The previous example shows two levels of nesting, but any number of levels<br>is possible.  For example, here are three levels:<br></p><br><div class="example"><br><pre class="example">x = y<br>y = z<br>z = u<br>a := $($($(x)))<br></pre></div><br><br><p>Here the innermost ‘<samp>$(x)</samp>’ expands to ‘<samp>y</samp>’, so ‘<samp>$($(x))</samp>’<br>expands to ‘<samp>$(y)</samp>’ which in turn expands to ‘<samp>z</samp>’; now we have<br>‘<samp>$(z)</samp>’, which becomes ‘<samp>u</samp>’.<br></p><br><p>References to recursively-expanded variables within a variable name are<br>re-expanded in the usual fashion.  For example:<br></p><br><div class="example"><br><pre class="example">x = $(y)<br>y = z<br>z = Hello<br>a := $($(x))<br></pre></div><br><br><p>defines <code>a</code> as ‘<samp>Hello</samp>’: ‘<samp>$($(x))</samp>’ becomes ‘<samp>$($(y))</samp>’<br>which becomes ‘<samp>$(z)</samp>’ which becomes ‘<samp>Hello</samp>’.<br></p><br><p>Nested variable references can also contain modified references and<br>function invocations (see <a href="#Functions">Functions for Transforming Text</a>),<br>just like any other reference.<br>For example, using the <code>subst</code> function<br>(see <a href="#Text-Functions">Functions for String Substitution and Analysis</a>):<br></p><br><div class="example"><br><pre class="example">x = variable1<br>variable2 := Hello<br>y = $(subst 1,2,$(x))<br>z = y<br>a := $($($(z)))<br></pre></div><br><br><p>eventually defines <code>a</code> as ‘<samp>Hello</samp>’.  It is doubtful that anyone<br>would ever want to write a nested reference as convoluted as this one, but<br>it works: ‘<samp>$($($(z)))</samp>’ expands to ‘<samp>$($(y))</samp>’ which becomes<br>‘<samp>$($(subst 1,2,$(x)))</samp>’.  This gets the value ‘<samp>variable1</samp>’ from<br><code>x</code> and changes it by substitution to ‘<samp>variable2</samp>’, so that the<br>entire string becomes ‘<samp>$(variable2)</samp>’, a simple variable reference<br>whose value is ‘<samp>Hello</samp>’.<br></p><br><p>A computed variable name need not consist entirely of a single variable<br>reference.  It can contain several variable references, as well as some<br>invariant text.  For example,<br></p><br><div class="example"><br><pre class="example">a_dirs := dira dirb<br>1_dirs := dir1 dir2<br></pre><pre class="example"><br></pre><pre class="example">a_files := filea fileb<br>1_files := file1 file2<br></pre><pre class="example"><br></pre><pre class="example">ifeq “$(use_a)” “yes”<br>a1 := a<br>else<br>a1 := 1<br>endif<br></pre><pre class="example"><br></pre><pre class="example">ifeq “$(use<em>dirs)” “yes”<br>df := dirs<br>else<br>df := files<br>endif<br><br>dirs := $($(a1)</em>$(df))<br></pre></div><br><br><p>will give <code>dirs</code> the same value as <code>a_dirs</code>, <code>1_dirs</code>,<br><code>a_files</code> or <code>1_files</code> depending on the settings of <code>use_a</code><br>and <code>use_dirs</code>.<br></p><br><p>Computed variable names can also be used in substitution references:<br></p><br><div class="example"><br><pre class="example">a_objects := a.o b.o c.o<br>1_objects := 1.o 2.o 3.o<br><br>sources := $($(a1)_objects:.o=.c)<br></pre></div><br><br><p>defines <code>sources</code> as either ‘<samp>a.c b.c c.c</samp>’ or ‘<samp>1.c 2.c 3.c</samp>’,<br>depending on the value of <code>a1</code>.<br></p><br><p>The only restriction on this sort of use of nested variable references<br>is that they cannot specify part of the name of a function to be called.<br>This is because the test for a recognized function name is done before<br>the expansion of nested references.  For example,<br></p><br><div class="example"><br><pre class="example">ifdef do_sort<br>func := sort<br>else<br>func := strip<br>endif<br></pre><pre class="example"><br></pre><pre class="example">bar := a d b g q c<br></pre><pre class="example"><br></pre><pre class="example">foo := $($(func) $(bar))<br></pre></div><br><br><p>attempts to give ‘<samp>foo</samp>’ the value of the variable ‘<samp>sort a d b g<br>q c</samp>’ or ‘<samp>strip a d b g q c</samp>’, rather than giving ‘<samp>a d b g q c</samp>’<br>as the argument to either the <code>sort</code> or the <code>strip</code> function.<br>This restriction could be removed in the future if that change is shown<br>to be a good idea.<br></p><br><p>You can also use computed variable names in the left-hand side of a<br>variable assignment, or in a <code>define</code> directive, as in:<br></p><br><div class="example"><br><pre class="example">dir = foo<br>$(dir)_sources := $(wildcard $(dir)/<em>.c)<br>define $(dir)_print =<br>lpr $($(dir)_sources)<br>endef<br></em></pre></div><br><br><p>This example defines the variables ‘<samp>dir</samp>’, ‘<samp>foo_sources</samp>’, and<br>‘<samp>foo_print</samp>’.<br></p><br><p>Note that <em>nested variable references</em> are quite different from<br><em>recursively expanded variables</em><br>(see <a href="#Flavors">The Two Flavors of Variables</a>), though both are<br>used together in complex ways when doing makefile programming.<br></p><br><hr><br><a name="Values"></a><br><div class="header"><br><p><br>Next: <a href="#Setting" accesskey="n" rel="next">Setting</a>, Previous: <a href="#Advanced" accesskey="p" rel="prev">Advanced</a>, Up: <a href="#Using-Variables" accesskey="u" rel="up">Using Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="How-Variables-Get-Their-Values"></a><br><h3 class="section">6.4 How Variables Get Their Values</h3><br><a name="index-variables_002c-how-they-get-their-values"></a><br><a name="index-value_002c-how-a-variable-gets-it"></a><br><br><p>Variables can get values in several different ways:<br></p><br><ul><br><li> You can specify an overriding value when you run <code>make</code>.<br>See <a href="#Overriding">Overriding Variables</a>.<br><br></li><li> You can specify a value in the makefile, either<br>with an assignment (see <a href="#Setting">Setting Variables</a>) or with a<br>verbatim definition (see <a href="#Multi_002dLine">Defining Multi-Line Variables</a>).<br><br></li><li> Variables in the environment become <code>make</code> variables.<br>See <a href="#Environment">Variables from the Environment</a>.<br><br></li><li> Several <em>automatic</em> variables are given new values for each rule.<br>Each of these has a single conventional use.<br>See <a href="#Automatic-Variables">Automatic Variables</a>.<br><br></li><li> Several variables have constant initial values.<br>See <a href="#Implicit-Variables">Variables Used by Implicit Rules</a>.<br></li></ul><br><br><hr><br><a name="Setting"></a><br><div class="header"><br><p><br>Next: <a href="#Appending" accesskey="n" rel="next">Appending</a>, Previous: <a href="#Values" accesskey="p" rel="prev">Values</a>, Up: <a href="#Using-Variables" accesskey="u" rel="up">Using Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Setting-Variables"></a><br><h3 class="section">6.5 Setting Variables</h3><br><a name="index-setting-variables"></a><br><a name="index-variables_002c-setting"></a><br><a name="index-_003d-1"></a><br><a name="index-_003a_003d-1"></a><br><a name="index-_003a_003a_003d-1"></a><br><a name="index-_003f_003d-1"></a><br><a name="index-_0021_003d"></a><br><br><p>To set a variable from the makefile, write a line starting with the<br>variable name followed by ‘<samp>=</samp>’, ‘<samp>:=</samp>’, or ‘<samp>::=</samp>’.  Whatever<br>follows the ‘<samp>=</samp>’, ‘<samp>:=</samp>’, or ‘<samp>::=</samp>’ on the line becomes the<br>value.  For example,<br></p><br><div class="example"><br><pre class="example">objects = main.o foo.o bar.o utils.o<br></pre></div><br><br><p>defines a variable named <code>objects</code>.  Whitespace around the variable<br>name and immediately after the ‘<samp>=</samp>’ is ignored.<br></p><br><p>Variables defined with ‘<samp>=</samp>’ are <em>recursively expanded</em><br>variables.  Variables defined with ‘<samp>:=</samp>’ or ‘<samp>::=</samp>’ are<br><em>simply expanded</em> variables; these definitions can contain<br>variable references which will be expanded before the definition is<br>made.  See <a href="#Flavors">The Two Flavors of Variables</a>.<br></p><br><p>The variable name may contain function and variable references, which<br>are expanded when the line is read to find the actual variable name to use.<br></p><br><p>There is no limit on the length of the value of a variable except the<br>amount of memory on the computer.  You can split the value of a<br>variable into multiple physical lines for readability<br>(see <a href="#Splitting-Lines">Splitting Long Lines</a>).<br></p><br><p>Most variable names are considered to have the empty string as a value if<br>you have never set them.  Several variables have built-in initial values<br>that are not empty, but you can set them in the usual ways<br>(see <a href="#Implicit-Variables">Variables Used by Implicit Rules</a>).<br>Several special variables are set<br>automatically to a new value for each rule; these are called the<br><em>automatic</em> variables (see <a href="#Automatic-Variables">Automatic Variables</a>).<br></p><br><p>If you’d like a variable to be set to a value only if it’s not already<br>set, then you can use the shorthand operator ‘<samp>?=</samp>’ instead of<br>‘<samp>=</samp>’.  These two settings of the variable ‘<samp>FOO</samp>’ are identical<br>(see <a href="#Origin-Function">The <code>origin</code> Function</a>):<br></p><br><div class="example"><br><pre class="example">FOO ?= bar<br></pre></div><br><br><p>and<br></p><br><div class="example"><br><pre class="example">ifeq ($(origin FOO), undefined)<br>FOO = bar<br>endif<br></pre></div><br><br><p>The shell assignment operator ‘<samp>!=</samp>’ can be used to execute a<br>shell script and set a variable to its output.  This operator first<br>evaluates the right-hand side, then passes that result to the shell<br>for execution.  If the result of the execution ends in a newline, that<br>one newline is removed; all other newlines are replaced by spaces.<br>The resulting string is then placed into the named<br>recursively-expanded variable.  For example:<br></p><br><div class="example"><br><pre class="example">hash != printf ‘\043’<br>file_list != find . -name ‘.c’<br></pre></div><br><br><p>If the result of the execution could produce a <code>$</code>, and you don’t<br>intend what follows that to be interpreted as a make variable or<br>function reference, then you must replace every <code>$</code> with<br><code>$$</code> as part of the execution.  Alternatively, you can set a<br>simply expanded variable to the result of running a program using the<br><code>shell</code> function call.  See <a href="#Shell-Function">The <code>shell</code><br>Function</a>.  For example:<br></p><br><div class="example"><br><pre class="example">hash := $(shell printf ‘\043’)<br>var := $(shell find . -name “<em>.c”)<br></em></pre></div><br><br><p>As with the <code>shell</code> function, the exit status of the just-invoked<br>shell script is stored in the <code>.SHELLSTATUS</code> variable.<br></p><br><br><hr><br><a name="Appending"></a><br><div class="header"><br><p><br>Next: <a href="#Override-Directive" accesskey="n" rel="next">Override Directive</a>, Previous: <a href="#Setting" accesskey="p" rel="prev">Setting</a>, Up: <a href="#Using-Variables" accesskey="u" rel="up">Using Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Appending-More-Text-to-Variables"></a><br><h3 class="section">6.6 Appending More Text to Variables</h3><br><a name="index-_002b_003d"></a><br><a name="index-appending-to-variables"></a><br><a name="index-variables_002c-appending-to"></a><br><br><p>Often it is useful to add more text to the value of a variable already defined.<br>You do this with a line containing ‘<samp>+=</samp>’, like this:<br></p><br><div class="example"><br><pre class="example">objects += another.o<br></pre></div><br><br><p>This takes the value of the variable <code>objects</code>, and adds the text<br>‘<samp>another.o</samp>’ to it (preceded by a single space).  Thus:<br></p><br><div class="example"><br><pre class="example">objects = main.o foo.o bar.o utils.o<br>objects += another.o<br></pre></div><br><br><p>sets <code>objects</code> to ‘<samp>main.o foo.o bar.o utils.o another.o</samp>’.<br></p><br><p>Using ‘<samp>+=</samp>’ is similar to:<br></p><br><div class="example"><br><pre class="example">objects = main.o foo.o bar.o utils.o<br>objects := $(objects) another.o<br></pre></div><br><br><p>but differs in ways that become important when you use more complex values.<br></p><br><p>When the variable in question has not been defined before, ‘<samp>+=</samp>’<br>acts just like normal ‘<samp>=</samp>’: it defines a recursively-expanded<br>variable.  However, when there <em>is</em> a previous definition, exactly<br>what ‘<samp>+=</samp>’ does depends on what flavor of variable you defined<br>originally.  See <a href="#Flavors">The Two Flavors of Variables</a>, for an<br>explanation of the two flavors of variables.<br></p><br><p>When you add to a variable’s value with ‘<samp>+=</samp>’, <code>make</code> acts<br>essentially as if you had included the extra text in the initial<br>definition of the variable.  If you defined it first with ‘<samp>:=</samp>’ or<br>‘<samp>::=</samp>’, making it a simply-expanded variable, ‘<samp>+=</samp>’ adds to<br>that simply-expanded definition, and expands the new text before<br>appending it to the old value just as ‘<samp>:=</samp>’ does (see<br><a href="#Setting">Setting Variables</a>, for a full explanation of<br>‘<samp>:=</samp>’ or ‘<samp>::=</samp>’).  In fact,<br></p><br><div class="example"><br><pre class="example">variable := value<br>variable += more<br></pre></div><br><br><p>is exactly equivalent to:<br></p><br><div class="example"><br><pre class="example">variable := value<br>variable := $(variable) more<br></pre></div><br><br><p>On the other hand, when you use ‘<samp>+=</samp>’ with a variable that you defined<br>first to be recursively-expanded using plain ‘<samp>=</samp>’, <code>make</code> does<br>something a bit different.  Recall that when you define a<br>recursively-expanded variable, <code>make</code> does not expand the value you set<br>for variable and function references immediately.  Instead it stores the text<br>verbatim, and saves these variable and function references to be expanded<br>later, when you refer to the new variable (see <a href="#Flavors">The Two Flavors<br>of Variables</a>).  When you use ‘<samp>+=</samp>’ on a recursively-expanded variable,<br>it is this unexpanded text to which <code>make</code> appends the new text you<br>specify.<br></p><br><div class="example"><br><pre class="example">variable = value<br>variable += more<br></pre></div><br><br><p>is roughly equivalent to:<br></p><br><div class="example"><br><pre class="example">temp = value<br>variable = $(temp) more<br></pre></div><br><br><p>except that of course it never defines a variable called <code>temp</code>.<br>The importance of this comes when the variable’s old value contains<br>variable references.  Take this common example:<br></p><br><div class="example"><br><pre class="example">CFLAGS = $(includes) -O<br>…<br>CFLAGS += -pg # enable profiling<br></pre></div><br><br><p>The first line defines the <code>CFLAGS</code> variable with a reference to another<br>variable, <code>includes</code>.  (<code>CFLAGS</code> is used by the rules for C<br>compilation; see <a href="#Catalogue-of-Rules">Catalogue of Built-In Rules</a>.)<br>Using ‘<samp>=</samp>’ for the definition makes <code>CFLAGS</code> a recursively-expanded<br>variable, meaning ‘<samp>$(includes)&nbsp;<span class="nolinebreak">-O</span></samp>’<!-- /@w --> is <em>not</em> expanded when<br><code>make</code> processes the definition of <code>CFLAGS</code>.  Thus, <code>includes</code><br>need not be defined yet for its value to take effect.  It only has to be<br>defined before any reference to <code>CFLAGS</code>.  If we tried to append to the<br>value of <code>CFLAGS</code> without using ‘<samp>+=</samp>’, we might do it like this:<br></p><br><div class="example"><br><pre class="example">CFLAGS := $(CFLAGS) -pg # enable profiling<br></pre></div><br><br><p>This is pretty close, but not quite what we want.  Using ‘<samp>:=</samp>’<br>redefines <code>CFLAGS</code> as a simply-expanded variable; this means<br><code>make</code> expands the text ‘<samp>$(CFLAGS)&nbsp;<span class="nolinebreak">-pg</span></samp>’<!-- /@w --> before setting the<br>variable.  If <code>includes</code> is not yet defined, we get ‘<samp>&nbsp;<span class="nolinebreak">-O</span>&nbsp;<span class="nolinebreak">-pg</span></samp>’<!-- /@w -->, and a later definition of <code>includes</code> will have no effect.<br>Conversely, by using ‘<samp>+=</samp>’ we set <code>CFLAGS</code> to the<br><em>unexpanded</em> value ‘<samp>$(includes)&nbsp;<span class="nolinebreak">-O</span>&nbsp;<span class="nolinebreak">-pg</span></samp>’<!-- /@w -->.  Thus we preserve<br>the reference to <code>includes</code>, so if that variable gets defined at<br>any later point, a reference like ‘<samp>$(CFLAGS)</samp>’ still uses its<br>value.<br></p><br><hr><br><a name="Override-Directive"></a><br><div class="header"><br><p><br>Next: <a href="#Multi_002dLine" accesskey="n" rel="next">Multi-Line</a>, Previous: <a href="#Appending" accesskey="p" rel="prev">Appending</a>, Up: <a href="#Using-Variables" accesskey="u" rel="up">Using Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="The-override-Directive"></a><br><h3 class="section">6.7 The <code>override</code> Directive</h3><br><a name="index-override"></a><br><a name="index-overriding-with-override"></a><br><a name="index-variables_002c-overriding"></a><br><br><p>If a variable has been set with a command argument<br>(see <a href="#Overriding">Overriding Variables</a>),<br>then ordinary assignments in the makefile are ignored.  If you want to set<br>the variable in the makefile even though it was set with a command<br>argument, you can use an <code>override</code> directive, which is a line that<br>looks like this:<br></p><br><div class="example"><br><pre class="example">override <var>variable</var> = <var>value</var><br></pre></div><br><br><p>or<br></p><br><div class="example"><br><pre class="example">override <var>variable</var> := <var>value</var><br></pre></div><br><br><p>To append more text to a variable defined on the command line, use:<br></p><br><div class="example"><br><pre class="example">override <var>variable</var> += <var>more text</var><br></pre></div><br><br><p>See <a href="#Appending">Appending More Text to Variables</a>.<br></p><br><p>Variable assignments marked with the <code>override</code> flag have a<br>higher priority than all other assignments, except another<br><code>override</code>.  Subsequent assignments or appends to this variable<br>which are not marked <code>override</code> will be ignored.<br></p><br><p>The <code>override</code> directive was not invented for escalation in the war<br>between makefiles and command arguments.  It was invented so you can alter<br>and add to values that the user specifies with command arguments.<br></p><br><p>For example, suppose you always want the ‘<samp>-g</samp>’ switch when you run the<br>C compiler, but you would like to allow the user to specify the other<br>switches with a command argument just as usual.  You could use this<br><code>override</code> directive:<br></p><br><div class="example"><br><pre class="example">override CFLAGS += -g<br></pre></div><br><br><p>You can also use <code>override</code> directives with <code>define</code> directives.<br>This is done as you might expect:<br></p><br><div class="example"><br><pre class="example">override define foo =<br>bar<br>endef<br></pre></div><br><br><p>See <a href="#Multi_002dLine">Defining Multi-Line Variables</a>.<br></p><br><hr><br><a name="Multi_002dLine"></a><br><div class="header"><br><p><br>Next: <a href="#Undefine-Directive" accesskey="n" rel="next">Undefine Directive</a>, Previous: <a href="#Override-Directive" accesskey="p" rel="prev">Override Directive</a>, Up: <a href="#Using-Variables" accesskey="u" rel="up">Using Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Defining-Multi_002dLine-Variables"></a><br><h3 class="section">6.8 Defining Multi-Line Variables</h3><br><a name="index-define"></a><br><a name="index-endef"></a><br><a name="index-multi_002dline-variable-definition"></a><br><a name="index-variables_002c-multi_002dline"></a><br><a name="index-verbatim-variable-definition"></a><br><a name="index-defining-variables-verbatim"></a><br><a name="index-variables_002c-defining-verbatim"></a><br><br><p>Another way to set the value of a variable is to use the <code>define</code><br>directive.  This directive has an unusual syntax which allows newline<br>characters to be included in the value, which is convenient for<br>defining both canned sequences of commands (see <a href="#Canned-Recipes">Defining Canned Recipes</a>), and also sections of makefile syntax to<br>use with <code>eval</code> (see <a href="#Eval-Function">Eval Function</a>).<br></p><br><p>The <code>define</code> directive is followed on the same line by the name<br>of the variable being defined and an (optional) assignment operator,<br>and nothing more.  The value to give the variable appears on the<br>following lines.  The end of the value is marked by a line containing<br>just the word <code>endef</code>.  Aside from this difference in syntax,<br><code>define</code> works just like any other variable definition.  The<br>variable name may contain function and variable references, which are<br>expanded when the directive is read to find the actual variable name<br>to use.<br></p><br><p>You may omit the variable assignment operator if you prefer.  If<br>omitted, <code>make</code> assumes it to be ‘<samp>=</samp>’ and creates a<br>recursively-expanded variable (see <a href="#Flavors">The Two Flavors of Variables</a>).<br>When using a ‘<samp>+=</samp>’ operator, the value is appended to the previous<br>value as with any other append operation: with a single space<br>separating the old and new values.<br></p><br><p>You may nest <code>define</code> directives: <code>make</code> will keep track of<br>nested directives and report an error if they are not all properly<br>closed with <code>endef</code>.  Note that lines beginning with the recipe<br>prefix character are considered part of a recipe, so any <code>define</code><br>or <code>endef</code> strings appearing on such a line will not be<br>considered <code>make</code> directives.<br></p><br><div class="example"><br><pre class="example">define two-lines =<br>echo foo<br>echo $(bar)<br>endef<br></pre></div><br><br><p>The value in an ordinary assignment cannot contain a newline; but the<br>newlines that separate the lines of the value in a <code>define</code> become<br>part of the variable’s value (except for the final newline which precedes<br>the <code>endef</code> and is not considered part of the value).<br></p><br><p>When used in a recipe, the previous example is functionally equivalent<br>to this:<br></p><br><div class="example"><br><pre class="example">two-lines = echo foo; echo $(bar)<br></pre></div><br><br><p>since two commands separated by semicolon behave much like two separate<br>shell commands.  However, note that using two separate lines means<br><code>make</code> will invoke the shell twice, running an independent sub-shell<br>for each line.  See <a href="#Execution">Recipe Execution</a>.<br></p><br><p>If you want variable definitions made with <code>define</code> to take<br>precedence over command-line variable definitions, you can use the<br><code>override</code> directive together with <code>define</code>:<br></p><br><div class="example"><br><pre class="example">override define two-lines =<br>foo<br>$(bar)<br>endef<br></pre></div><br><br><p>See <a href="#Override-Directive">The <code>override</code> Directive</a>.<br></p><br><hr><br><a name="Undefine-Directive"></a><br><div class="header"><br><p><br>Next: <a href="#Environment" accesskey="n" rel="next">Environment</a>, Previous: <a href="#Multi_002dLine" accesskey="p" rel="prev">Multi-Line</a>, Up: <a href="#Using-Variables" accesskey="u" rel="up">Using Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Undefining-Variables"></a><br><h3 class="section">6.9 Undefining Variables</h3><br><a name="index-undefine"></a><br><a name="index-undefining-variable"></a><br><br><p>If you want to clear a variable, setting its value to empty is usually<br>sufficient. Expanding such a variable will yield the same result (empty<br>string) regardless of whether it was set or not. However, if you are<br>using the <code>flavor</code> (see <a href="#Flavor-Function">Flavor Function</a>) and<br><code>origin</code> (see <a href="#Origin-Function">Origin Function</a>) functions, there is a difference<br>between a variable that was never set and a variable with an empty value.<br>In such situations you may want to use the <code>undefine</code> directive to<br>make a variable appear as if it was never set. For example:<br></p><br><div class="example"><br><pre class="example">foo := foo<br>bar = bar<br><br>undefine foo<br>undefine bar<br><br>$(info $(origin foo))<br>$(info $(flavor bar))<br></pre></div><br><br><p>This example will print “undefined” for both variables.<br></p><br><p>If you want to undefine a command-line variable definition, you can use<br>the <code>override</code> directive together with <code>undefine</code>, similar to<br>how this is done for variable definitions:<br></p><br><div class="example"><br><pre class="example">override undefine CFLAGS<br></pre></div><br><br><hr><br><a name="Environment"></a><br><div class="header"><br><p><br>Next: <a href="#Target_002dspecific" accesskey="n" rel="next">Target-specific</a>, Previous: <a href="#Undefine-Directive" accesskey="p" rel="prev">Undefine Directive</a>, Up: <a href="#Using-Variables" accesskey="u" rel="up">Using Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Variables-from-the-Environment"></a><br><h3 class="section">6.10 Variables from the Environment</h3><br><br><a name="index-variables_002c-environment-1"></a><br><a name="index-environment"></a><br><p>Variables in <code>make</code> can come from the environment in which<br><code>make</code> is run.  Every environment variable that <code>make</code> sees<br>when it starts up is transformed into a <code>make</code> variable with the<br>same name and value.  However, an explicit assignment in the makefile,<br>or with a command argument, overrides the environment.  (If the<br>‘<samp>-e</samp>’ flag is specified, then values from the environment override<br>assignments in the makefile.  See <a href="#Options-Summary">Summary of<br>Options</a>.  But this is not recommended practice.)<br></p><br><p>Thus, by setting the variable <code>CFLAGS</code> in your environment, you can<br>cause all C compilations in most makefiles to use the compiler switches you<br>prefer.  This is safe for variables with standard or conventional meanings<br>because you know that no makefile will use them for other things.  (Note<br>this is not totally reliable; some makefiles set <code>CFLAGS</code> explicitly<br>and therefore are not affected by the value in the environment.)<br></p><br><p>When <code>make</code> runs a recipe, variables defined in the<br>makefile are placed into the environment of each shell.  This allows<br>you to pass values to sub-<code>make</code> invocations (see <a href="#Recursion">Recursive Use of <code>make</code></a>).  By default, only variables that came<br>from the environment or the command line are passed to recursive<br>invocations.  You can use the <code>export</code> directive to pass other<br>variables.  See <a href="#Variables_002fRecursion">Communicating Variables to a<br>Sub-<code>make</code></a>, for full details.<br></p><br><p>Other use of variables from the environment is not recommended.  It is not<br>wise for makefiles to depend for their functioning on environment variables<br>set up outside their control, since this would cause different users to get<br>different results from the same makefile.  This is against the whole<br>purpose of most makefiles.<br></p><br><a name="index-SHELL_002c-import-from-environment"></a><br><p>Such problems would be especially likely with the variable<br><code>SHELL</code>, which is normally present in the environment to specify<br>the user’s choice of interactive shell.  It would be very undesirable<br>for this choice to affect <code>make</code>; so, <code>make</code> handles the<br><code>SHELL</code> environment variable in a special way; see <a href="#Choosing-the-Shell">Choosing the Shell</a>.<br></p><br><hr><br><a name="Target_002dspecific"></a><br><div class="header"><br><p><br>Next: <a href="#Pattern_002dspecific" accesskey="n" rel="next">Pattern-specific</a>, Previous: <a href="#Environment" accesskey="p" rel="prev">Environment</a>, Up: <a href="#Using-Variables" accesskey="u" rel="up">Using Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Target_002dspecific-Variable-Values"></a><br><h3 class="section">6.11 Target-specific Variable Values</h3><br><a name="index-target_002dspecific-variables"></a><br><a name="index-variables_002c-target_002dspecific"></a><br><br><p>Variable values in <code>make</code> are usually global; that is, they are the<br>same regardless of where they are evaluated (unless they’re reset, of<br>course).  One exception to that is automatic variables<br>(see <a href="#Automatic-Variables">Automatic Variables</a>).<br></p><br><p>The other exception is <em>target-specific variable values</em>.  This<br>feature allows you to define different values for the same variable,<br>based on the target that <code>make</code> is currently building.  As with<br>automatic variables, these values are only available within the context<br>of a target’s recipe (and in other target-specific assignments).<br></p><br><p>Set a target-specific variable value like this:<br></p><br><div class="example"><br><pre class="example"><var>target</var> … : <var>variable-assignment</var><br></pre></div><br><br><p>Target-specific variable assignments can be prefixed with any or all of the<br>special keywords <code>export</code>, <code>override</code>, or <code>private</code>;<br>these apply their normal behavior to this instance of the variable only.<br></p><br><p>Multiple <var>target</var> values create a target-specific variable value for<br>each member of the target list individually.<br></p><br><p>The <var>variable-assignment</var> can be any valid form of assignment;<br>recursive (‘<samp>=</samp>’), simple (‘<samp>:=</samp>’ or ‘<samp>::=</samp>’), appending<br>(‘<samp>+=</samp>’), or conditional (‘<samp>?=</samp>’).  All variables that appear<br>within the <var>variable-assignment</var> are evaluated within the context<br>of the target: thus, any previously-defined target-specific variable<br>values will be in effect.  Note that this variable is actually<br>distinct from any “global” value: the two variables do not have to<br>have the same flavor (recursive vs. simple).<br></p><br><p>Target-specific variables have the same priority as any other makefile<br>variable.  Variables provided on the command line (and in the<br>environment if the ‘<samp>-e</samp>’ option is in force) will take precedence.<br>Specifying the <code>override</code> directive will allow the target-specific<br>variable value to be preferred.<br></p><br><p>There is one more special feature of target-specific variables: when<br>you define a target-specific variable that variable value is also in<br>effect for all prerequisites of this target, and all their<br>prerequisites, etc. (unless those prerequisites override that variable<br>with their own target-specific variable value).  So, for example, a<br>statement like this:<br></p><br><div class="example"><br><pre class="example">prog : CFLAGS = -g<br>prog : prog.o foo.o bar.o<br></pre></div><br><br><p>will set <code>CFLAGS</code> to ‘<samp>-g</samp>’ in the recipe for <samp>prog</samp>, but<br>it will also set <code>CFLAGS</code> to ‘<samp>-g</samp>’ in the recipes that create<br><samp>prog.o</samp>, <samp>foo.o</samp>, and <samp>bar.o</samp>, and any recipes which<br>create their prerequisites.<br></p><br><p>Be aware that a given prerequisite will only be built once per<br>invocation of make, at most.  If the same file is a prerequisite of<br>multiple targets, and each of those targets has a different value for<br>the same target-specific variable, then the first target to be built<br>will cause that prerequisite to be built and the prerequisite will<br>inherit the target-specific value from the first target.  It will<br>ignore the target-specific values from any other targets.<br></p><br><hr><br><a name="Pattern_002dspecific"></a><br><div class="header"><br><p><br>Next: <a href="#Suppressing-Inheritance" accesskey="n" rel="next">Suppressing Inheritance</a>, Previous: <a href="#Target_002dspecific" accesskey="p" rel="prev">Target-specific</a>, Up: <a href="#Using-Variables" accesskey="u" rel="up">Using Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Pattern_002dspecific-Variable-Values"></a><br><h3 class="section">6.12 Pattern-specific Variable Values</h3><br><a name="index-pattern_002dspecific-variables"></a><br><a name="index-variables_002c-pattern_002dspecific"></a><br><br><p>In addition to target-specific variable values<br>(see <a href="#Target_002dspecific">Target-specific Variable Values</a>), GNU<br><code>make</code> supports pattern-specific variable values.  In this form,<br>the variable is defined for any target that matches the pattern<br>specified.<br></p><br><p>Set a pattern-specific variable value like this:<br></p><br><div class="example"><br><pre class="example"><var>pattern</var> … : <var>variable-assignment</var><br></pre></div><br><p>where <var>pattern</var> is a %-pattern.  As with target-specific variable<br>values, multiple <var>pattern</var> values create a pattern-specific variable<br>value for each pattern individually.  The <var>variable-assignment</var> can<br>be any valid form of assignment.  Any command line variable setting will<br>take precedence, unless <code>override</code> is specified.<br></p><br><p>For example:<br></p><br><div class="example"><br><pre class="example">%.o : CFLAGS = -O<br></pre></div><br><br><p>will assign <code>CFLAGS</code> the value of ‘<samp>-O</samp>’ for all targets<br>matching the pattern <code>%.o</code>.<br></p><br><p>If a target matches more than one pattern, the matching pattern-specific<br>variables with longer stems are interpreted first. This results in more<br>specific variables taking precedence over the more generic ones, for<br>example:<br></p><br><div class="example"><br><pre class="example">%.o: %.c<br>        $(CC) -c $(CFLAGS) $(CPPFLAGS) $&lt; -o $@<br><br>lib/%.o: CFLAGS := -fPIC -g<br>%.o: CFLAGS := -g<br><br>all: foo.o lib/bar.o<br></pre></div><br><br><p>In this example the first definition of the <code>CFLAGS</code> variable<br>will be used to update <samp>lib/bar.o</samp> even though the second one<br>also applies to this target. Pattern-specific variables which result<br>in the same stem length are considered in the order in which they<br>were defined in the makefile.<br></p><br><p>Pattern-specific variables are searched after any target-specific<br>variables defined explicitly for that target, and before target-specific<br>variables defined for the parent target.<br></p><br><hr><br><a name="Suppressing-Inheritance"></a><br><div class="header"><br><p><br>Next: <a href="#Special-Variables" accesskey="n" rel="next">Special Variables</a>, Previous: <a href="#Pattern_002dspecific" accesskey="p" rel="prev">Pattern-specific</a>, Up: <a href="#Using-Variables" accesskey="u" rel="up">Using Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Suppressing-Inheritance-1"></a><br><h3 class="section">6.13 Suppressing Inheritance</h3><br><a name="index-private"></a><br><a name="index-suppressing-inheritance"></a><br><a name="index-inheritance_002c-suppressing"></a><br><br><p>As described in previous sections, <code>make</code> variables are inherited<br>by prerequisites.  This capability allows you to modify the behavior<br>of a prerequisite based on which targets caused it to be rebuilt.  For<br>example, you might set a target-specific variable on a <code>debug</code><br>target, then running ‘<samp>make debug</samp>’ will cause that variable to be<br>inherited by all prerequisites of <code>debug</code>, while just running<br>‘<samp>make all</samp>’ (for example) would not have that assignment.<br></p><br><p>Sometimes, however, you may not want a variable to be inherited.  For<br>these situations, <code>make</code> provides the <code>private</code> modifier.<br>Although this modifier can be used with any variable assignment, it<br>makes the most sense with target- and pattern-specific variables.  Any<br>variable marked <code>private</code> will be visible to its local target but<br>will not be inherited by prerequisites of that target.  A global<br>variable marked <code>private</code> will be visible in the global scope but<br>will not be inherited by any target, and hence will not be visible<br>in any recipe.<br></p><br><p>As an example, consider this makefile:<br></p><div class="example"><br><pre class="example">EXTRA_CFLAGS =<br><br>prog: private EXTRA_CFLAGS = -L/usr/local/lib<br>prog: a.o b.o<br></pre></div><br><br><p>Due to the <code>private</code> modifier, <code>a.o</code> and <code>b.o</code> will not<br>inherit the <code>EXTRA_CFLAGS</code> variable assignment from the<br><code>prog</code> target.<br></p><br><hr><br><a name="Special-Variables"></a><br><div class="header"><br><p><br>Previous: <a href="#Suppressing-Inheritance" accesskey="p" rel="prev">Suppressing Inheritance</a>, Up: <a href="#Using-Variables" accesskey="u" rel="up">Using Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Other-Special-Variables"></a><br><h3 class="section">6.14 Other Special Variables</h3><br><a name="index-makefiles_002c-and-special-variables"></a><br><a name="index-special-variables"></a><br><br><p>GNU <code>make</code> supports some variables that have special properties.<br></p><br><dl compact="compact"><br><dd><br><a name="index-MAKEFILE_005fLIST-_0028list-of-parsed-makefiles_0029"></a><br><a name="index-makefiles_002c-and-MAKEFILE_005fLIST-variable"></a><br><a name="index-including-_0028MAKEFILE_005fLIST-variable_0029"></a><br></dd><br><dt><code>MAKEFILE_LIST</code></dt><br><dd><p>Contains the name of each makefile that is parsed by <code>make</code>, in<br>the order in which it was parsed.  The name is appended just<br>before <code>make</code> begins to parse the makefile.  Thus, if the first<br>thing a makefile does is examine the last word in this variable, it<br>will be the name of the current makefile.  Once the current makefile<br>has used <code>include</code>, however, the last word will be the<br>just-included makefile.<br></p><br><p>If a makefile named <code>Makefile</code> has this content:<br></p><br><div class="example"><br><pre class="example">name1 := $(lastword $(MAKEFILE_LIST))<br><br>include inc.mk<br><br>name2 := $(lastword $(MAKEFILE_LIST))<br><br>all:<br>        @echo name1 = $(name1)<br>        @echo name2 = $(name2)<br></pre></div><br><br><p>then you would expect to see this output:<br></p><br><div class="example"><br><pre class="example">name1 = Makefile<br>name2 = inc.mk<br></pre></div><br><br><a name="index-_002eDEFAULT_005fGOAL-_0028define-default-goal_0029"></a><br></dd><br><dt><code>.DEFAULT_GOAL</code></dt><br><dd><p>Sets the default goal to be used if no targets were specified on the<br>command line (see <a href="#Goals">Arguments to Specify the Goals</a>).  The<br><code>.DEFAULT_GOAL</code> variable allows you to discover the current<br>default goal, restart the default goal selection algorithm by clearing<br>its value, or to explicitly set the default goal.  The following<br>example illustrates these cases:<br></p><br><div class="example"><br><pre class="example"># Query the default goal.<br>ifeq ($(.DEFAULT_GOAL),)<br>  $(warning no default goal is set)<br>endif<br><br>.PHONY: foo<br>foo: ; @echo $@<br><br>$(warning default goal is $(.DEFAULT_GOAL))<br><br># Reset the default goal.<br>.DEFAULT_GOAL :=<br><br>.PHONY: bar<br>bar: ; @echo $@<br><br>$(warning default goal is $(.DEFAULT_GOAL))<br><br># Set our own.<br>.DEFAULT_GOAL := foo<br></pre></div><br><br><p>This makefile prints:<br></p><br><div class="example"><br><pre class="example">no default goal is set<br>default goal is foo<br>default goal is bar<br>foo<br></pre></div><br><br><p>Note that assigning more than one target name to <code>.DEFAULT_GOAL</code> is<br>invalid and will result in an error.<br></p><br><a name="index-MAKE_005fRESTARTS-_0028number-of-times-make-has-restarted_0029"></a><br></dd><br><dt><code>MAKE_RESTARTS</code></dt><br><dd><p>This variable is set only if this instance of <code>make</code> has<br>restarted (see <a href="#Remaking-Makefiles">How Makefiles Are Remade</a>): it<br>will contain the number of times this instance has restarted.  Note<br>this is not the same as recursion (counted by the <code>MAKELEVEL</code><br>variable).  You should not set, modify, or export this variable.<br></p><br><a name="index-MAKE_005fTERMOUT-_0028whether-stdout-is-a-terminal_0029"></a><br><a name="index-MAKE_005fTERMERR-_0028whether-stderr-is-a-terminal_0029"></a><br></dd><br><dt><code>MAKE_TERMOUT</code></dt><br><dt><code>MAKE_TERMERR</code></dt><br><dd><p>When <code>make</code> starts it will check whether stdout and stderr will<br>show their output on a terminal.  If so, it will set<br><code>MAKE_TERMOUT</code> and <code>MAKE_TERMERR</code>, respectively, to the name<br>of the terminal device (or <code>true</code> if this cannot be determined).<br>If set these variables will be marked for export.  These variables<br>will not be changed by <code>make</code> and they will not be modified if<br>already set.<br></p><br><p>These values can be used (particularly in combination with output<br>synchronization (see <a href="#Parallel-Output">Output During Parallel<br>Execution</a>) to determine whether <code>make</code> itself is writing to a<br>terminal; they can be tested to decide whether to force recipe<br>commands to generate colorized output for example.<br></p><br><p>If you invoke a sub-<code>make</code> and redirect its stdout or stderr it<br>is your responsibility to reset or unexport these variables as well,<br>if your makefiles rely on them.<br></p><br><a name="index-_002eRECIPEPREFIX-_0028change-the-recipe-prefix-character_0029"></a><br></dd><br><dt><code>.RECIPEPREFIX</code></dt><br><dd><p>The first character of the value of this variable is used as the<br>character make assumes is introducing a recipe line.  If the variable<br>is empty (as it is by default) that character is the standard tab<br>character.  For example, this is a valid makefile:<br></p><br><div class="example"><br><pre class="example">.RECIPEPREFIX = &gt;<br>all:<br>&gt; @echo Hello, world<br></pre></div><br><br><p>The value of <code>.RECIPEPREFIX</code> can be changed multiple times; once set<br>it stays in effect for all rules parsed until it is modified.<br></p><br><a name="index-_002eVARIABLES-_0028list-of-variables_0029"></a><br></dd><br><dt><code>.VARIABLES</code></dt><br><dd><p>Expands to a list of the <em>names</em> of all global variables defined<br>so far.  This includes variables which have empty values, as well as<br>built-in variables (see <a href="#Implicit-Variables">Variables Used by<br>Implicit Rules</a>), but does not include any variables which are only<br>defined in a target-specific context.  Note that any value you assign<br>to this variable will be ignored; it will always return its special<br>value.<br></p><br><br><a name="index-_002eFEATURES-_0028list-of-supported-features_0029"></a><br></dd><br><dt><code>.FEATURES</code></dt><br><dd><p>Expands to a list of special features supported by this version of<br><code>make</code>.  Possible values include, but are not limited to:<br></p><br><dl compact="compact"><br><dt>‘<samp>archives</samp>’</dt><br><dd><p>Supports <code>ar</code> (archive) files using special file name syntax.<br>See <a href="#Archives">Using <code>make</code> to Update Archive Files</a>.<br></p><br></dd><br><dt>‘<samp>check-symlink</samp>’</dt><br><dd><p>Supports the <code>-L</code> (<code>–check-symlink-times</code>) flag.<br>See <a href="#Options-Summary">Summary of Options</a>.<br></p><br></dd><br><dt>‘<samp>else-if</samp>’</dt><br><dd><p>Supports “else if” non-nested conditionals.  See <a href="#Conditional-Syntax">Syntax of Conditionals</a>.<br></p><br></dd><br><dt>‘<samp>jobserver</samp>’</dt><br><dd><p>Supports “job server” enhanced parallel builds.  See <a href="#Parallel">Parallel Execution</a>.<br></p><br></dd><br><dt>‘<samp>oneshell</samp>’</dt><br><dd><p>Supports the <code>.ONESHELL</code> special target.  See <a href="#One-Shell">Using<br>One Shell</a>.<br></p><br></dd><br><dt>‘<samp>order-only</samp>’</dt><br><dd><p>Supports order-only prerequisites.  See <a href="#Prerequisite-Types">Types<br>of Prerequisites</a>.<br></p><br></dd><br><dt>‘<samp>second-expansion</samp>’</dt><br><dd><p>Supports secondary expansion of prerequisite lists.<br></p><br></dd><br><dt>‘<samp>shortest-stem</samp>’</dt><br><dd><p>Uses the “shortest stem” method of choosing which pattern, of<br>multiple applicable options, will be used.  See <a href="#Pattern-Match">How<br>Patterns Match</a>.<br></p><br></dd><br><dt>‘<samp>target-specific</samp>’</dt><br><dd><p>Supports target-specific and pattern-specific variable assignments.<br>See <a href="#Target_002dspecific">Target-specific Variable Values</a>.<br></p><br></dd><br><dt>‘<samp>undefine</samp>’</dt><br><dd><p>Supports the <code>undefine</code> directive.  See <a href="#Undefine-Directive">Undefine Directive</a>.<br></p><br></dd><br><dt>‘<samp>guile</samp>’</dt><br><dd><p>Has GNU Guile available as an embedded extension language.<br>See <a href="#Guile-Integration">GNU Guile Integration</a>.<br></p><br></dd><br><dt>‘<samp>load</samp>’</dt><br><dd><p>Supports dynamically loadable objects for creating custom extensions.<br>See <a href="#Loading-Objects">Loading Dynamic Objects</a>.<br></p></dd><br></dl><br><br><a name="index-_002eINCLUDE_005fDIRS-_0028list-of-include-directories_0029"></a><br></dd><br><dt><code>.INCLUDE_DIRS</code></dt><br><dd><p>Expands to a list of directories that <code>make</code> searches for<br>included makefiles (see <a href="#Include">Including Other Makefiles</a>).<br></p><br></dd><br></dl><br><br><hr><br><a name="Conditionals"></a><br><div class="header"><br><p><br>Next: <a href="#Functions" accesskey="n" rel="next">Functions</a>, Previous: <a href="#Using-Variables" accesskey="p" rel="prev">Using Variables</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Conditional-Parts-of-Makefiles"></a><br><h2 class="chapter">7 Conditional Parts of Makefiles</h2><br><br><a name="index-conditionals"></a><br><p>A <em>conditional</em> directive causes part of a makefile to be obeyed<br>or ignored depending on the values of variables.  Conditionals can<br>compare the value of one variable to another, or the value of a<br>variable to a constant string.  Conditionals control what <code>make</code><br>actually “sees” in the makefile, so they <em>cannot</em> be used to<br>control recipes at the time of execution.<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Conditional-Example" accesskey="1">Conditional Example</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Example of a conditional<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Conditional-Syntax" accesskey="2">Conditional Syntax</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">The syntax of conditionals.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Testing-Flags" accesskey="3">Testing Flags</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Conditionals that test flags.<br></td></tr><br></tbody></table><br><br><hr><br><a name="Conditional-Example"></a><br><div class="header"><br><p><br>Next: <a href="#Conditional-Syntax" accesskey="n" rel="next">Conditional Syntax</a>, Previous: <a href="#Conditionals" accesskey="p" rel="prev">Conditionals</a>, Up: <a href="#Conditionals" accesskey="u" rel="up">Conditionals</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Example-of-a-Conditional"></a><br><h3 class="section">7.1 Example of a Conditional</h3><br><br><p>The following example of a conditional tells <code>make</code> to use one<br>set of libraries if the <code>CC</code> variable is ‘<samp>gcc</samp>’, and a<br>different set of libraries otherwise.  It works by controlling which<br>of two recipe lines will be used for the rule.  The result is that<br>‘<samp>CC=gcc</samp>’ as an argument to <code>make</code> changes not only which<br>compiler is used but also which libraries are linked.<br></p><br><div class="example"><br><pre class="example">libs_for_gcc = -lgnu<br>normal_libs =<br><br>foo: $(objects)<br>ifeq ($(CC),gcc)<br>        $(CC) -o foo $(objects) $(libs_for_gcc)<br>else<br>        $(CC) -o foo $(objects) $(normal_libs)<br>endif<br></pre></div><br><br><p>This conditional uses three directives: one <code>ifeq</code>, one <code>else</code><br>and one <code>endif</code>.<br></p><br><p>The <code>ifeq</code> directive begins the conditional, and specifies the<br>condition.  It contains two arguments, separated by a comma and surrounded<br>by parentheses.  Variable substitution is performed on both arguments and<br>then they are compared.  The lines of the makefile following the<br><code>ifeq</code> are obeyed if the two arguments match; otherwise they are<br>ignored.<br></p><br><p>The <code>else</code> directive causes the following lines to be obeyed if the<br>previous conditional failed.  In the example above, this means that the<br>second alternative linking command is used whenever the first alternative<br>is not used.  It is optional to have an <code>else</code> in a conditional.<br></p><br><p>The <code>endif</code> directive ends the conditional.  Every conditional must<br>end with an <code>endif</code>.  Unconditional makefile text follows.<br></p><br><p>As this example illustrates, conditionals work at the textual level:<br>the lines of the conditional are treated as part of the makefile, or<br>ignored, according to the condition.  This is why the larger syntactic<br>units of the makefile, such as rules, may cross the beginning or the<br>end of the conditional.<br></p><br><p>When the variable <code>CC</code> has the value ‘<samp>gcc</samp>’, the above example has<br>this effect:<br></p><br><div class="example"><br><pre class="example">foo: $(objects)<br>        $(CC) -o foo $(objects) $(libs_for_gcc)<br></pre></div><br><br><p>When the variable <code>CC</code> has any other value, the effect is this:<br></p><br><div class="example"><br><pre class="example">foo: $(objects)<br>        $(CC) -o foo $(objects) $(normal_libs)<br></pre></div><br><br><p>Equivalent results can be obtained in another way by conditionalizing a<br>variable assignment and then using the variable unconditionally:<br></p><br><div class="example"><br><pre class="example">libs_for_gcc = -lgnu<br>normal_libs =<br><br>ifeq ($(CC),gcc)<br>  libs=$(libs_for_gcc)<br>else<br>  libs=$(normal_libs)<br>endif<br><br>foo: $(objects)<br>        $(CC) -o foo $(objects) $(libs)<br></pre></div><br><br><hr><br><a name="Conditional-Syntax"></a><br><div class="header"><br><p><br>Next: <a href="#Testing-Flags" accesskey="n" rel="next">Testing Flags</a>, Previous: <a href="#Conditional-Example" accesskey="p" rel="prev">Conditional Example</a>, Up: <a href="#Conditionals" accesskey="u" rel="up">Conditionals</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Syntax-of-Conditionals"></a><br><h3 class="section">7.2 Syntax of Conditionals</h3><br><a name="index-ifdef"></a><br><a name="index-ifeq"></a><br><a name="index-ifndef"></a><br><a name="index-ifneq"></a><br><a name="index-else"></a><br><a name="index-endif"></a><br><br><p>The syntax of a simple conditional with no <code>else</code> is as follows:<br></p><br><div class="example"><br><pre class="example"><var>conditional-directive</var><br><var>text-if-true</var><br>endif<br></pre></div><br><br><p>The <var>text-if-true</var> may be any lines of text, to be considered as part<br>of the makefile if the condition is true.  If the condition is false, no<br>text is used instead.<br></p><br><p>The syntax of a complex conditional is as follows:<br></p><br><div class="example"><br><pre class="example"><var>conditional-directive</var><br><var>text-if-true</var><br>else<br><var>text-if-false</var><br>endif<br></pre></div><br><br><p>or:<br></p><br><div class="example"><br><pre class="example"><var>conditional-directive-one</var><br><var>text-if-one-is-true</var><br>else <var>conditional-directive-two</var><br><var>text-if-two-is-true</var><br>else<br><var>text-if-one-and-two-are-false</var><br>endif<br></pre></div><br><br><p>There can be as many “<code>else</code> <var>conditional-directive</var>”<br>clauses as necessary.  Once a given condition is true,<br><var>text-if-true</var> is used and no other clause is used; if no<br>condition is true then <var>text-if-false</var> is used.  The<br><var>text-if-true</var> and <var>text-if-false</var> can be any number of lines<br>of text.<br></p><br><p>The syntax of the <var>conditional-directive</var> is the same whether the<br>conditional is simple or complex; after an <code>else</code> or not.  There<br>are four different directives that test different conditions.  Here is<br>a table of them:<br></p><br><dl compact="compact"><br><dt><code>ifeq (<var>arg1</var>, <var>arg2</var>)</code></dt><br><dt><code>ifeq ‘<var>arg1</var>‘ ‘<var>arg2</var>‘</code></dt><br><dt><code>ifeq “<var>arg1</var>“ “<var>arg2</var>“</code></dt><br><dt><code>ifeq “<var>arg1</var>“ ‘<var>arg2</var>‘</code></dt><br><dt><code>ifeq ‘<var>arg1</var>‘ “<var>arg2</var>“</code></dt><br><dd><p>Expand all variable references in <var>arg1</var> and <var>arg2</var> and<br>compare them.  If they are identical, the <var>text-if-true</var> is<br>effective; otherwise, the <var>text-if-false</var>, if any, is effective.<br></p><br><p>Often you want to test if a variable has a non-empty value.  When the<br>value results from complex expansions of variables and functions,<br>expansions you would consider empty may actually contain whitespace<br>characters and thus are not seen as empty.  However, you can use the<br><code>strip</code> function (see <a href="#Text-Functions">Text Functions</a>) to avoid interpreting<br>whitespace as a non-empty value.  For example:<br></p><br><div class="example"><br><pre class="example">ifeq ($(strip $(foo)),)<br><var>text-if-empty</var><br>endif<br></pre></div><br><br><p>will evaluate <var>text-if-empty</var> even if the expansion of<br><code>$(foo)</code> contains whitespace characters.<br></p><br></dd><br><dt><code>ifneq (<var>arg1</var>, <var>arg2</var>)</code></dt><br><dt><code>ifneq ‘<var>arg1</var>‘ ‘<var>arg2</var>‘</code></dt><br><dt><code>ifneq “<var>arg1</var>“ “<var>arg2</var>“</code></dt><br><dt><code>ifneq “<var>arg1</var>“ ‘<var>arg2</var>‘</code></dt><br><dt><code>ifneq ‘<var>arg1</var>‘ “<var>arg2</var>“</code></dt><br><dd><p>Expand all variable references in <var>arg1</var> and <var>arg2</var> and<br>compare them.  If they are different, the <var>text-if-true</var> is<br>effective; otherwise, the <var>text-if-false</var>, if any, is effective.<br></p><br></dd><br><dt><code>ifdef <var>variable-name</var></code></dt><br><dd><p>The <code>ifdef</code> form takes the <em>name</em> of a variable as its<br>argument, not a reference to a variable.  If the value of that<br>variable has a non-empty value, the <var>text-if-true</var> is effective;<br>otherwise, the <var>text-if-false</var>, if any, is effective.  Variables<br>that have never been defined have an empty value.  The text<br><var>variable-name</var> is expanded, so it could be a variable or function<br>that expands to the name of a variable.  For example:<br></p><br><div class="example"><br><pre class="example">bar = true<br>foo = bar<br>ifdef $(foo)<br>frobozz = yes<br>endif<br></pre></div><br><br><p>The variable reference <code>$(foo)</code> is expanded, yielding <code>bar</code>,<br>which is considered to be the name of a variable.  The variable<br><code>bar</code> is not expanded, but its value is examined to determine if<br>it is non-empty.<br></p><br><p>Note that <code>ifdef</code> only tests whether a variable has a value.  It<br>does not expand the variable to see if that value is nonempty.<br>Consequently, tests using <code>ifdef</code> return true for all definitions<br>except those like <code>foo =</code>.  To test for an empty value, use<br><code>ifeq&nbsp;($(foo),)</code><!-- /@w -->.  For example,<br></p><br><div class="example"><br><pre class="example">bar =<br>foo = $(bar)<br>ifdef foo<br>frobozz = yes<br>else<br>frobozz = no<br>endif<br></pre></div><br><br><p>sets ‘<samp>frobozz</samp>’ to ‘<samp>yes</samp>’, while:<br></p><br><div class="example"><br><pre class="example">foo =<br>ifdef foo<br>frobozz = yes<br>else<br>frobozz = no<br>endif<br></pre></div><br><br><p>sets ‘<samp>frobozz</samp>’ to ‘<samp>no</samp>’.<br></p><br></dd><br><dt><code>ifndef <var>variable-name</var></code></dt><br><dd><p>If the variable <var>variable-name</var> has an empty value, the<br><var>text-if-true</var> is effective; otherwise, the <var>text-if-false</var>,<br>if any, is effective.  The rules for expansion and testing of<br><var>variable-name</var> are identical to the <code>ifdef</code> directive.<br></p></dd><br></dl><br><br><p>Extra spaces are allowed and ignored at the beginning of the<br>conditional directive line, but a tab is not allowed.  (If the line<br>begins with a tab, it will be considered part of a recipe for a rule.)<br>Aside from this, extra spaces or tabs may be inserted with no effect<br>anywhere except within the directive name or within an argument.  A<br>comment starting with ‘<samp>#</samp>’ may appear at the end of the line.<br></p><br><p>The other two directives that play a part in a conditional are <code>else</code><br>and <code>endif</code>.  Each of these directives is written as one word, with no<br>arguments.  Extra spaces are allowed and ignored at the beginning of the<br>line, and spaces or tabs at the end.  A comment starting with ‘<samp>#</samp>’ may<br>appear at the end of the line.<br></p><br><p>Conditionals affect which lines of the makefile <code>make</code> uses.  If<br>the condition is true, <code>make</code> reads the lines of the<br><var>text-if-true</var> as part of the makefile; if the condition is false,<br><code>make</code> ignores those lines completely.  It follows that syntactic<br>units of the makefile, such as rules, may safely be split across the<br>beginning or the end of the conditional.<br></p><br><p><code>make</code> evaluates conditionals when it reads a makefile.<br>Consequently, you cannot use automatic variables in the tests of<br>conditionals because they are not defined until recipes are run<br>(see <a href="#Automatic-Variables">Automatic Variables</a>).<br></p><br><p>To prevent intolerable confusion, it is not permitted to start a<br>conditional in one makefile and end it in another.  However, you may<br>write an <code>include</code> directive within a conditional, provided you do<br>not attempt to terminate the conditional inside the included file.<br></p><br><hr><br><a name="Testing-Flags"></a><br><div class="header"><br><p><br>Previous: <a href="#Conditional-Syntax" accesskey="p" rel="prev">Conditional Syntax</a>, Up: <a href="#Conditionals" accesskey="u" rel="up">Conditionals</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Conditionals-that-Test-Flags"></a><br><h3 class="section">7.3 Conditionals that Test Flags</h3><br><br><p>You can write a conditional that tests <code>make</code> command flags such as<br>‘<samp>-t</samp>’ by using the variable <code>MAKEFLAGS</code> together with the<br><code>findstring</code> function<br>(see <a href="#Text-Functions">Functions for String Substitution and Analysis</a>).<br>This is useful when <code>touch</code> is not enough to make a file appear up<br>to date.<br></p><br><p>The <code>findstring</code> function determines whether one string appears as a<br>substring of another.  If you want to test for the ‘<samp>-t</samp>’ flag,<br>use ‘<samp>t</samp>’ as the first string and the value of <code>MAKEFLAGS</code> as<br>the other.<br></p><br><p>For example, here is how to arrange to use ‘<samp>ranlib -t</samp>’ to finish<br>marking an archive file up to date:<br></p><br><div class="example"><br><pre class="example">archive.a: …<br>ifneq (,$(findstring t,$(MAKEFLAGS)))<br>        +touch archive.a<br>        +ranlib -t archive.a<br>else<br>        ranlib archive.a<br>endif<br></pre></div><br><br><p>The ‘<samp>+</samp>’ prefix marks those recipe lines as “recursive” so that<br>they will be executed despite use of the ‘<samp>-t</samp>’ flag.<br>See <a href="#Recursion">Recursive Use of <code>make</code></a>.<br></p><br><hr><br><a name="Functions"></a><br><div class="header"><br><p><br>Next: <a href="#Running" accesskey="n" rel="next">Running</a>, Previous: <a href="#Conditionals" accesskey="p" rel="prev">Conditionals</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Functions-for-Transforming-Text"></a><br><h2 class="chapter">8 Functions for Transforming Text</h2><br><a name="index-functions"></a><br><br><p><em>Functions</em> allow you to do text processing in the makefile to<br>compute the files to operate on or the commands to use in recipes.<br>You use a function in a <em>function call</em>, where you give the name<br>of the function and some text (the <em>arguments</em>) for the function<br>to operate on.  The result of the function’s processing is substituted<br>into the makefile at the point of the call, just as a variable might<br>be substituted.<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Syntax-of-Functions" accesskey="1">Syntax of Functions</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to write a function call.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Text-Functions" accesskey="2">Text Functions</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">General-purpose text manipulation functions.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#File-Name-Functions" accesskey="3">File Name Functions</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Functions for manipulating file names.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Conditional-Functions" accesskey="4">Conditional Functions</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Functions that implement conditions.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Foreach-Function" accesskey="5">Foreach Function</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Repeat some text with controlled variation.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#File-Function" accesskey="6">File Function</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Write text to a file.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Call-Function" accesskey="7">Call Function</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Expand a user-defined function.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Value-Function" accesskey="8">Value Function</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Return the un-expanded value of a variable.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Eval-Function" accesskey="9">Eval Function</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Evaluate the arguments as makefile syntax.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Origin-Function">Origin Function</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Find where a variable got its value.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Flavor-Function">Flavor Function</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Find out the flavor of a variable.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Make-Control-Functions">Make Control Functions</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Functions that control how make runs.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Shell-Function">Shell Function</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Substitute the output of a shell command.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Guile-Function">Guile Function</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Use GNU Guile embedded scripting language.<br></td></tr><br></tbody></table><br><br><hr><br><a name="Syntax-of-Functions"></a><br><div class="header"><br><p><br>Next: <a href="#Text-Functions" accesskey="n" rel="next">Text Functions</a>, Previous: <a href="#Functions" accesskey="p" rel="prev">Functions</a>, Up: <a href="#Functions" accesskey="u" rel="up">Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Function-Call-Syntax"></a><br><h3 class="section">8.1 Function Call Syntax</h3><br><a name="index-_0024_002c-in-function-call"></a><br><a name="index-dollar-sign-_0028_0024_0029_002c-in-function-call"></a><br><a name="index-arguments-of-functions"></a><br><a name="index-functions_002c-syntax-of"></a><br><br><p>A function call resembles a variable reference.  It can appear<br>anywhere a variable reference can appear, and it is expanded using the<br>same rules as variable references.  A function call looks like this:<br></p><br><div class="example"><br><pre class="example">$(<var>function</var> <var>arguments</var>)<br></pre></div><br><br><p>or like this:<br></p><br><div class="example"><br><pre class="example">${<var>function</var> <var>arguments</var>}<br></pre></div><br><br><p>Here <var>function</var> is a function name; one of a short list of names<br>that are part of <code>make</code>.  You can also essentially create your own<br>functions by using the <code>call</code> built-in function.<br></p><br><p>The <var>arguments</var> are the arguments of the function.  They are<br>separated from the function name by one or more spaces or tabs, and if<br>there is more than one argument, then they are separated by commas.<br>Such whitespace and commas are not part of an argument’s value.  The<br>delimiters which you use to surround the function call, whether<br>parentheses or braces, can appear in an argument only in matching pairs;<br>the other kind of delimiters may appear singly.  If the arguments<br>themselves contain other function calls or variable references, it is<br>wisest to use the same kind of delimiters for all the references; write<br>‘<samp>$(subst&nbsp;a,b,$(x))</samp>’<!-- /@w -->, not ‘<samp>$(subst&nbsp;a,b,${x})</samp>’<!-- /@w -->.  This<br>is because it is clearer, and because only one type of delimiter is<br>matched to find the end of the reference.<br></p><br><p>The text written for each argument is processed by substitution of<br>variables and function calls to produce the argument value, which<br>is the text on which the function acts.  The substitution is done in the<br>order in which the arguments appear.<br></p><br><p>Commas and unmatched parentheses or braces cannot appear in the text of an<br>argument as written; leading spaces cannot appear in the text of the first<br>argument as written.  These characters can be put into the argument value<br>by variable substitution.  First define variables <code>comma</code> and<br><code>space</code> whose values are isolated comma and space characters, then<br>substitute these variables where such characters are wanted, like this:<br></p><br><div class="example"><br><pre class="example">comma:= ,<br>empty:=<br>space:= $(empty) $(empty)<br>foo:= a b c<br>bar:= $(subst $(space),$(comma),$(foo))<br># <span class="roman">bar is now ‘a,b,c’.</span><br></pre></div><br><br><p>Here the <code>subst</code> function replaces each space with a comma, through<br>the value of <code>foo</code>, and substitutes the result.<br></p><br><hr><br><a name="Text-Functions"></a><br><div class="header"><br><p><br>Next: <a href="#File-Name-Functions" accesskey="n" rel="next">File Name Functions</a>, Previous: <a href="#Syntax-of-Functions" accesskey="p" rel="prev">Syntax of Functions</a>, Up: <a href="#Functions" accesskey="u" rel="up">Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Functions-for-String-Substitution-and-Analysis"></a><br><h3 class="section">8.2 Functions for String Substitution and Analysis</h3><br><a name="index-functions_002c-for-text"></a><br><br><p>Here are some functions that operate on strings:<br></p><br><dl compact="compact"><br><dt><code>$(subst <var>from</var>,<var>to</var>,<var>text</var>)</code></dt><br><dd><a name="index-subst-1"></a><br><p>Performs a textual replacement on the text <var>text</var>: each occurrence<br>of <var>from</var> is replaced by <var>to</var>.  The result is substituted for<br>the function call.  For example,<br></p><br><div class="example"><br><pre class="example">$(subst ee,EE,feet on the street)<br></pre></div><br><br><p>substitutes the string ‘<samp>fEEt on the strEEt</samp>’.<br></p><br></dd><br><dt><code>$(patsubst <var>pattern</var>,<var>replacement</var>,<var>text</var>)</code></dt><br><dd><a name="index-patsubst-1"></a><br><p>Finds whitespace-separated words in <var>text</var> that match<br><var>pattern</var> and replaces them with <var>replacement</var>.  Here<br><var>pattern</var> may contain a ‘<samp>%</samp>’ which acts as a wildcard,<br>matching any number of any characters within a word.  If<br><var>replacement</var> also contains a ‘<samp>%</samp>’, the ‘<samp>%</samp>’ is replaced<br>by the text that matched the ‘<samp>%</samp>’ in <var>pattern</var>.  Only the first<br>‘<samp>%</samp>’ in the <var>pattern</var> and <var>replacement</var> is treated this<br>way; any subsequent ‘<samp>%</samp>’ is unchanged.<br></p><br><a name="index-_0025_002c-quoting-in-patsubst"></a><br><a name="index-_0025_002c-quoting-with-_005c-_0028backslash_0029-2"></a><br><a name="index-_005c-_0028backslash_0029_002c-to-quote-_0025-2"></a><br><a name="index-backslash-_0028_005c_0029_002c-to-quote-_0025-2"></a><br><a name="index-quoting-_0025_002c-in-patsubst"></a><br><p>‘<samp>%</samp>’ characters in <code>patsubst</code> function invocations can be<br>quoted with preceding backslashes (‘<samp>\</samp>’).  Backslashes that would<br>otherwise quote ‘<samp>%</samp>’ characters can be quoted with more backslashes.<br>Backslashes that quote ‘<samp>%</samp>’ characters or other backslashes are<br>removed from the pattern before it is compared file names or has a stem<br>substituted into it.  Backslashes that are not in danger of quoting<br>‘<samp>%</samp>’ characters go unmolested.  For example, the pattern<br><samp>the\%weird\%pattern\</samp> has ‘<samp>the%weird\</samp>’ preceding the<br>operative ‘<samp>%</samp>’ character, and ‘<samp>pattern\</samp>’ following it.  The<br>final two backslashes are left alone because they cannot affect any<br>‘<samp>%</samp>’ character.<br></p><br><p>Whitespace between words is folded into single space characters;<br>leading and trailing whitespace is discarded.<br></p><br><p>For example,<br></p><br><div class="example"><br><pre class="example">$(patsubst %.c,%.o,x.c.c bar.c)<br></pre></div><br><br><p>produces the value ‘<samp>x.c.o bar.o</samp>’.<br></p><br><p>Substitution references (see <a href="#Substitution-Refs">Substitution<br>References</a>) are a simpler way to get the effect of the <code>patsubst</code><br>function:<br></p><br><div class="example"><br><pre class="example">$(<var>var</var>:<var>pattern</var>=<var>replacement</var>)<br></pre></div><br><br><p>is equivalent to<br></p><br><div class="example"><br><pre class="example">$(patsubst <var>pattern</var>,<var>replacement</var>,$(<var>var</var>))<br></pre></div><br><br><p>The second shorthand simplifies one of the most common uses of<br><code>patsubst</code>: replacing the suffix at the end of file names.<br></p><br><div class="example"><br><pre class="example">$(<var>var</var>:<var>suffix</var>=<var>replacement</var>)<br></pre></div><br><br><p>is equivalent to<br></p><br><div class="example"><br><pre class="example">$(patsubst %<var>suffix</var>,%<var>replacement</var>,$(<var>var</var>))<br></pre></div><br><br><p>For example, you might have a list of object files:<br></p><br><div class="example"><br><pre class="example">objects = foo.o bar.o baz.o<br></pre></div><br><br><p>To get the list of corresponding source files, you could simply write:<br></p><br><div class="example"><br><pre class="example">$(objects:.o=.c)<br></pre></div><br><br><p>instead of using the general form:<br></p><br><div class="example"><br><pre class="example">$(patsubst %.o,%.c,$(objects))<br></pre></div><br><br></dd><br><dt><code>$(strip <var>string</var>)</code></dt><br><dd><a name="index-stripping-whitespace"></a><br><a name="index-whitespace_002c-stripping"></a><br><a name="index-spaces_002c-stripping"></a><br><a name="index-strip"></a><br><p>Removes leading and trailing whitespace from <var>string</var> and replaces<br>each internal sequence of one or more whitespace characters with a<br>single space.  Thus, ‘<samp>$(strip a b  c )</samp>’ results in ‘<samp>a&nbsp;b&nbsp;c</samp>’<!-- /@w -->.<br></p><br><p>The function <code>strip</code> can be very useful when used in conjunction<br>with conditionals.  When comparing something with the empty string<br>‘<samp></samp>’ using <code>ifeq</code> or <code>ifneq</code>, you usually want a string of<br>just whitespace to match the empty string (see <a href="#Conditionals">Conditionals</a>).<br></p><br><p>Thus, the following may fail to have the desired results:<br></p><br><div class="example"><br><pre class="example">.PHONY: all<br>ifneq   “$(needs_made)” “”<br>all: $(needs_made)<br>else<br>all:;@echo ‘Nothing to make!’<br>endif<br></pre></div><br><br><p>Replacing the variable reference ‘<samp><span class="nolinebreak">$(needs_made)</span></samp>’<!-- /@w --> with the<br>function call ‘<samp>$(strip&nbsp;<span class="nolinebreak">$(needs_made))</span></samp>’<!-- /@w --> in the <code>ifneq</code><br>directive would make it more robust.<br></p><br></dd><br><dt><code>$(findstring <var>find</var>,<var>in</var>)</code></dt><br><dd><a name="index-findstring"></a><br><a name="index-searching-for-strings"></a><br><a name="index-finding-strings"></a><br><a name="index-strings_002c-searching-for"></a><br><p>Searches <var>in</var> for an occurrence of <var>find</var>.  If it occurs, the<br>value is <var>find</var>; otherwise, the value is empty.  You can use this<br>function in a conditional to test for the presence of a specific<br>substring in a given string.  Thus, the two examples,<br></p><br><div class="example"><br><pre class="example">$(findstring a,a b c)<br>$(findstring a,b c)<br></pre></div><br><br><p>produce the values ‘<samp>a</samp>’ and ‘<samp></samp>’ (the empty string),<br>respectively.  See <a href="#Testing-Flags">Testing Flags</a>, for a practical application of<br><code>findstring</code>.<br></p><br><a name="index-filter"></a><br><a name="index-filtering-words"></a><br><a name="index-words_002c-filtering"></a><br></dd><br><dt><code>$(filter <var>pattern</var>…,<var>text</var>)</code></dt><br><dd><p>Returns all whitespace-separated words in <var>text</var> that <em>do</em> match<br>any of the <var>pattern</var> words, removing any words that <em>do not</em><br>match.  The patterns are written using ‘<samp>%</samp>’, just like the patterns<br>used in the <code>patsubst</code> function above.<br></p><br><p>The <code>filter</code> function can be used to separate out different types<br>of strings (such as file names) in a variable.  For example:<br></p><br><div class="example"><br><pre class="example">sources := foo.c bar.c baz.s ugh.h<br>foo: $(sources)<br>        cc $(filter %.c %.s,$(sources)) -o foo<br></pre></div><br><br><p>says that <samp>foo</samp> depends of <samp>foo.c</samp>, <samp>bar.c</samp>,<br><samp>baz.s</samp> and <samp>ugh.h</samp> but only <samp>foo.c</samp>, <samp>bar.c</samp> and<br><samp>baz.s</samp> should be specified in the command to the<br>compiler.<br></p><br></dd><br><dt><code>$(filter-out <var>pattern</var>…,<var>text</var>)</code></dt><br><dd><a name="index-filter_002dout"></a><br><a name="index-filtering-out-words"></a><br><a name="index-words_002c-filtering-out"></a><br><p>Returns all whitespace-separated words in <var>text</var> that <em>do not</em><br>match any of the <var>pattern</var> words, removing the words that <em>do</em><br>match one or more.  This is the exact opposite of the <code>filter</code><br>function.<br></p><br><p>For example, given:<br></p><br><div class="example"><br><pre class="example">objects=main1.o foo.o main2.o bar.o<br>mains=main1.o main2.o<br></pre></div><br><br><p>the following generates a list which contains all the object files not<br>in ‘<samp>mains</samp>’:<br></p><br><div class="example"><br><pre class="example">$(filter-out $(mains),$(objects))<br></pre></div><br><br><a name="index-sort"></a><br><a name="index-sorting-words"></a><br></dd><br><dt><code>$(sort <var>list</var>)</code></dt><br><dd><p>Sorts the words of <var>list</var> in lexical order, removing duplicate<br>words.  The output is a list of words separated by single spaces.<br>Thus,<br></p><br><div class="example"><br><pre class="example">$(sort foo bar lose)<br></pre></div><br><br><p>returns the value ‘<samp>bar foo lose</samp>’.<br></p><br><a name="index-removing-duplicate-words"></a><br><a name="index-duplicate-words_002c-removing"></a><br><a name="index-words_002c-removing-duplicates"></a><br><p>Incidentally, since <code>sort</code> removes duplicate words, you can use<br>it for this purpose even if you don’t care about the sort order.<br></p><br></dd><br><dt><code>$(word <var>n</var>,<var>text</var>)</code></dt><br><dd><a name="index-word"></a><br><a name="index-word_002c-selecting-a"></a><br><a name="index-selecting-a-word"></a><br><p>Returns the <var>n</var>th word of <var>text</var>.  The legitimate values of<br><var>n</var> start from 1.  If <var>n</var> is bigger than the number of words<br>in <var>text</var>, the value is empty.  For example,<br></p><br><div class="example"><br><pre class="example">$(word 2, foo bar baz)<br></pre></div><br><br><p>returns ‘<samp>bar</samp>’.<br></p><br></dd><br><dt><code>$(wordlist <var>s</var>,<var>e</var>,<var>text</var>)</code></dt><br><dd><a name="index-wordlist"></a><br><a name="index-words_002c-selecting-lists-of"></a><br><a name="index-selecting-word-lists"></a><br><p>Returns the list of words in <var>text</var> starting with word <var>s</var> and<br>ending with word <var>e</var> (inclusive).  The legitimate values of <var>s</var><br>start from 1; <var>e</var> may start from 0.  If <var>s</var> is bigger than the<br>number of words in <var>text</var>, the value is empty.  If <var>e</var> is<br>bigger than the number of words in <var>text</var>, words up to the end of<br><var>text</var> are returned.  If <var>s</var> is greater than <var>e</var>, nothing<br>is returned.  For example,<br></p><br><div class="example"><br><pre class="example">$(wordlist 2, 3, foo bar baz)<br></pre></div><br><br><p>returns ‘<samp>bar baz</samp>’.<br></p><br></dd><br><dt><code>$(words <var>text</var>)</code></dt><br><dd><a name="index-words"></a><br><a name="index-words_002c-finding-number"></a><br><p>Returns the number of words in <var>text</var>.<br>Thus, the last word of <var>text</var> is<br><code>$(word&nbsp;$(words&nbsp;<var>text</var>),<var>text</var>)</code><!-- /@w -->.<br></p><br></dd><br><dt><code>$(firstword <var>names</var>…)</code></dt><br><dd><a name="index-firstword"></a><br><a name="index-words_002c-extracting-first"></a><br><p>The argument <var>names</var> is regarded as a series of names, separated<br>by whitespace.  The value is the first name in the series.  The rest<br>of the names are ignored.<br></p><br><p>For example,<br></p><br><div class="example"><br><pre class="example">$(firstword foo bar)<br></pre></div><br><br><p>produces the result ‘<samp>foo</samp>’.  Although <code>$(firstword<br><var>text</var>)</code> is the same as <code>$(word 1,<var>text</var>)</code>, the<br><code>firstword</code> function is retained for its simplicity.<br></p><br><br></dd><br><dt><code>$(lastword <var>names</var>…)</code></dt><br><dd><a name="index-lastword"></a><br><a name="index-words_002c-extracting-last"></a><br><p>The argument <var>names</var> is regarded as a series of names, separated<br>by whitespace.  The value is the last name in the series.<br></p><br><p>For example,<br></p><br><div class="example"><br><pre class="example">$(lastword foo bar)<br></pre></div><br><br><p>produces the result ‘<samp>bar</samp>’.  Although <code>$(lastword<br><var>text</var>)</code> is the same as <code>$(word $(words <var>text</var>),<var>text</var>)</code>,<br>the <code>lastword</code> function was added for its simplicity and better<br>performance.<br></p></dd><br></dl><br><br><br><p>Here is a realistic example of the use of <code>subst</code> and<br><code>patsubst</code>.  Suppose that a makefile uses the <code>VPATH</code> variable<br>to specify a list of directories that <code>make</code> should search for<br>prerequisite files<br>(see <a href="#General-Search"><code>VPATH</code> Search Path for All Prerequisites</a>).<br>This example shows how to<br>tell the C compiler to search for header files in the same list of<br>directories.<br></p><br><p>The value of <code>VPATH</code> is a list of directories separated by colons,<br>such as ‘<samp>src:../headers</samp>’.  First, the <code>subst</code> function is used to<br>change the colons to spaces:<br></p><br><div class="example"><br><pre class="example">$(subst :, ,$(VPATH))<br></pre></div><br><br><p>This produces ‘<samp>src ../headers</samp>’.  Then <code>patsubst</code> is used to turn<br>each directory name into a ‘<samp>-I</samp>’ flag.  These can be added to the<br>value of the variable <code>CFLAGS</code>, which is passed automatically to the C<br>compiler, like this:<br></p><br><div class="example"><br><pre class="example">override CFLAGS += $(patsubst %,-I%,$(subst :, ,$(VPATH)))<br></pre></div><br><br><p>The effect is to append the text ‘<samp>-Isrc -I../headers</samp>’ to the<br>previously given value of <code>CFLAGS</code>.  The <code>override</code> directive is<br>used so that the new value is assigned even if the previous value of<br><code>CFLAGS</code> was specified with a command argument (see <a href="#Override-Directive">The <code>override</code> Directive</a>).<br></p><br><hr><br><a name="File-Name-Functions"></a><br><div class="header"><br><p><br>Next: <a href="#Conditional-Functions" accesskey="n" rel="next">Conditional Functions</a>, Previous: <a href="#Text-Functions" accesskey="p" rel="prev">Text Functions</a>, Up: <a href="#Functions" accesskey="u" rel="up">Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Functions-for-File-Names"></a><br><h3 class="section">8.3 Functions for File Names</h3><br><a name="index-functions_002c-for-file-names"></a><br><a name="index-file-name-functions"></a><br><br><p>Several of the built-in expansion functions relate specifically to<br>taking apart file names or lists of file names.<br></p><br><p>Each of the following functions performs a specific transformation on a<br>file name.  The argument of the function is regarded as a series of file<br>names, separated by whitespace.  (Leading and trailing whitespace is<br>ignored.)  Each file name in the series is transformed in the same way and<br>the results are concatenated with single spaces between them.<br></p><br><dl compact="compact"><br><dt><code>$(dir <var>names</var>…)</code></dt><br><dd><a name="index-dir"></a><br><a name="index-directory-part"></a><br><a name="index-file-name_002c-directory-part"></a><br><p>Extracts the directory-part of each file name in <var>names</var>.  The<br>directory-part of the file name is everything up through (and<br>including) the last slash in it.  If the file name contains no slash,<br>the directory part is the string ‘<samp>./</samp>’.  For example,<br></p><br><div class="example"><br><pre class="example">$(dir src/foo.c hacks)<br></pre></div><br><br><p>produces the result ‘<samp>src/ ./</samp>’.<br></p><br></dd><br><dt><code>$(notdir <var>names</var>…)</code></dt><br><dd><a name="index-notdir"></a><br><a name="index-file-name_002c-nondirectory-part"></a><br><a name="index-nondirectory-part"></a><br><p>Extracts all but the directory-part of each file name in <var>names</var>.<br>If the file name contains no slash, it is left unchanged.  Otherwise,<br>everything through the last slash is removed from it.<br></p><br><p>A file name that ends with a slash becomes an empty string.  This is<br>unfortunate, because it means that the result does not always have the<br>same number of whitespace-separated file names as the argument had;<br>but we do not see any other valid alternative.<br></p><br><p>For example,<br></p><br><div class="example"><br><pre class="example">$(notdir src/foo.c hacks)<br></pre></div><br><br><p>produces the result ‘<samp>foo.c hacks</samp>’.<br></p><br></dd><br><dt><code>$(suffix <var>names</var>…)</code></dt><br><dd><a name="index-suffix"></a><br><a name="index-suffix_002c-function-to-find"></a><br><a name="index-file-name-suffix"></a><br><p>Extracts the suffix of each file name in <var>names</var>.  If the file name<br>contains a period, the suffix is everything starting with the last<br>period.  Otherwise, the suffix is the empty string.  This frequently<br>means that the result will be empty when <var>names</var> is not, and if<br><var>names</var> contains multiple file names, the result may contain fewer<br>file names.<br></p><br><p>For example,<br></p><br><div class="example"><br><pre class="example">$(suffix src/foo.c src-1.0/bar.c hacks)<br></pre></div><br><br><p>produces the result ‘<samp>.c .c</samp>’.<br></p><br></dd><br><dt><code>$(basename <var>names</var>…)</code></dt><br><dd><a name="index-basename-1"></a><br><a name="index-basename"></a><br><a name="index-file-name_002c-basename-of"></a><br><p>Extracts all but the suffix of each file name in <var>names</var>.  If the<br>file name contains a period, the basename is everything starting up to<br>(and not including) the last period.  Periods in the directory part are<br>ignored.  If there is no period, the basename is the entire file name.<br>For example,<br></p><br><div class="example"><br><pre class="example">$(basename src/foo.c src-1.0/bar hacks)<br></pre></div><br><br><p>produces the result ‘<samp>src/foo src-1.0/bar hacks</samp>’.<br></p><br></dd><br><dt><code>$(addsuffix <var>suffix</var>,<var>names</var>…)</code></dt><br><dd><a name="index-addsuffix"></a><br><a name="index-suffix_002c-adding"></a><br><a name="index-file-name-suffix_002c-adding"></a><br><p>The argument <var>names</var> is regarded as a series of names, separated<br>by whitespace; <var>suffix</var> is used as a unit.  The value of<br><var>suffix</var> is appended to the end of each individual name and the<br>resulting larger names are concatenated with single spaces between<br>them.  For example,<br></p><br><div class="example"><br><pre class="example">$(addsuffix .c,foo bar)<br></pre></div><br><br><p>produces the result ‘<samp>foo.c bar.c</samp>’.<br></p><br></dd><br><dt><code>$(addprefix <var>prefix</var>,<var>names</var>…)</code></dt><br><dd><a name="index-addprefix"></a><br><a name="index-prefix_002c-adding"></a><br><a name="index-file-name-prefix_002c-adding"></a><br><p>The argument <var>names</var> is regarded as a series of names, separated<br>by whitespace; <var>prefix</var> is used as a unit.  The value of<br><var>prefix</var> is prepended to the front of each individual name and the<br>resulting larger names are concatenated with single spaces between<br>them.  For example,<br></p><br><div class="example"><br><pre class="example">$(addprefix src/,foo bar)<br></pre></div><br><br><p>produces the result ‘<samp>src/foo src/bar</samp>’.<br></p><br></dd><br><dt><code>$(join <var>list1</var>,<var>list2</var>)</code></dt><br><dd><a name="index-join"></a><br><a name="index-joining-lists-of-words"></a><br><a name="index-words_002c-joining-lists"></a><br><p>Concatenates the two arguments word by word: the two first words (one<br>from each argument) concatenated form the first word of the result, the<br>two second words form the second word of the result, and so on.  So the<br><var>n</var>th word of the result comes from the <var>n</var>th word of each<br>argument.  If one argument has more words that the other, the extra<br>words are copied unchanged into the result.<br></p><br><p>For example, ‘<samp>$(join a b,.c .o)</samp>’ produces ‘<samp>a.c b.o</samp>’.<br></p><br><p>Whitespace between the words in the lists is not preserved; it is<br>replaced with a single space.<br></p><br><p>This function can merge the results of the <code>dir</code> and<br><code>notdir</code> functions, to produce the original list of files which<br>was given to those two functions.<br></p><br></dd><br><dt><code>$(wildcard <var>pattern</var>)</code></dt><br><dd><a name="index-wildcard-2"></a><br><a name="index-wildcard_002c-function"></a><br><p>The argument <var>pattern</var> is a file name pattern, typically containing<br>wildcard characters (as in shell file name patterns).  The result of<br><code>wildcard</code> is a space-separated list of the names of existing files<br>that match the pattern.<br>See <a href="#Wildcards">Using Wildcard Characters in File Names</a>.<br></p><br></dd><br><dt><code>$(realpath <var>names</var>…)</code></dt><br><dd><a name="index-realpath-1"></a><br><a name="index-realpath"></a><br><a name="index-file-name_002c-realpath-of"></a><br><p>For each file name in <var>names</var> return the canonical absolute name.<br>A canonical name does not contain any <code>.</code> or <code>..</code> components,<br>nor any repeated path separators (<code>/</code>) or symlinks.  In case of a<br>failure the empty string is returned.  Consult the <code>realpath(3)</code><br>documentation for a list of possible failure causes.<br></p><br></dd><br><dt><code>$(abspath <var>names</var>…)</code></dt><br><dd><a name="index-abspath-1"></a><br><a name="index-abspath"></a><br><a name="index-file-name_002c-abspath-of"></a><br><p>For each file name in <var>names</var> return an absolute name that does<br>not contain any <code>.</code> or <code>..</code> components, nor any repeated path<br>separators (<code>/</code>).  Note that, in contrast to <code>realpath</code><br>function, <code>abspath</code> does not resolve symlinks and does not require<br>the file names to refer to an existing file or directory.  Use the<br><code>wildcard</code> function to test for existence.<br></p></dd><br></dl><br><br><hr><br><a name="Conditional-Functions"></a><br><div class="header"><br><p><br>Next: <a href="#Foreach-Function" accesskey="n" rel="next">Foreach Function</a>, Previous: <a href="#File-Name-Functions" accesskey="p" rel="prev">File Name Functions</a>, Up: <a href="#Functions" accesskey="u" rel="up">Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Functions-for-Conditionals"></a><br><h3 class="section">8.4 Functions for Conditionals</h3><br><a name="index-if"></a><br><a name="index-conditional-expansion"></a><br><p>There are three functions that provide conditional expansion.  A key<br>aspect of these functions is that not all of the arguments are<br>expanded initially.  Only those arguments which need to be expanded,<br>will be expanded.<br></p><br><dl compact="compact"><br><dt><code>$(if <var>condition</var>,<var>then-part</var>[,<var>else-part</var>])</code></dt><br><dd><a name="index-if-1"></a><br><p>The <code>if</code> function provides support for conditional expansion in a<br>functional context (as opposed to the GNU <code>make</code> makefile<br>conditionals such as <code>ifeq</code> (see <a href="#Conditional-Syntax">Syntax of<br>Conditionals</a>).<br></p><br><p>The first argument, <var>condition</var>, first has all preceding and<br>trailing whitespace stripped, then is expanded.  If it expands to any<br>non-empty string, then the condition is considered to be true.  If it<br>expands to an empty string, the condition is considered to be false.<br></p><br><p>If the condition is true then the second argument, <var>then-part</var>, is<br>evaluated and this is used as the result of the evaluation of the entire<br><code>if</code> function.<br></p><br><p>If the condition is false then the third argument, <var>else-part</var>, is<br>evaluated and this is the result of the <code>if</code> function.  If there is<br>no third argument, the <code>if</code> function evaluates to nothing (the<br>empty string).<br></p><br><p>Note that only one of the <var>then-part</var> or the <var>else-part</var> will be<br>evaluated, never both.  Thus, either can contain side-effects (such as<br><code>shell</code> function calls, etc.)<br></p><br></dd><br><dt><code>$(or <var>condition1</var>[,<var>condition2</var>[,<var>condition3</var>…]])</code></dt><br><dd><a name="index-or"></a><br><p>The <code>or</code> function provides a “short-circuiting” OR operation.<br>Each argument is expanded, in order.  If an argument expands to a<br>non-empty string the processing stops and the result of the expansion<br>is that string.  If, after all arguments are expanded, all of them are<br>false (empty), then the result of the expansion is the empty string.<br></p><br></dd><br><dt><code>$(and <var>condition1</var>[,<var>condition2</var>[,<var>condition3</var>…]])</code></dt><br><dd><a name="index-and"></a><br><p>The <code>and</code> function provides a “short-circuiting” AND operation.<br>Each argument is expanded, in order.  If an argument expands to an<br>empty string the processing stops and the result of the expansion is<br>the empty string.  If all arguments expand to a non-empty string then<br>the result of the expansion is the expansion of the last argument.<br></p><br></dd><br></dl><br><br><hr><br><a name="Foreach-Function"></a><br><div class="header"><br><p><br>Next: <a href="#File-Function" accesskey="n" rel="next">File Function</a>, Previous: <a href="#Conditional-Functions" accesskey="p" rel="prev">Conditional Functions</a>, Up: <a href="#Functions" accesskey="u" rel="up">Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="The-foreach-Function"></a><br><h3 class="section">8.5 The <code>foreach</code> Function</h3><br><a name="index-foreach"></a><br><a name="index-words_002c-iterating-over"></a><br><br><p>The <code>foreach</code> function is very different from other functions.  It<br>causes one piece of text to be used repeatedly, each time with a different<br>substitution performed on it.  It resembles the <code>for</code> command in the<br>shell <code>sh</code> and the <code>foreach</code> command in the C-shell <code>csh</code>.<br></p><br><p>The syntax of the <code>foreach</code> function is:<br></p><br><div class="example"><br><pre class="example">$(foreach <var>var</var>,<var>list</var>,<var>text</var>)<br></pre></div><br><br><p>The first two arguments, <var>var</var> and <var>list</var>, are expanded before<br>anything else is done; note that the last argument, <var>text</var>, is<br><strong>not</strong> expanded at the same time.  Then for each word of the expanded<br>value of <var>list</var>, the variable named by the expanded value of <var>var</var><br>is set to that word, and <var>text</var> is expanded.  Presumably <var>text</var><br>contains references to that variable, so its expansion will be different<br>each time.<br></p><br><p>The result is that <var>text</var> is expanded as many times as there are<br>whitespace-separated words in <var>list</var>.  The multiple expansions of<br><var>text</var> are concatenated, with spaces between them, to make the result<br>of <code>foreach</code>.<br></p><br><p>This simple example sets the variable ‘<samp>files</samp>’ to the list of all files<br>in the directories in the list ‘<samp>dirs</samp>’:<br></p><br><div class="example"><br><pre class="example">dirs := a b c d<br>files := $(foreach dir,$(dirs),$(wildcard $(dir)/))<br></pre></div><br><br><p>Here <var>text</var> is ‘<samp>$(wildcard $(dir)/<em>)</em></samp>’.  The first repetition<br>finds the value ‘<samp>a</samp>’ for <code>dir</code>, so it produces the same result<br>as ‘<samp>$(wildcard a/)</samp>’; the second repetition produces the result<br>of ‘<samp>$(wildcard b/<em>)</em></samp>’; and the third, that of ‘<samp>$(wildcard c/)</samp>’.<br></p><br><p>This example has the same result (except for setting ‘<samp>dirs</samp>’) as<br>the following example:<br></p><br><div class="example"><br><pre class="example">files := $(wildcard a/<em> b/</em> c/<em> d/</em>)<br></pre></div><br><br><p>When <var>text</var> is complicated, you can improve readability by giving it<br>a name, with an additional variable:<br></p><br><div class="example"><br><pre class="example">find_files = $(wildcard $(dir)/<em>)<br>dirs := a b c d<br>files := $(foreach dir,$(dirs),$(find_files))<br></em></pre></div><br><br><p>Here we use the variable <code>find_files</code> this way.  We use plain ‘<samp>=</samp>’<br>to define a recursively-expanding variable, so that its value contains an<br>actual function call to be re-expanded under the control of <code>foreach</code>;<br>a simply-expanded variable would not do, since <code>wildcard</code> would be<br>called only once at the time of defining <code>find_files</code>.<br></p><br><p>The <code>foreach</code> function has no permanent effect on the variable<br><var>var</var>; its value and flavor after the <code>foreach</code> function call are<br>the same as they were beforehand.  The other values which are taken from<br><var>list</var> are in effect only temporarily, during the execution of<br><code>foreach</code>.  The variable <var>var</var> is a simply-expanded variable<br>during the execution of <code>foreach</code>.  If <var>var</var> was undefined<br>before the <code>foreach</code> function call, it is undefined after the call.<br>See <a href="#Flavors">The Two Flavors of Variables</a>.<br></p><br><p>You must take care when using complex variable expressions that result in<br>variable names because many strange things are valid variable names, but<br>are probably not what you intended.  For example,<br></p><br><div class="smallexample"><br><pre class="smallexample">files := $(foreach Esta-escrito-en-espanol!,b c ch,$(find_files))<br></pre></div><br><br><p>might be useful if the value of <code>find_files</code> references the variable<br>whose name is ‘<samp>Esta-escrito-en-espanol!</samp>’ (es un nombre bastante largo,<br>no?), but it is more likely to be a mistake.<br></p><br><hr><br><a name="File-Function"></a><br><div class="header"><br><p><br>Next: <a href="#Call-Function" accesskey="n" rel="next">Call Function</a>, Previous: <a href="#Foreach-Function" accesskey="p" rel="prev">Foreach Function</a>, Up: <a href="#Functions" accesskey="u" rel="up">Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="The-file-Function"></a><br><h3 class="section">8.6 The <code>file</code> Function</h3><br><a name="index-file"></a><br><a name="index-writing-to-a-file"></a><br><a name="index-file_002c-writing-to"></a><br><a name="index-reading-from-a-file"></a><br><a name="index-file_002c-reading-from"></a><br><br><p>The <code>file</code> function allows the makefile to write to or read from<br>a file.  Two modes of writing are supported: overwrite, where the text<br>is written to the beginning of the file and any existing content is<br>lost, and append, where the text is written to the end of the file,<br>preserving the existing content.  In both cases the file is created if<br>it does not exist.  It is a fatal error if the file cannot be opened<br>for writing, or if the write operation fails.  The <code>file</code><br>function expands to the empty string when writing to a file.<br></p><br><p>When reading from a file, the <code>file</code> function expands to the<br>verbatim contents of the file, except that the final newline (if there<br>is one) will be stripped.  Attempting to read from a non-existent file<br>expands to the empty string.<br></p><br><p>The syntax of the <code>file</code> function is:<br></p><br><div class="example"><br><pre class="example">$(file <var>op</var> <var>filename</var>[,<var>text</var>])<br></pre></div><br><br><p>When the <code>file</code> function is evaluated all its arguments are<br>expanded first, then the file indicated by <var>filename</var> will be<br>opened in the mode described by <var>op</var>.<br></p><br><p>The operator <var>op</var> can be <code>&gt;</code> to indicate the file will be<br>overwritten with new content, <code>&gt;&gt;</code> to indicate the current<br>contents of the file will be appended to, or <code>&lt;</code> to indicate the<br>contents of the file will be read in.  The <var>filename</var> specifies<br>the file to be written to or read from.  There may optionally be<br>whitespace between the operator and the file name.<br></p><br><p>When reading files, it is an error to provide a <var>text</var> value.<br></p><br><p>When writing files, <var>text</var> will be written to the file.  If<br><var>text</var> does not already end in a newline a final newline will be<br>written (even if <var>text</var> is the empty string).  If the <var>text</var><br>argument is not given at all, nothing will be written.<br></p><br><p>For example, the <code>file</code> function can be useful if your build<br>system has a limited command line size and your recipe runs a command<br>that can accept arguments from a file as well.  Many commands use the<br>convention that an argument prefixed with an <code>@</code> specifies a<br>file containing more arguments.  Then you might write your recipe in<br>this way:<br></p><br><div class="example"><br><pre class="example">program: $(OBJECTS)<br>        $(file &gt;$@.in,$^)<br>        $(CMD) $(CMDFLAGS) @$@.in<br>        @rm $@.in<br></pre></div><br><br><p>If the command required each argument to be on a separate line of the<br>input file, you might write your recipe like this:<br></p><br><div class="example"><br><pre class="example">program: $(OBJECTS)<br>        $(file &gt;$@.in) $(foreach O,$^,$(file &gt;&gt;$@.in,$O))<br>        $(CMD) $(CMDFLAGS) @$@.in<br>        @rm $@.in<br></pre></div><br><br><hr><br><a name="Call-Function"></a><br><div class="header"><br><p><br>Next: <a href="#Value-Function" accesskey="n" rel="next">Value Function</a>, Previous: <a href="#File-Function" accesskey="p" rel="prev">File Function</a>, Up: <a href="#Functions" accesskey="u" rel="up">Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="The-call-Function"></a><br><h3 class="section">8.7 The <code>call</code> Function</h3><br><a name="index-call"></a><br><a name="index-functions_002c-user-defined"></a><br><a name="index-user-defined-functions"></a><br><br><p>The <code>call</code> function is unique in that it can be used to create new<br>parameterized functions.  You can write a complex expression as the<br>value of a variable, then use <code>call</code> to expand it with different<br>values.<br></p><br><p>The syntax of the <code>call</code> function is:<br></p><br><div class="example"><br><pre class="example">$(call <var>variable</var>,<var>param</var>,<var>param</var>,…)<br></pre></div><br><br><p>When <code>make</code> expands this function, it assigns each <var>param</var> to<br>temporary variables <code>$(1)</code>, <code>$(2)</code>, etc.  The variable<br><code>$(0)</code> will contain <var>variable</var>.  There is no maximum number of<br>parameter arguments.  There is no minimum, either, but it doesn’t make<br>sense to use <code>call</code> with no parameters.<br></p><br><p>Then <var>variable</var> is expanded as a <code>make</code> variable in the context<br>of these temporary assignments.  Thus, any reference to <code>$(1)</code> in<br>the value of <var>variable</var> will resolve to the first <var>param</var> in the<br>invocation of <code>call</code>.<br></p><br><p>Note that <var>variable</var> is the <em>name</em> of a variable, not a<br><em>reference</em> to that variable.  Therefore you would not normally use<br>a ‘<samp>$</samp>’ or parentheses when writing it.  (You can, however, use a<br>variable reference in the name if you want the name not to be a<br>constant.)<br></p><br><p>If <var>variable</var> is the name of a built-in function, the built-in function<br>is always invoked (even if a <code>make</code> variable by that name also<br>exists).<br></p><br><p>The <code>call</code> function expands the <var>param</var> arguments before<br>assigning them to temporary variables.  This means that <var>variable</var><br>values containing references to built-in functions that have special<br>expansion rules, like <code>foreach</code> or <code>if</code>, may not work as you<br>expect.<br></p><br><p>Some examples may make this clearer.<br></p><br><p>This macro simply reverses its arguments:<br></p><br><div class="smallexample"><br><pre class="smallexample">reverse = $(2) $(1)<br><br>foo = $(call reverse,a,b)<br></pre></div><br><br><p>Here <var>foo</var> will contain ‘<samp>b a</samp>’.<br></p><br><p>This one is slightly more interesting: it defines a macro to search for<br>the first instance of a program in <code>PATH</code>:<br></p><br><div class="smallexample"><br><pre class="smallexample">pathsearch = $(firstword $(wildcard $(addsuffix /$(1),$(subst :, ,$(PATH)))))<br><br>LS := $(call pathsearch,ls)<br></pre></div><br><br><p>Now the variable LS contains <code>/bin/ls</code> or similar.<br></p><br><p>The <code>call</code> function can be nested.  Each recursive invocation gets<br>its own local values for <code>$(1)</code>, etc. that mask the values of<br>higher-level <code>call</code>.  For example, here is an implementation of a<br><em>map</em> function:<br></p><br><div class="smallexample"><br><pre class="smallexample">map = $(foreach a,$(2),$(call $(1),$(a)))<br></pre></div><br><br><p>Now you can <var>map</var> a function that normally takes only one argument,<br>such as <code>origin</code>, to multiple values in one step:<br></p><br><div class="smallexample"><br><pre class="smallexample">o = $(call map,origin,o map MAKE)<br></pre></div><br><br><p>and end up with <var>o</var> containing something like ‘<samp>file file default</samp>’.<br></p><br><p>A final caution: be careful when adding whitespace to the arguments to<br><code>call</code>.  As with other functions, any whitespace contained in the<br>second and subsequent arguments is kept; this can cause strange<br>effects.  It’s generally safest to remove all extraneous whitespace when<br>providing parameters to <code>call</code>.<br></p><br><hr><br><a name="Value-Function"></a><br><div class="header"><br><p><br>Next: <a href="#Eval-Function" accesskey="n" rel="next">Eval Function</a>, Previous: <a href="#Call-Function" accesskey="p" rel="prev">Call Function</a>, Up: <a href="#Functions" accesskey="u" rel="up">Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="The-value-Function"></a><br><h3 class="section">8.8 The <code>value</code> Function</h3><br><a name="index-value-1"></a><br><a name="index-variables_002c-unexpanded-value"></a><br><br><p>The <code>value</code> function provides a way for you to use the value of a<br>variable <em>without</em> having it expanded.  Please note that this<br>does not undo expansions which have already occurred; for example if<br>you create a simply expanded variable its value is expanded during the<br>definition; in that case the <code>value</code> function will return the<br>same result as using the variable directly.<br></p><br><p>The syntax of the <code>value</code> function is:<br></p><br><div class="example"><br><pre class="example">$(value <var>variable</var>)<br></pre></div><br><br><p>Note that <var>variable</var> is the <em>name</em> of a variable, not a<br><em>reference</em> to that variable.  Therefore you would not normally<br>use a ‘<samp>$</samp>’ or parentheses when writing it.  (You can, however, use<br>a variable reference in the name if you want the name not to be a<br>constant.)<br></p><br><p>The result of this function is a string containing the value of<br><var>variable</var>, without any expansion occurring.  For example, in this<br>makefile:<br></p><br><div class="example"><br><pre class="example">FOO = $PATH<br><br>all:<br>        @echo $(FOO)<br>        @echo $(value FOO)<br></pre></div><br><br><p>The first output line would be <code>ATH</code>, since the “$P” would be<br>expanded as a <code>make</code> variable, while the second output line would<br>be the current value of your <code>$PATH</code> environment variable, since<br>the <code>value</code> function avoided the expansion.<br></p><br><p>The <code>value</code> function is most often used in conjunction with the<br><code>eval</code> function (see <a href="#Eval-Function">Eval Function</a>).<br></p><br><hr><br><a name="Eval-Function"></a><br><div class="header"><br><p><br>Next: <a href="#Origin-Function" accesskey="n" rel="next">Origin Function</a>, Previous: <a href="#Value-Function" accesskey="p" rel="prev">Value Function</a>, Up: <a href="#Functions" accesskey="u" rel="up">Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="The-eval-Function"></a><br><h3 class="section">8.9 The <code>eval</code> Function</h3><br><a name="index-eval"></a><br><a name="index-evaluating-makefile-syntax"></a><br><a name="index-makefile-syntax_002c-evaluating"></a><br><br><p>The <code>eval</code> function is very special: it allows you to define new<br>makefile constructs that are not constant; which are the result of<br>evaluating other variables and functions.  The argument to the<br><code>eval</code> function is expanded, then the results of that expansion<br>are parsed as makefile syntax.  The expanded results can define new<br><code>make</code> variables, targets, implicit or explicit rules, etc.<br></p><br><p>The result of the <code>eval</code> function is always the empty string;<br>thus, it can be placed virtually anywhere in a makefile without<br>causing syntax errors.<br></p><br><p>It’s important to realize that the <code>eval</code> argument is expanded<br><em>twice</em>; first by the <code>eval</code> function, then the results of<br>that expansion are expanded again when they are parsed as makefile<br>syntax.  This means you may need to provide extra levels of escaping<br>for “$” characters when using <code>eval</code>.  The <code>value</code><br>function (see <a href="#Value-Function">Value Function</a>) can sometimes be useful in these<br>situations, to circumvent unwanted expansions.<br></p><br><p>Here is an example of how <code>eval</code> can be used; this example<br>combines a number of concepts and other functions.  Although it might<br>seem overly complex to use <code>eval</code> in this example, rather than<br>just writing out the rules, consider two things: first, the template<br>definition (in <code>PROGRAM_template</code>) could need to be much more<br>complex than it is here; and second, you might put the complex,<br>“generic” part of this example into another makefile, then include<br>it in all the individual makefiles.  Now your individual makefiles are<br>quite straightforward.<br></p><br><div class="example"><br><pre class="example">PROGRAMS    = server client<br><br>server_OBJS = server.o server_priv.o server_access.o<br>server_LIBS = priv protocol<br><br>client_OBJS = client.o client_api.o client_mem.o<br>client_LIBS = protocol<br><br># Everything after this is generic<br><br>.PHONY: all<br>all: $(PROGRAMS)<br><br>define PROGRAM_template =<br> $(1): $$($(1)_OBJS) $$($(1)_LIBS:%=-l%)<br> ALL_OBJS   += $$($(1)_OBJS)<br>endef<br><br>$(foreach prog,$(PROGRAMS),$(eval $(call PROGRAM_template,$(prog))))<br><br>$(PROGRAMS):<br>        $(LINK.o) $^ $(LDLIBS) -o $@<br><br>clean:<br>        rm -f $(ALL_OBJS) $(PROGRAMS)<br></pre></div><br><br><hr><br><a name="Origin-Function"></a><br><div class="header"><br><p><br>Next: <a href="#Flavor-Function" accesskey="n" rel="next">Flavor Function</a>, Previous: <a href="#Eval-Function" accesskey="p" rel="prev">Eval Function</a>, Up: <a href="#Functions" accesskey="u" rel="up">Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="The-origin-Function"></a><br><h3 class="section">8.10 The <code>origin</code> Function</h3><br><a name="index-origin"></a><br><a name="index-variables_002c-origin-of"></a><br><a name="index-origin-of-variable"></a><br><br><p>The <code>origin</code> function is unlike most other functions in that it does<br>not operate on the values of variables; it tells you something <em>about</em><br>a variable.  Specifically, it tells you where it came from.<br></p><br><p>The syntax of the <code>origin</code> function is:<br></p><br><div class="example"><br><pre class="example">$(origin <var>variable</var>)<br></pre></div><br><br><p>Note that <var>variable</var> is the <em>name</em> of a variable to inquire about,<br>not a <em>reference</em> to that variable.  Therefore you would not normally<br>use a ‘<samp>$</samp>’ or parentheses when writing it.  (You can, however, use a<br>variable reference in the name if you want the name not to be a constant.)<br></p><br><p>The result of this function is a string telling you how the variable<br><var>variable</var> was defined:<br></p><br><dl compact="compact"><br><dt>‘<samp>undefined</samp>’</dt><br><dd><br><p>if <var>variable</var> was never defined.<br></p><br></dd><br><dt>‘<samp>default</samp>’</dt><br><dd><br><p>if <var>variable</var> has a default definition, as is usual with <code>CC</code><br>and so on.  See <a href="#Implicit-Variables">Variables Used by Implicit Rules</a>.<br>Note that if you have redefined a default variable, the <code>origin</code><br>function will return the origin of the later definition.<br></p><br></dd><br><dt>‘<samp>environment</samp>’</dt><br><dd><br><p>if <var>variable</var> was inherited from the environment provided to<br><code>make</code>.<br></p><br></dd><br><dt>‘<samp>environment override</samp>’</dt><br><dd><br><p>if <var>variable</var> was inherited from the environment provided to<br><code>make</code>, and is overriding a setting for <var>variable</var> in the<br>makefile as a result of the ‘<samp><span class="nolinebreak">-e</span></samp>’<!-- /@w --> option (see <a href="#Options-Summary">Summary of Options</a>).<br></p><br></dd><br><dt>‘<samp>file</samp>’</dt><br><dd><br><p>if <var>variable</var> was defined in a makefile.<br></p><br></dd><br><dt>‘<samp>command line</samp>’</dt><br><dd><br><p>if <var>variable</var> was defined on the command line.<br></p><br></dd><br><dt>‘<samp>override</samp>’</dt><br><dd><br><p>if <var>variable</var> was defined with an <code>override</code> directive in a<br>makefile (see <a href="#Override-Directive">The <code>override</code> Directive</a>).<br></p><br></dd><br><dt>‘<samp>automatic</samp>’</dt><br><dd><br><p>if <var>variable</var> is an automatic variable defined for the execution<br>of the recipe for each rule (see <a href="#Automatic-Variables">Automatic Variables</a>).<br></p></dd><br></dl><br><br><p>This information is primarily useful (other than for your curiosity) to<br>determine if you want to believe the value of a variable.  For example,<br>suppose you have a makefile <samp>foo</samp> that includes another makefile<br><samp>bar</samp>.  You want a variable <code>bletch</code> to be defined in <samp>bar</samp><br>if you run the command ‘<samp>make&nbsp;<span class="nolinebreak">-f</span>&nbsp;bar</samp>’<!-- /@w -->, even if the environment contains<br>a definition of <code>bletch</code>.  However, if <samp>foo</samp> defined<br><code>bletch</code> before including <samp>bar</samp>, you do not want to override that<br>definition.  This could be done by using an <code>override</code> directive in<br><samp>foo</samp>, giving that definition precedence over the later definition in<br><samp>bar</samp>; unfortunately, the <code>override</code> directive would also<br>override any command line definitions.  So, <samp>bar</samp> could<br>include:<br></p><br><div class="example"><br><pre class="example">ifdef bletch<br>ifeq “$(origin bletch)” “environment”<br>bletch = barf, gag, etc.<br>endif<br>endif<br></pre></div><br><br><p>If <code>bletch</code> has been defined from the environment, this will redefine<br>it.<br></p><br><p>If you want to override a previous definition of <code>bletch</code> if it came<br>from the environment, even under ‘<samp>-e</samp>’, you could instead write:<br></p><br><div class="example"><br><pre class="example">ifneq “$(findstring environment,$(origin bletch))” “”<br>bletch = barf, gag, etc.<br>endif<br></pre></div><br><br><p>Here the redefinition takes place if ‘<samp>$(origin bletch)</samp>’ returns either<br>‘<samp>environment</samp>’ or ‘<samp>environment override</samp>’.<br>See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.<br></p><br><hr><br><a name="Flavor-Function"></a><br><div class="header"><br><p><br>Next: <a href="#Make-Control-Functions" accesskey="n" rel="next">Make Control Functions</a>, Previous: <a href="#Origin-Function" accesskey="p" rel="prev">Origin Function</a>, Up: <a href="#Functions" accesskey="u" rel="up">Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="The-flavor-Function"></a><br><h3 class="section">8.11 The <code>flavor</code> Function</h3><br><a name="index-flavor"></a><br><a name="index-variables_002c-flavor-of"></a><br><a name="index-flavor-of-variable"></a><br><br><p>The <code>flavor</code> function, like the <code>origin</code> function, does not<br>operate on the values of variables but rather it tells you something<br><em>about</em> a variable.  Specifically, it tells you the flavor of a<br>variable (see <a href="#Flavors">The Two Flavors of Variables</a>).<br></p><br><p>The syntax of the <code>flavor</code> function is:<br></p><br><div class="example"><br><pre class="example">$(flavor <var>variable</var>)<br></pre></div><br><br><p>Note that <var>variable</var> is the <em>name</em> of a variable to inquire about,<br>not a <em>reference</em> to that variable.  Therefore you would not normally<br>use a ‘<samp>$</samp>’ or parentheses when writing it.  (You can, however, use a<br>variable reference in the name if you want the name not to be a constant.)<br></p><br><p>The result of this function is a string that identifies the flavor of the<br>variable <var>variable</var>:<br></p><br><dl compact="compact"><br><dt>‘<samp>undefined</samp>’</dt><br><dd><br><p>if <var>variable</var> was never defined.<br></p><br></dd><br><dt>‘<samp>recursive</samp>’</dt><br><dd><br><p>if <var>variable</var> is a recursively expanded variable.<br></p><br></dd><br><dt>‘<samp>simple</samp>’</dt><br><dd><br><p>if <var>variable</var> is a simply expanded variable.<br></p><br></dd><br></dl><br><br><hr><br><a name="Make-Control-Functions"></a><br><div class="header"><br><p><br>Next: <a href="#Shell-Function" accesskey="n" rel="next">Shell Function</a>, Previous: <a href="#Flavor-Function" accesskey="p" rel="prev">Flavor Function</a>, Up: <a href="#Functions" accesskey="u" rel="up">Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Functions-That-Control-Make"></a><br><h3 class="section">8.12 Functions That Control Make</h3><br><a name="index-functions_002c-for-controlling-make"></a><br><a name="index-controlling-make"></a><br><br><p>These functions control the way make runs.  Generally, they are used to<br>provide information to the user of the makefile or to cause make to stop<br>if some sort of environmental error is detected.<br></p><br><dl compact="compact"><br><dt><code>$(error <var>text</var>…)</code></dt><br><dd><a name="index-error"></a><br><a name="index-error_002c-stopping-on"></a><br><a name="index-stopping-make"></a><br><p>Generates a fatal error where the message is <var>text</var>.  Note that<br>the error is generated whenever this function is evaluated.  So, if<br>you put it inside a recipe or on the right side of a recursive<br>variable assignment, it won’t be evaluated until later.  The<br><var>text</var> will be expanded before the error is generated.<br></p><br><p>For example,<br></p><br><div class="example"><br><pre class="example">ifdef ERROR1<br>$(error error is $(ERROR1))<br>endif<br></pre></div><br><br><p>will generate a fatal error during the read of the makefile if the<br><code>make</code> variable <code>ERROR1</code> is defined.  Or,<br></p><br><div class="example"><br><pre class="example">ERR = $(error found an error!)<br><br>.PHONY: err<br>err: ; $(ERR)<br></pre></div><br><br><p>will generate a fatal error while <code>make</code> is running, if the<br><code>err</code> target is invoked.<br></p><br></dd><br><dt><code>$(warning <var>text</var>…)</code></dt><br><dd><a name="index-warning"></a><br><a name="index-warnings_002c-printing"></a><br><a name="index-printing-user-warnings"></a><br><p>This function works similarly to the <code>error</code> function, above,<br>except that <code>make</code> doesn’t exit.  Instead, <var>text</var> is expanded<br>and the resulting message is displayed, but processing of the makefile<br>continues.<br></p><br><p>The result of the expansion of this function is the empty string.<br></p><br></dd><br><dt><code>$(info <var>text</var>…)</code></dt><br><dd><a name="index-info"></a><br><a name="index-printing-messages"></a><br><p>This function does nothing more than print its (expanded) argument(s)<br>to standard output.  No makefile name or line number is added.  The<br>result of the expansion of this function is the empty string.<br></p></dd><br></dl><br><br><hr><br><a name="Shell-Function"></a><br><div class="header"><br><p><br>Next: <a href="#Guile-Function" accesskey="n" rel="next">Guile Function</a>, Previous: <a href="#Make-Control-Functions" accesskey="p" rel="prev">Make Control Functions</a>, Up: <a href="#Functions" accesskey="u" rel="up">Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="The-shell-Function"></a><br><h3 class="section">8.13 The <code>shell</code> Function</h3><br><a name="index-shell"></a><br><a name="index-command-expansion"></a><br><a name="index-backquotes"></a><br><a name="index-shell-command_002c-function-for"></a><br><br><p>The <code>shell</code> function is unlike any other function other than the<br><code>wildcard</code> function<br>(see <a href="#Wildcard-Function">The Function <code>wildcard</code></a>) in that it<br>communicates with the world outside of <code>make</code>.<br></p><br><p>The <code>shell</code> function performs the same function that backquotes<br>(‘<samp>`</samp>’) perform in most shells: it does <em>command expansion</em>.<br>This means that it takes as an argument a shell command and evaluates<br>to the output of the command.  The only processing <code>make</code> does on<br>the result is to convert each newline (or carriage-return / newline<br>pair) to a single space.  If there is a trailing (carriage-return<br>and) newline it will simply be removed.<br></p><br><p>The commands run by calls to the <code>shell</code> function are run when the<br>function calls are expanded (see <a href="#Reading-Makefiles">How<br><code>make</code> Reads a Makefile</a>).  Because this function involves<br>spawning a new shell, you should carefully consider the performance<br>implications of using the <code>shell</code> function within recursively<br>expanded variables vs. simply expanded variables (see <a href="#Flavors">The<br>Two Flavors of Variables</a>).<br></p><br><a name="index-_002eSHELLSTATUS"></a><br><p>After the <code>shell</code> function or ‘<samp>!=</samp>’ assignment operator is<br>used, its exit status is placed in the <code>.SHELLSTATUS</code> variable.<br></p><br><p>Here are some examples of the use of the <code>shell</code> function:<br></p><br><div class="example"><br><pre class="example">contents := $(shell cat foo)<br></pre></div><br><br><p>sets <code>contents</code> to the contents of the file <samp>foo</samp>, with a space<br>(rather than a newline) separating each line.<br></p><br><div class="example"><br><pre class="example">files := $(shell echo .c)<br></pre></div><br><br><p>sets <code>files</code> to the expansion of ‘<samp><em>.c</em></samp>’.  Unless <code>make</code> is<br>using a very strange shell, this has the same result as<br>‘<samp>$(wildcard&nbsp;.c)</samp>’<!-- /@w --> (as long as at least one ‘<samp>.c</samp>’ file<br>exists).<br></p><br><hr><br><a name="Guile-Function"></a><br><div class="header"><br><p><br>Previous: <a href="#Shell-Function" accesskey="p" rel="prev">Shell Function</a>, Up: <a href="#Functions" accesskey="u" rel="up">Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="The-guile-Function"></a><br><h3 class="section">8.14 The <code>guile</code> Function</h3><br><a name="index-guile"></a><br><a name="index-Guile"></a><br><br><p>If GNU <code>make</code> is built with support for GNU Guile as an embedded<br>extension language then the <code>guile</code> function will be available.<br>The <code>guile</code> function takes one argument which is first expanded<br>by <code>make</code> in the normal fashion, then passed to the GNU Guile<br>evaluator.  The result of the evaluator is converted into a string and<br>used as the expansion of the <code>guile</code> function in the makefile.<br>See <a href="#Guile-Integration">GNU Guile Integration</a> for details on<br>writing extensions to <code>make</code> in Guile.<br></p><br><p>You can determine whether GNU Guile support is available by checking<br>the <code>.FEATURES</code> variable for the word <var>guile</var>.<br></p><br><hr><br><a name="Running"></a><br><div class="header"><br><p><br>Next: <a href="#Implicit-Rules" accesskey="n" rel="next">Implicit Rules</a>, Previous: <a href="#Functions" accesskey="p" rel="prev">Functions</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="How-to-Run-make"></a><br><h2 class="chapter">9 How to Run <code>make</code></h2><br><br><p>A makefile that says how to recompile a program can be used in more<br>than one way.  The simplest use is to recompile every file that is out<br>of date.  Usually, makefiles are written so that if you run<br><code>make</code> with no arguments, it does just that.<br></p><br><p>But you might want to update only some of the files; you might want to use<br>a different compiler or different compiler options; you might want just to<br>find out which files are out of date without changing them.<br></p><br><p>By giving arguments when you run <code>make</code>, you can do any of these<br>things and many others.<br></p><br><a name="index-exit-status-of-make"></a><br><p>The exit status of <code>make</code> is always one of three values:<br></p><dl compact="compact"><br><dt><code>0</code></dt><br><dd><p>The exit status is zero if <code>make</code> is successful.<br></p></dd><br><dt><code>2</code></dt><br><dd><p>The exit status is two if <code>make</code> encounters any errors.<br>It will print messages describing the particular errors.<br></p></dd><br><dt><code>1</code></dt><br><dd><p>The exit status is one if you use the ‘<samp>-q</samp>’ flag and <code>make</code><br>determines that some target is not already up to date.<br>See <a href="#Instead-of-Execution">Instead of Executing Recipes</a>.<br></p></dd><br></dl><br><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Makefile-Arguments" accesskey="1">Makefile Arguments</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to specify which makefile to use.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Goals" accesskey="2">Goals</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to use goal arguments to specify which<br>                                  parts of the makefile to use.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Instead-of-Execution" accesskey="3">Instead of Execution</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to use mode flags to specify what<br>                                  kind of thing to do with the recipes<br>                                  in the makefile other than simply<br>                                  execute them.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Avoiding-Compilation" accesskey="4">Avoiding Compilation</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to avoid recompiling certain files.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Overriding" accesskey="5">Overriding</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to override a variable to specify<br>                                  an alternate compiler and other things.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Testing" accesskey="6">Testing</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to proceed past some errors, to<br>                                  test compilation.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Options-Summary" accesskey="7">Options Summary</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Summary of Options<br></td></tr><br></tbody></table><br><br><hr><br><a name="Makefile-Arguments"></a><br><div class="header"><br><p><br>Next: <a href="#Goals" accesskey="n" rel="next">Goals</a>, Previous: <a href="#Running" accesskey="p" rel="prev">Running</a>, Up: <a href="#Running" accesskey="u" rel="up">Running</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Arguments-to-Specify-the-Makefile"></a><br><h3 class="section">9.1 Arguments to Specify the Makefile</h3><br><a name="index-_002d_002dfile-1"></a><br><a name="index-_002d_002dmakefile-1"></a><br><a name="index-_002df-1"></a><br><br><p>The way to specify the name of the makefile is with the ‘<samp>-f</samp>’ or<br>‘<samp>–file</samp>’ option (‘<samp>–makefile</samp>’ also works).  For example,<br>‘<samp>-f altmake</samp>’ says to use the file <samp>altmake</samp> as the makefile.<br></p><br><p>If you use the ‘<samp>-f</samp>’ flag several times and follow each ‘<samp>-f</samp>’<br>with an argument, all the specified files are used jointly as<br>makefiles.<br></p><br><p>If you do not use the ‘<samp>-f</samp>’ or ‘<samp>–file</samp>’ flag, the default is<br>to try <samp>GNUmakefile</samp>, <samp>makefile</samp>, and <samp>Makefile</samp>, in<br>that order, and use the first of these three which exists or can be made<br>(see <a href="#Makefiles">Writing Makefiles</a>).<br></p><br><hr><br><a name="Goals"></a><br><div class="header"><br><p><br>Next: <a href="#Instead-of-Execution" accesskey="n" rel="next">Instead of Execution</a>, Previous: <a href="#Makefile-Arguments" accesskey="p" rel="prev">Makefile Arguments</a>, Up: <a href="#Running" accesskey="u" rel="up">Running</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Arguments-to-Specify-the-Goals"></a><br><h3 class="section">9.2 Arguments to Specify the Goals</h3><br><a name="index-goal_002c-how-to-specify"></a><br><br><p>The <em>goals</em> are the targets that <code>make</code> should strive ultimately<br>to update.  Other targets are updated as well if they appear as<br>prerequisites of goals, or prerequisites of prerequisites of goals, etc.<br></p><br><p>By default, the goal is the first target in the makefile (not counting<br>targets that start with a period).  Therefore, makefiles are usually<br>written so that the first target is for compiling the entire program or<br>programs they describe.  If the first rule in the makefile has several<br>targets, only the first target in the rule becomes the default goal, not<br>the whole list.  You can manage the selection of the default goal from<br>within your makefile using the <code>.DEFAULT_GOAL</code> variable<br>(see <a href="#Special-Variables">Other Special Variables</a>).<br></p><br><p>You can also specify a different goal or goals with command line<br>arguments to <code>make</code>.  Use the name of the goal as an argument.<br>If you specify several goals, <code>make</code> processes each of them in<br>turn, in the order you name them.<br></p><br><p>Any target in the makefile may be specified as a goal (unless it<br>starts with ‘<samp>-</samp>’ or contains an ‘<samp>=</samp>’, in which case it will be<br>parsed as a switch or variable definition, respectively).  Even<br>targets not in the makefile may be specified, if <code>make</code> can find<br>implicit rules that say how to make them.<br></p><br><a name="index-MAKECMDGOALS"></a><br><p><code>Make</code> will set the special variable <code>MAKECMDGOALS</code> to the<br>list of goals you specified on the command line.  If no goals were given<br>on the command line, this variable is empty.  Note that this variable<br>should be used only in special circumstances.<br></p><br><p>An example of appropriate use is to avoid including <samp>.d</samp> files<br>during <code>clean</code> rules (see <a href="#Automatic-Prerequisites">Automatic Prerequisites</a>), so<br><code>make</code> won’t create them only to immediately remove them<br>again:<br></p><br><div class="example"><br><pre class="example">sources = foo.c bar.c<br><br>ifneq ($(MAKECMDGOALS),clean)<br>include $(sources:.c=.d)<br>endif<br></pre></div><br><br><p>One use of specifying a goal is if you want to compile only a part of<br>the program, or only one of several programs.  Specify as a goal each<br>file that you wish to remake.  For example, consider a directory containing<br>several programs, with a makefile that starts like this:<br></p><br><div class="example"><br><pre class="example">.PHONY: all<br>all: size nm ld ar as<br></pre></div><br><br><p>If you are working on the program <code>size</code>, you might want to say<br>‘<samp>make&nbsp;size</samp>’<!-- /@w --> so that only the files of that program are recompiled.<br></p><br><p>Another use of specifying a goal is to make files that are not normally<br>made.  For example, there may be a file of debugging output, or a<br>version of the program that is compiled specially for testing, which has<br>a rule in the makefile but is not a prerequisite of the default goal.<br></p><br><p>Another use of specifying a goal is to run the recipe associated with<br>a phony target (see <a href="#Phony-Targets">Phony Targets</a>) or empty target (see <a href="#Empty-Targets">Empty Target Files to Record Events</a>).  Many makefiles contain<br>a phony target named <samp>clean</samp> which deletes everything except source<br>files.  Naturally, this is done only if you request it explicitly with<br>‘<samp>make&nbsp;clean</samp>’<!-- /@w -->.  Following is a list of typical phony and empty<br>target names.  See <a href="#Standard-Targets">Standard Targets</a>, for a detailed list of all the<br>standard target names which GNU software packages use.<br></p><br><dl compact="compact"><br><dt><samp>all</samp></dt><br><dd><a name="index-all-_0028standard-target_0029"></a><br><p>Make all the top-level targets the makefile knows about.<br></p><br></dd><br><dt><samp>clean</samp></dt><br><dd><a name="index-clean-_0028standard-target_0029"></a><br><p>Delete all files that are normally created by running <code>make</code>.<br></p><br></dd><br><dt><samp>mostlyclean</samp></dt><br><dd><a name="index-mostlyclean-_0028standard-target_0029"></a><br><p>Like ‘<samp>clean</samp>’, but may refrain from deleting a few files that people<br>normally don’t want to recompile.  For example, the ‘<samp>mostlyclean</samp>’<br>target for GCC does not delete <samp>libgcc.a</samp>, because recompiling it<br>is rarely necessary and takes a lot of time.<br></p><br></dd><br><dt><samp>distclean</samp></dt><br><dd><a name="index-distclean-_0028standard-target_0029"></a><br></dd><br><dt><samp>realclean</samp></dt><br><dd><a name="index-realclean-_0028standard-target_0029"></a><br></dd><br><dt><samp>clobber</samp></dt><br><dd><a name="index-clobber-_0028standard-target_0029"></a><br><p>Any of these targets might be defined to delete <em>more</em> files than<br>‘<samp>clean</samp>’ does.  For example, this would delete configuration files<br>or links that you would normally create as preparation for compilation,<br>even if the makefile itself cannot create these files.<br></p><br></dd><br><dt><samp>install</samp></dt><br><dd><a name="index-install-_0028standard-target_0029"></a><br><p>Copy the executable file into a directory that users typically search<br>for commands; copy any auxiliary files that the executable uses into<br>the directories where it will look for them.<br></p><br></dd><br><dt><samp>print</samp></dt><br><dd><a name="index-print-_0028standard-target_0029"></a><br><p>Print listings of the source files that have changed.<br></p><br></dd><br><dt><samp>tar</samp></dt><br><dd><a name="index-tar-_0028standard-target_0029"></a><br><p>Create a tar file of the source files.<br></p><br></dd><br><dt><samp>shar</samp></dt><br><dd><a name="index-shar-_0028standard-target_0029"></a><br><p>Create a shell archive (shar file) of the source files.<br></p><br></dd><br><dt><samp>dist</samp></dt><br><dd><a name="index-dist-_0028standard-target_0029"></a><br><p>Create a distribution file of the source files.  This might<br>be a tar file, or a shar file, or a compressed version of one of the<br>above, or even more than one of the above.<br></p><br></dd><br><dt><samp>TAGS</samp></dt><br><dd><a name="index-TAGS-_0028standard-target_0029"></a><br><p>Update a tags table for this program.<br></p><br></dd><br><dt><samp>check</samp></dt><br><dd><a name="index-check-_0028standard-target_0029"></a><br></dd><br><dt><samp>test</samp></dt><br><dd><a name="index-test-_0028standard-target_0029"></a><br><p>Perform self tests on the program this makefile builds.<br></p></dd><br></dl><br><br><hr><br><a name="Instead-of-Execution"></a><br><div class="header"><br><p><br>Next: <a href="#Avoiding-Compilation" accesskey="n" rel="next">Avoiding Compilation</a>, Previous: <a href="#Goals" accesskey="p" rel="prev">Goals</a>, Up: <a href="#Running" accesskey="u" rel="up">Running</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Instead-of-Executing-Recipes"></a><br><h3 class="section">9.3 Instead of Executing Recipes</h3><br><a name="index-execution_002c-instead-of"></a><br><a name="index-recipes_002c-instead-of-executing"></a><br><br><p>The makefile tells <code>make</code> how to tell whether a target is up to date,<br>and how to update each target.  But updating the targets is not always<br>what you want.  Certain options specify other activities for <code>make</code>.<br></p><br><dl compact="compact"><br><dt>‘<samp>-n</samp>’</dt><br><dt>‘<samp>–just-print</samp>’</dt><br><dt>‘<samp>–dry-run</samp>’</dt><br><dt>‘<samp>–recon</samp>’</dt><br><dd><a name="index-_002d_002djust_002dprint-1"></a><br><a name="index-_002d_002ddry_002drun-1"></a><br><a name="index-_002d_002drecon-1"></a><br><a name="index-_002dn-1"></a><br><br><p>“No-op”.  Causes <code>make</code> to print the recipes that are needed to<br>make the targets up to date, but not actually execute them.  Note that<br>some recipes are still executed, even with this flag (see <a href="#MAKE-Variable">How the <code>MAKE</code> Variable Works</a>).  Also any recipes<br>needed to update included makefiles are still executed<br>(see <a href="#Remaking-Makefiles">How Makefiles Are Remade</a>).<br></p><br></dd><br><dt>‘<samp>-t</samp>’</dt><br><dt>‘<samp>–touch</samp>’</dt><br><dd><a name="index-_002d_002dtouch"></a><br><a name="index-touching-files"></a><br><a name="index-target_002c-touching"></a><br><a name="index-_002dt"></a><br><br><p>“Touch”.  Marks targets as up to date without actually changing<br>them.  In other words, <code>make</code> pretends to update the targets but<br>does not really change their contents; instead only their modified<br>times are updated.<br></p><br></dd><br><dt>‘<samp>-q</samp>’</dt><br><dt>‘<samp>–question</samp>’</dt><br><dd><a name="index-_002d_002dquestion"></a><br><a name="index-_002dq"></a><br><a name="index-question-mode"></a><br><br><p>“Question”.  Silently check whether the targets are up to date, but<br>do not execute recipes; the exit code shows whether any updates are<br>needed.<br></p><br></dd><br><dt>‘<samp>-W <var>file</var></samp>’</dt><br><dt>‘<samp>–what-if=<var>file</var></samp>’</dt><br><dt>‘<samp>–assume-new=<var>file</var></samp>’</dt><br><dt>‘<samp>–new-file=<var>file</var></samp>’</dt><br><dd><a name="index-_002d_002dwhat_002dif"></a><br><a name="index-_002dW"></a><br><a name="index-_002d_002dassume_002dnew"></a><br><a name="index-_002d_002dnew_002dfile"></a><br><a name="index-what-if"></a><br><a name="index-files_002c-assuming-new"></a><br><br><p>“What if”.  Each ‘<samp>-W</samp>’ flag is followed by a file name.  The given<br>files’ modification times are recorded by <code>make</code> as being the present<br>time, although the actual modification times remain the same.<br>You can use the ‘<samp>-W</samp>’ flag in conjunction with the ‘<samp>-n</samp>’ flag<br>to see what would happen if you were to modify specific files.<br></p></dd><br></dl><br><br><p>With the ‘<samp>-n</samp>’ flag, <code>make</code> prints the recipe that it would<br>normally execute but usually does not execute it.<br></p><br><p>With the ‘<samp>-t</samp>’ flag, <code>make</code> ignores the recipes in the rules<br>and uses (in effect) the command <code>touch</code> for each target that needs to<br>be remade.  The <code>touch</code> command is also printed, unless ‘<samp>-s</samp>’ or<br><code>.SILENT</code> is used.  For speed, <code>make</code> does not actually invoke<br>the program <code>touch</code>.  It does the work directly.<br></p><br><p>With the ‘<samp>-q</samp>’ flag, <code>make</code> prints nothing and executes no<br>recipes, but the exit status code it returns is zero if and only if the<br>targets to be considered are already up to date.  If the exit status is<br>one, then some updating needs to be done.  If <code>make</code> encounters an<br>error, the exit status is two, so you can distinguish an error from a<br>target that is not up to date.<br></p><br><p>It is an error to use more than one of these three flags in the same<br>invocation of <code>make</code>.<br></p><br><a name="index-_002b_002c-and-recipe-execution"></a><br><p>The ‘<samp>-n</samp>’, ‘<samp>-t</samp>’, and ‘<samp>-q</samp>’ options do not affect recipe<br>lines that begin with ‘<samp>+</samp>’ characters or contain the strings<br>‘<samp>$(MAKE)</samp>’ or ‘<samp>${MAKE}</samp>’.  Note that only the line containing<br>the ‘<samp>+</samp>’ character or the strings ‘<samp>$(MAKE)</samp>’ or ‘<samp>${MAKE}</samp>’<br>is run regardless of these options.  Other lines in the same rule are<br>not run unless they too begin with ‘<samp>+</samp>’ or contain ‘<samp>$(MAKE)</samp>’ or<br>‘<samp>${MAKE}</samp>’ (See <a href="#MAKE-Variable">How the <code>MAKE</code> Variable Works</a>.)<br></p><br><a name="index-phony-targets-and-recipe-execution"></a><br><p>The ‘<samp>-t</samp>’ flag prevents phony targets (see <a href="#Phony-Targets">Phony Targets</a>) from<br>being updated, unless there are recipe lines beginning with ‘<samp>+</samp>’<br>or containing ‘<samp>$(MAKE)</samp>’ or ‘<samp>${MAKE}</samp>’.<br></p><br><p>The ‘<samp>-W</samp>’ flag provides two features:<br></p><br><ul><br><li> If you also use the ‘<samp>-n</samp>’ or ‘<samp>-q</samp>’ flag, you can see what<br><code>make</code> would do if you were to modify some files.<br><br></li><li> Without the ‘<samp>-n</samp>’ or ‘<samp>-q</samp>’ flag, when <code>make</code> is actually<br>executing recipes, the ‘<samp>-W</samp>’ flag can direct <code>make</code> to act as<br>if some files had been modified, without actually running the recipes<br>for those files.<br></li></ul><br><br><p>Note that the options ‘<samp>-p</samp>’ and ‘<samp>-v</samp>’ allow you to obtain other<br>information about <code>make</code> or about the makefiles in use<br>(see <a href="#Options-Summary">Summary of Options</a>).<br></p><br><hr><br><a name="Avoiding-Compilation"></a><br><div class="header"><br><p><br>Next: <a href="#Overriding" accesskey="n" rel="next">Overriding</a>, Previous: <a href="#Instead-of-Execution" accesskey="p" rel="prev">Instead of Execution</a>, Up: <a href="#Running" accesskey="u" rel="up">Running</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Avoiding-Recompilation-of-Some-Files"></a><br><h3 class="section">9.4 Avoiding Recompilation of Some Files</h3><br><a name="index-_002do"></a><br><a name="index-_002d_002dold_002dfile"></a><br><a name="index-_002d_002dassume_002dold"></a><br><a name="index-files_002c-assuming-old"></a><br><a name="index-files_002c-avoiding-recompilation-of"></a><br><a name="index-recompilation_002c-avoiding"></a><br><br><p>Sometimes you may have changed a source file but you do not want to<br>recompile all the files that depend on it.  For example, suppose you add<br>a macro or a declaration to a header file that many other files depend<br>on.  Being conservative, <code>make</code> assumes that any change in the<br>header file requires recompilation of all dependent files, but you know<br>that they do not need to be recompiled and you would rather not waste<br>the time waiting for them to compile.<br></p><br><p>If you anticipate the problem before changing the header file, you can<br>use the ‘<samp>-t</samp>’ flag.  This flag tells <code>make</code> not to run the<br>recipes in the rules, but rather to mark the target up to date by<br>changing its last-modification date.  You would follow this procedure:<br></p><br><ol><br><li> Use the command ‘<samp>make</samp>’ to recompile the source files that really<br>need recompilation, ensuring that the object files are up-to-date<br>before you begin.<br><br></li><li> Make the changes in the header files.<br><br></li><li> Use the command ‘<samp>make -t</samp>’ to mark all the object files as<br>up to date.  The next time you run <code>make</code>, the changes in the<br>header files will not cause any recompilation.<br></li></ol><br><br><p>If you have already changed the header file at a time when some files<br>do need recompilation, it is too late to do this.  Instead, you can<br>use the ‘<samp><span class="nolinebreak">-o</span>&nbsp;<var>file</var></samp>’<!-- /@w --> flag, which marks a specified file as<br>“old” (see <a href="#Options-Summary">Summary of Options</a>).  This means<br>that the file itself will not be remade, and nothing else will be<br>remade on its account.  Follow this procedure:<br></p><br><ol><br><li> Recompile the source files that need compilation for reasons independent<br>of the particular header file, with ‘<samp>make -o <var>headerfile</var></samp>’.<br>If several header files are involved, use a separate ‘<samp>-o</samp>’ option<br>for each header file.<br><br></li><li> Touch all the object files with ‘<samp>make -t</samp>’.<br></li></ol><br><br><hr><br><a name="Overriding"></a><br><div class="header"><br><p><br>Next: <a href="#Testing" accesskey="n" rel="next">Testing</a>, Previous: <a href="#Avoiding-Compilation" accesskey="p" rel="prev">Avoiding Compilation</a>, Up: <a href="#Running" accesskey="u" rel="up">Running</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Overriding-Variables"></a><br><h3 class="section">9.5 Overriding Variables</h3><br><a name="index-overriding-variables-with-arguments"></a><br><a name="index-variables_002c-overriding-with-arguments"></a><br><a name="index-command-line-variables"></a><br><a name="index-variables_002c-command-line"></a><br><br><p>An argument that contains ‘<samp>=</samp>’ specifies the value of a variable:<br>‘<samp><var>v</var>=<var>x</var></samp>’ sets the value of the variable <var>v</var> to <var>x</var>.<br>If you specify a value in this way, all ordinary assignments of the same<br>variable in the makefile are ignored; we say they have been<br><em>overridden</em> by the command line argument.<br></p><br><p>The most common way to use this facility is to pass extra flags to<br>compilers.  For example, in a properly written makefile, the variable<br><code>CFLAGS</code> is included in each recipe that runs the C compiler, so a<br>file <samp>foo.c</samp> would be compiled something like this:<br></p><br><div class="example"><br><pre class="example">cc -c $(CFLAGS) foo.c<br></pre></div><br><br><p>Thus, whatever value you set for <code>CFLAGS</code> affects each compilation<br>that occurs.  The makefile probably specifies the usual value for<br><code>CFLAGS</code>, like this:<br></p><br><div class="example"><br><pre class="example">CFLAGS=-g<br></pre></div><br><br><p>Each time you run <code>make</code>, you can override this value if you<br>wish.  For example, if you say ‘<samp>make CFLAGS=’-g -O’</samp>’, each C<br>compilation will be done with ‘<samp>cc -c -g -O</samp>’.  (This also<br>illustrates how you can use quoting in the shell to enclose spaces and<br>other special characters in the value of a variable when you override<br>it.)<br></p><br><p>The variable <code>CFLAGS</code> is only one of many standard variables that<br>exist just so that you can change them this way.  See <a href="#Implicit-Variables">Variables Used by Implicit Rules</a>, for a complete list.<br></p><br><p>You can also program the makefile to look at additional variables of your<br>own, giving the user the ability to control other aspects of how the<br>makefile works by changing the variables.<br></p><br><p>When you override a variable with a command line argument, you can<br>define either a recursively-expanded variable or a simply-expanded<br>variable.  The examples shown above make a recursively-expanded<br>variable; to make a simply-expanded variable, write ‘<samp>:=</samp>’ or<br>‘<samp>::=</samp>’ instead of ‘<samp>=</samp>’.  But, unless you want to include a<br>variable reference or function call in the <em>value</em> that you<br>specify, it makes no difference which kind of variable you create.<br></p><br><p>There is one way that the makefile can change a variable that you have<br>overridden.  This is to use the <code>override</code> directive, which is a line<br>that looks like this: ‘<samp>override <var>variable</var> = <var>value</var></samp>’<br>(see <a href="#Override-Directive">The <code>override</code> Directive</a>).<br></p><br><hr><br><a name="Testing"></a><br><div class="header"><br><p><br>Next: <a href="#Options-Summary" accesskey="n" rel="next">Options Summary</a>, Previous: <a href="#Overriding" accesskey="p" rel="prev">Overriding</a>, Up: <a href="#Running" accesskey="u" rel="up">Running</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Testing-the-Compilation-of-a-Program"></a><br><h3 class="section">9.6 Testing the Compilation of a Program</h3><br><a name="index-testing-compilation"></a><br><a name="index-compilation_002c-testing"></a><br><br><p>Normally, when an error happens in executing a shell command, <code>make</code><br>gives up immediately, returning a nonzero status.  No further recipes are<br>executed for any target.  The error implies that the goal cannot be<br>correctly remade, and <code>make</code> reports this as soon as it knows.<br></p><br><p>When you are compiling a program that you have just changed, this is not<br>what you want.  Instead, you would rather that <code>make</code> try compiling<br>every file that can be tried, to show you as many compilation errors<br>as possible.<br></p><br><a name="index-_002dk-1"></a><br><a name="index-_002d_002dkeep_002dgoing-1"></a><br><p>On these occasions, you should use the ‘<samp>-k</samp>’ or<br>‘<samp>–keep-going</samp>’ flag.  This tells <code>make</code> to continue to<br>consider the other prerequisites of the pending targets, remaking them<br>if necessary, before it gives up and returns nonzero status.  For<br>example, after an error in compiling one object file, ‘<samp>make -k</samp>’<br>will continue compiling other object files even though it already<br>knows that linking them will be impossible.  In addition to continuing<br>after failed shell commands, ‘<samp>make -k</samp>’ will continue as much as<br>possible after discovering that it does not know how to make a target<br>or prerequisite file.  This will always cause an error message, but<br>without ‘<samp>-k</samp>’, it is a fatal error (see <a href="#Options-Summary">Summary of Options</a>).<br></p><br><p>The usual behavior of <code>make</code> assumes that your purpose is to get the<br>goals up to date; once <code>make</code> learns that this is impossible, it might<br>as well report the failure immediately.  The ‘<samp>-k</samp>’ flag says that the<br>real purpose is to test as much as possible of the changes made in the<br>program, perhaps to find several independent problems so that you can<br>correct them all before the next attempt to compile.  This is why Emacs’<br><kbd>M-x compile</kbd> command passes the ‘<samp>-k</samp>’ flag by default.<br></p><br><hr><br><a name="Options-Summary"></a><br><div class="header"><br><p><br>Previous: <a href="#Testing" accesskey="p" rel="prev">Testing</a>, Up: <a href="#Running" accesskey="u" rel="up">Running</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Summary-of-Options"></a><br><h3 class="section">9.7 Summary of Options</h3><br><a name="index-options"></a><br><a name="index-flags"></a><br><a name="index-switches"></a><br><br><p>Here is a table of all the options <code>make</code> understands:<br></p><br><dl compact="compact"><br><dt>‘<samp>-b</samp>’</dt><br><dd><a name="index-_002db"></a><br></dd><br><dt>‘<samp>-m</samp>’</dt><br><dd><a name="index-_002dm"></a><br><p>These options are ignored for compatibility with other versions of <code>make</code>.<br></p><br></dd><br><dt>‘<samp>-B</samp>’</dt><br><dd><a name="index-_002dB"></a><br></dd><br><dt>‘<samp>–always-make</samp>’</dt><br><dd><a name="index-_002d_002dalways_002dmake"></a><br><p>Consider all targets out-of-date.  GNU <code>make</code> proceeds to<br>consider targets and their prerequisites using the normal algorithms;<br>however, all targets so considered are always remade regardless of the<br>status of their prerequisites.  To avoid infinite recursion, if<br><code>MAKE_RESTARTS</code> (see <a href="#Special-Variables">Other Special<br>Variables</a>) is set to a number greater than 0 this option is disabled<br>when considering whether to remake makefiles (see <a href="#Remaking-Makefiles">How Makefiles Are Remade</a>).<br></p><br></dd><br><dt>‘<samp>-C <var>dir</var></samp>’</dt><br><dd><a name="index-_002dC-1"></a><br></dd><br><dt>‘<samp>–directory=<var>dir</var></samp>’</dt><br><dd><a name="index-_002d_002ddirectory-1"></a><br><p>Change to directory <var>dir</var> before reading the makefiles.  If multiple<br>‘<samp>-C</samp>’ options are specified, each is interpreted relative to the<br>previous one: ‘<samp>-C / -C etc</samp>’ is equivalent to ‘<samp>-C /etc</samp>’.<br>This is typically used with recursive invocations of <code>make</code><br>(see <a href="#Recursion">Recursive Use of <code>make</code></a>).<br></p><br></dd><br><dt>‘<samp>-d</samp>’</dt><br><dd><a name="index-_002dd"></a><br><br><p>Print debugging information in addition to normal processing.  The<br>debugging information says which files are being considered for<br>remaking, which file-times are being compared and with what results,<br>which files actually need to be remade, which implicit rules are<br>considered and which are applied—everything interesting about how<br><code>make</code> decides what to do.  The <code>-d</code> option is equivalent to<br>‘<samp>–debug=a</samp>’ (see below).<br></p><br></dd><br><dt>‘<samp>–debug[=<var>options</var>]</samp>’</dt><br><dd><a name="index-_002d_002ddebug"></a><br><br><p>Print debugging information in addition to normal processing.  Various<br>levels and types of output can be chosen.  With no arguments, print the<br>“basic” level of debugging.  Possible arguments are below; only the<br>first character is considered, and values must be comma- or<br>space-separated.<br></p><br><dl compact="compact"><br><dt><code>a (<i>all</i>)</code></dt><br><dd><p>All types of debugging output are enabled.  This is equivalent to using<br>‘<samp>-d</samp>’.<br></p><br></dd><br><dt><code>b (<i>basic</i>)</code></dt><br><dd><p>Basic debugging prints each target that was found to be out-of-date, and<br>whether the build was successful or not.<br></p><br></dd><br><dt><code>v (<i>verbose</i>)</code></dt><br><dd><p>A level above ‘<samp>basic</samp>’; includes messages about which makefiles were<br>parsed, prerequisites that did not need to be rebuilt, etc.  This option<br>also enables ‘<samp>basic</samp>’ messages.<br></p><br></dd><br><dt><code>i (<i>implicit</i>)</code></dt><br><dd><p>Prints messages describing the implicit rule searches for each target.<br>This option also enables ‘<samp>basic</samp>’ messages.<br></p><br></dd><br><dt><code>j (<i>jobs</i>)</code></dt><br><dd><p>Prints messages giving details on the invocation of specific sub-commands.<br></p><br></dd><br><dt><code>m (<i>makefile</i>)</code></dt><br><dd><p>By default, the above messages are not enabled while trying to remake<br>the makefiles.  This option enables messages while rebuilding makefiles,<br>too.  Note that the ‘<samp>all</samp>’ option does enable this option.  This<br>option also enables ‘<samp>basic</samp>’ messages.<br></p><br></dd><br><dt><code>n (<i>none</i>)</code></dt><br><dd><p>Disable all debugging currently enabled.  If additional debugging<br>flags are encountered after this they will still take effect.<br></p></dd><br></dl><br><br></dd><br><dt>‘<samp>-e</samp>’</dt><br><dd><a name="index-_002de"></a><br></dd><br><dt>‘<samp>–environment-overrides</samp>’</dt><br><dd><a name="index-_002d_002denvironment_002doverrides"></a><br><p>Give variables taken from the environment precedence<br>over variables from makefiles.<br>See <a href="#Environment">Variables from the Environment</a>.<br></p><br></dd><br><dt>‘<samp>–eval=<var>string</var></samp>’</dt><br><dd><a name="index-_002d_002deval"></a><br><br><p>Evaluate <var>string</var> as makefile syntax.  This is a command-line<br>version of the <code>eval</code> function (see <a href="#Eval-Function">Eval Function</a>).  The<br>evaluation is performed after the default rules and variables have<br>been defined, but before any makefiles are read.<br></p><br></dd><br><dt>‘<samp>-f <var>file</var></samp>’</dt><br><dd><a name="index-_002df-2"></a><br></dd><br><dt>‘<samp>–file=<var>file</var></samp>’</dt><br><dd><a name="index-_002d_002dfile-2"></a><br></dd><br><dt>‘<samp>–makefile=<var>file</var></samp>’</dt><br><dd><a name="index-_002d_002dmakefile-2"></a><br><p>Read the file named <var>file</var> as a makefile.<br>See <a href="#Makefiles">Writing Makefiles</a>.<br></p><br></dd><br><dt>‘<samp>-h</samp>’</dt><br><dd><a name="index-_002dh"></a><br></dd><br><dt>‘<samp>–help</samp>’</dt><br><dd><a name="index-_002d_002dhelp"></a><br><br><p>Remind you of the options that <code>make</code> understands and then exit.<br></p><br></dd><br><dt>‘<samp>-i</samp>’</dt><br><dd><a name="index-_002di-1"></a><br></dd><br><dt>‘<samp>–ignore-errors</samp>’</dt><br><dd><a name="index-_002d_002dignore_002derrors-1"></a><br><p>Ignore all errors in recipes executed to remake files.<br>See <a href="#Errors">Errors in Recipes</a>.<br></p><br></dd><br><dt>‘<samp>-I <var>dir</var></samp>’</dt><br><dd><a name="index-_002dI-1"></a><br></dd><br><dt>‘<samp>–include-dir=<var>dir</var></samp>’</dt><br><dd><a name="index-_002d_002dinclude_002ddir-1"></a><br><p>Specifies a directory <var>dir</var> to search for included makefiles.<br>See <a href="#Include">Including Other Makefiles</a>.  If several ‘<samp>-I</samp>’<br>options are used to specify several directories, the directories are<br>searched in the order specified.<br></p><br></dd><br><dt>‘<samp>-j [<var>jobs</var>]</samp>’</dt><br><dd><a name="index-_002dj-1"></a><br></dd><br><dt>‘<samp>–jobs[=<var>jobs</var>]</samp>’</dt><br><dd><a name="index-_002d_002djobs-1"></a><br><p>Specifies the number of recipes (jobs) to run simultaneously.  With no<br>argument, <code>make</code> runs as many recipes simultaneously as possible.<br>If there is more than one ‘<samp>-j</samp>’ option, the last one is effective.<br>See <a href="#Parallel">Parallel Execution</a>, for more information on how<br>recipes are run.  Note that this option is ignored on MS-DOS.<br></p><br></dd><br><dt>‘<samp>-k</samp>’</dt><br><dd><a name="index-_002dk-2"></a><br></dd><br><dt>‘<samp>–keep-going</samp>’</dt><br><dd><a name="index-_002d_002dkeep_002dgoing-2"></a><br><p>Continue as much as possible after an error.  While the target that<br>failed, and those that depend on it, cannot be remade, the other<br>prerequisites of these targets can be processed all the same.<br>See <a href="#Testing">Testing the Compilation of a Program</a>.<br></p><br></dd><br><dt>‘<samp>-l [<var>load</var>]</samp>’</dt><br><dd><a name="index-_002dl"></a><br></dd><br><dt>‘<samp>–load-average[=<var>load</var>]</samp>’</dt><br><dd><a name="index-_002d_002dload_002daverage-1"></a><br></dd><br><dt>‘<samp>–max-load[=<var>load</var>]</samp>’</dt><br><dd><a name="index-_002d_002dmax_002dload-1"></a><br><p>Specifies that no new recipes should be started if there are other<br>recipes running and the load average is at least <var>load</var> (a<br>floating-point number).  With no argument, removes a previous load<br>limit.  See <a href="#Parallel">Parallel Execution</a>.<br></p><br></dd><br><dt>‘<samp>-L</samp>’</dt><br><dd><a name="index-_002dL"></a><br></dd><br><dt>‘<samp>–check-symlink-times</samp>’</dt><br><dd><a name="index-_002d_002dcheck_002dsymlink_002dtimes"></a><br><p>On systems that support symbolic links, this option causes <code>make</code><br>to consider the timestamps on any symbolic links in addition to the<br>timestamp on the file referenced by those links.  When this option is<br>provided, the most recent timestamp among the file and the symbolic<br>links is taken as the modification time for this target file.<br></p><br></dd><br><dt>‘<samp>-n</samp>’</dt><br><dd><a name="index-_002dn-2"></a><br></dd><br><dt>‘<samp>–just-print</samp>’</dt><br><dd><a name="index-_002d_002djust_002dprint-2"></a><br></dd><br><dt>‘<samp>–dry-run</samp>’</dt><br><dd><a name="index-_002d_002ddry_002drun-2"></a><br></dd><br><dt>‘<samp>–recon</samp>’</dt><br><dd><a name="index-_002d_002drecon-2"></a><br><br><p>Print the recipe that would be executed, but do not execute it (except<br>in certain circumstances).<br>See <a href="#Instead-of-Execution">Instead of Executing Recipes</a>.<br></p><br></dd><br><dt>‘<samp>-o <var>file</var></samp>’</dt><br><dd><a name="index-_002do-1"></a><br></dd><br><dt>‘<samp>–old-file=<var>file</var></samp>’</dt><br><dd><a name="index-_002d_002dold_002dfile-1"></a><br></dd><br><dt>‘<samp>–assume-old=<var>file</var></samp>’</dt><br><dd><a name="index-_002d_002dassume_002dold-1"></a><br><p>Do not remake the file <var>file</var> even if it is older than its<br>prerequisites, and do not remake anything on account of changes in<br><var>file</var>.  Essentially the file is treated as very old and its rules<br>are ignored.  See <a href="#Avoiding-Compilation">Avoiding Recompilation of<br>Some Files</a>.<br></p><br></dd><br><dt>‘<samp>-O[<var>type</var>]</samp>’</dt><br><dd><a name="index-_002dO-1"></a><br></dd><br><dt>‘<samp>–output-sync[=<var>type</var>]</samp>’</dt><br><dd><a name="index-_002d_002doutput_002dsync-1"></a><br><a name="index-output-during-parallel-execution-1"></a><br><a name="index-parallel-execution_002c-output-during-1"></a><br><p>Ensure that the complete output from each recipe is printed in one<br>uninterrupted sequence.  This option is only useful when using the<br><code>–jobs</code> option to run multiple recipes simultaneously<br>(see <a href="#Parallel">Parallel Execution</a>)  Without this option output<br>will be displayed as it is generated by the recipes.<br></p><br><p>With no type or the type ‘<samp>target</samp>’, output from the entire recipe<br>of each target is grouped together.  With the type ‘<samp>line</samp>’, output<br>from each line in the recipe is grouped together.  With the type<br>‘<samp>recurse</samp>’, the output from an entire recursive make is grouped<br>together.  With the type ‘<samp>none</samp>’, no output synchronization is<br>performed.  See <a href="#Parallel-Output">Output During Parallel Execution</a>.<br></p><br></dd><br><dt>‘<samp>-p</samp>’</dt><br><dd><a name="index-_002dp"></a><br></dd><br><dt>‘<samp>–print-data-base</samp>’</dt><br><dd><a name="index-_002d_002dprint_002ddata_002dbase"></a><br><a name="index-data-base-of-make-rules"></a><br><a name="index-predefined-rules-and-variables_002c-printing"></a><br><p>Print the data base (rules and variable values) that results from<br>reading the makefiles; then execute as usual or as otherwise<br>specified.  This also prints the version information given by the<br>‘<samp>-v</samp>’ switch (see below).  To print the data base without trying<br>to remake any files, use ‘<samp>make&nbsp;<span class="nolinebreak">-qp</span></samp>’<!-- /@w -->.  To print the data base<br>of predefined rules and variables, use ‘<samp>make&nbsp;<span class="nolinebreak">-p</span>&nbsp;<span class="nolinebreak">-f</span>&nbsp;/dev/null</samp>’<!-- /@w -->.<br>The data base output contains file name and line number information for<br>recipe and variable definitions, so it can be a useful debugging tool<br>in complex environments.<br></p><br></dd><br><dt>‘<samp>-q</samp>’</dt><br><dd><a name="index-_002dq-1"></a><br></dd><br><dt>‘<samp>–question</samp>’</dt><br><dd><a name="index-_002d_002dquestion-1"></a><br><p>“Question mode”.  Do not run any recipes, or print anything; just<br>return an exit status that is zero if the specified targets are already<br>up to date, one if any remaking is required, or two if an error is<br>encountered.  See <a href="#Instead-of-Execution">Instead of Executing<br>Recipes</a>.<br></p><br></dd><br><dt>‘<samp>-r</samp>’</dt><br><dd><a name="index-_002dr"></a><br></dd><br><dt>‘<samp>–no-builtin-rules</samp>’</dt><br><dd><a name="index-_002d_002dno_002dbuiltin_002drules"></a><br><p>Eliminate use of the built-in implicit rules (see <a href="#Implicit-Rules">Using Implicit Rules</a>).  You can still define your own by writing<br>pattern rules (see <a href="#Pattern-Rules">Defining and Redefining Pattern<br>Rules</a>).  The ‘<samp>-r</samp>’ option also clears out the default list of<br>suffixes for suffix rules (see <a href="#Suffix-Rules">Old-Fashioned Suffix<br>Rules</a>).  But you can still define your own suffixes with a rule for<br><code>.SUFFIXES</code>, and then define your own suffix rules.  Note that only<br><em>rules</em> are affected by the <code>-r</code> option; default variables<br>remain in effect (see <a href="#Implicit-Variables">Variables Used by Implicit<br>Rules</a>); see the ‘<samp>-R</samp>’ option below.<br></p><br></dd><br><dt>‘<samp>-R</samp>’</dt><br><dd><a name="index-_002dR"></a><br></dd><br><dt>‘<samp>–no-builtin-variables</samp>’</dt><br><dd><a name="index-_002d_002dno_002dbuiltin_002dvariables"></a><br><p>Eliminate use of the built-in rule-specific variables (see <a href="#Implicit-Variables">Variables Used by Implicit Rules</a>).  You can still define<br>your own, of course.  The ‘<samp>-R</samp>’ option also automatically enables<br>the ‘<samp>-r</samp>’ option (see above), since it doesn’t make sense to have<br>implicit rules without any definitions for the variables that they use.<br></p><br></dd><br><dt>‘<samp>-s</samp>’</dt><br><dd><a name="index-_002ds-1"></a><br></dd><br><dt>‘<samp>–silent</samp>’</dt><br><dd><a name="index-_002d_002dsilent-1"></a><br></dd><br><dt>‘<samp>–quiet</samp>’</dt><br><dd><a name="index-_002d_002dquiet-1"></a><br><br><p>Silent operation; do not print the recipes as they are executed.<br>See <a href="#Echoing">Recipe Echoing</a>.<br></p><br></dd><br><dt>‘<samp>-S</samp>’</dt><br><dd><a name="index-_002dS"></a><br></dd><br><dt>‘<samp>–no-keep-going</samp>’</dt><br><dd><a name="index-_002d_002dno_002dkeep_002dgoing"></a><br></dd><br><dt>‘<samp>–stop</samp>’</dt><br><dd><a name="index-_002d_002dstop"></a><br><br><p>Cancel the effect of the ‘<samp>-k</samp>’ option.  This is never necessary<br>except in a recursive <code>make</code> where ‘<samp>-k</samp>’ might be inherited<br>from the top-level <code>make</code> via <code>MAKEFLAGS</code><br>(see <a href="#Recursion">Recursive Use of <code>make</code></a>)<br>or if you set ‘<samp>-k</samp>’ in <code>MAKEFLAGS</code> in your environment.<br></p><br></dd><br><dt>‘<samp>-t</samp>’</dt><br><dd><a name="index-_002dt-1"></a><br></dd><br><dt>‘<samp>–touch</samp>’</dt><br><dd><a name="index-_002d_002dtouch-1"></a><br><br><p>Touch files (mark them up to date without really changing them)<br>instead of running their recipes.  This is used to pretend that the<br>recipes were done, in order to fool future invocations of<br><code>make</code>.  See <a href="#Instead-of-Execution">Instead of Executing Recipes</a>.<br></p><br></dd><br><dt>‘<samp>–trace</samp>’</dt><br><dd><a name="index-_002d_002dtrace"></a><br><p>Show tracing information for <code>make</code> execution.  Prints the entire<br>recipe to be executed, even for recipes that are normally silent (due<br>to <code>.SILENT</code> or ‘<samp>@</samp>’).  Also prints the makefile name and<br>line number where the recipe was defined, and information on why the<br>target is being rebuilt.<br></p><br></dd><br><dt>‘<samp>-v</samp>’</dt><br><dd><a name="index-_002dv"></a><br></dd><br><dt>‘<samp>–version</samp>’</dt><br><dd><a name="index-_002d_002dversion"></a><br><p>Print the version of the <code>make</code> program plus a copyright, a list<br>of authors, and a notice that there is no warranty; then exit.<br></p><br></dd><br><dt>‘<samp>-w</samp>’</dt><br><dd><a name="index-_002dw"></a><br></dd><br><dt>‘<samp>–print-directory</samp>’</dt><br><dd><a name="index-_002d_002dprint_002ddirectory"></a><br><p>Print a message containing the working directory both before and after<br>executing the makefile.  This may be useful for tracking down errors<br>from complicated nests of recursive <code>make</code> commands.<br>See <a href="#Recursion">Recursive Use of <code>make</code></a>.  (In practice, you<br>rarely need to specify this option since ‘<samp>make</samp>’ does it for you;<br>see <a href="#g_t_002dw-Option">The ‘<samp>–print-directory</samp>’ Option</a>.)<br></p><br></dd><br><dt>‘<samp>–no-print-directory</samp>’</dt><br><dd><a name="index-_002d_002dno_002dprint_002ddirectory-1"></a><br><p>Disable printing of the working directory under <code>-w</code>.<br>This option is useful when <code>-w</code> is turned on automatically,<br>but you do not want to see the extra messages.<br>See <a href="#g_t_002dw-Option">The ‘<samp>–print-directory</samp>’ Option</a>.<br></p><br></dd><br><dt>‘<samp>-W <var>file</var></samp>’</dt><br><dd><a name="index-_002dW-1"></a><br></dd><br><dt>‘<samp>–what-if=<var>file</var></samp>’</dt><br><dd><a name="index-_002d_002dwhat_002dif-1"></a><br></dd><br><dt>‘<samp>–new-file=<var>file</var></samp>’</dt><br><dd><a name="index-_002d_002dnew_002dfile-1"></a><br></dd><br><dt>‘<samp>–assume-new=<var>file</var></samp>’</dt><br><dd><a name="index-_002d_002dassume_002dnew-1"></a><br><p>Pretend that the target <var>file</var> has just been modified.  When used<br>with the ‘<samp>-n</samp>’ flag, this shows you what would happen if you were<br>to modify that file.  Without ‘<samp>-n</samp>’, it is almost the same as<br>running a <code>touch</code> command on the given file before running<br><code>make</code>, except that the modification time is changed only in the<br>imagination of <code>make</code>.<br>See <a href="#Instead-of-Execution">Instead of Executing Recipes</a>.<br></p><br></dd><br><dt>‘<samp>–warn-undefined-variables</samp>’</dt><br><dd><a name="index-_002d_002dwarn_002dundefined_002dvariables"></a><br><a name="index-variables_002c-warning-for-undefined"></a><br><a name="index-undefined-variables_002c-warning-message"></a><br><p>Issue a warning message whenever <code>make</code> sees a reference to an<br>undefined variable.  This can be helpful when you are trying to debug<br>makefiles which use variables in complex ways.<br></p></dd><br></dl><br><br><hr><br><a name="Implicit-Rules"></a><br><div class="header"><br><p><br>Next: <a href="#Archives" accesskey="n" rel="next">Archives</a>, Previous: <a href="#Running" accesskey="p" rel="prev">Running</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Using-Implicit-Rules"></a><br><h2 class="chapter">10 Using Implicit Rules</h2><br><a name="index-implicit-rule"></a><br><a name="index-rule_002c-implicit"></a><br><br><p>Certain standard ways of remaking target files are used very often.  For<br>example, one customary way to make an object file is from a C source file<br>using the C compiler, <code>cc</code>.<br></p><br><p><em>Implicit rules</em> tell <code>make</code> how to use customary techniques so<br>that you do not have to specify them in detail when you want to use<br>them.  For example, there is an implicit rule for C compilation.  File<br>names determine which implicit rules are run.  For example, C<br>compilation typically takes a <samp>.c</samp> file and makes a <samp>.o</samp> file.<br>So <code>make</code> applies the implicit rule for C compilation when it sees<br>this combination of file name endings.<br></p><br><p>A chain of implicit rules can apply in sequence; for example, <code>make</code><br>will remake a <samp>.o</samp> file from a <samp>.y</samp> file by way of a <samp>.c</samp> file.<br></p><br><p>The built-in implicit rules use several variables in their recipes so<br>that, by changing the values of the variables, you can change the way the<br>implicit rule works.  For example, the variable <code>CFLAGS</code> controls the<br>flags given to the C compiler by the implicit rule for C compilation.<br></p><br><p>You can define your own implicit rules by writing <em>pattern rules</em>.<br></p><br><p><em>Suffix rules</em> are a more limited way to define implicit rules.<br>Pattern rules are more general and clearer, but suffix rules are<br>retained for compatibility.<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Using-Implicit" accesskey="1">Using Implicit</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to use an existing implicit rule<br>                                  to get the recipes for updating a file.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Catalogue-of-Rules" accesskey="2">Catalogue of Rules</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">A list of built-in rules.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Implicit-Variables" accesskey="3">Implicit Variables</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to change what predefined rules do.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Chained-Rules" accesskey="4">Chained Rules</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to use a chain of implicit rules.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Pattern-Rules" accesskey="5">Pattern Rules</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to define new implicit rules.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Last-Resort" accesskey="6">Last Resort</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to define a recipe for rules which<br>                                  cannot find any.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Suffix-Rules" accesskey="7">Suffix Rules</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">The old-fashioned style of implicit rule.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Implicit-Rule-Search" accesskey="8">Implicit Rule Search</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">The precise algorithm for applying<br>                                  implicit rules.<br></td></tr><br></tbody></table><br><br><hr><br><a name="Using-Implicit"></a><br><div class="header"><br><p><br>Next: <a href="#Catalogue-of-Rules" accesskey="n" rel="next">Catalogue of Rules</a>, Previous: <a href="#Implicit-Rules" accesskey="p" rel="prev">Implicit Rules</a>, Up: <a href="#Implicit-Rules" accesskey="u" rel="up">Implicit Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Using-Implicit-Rules-1"></a><br><h3 class="section">10.1 Using Implicit Rules</h3><br><a name="index-implicit-rule_002c-how-to-use"></a><br><a name="index-rule_002c-implicit_002c-how-to-use"></a><br><br><p>To allow <code>make</code> to find a customary method for updating a target<br>file, all you have to do is refrain from specifying recipes yourself.<br>Either write a rule with no recipe, or don’t write a rule at all.<br>Then <code>make</code> will figure out which implicit rule to use based on<br>which kind of source file exists or can be made.<br></p><br><p>For example, suppose the makefile looks like this:<br></p><br><div class="example"><br><pre class="example">foo : foo.o bar.o<br>        cc -o foo foo.o bar.o $(CFLAGS) $(LDFLAGS)<br></pre></div><br><br><p>Because you mention <samp>foo.o</samp> but do not give a rule for it, <code>make</code><br>will automatically look for an implicit rule that tells how to update it.<br>This happens whether or not the file <samp>foo.o</samp> currently exists.<br></p><br><p>If an implicit rule is found, it can supply both a recipe and one or<br>more prerequisites (the source files).  You would want to write a rule<br>for <samp>foo.o</samp> with no recipe if you need to specify additional<br>prerequisites, such as header files, that the implicit rule cannot<br>supply.<br></p><br><p>Each implicit rule has a target pattern and prerequisite patterns.  There may<br>be many implicit rules with the same target pattern.  For example, numerous<br>rules make ‘<samp>.o</samp>’ files: one, from a ‘<samp>.c</samp>’ file with the C compiler;<br>another, from a ‘<samp>.p</samp>’ file with the Pascal compiler; and so on.  The rule<br>that actually applies is the one whose prerequisites exist or can be made.<br>So, if you have a file <samp>foo.c</samp>, <code>make</code> will run the C compiler;<br>otherwise, if you have a file <samp>foo.p</samp>, <code>make</code> will run the Pascal<br>compiler; and so on.<br></p><br><p>Of course, when you write the makefile, you know which implicit rule you<br>want <code>make</code> to use, and you know it will choose that one because you<br>know which possible prerequisite files are supposed to exist.<br>See <a href="#Catalogue-of-Rules">Catalogue of Built-In Rules</a>,<br>for a catalogue of all the predefined implicit rules.<br></p><br><p>Above, we said an implicit rule applies if the required prerequisites “exist<br>or can be made”.  A file “can be made” if it is mentioned explicitly in<br>the makefile as a target or a prerequisite, or if an implicit rule can be<br>recursively found for how to make it.  When an implicit prerequisite is the<br>result of another implicit rule, we say that <em>chaining</em> is occurring.<br>See <a href="#Chained-Rules">Chains of Implicit Rules</a>.<br></p><br><p>In general, <code>make</code> searches for an implicit rule for each target, and<br>for each double-colon rule, that has no recipe.  A file that is mentioned<br>only as a prerequisite is considered a target whose rule specifies nothing,<br>so implicit rule search happens for it.  See <a href="#Implicit-Rule-Search">Implicit Rule Search Algorithm</a>, for the<br>details of how the search is done.<br></p><br><p>Note that explicit prerequisites do not influence implicit rule search.<br>For example, consider this explicit rule:<br></p><br><div class="example"><br><pre class="example">foo.o: foo.p<br></pre></div><br><br><p>The prerequisite on <samp>foo.p</samp> does not necessarily mean that<br><code>make</code> will remake <samp>foo.o</samp> according to the implicit rule to<br>make an object file, a <samp>.o</samp> file, from a Pascal source file, a<br><samp>.p</samp> file.  For example, if <samp>foo.c</samp> also exists, the implicit<br>rule to make an object file from a C source file is used instead,<br>because it appears before the Pascal rule in the list of predefined<br>implicit rules (see <a href="#Catalogue-of-Rules">Catalogue of Built-In<br>Rules</a>).<br></p><br><p>If you do not want an implicit rule to be used for a target that has no<br>recipe, you can give that target an empty recipe by writing a semicolon<br>(see <a href="#Empty-Recipes">Defining Empty Recipes</a>).<br></p><br><hr><br><a name="Catalogue-of-Rules"></a><br><div class="header"><br><p><br>Next: <a href="#Implicit-Variables" accesskey="n" rel="next">Implicit Variables</a>, Previous: <a href="#Using-Implicit" accesskey="p" rel="prev">Using Implicit</a>, Up: <a href="#Implicit-Rules" accesskey="u" rel="up">Implicit Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Catalogue-of-Built_002dIn-Rules"></a><br><h3 class="section">10.2 Catalogue of Built-In Rules</h3><br><a name="index-implicit-rule_002c-predefined"></a><br><a name="index-rule_002c-implicit_002c-predefined"></a><br><br><p>Here is a catalogue of predefined implicit rules which are always<br>available unless the makefile explicitly overrides or cancels them.<br>See <a href="#Canceling-Rules">Canceling Implicit Rules</a>, for information on<br>canceling or overriding an implicit rule.  The ‘<samp>-r</samp>’ or<br>‘<samp>–no-builtin-rules</samp>’ option cancels all predefined rules.<br></p><br><p>This manual only documents the default rules available on POSIX-based<br>operating systems.  Other operating systems, such as VMS, Windows,<br>OS/2, etc. may have different sets of default rules.  To see the full<br>list of default rules and variables available in your version of GNU<br><code>make</code>, run ‘<samp>make -p</samp>’ in a directory with no makefile.<br></p><br><p>Not all of these rules will always be defined, even when the ‘<samp>-r</samp>’<br>option is not given.  Many of the predefined implicit rules are<br>implemented in <code>make</code> as suffix rules, so which ones will be<br>defined depends on the <em>suffix list</em> (the list of prerequisites of<br>the special target <code>.SUFFIXES</code>).  The default suffix list is:<br><code>.out</code>, <code>.a</code>, <code>.ln</code>, <code>.o</code>, <code>.c</code>, <code>.cc</code>,<br><code>.C</code>, <code>.cpp</code>, <code>.p</code>, <code>.f</code>, <code>.F</code>, <code>.m</code>,<br><code>.r</code>, <code>.y</code>, <code>.l</code>, <code>.ym</code>, <code>.lm</code>, <code>.s</code>,<br><code>.S</code>, <code>.mod</code>, <code>.sym</code>, <code>.def</code>, <code>.h</code>,<br><code>.info</code>, <code>.dvi</code>, <code>.tex</code>, <code>.texinfo</code>, <code>.texi</code>,<br><code>.txinfo</code>, <code>.w</code>, <code>.ch</code> <code>.web</code>, <code>.sh</code>,<br><code>.elc</code>, <code>.el</code>.  All of the implicit rules described below<br>whose prerequisites have one of these suffixes are actually suffix<br>rules.  If you modify the suffix list, the only predefined suffix<br>rules in effect will be those named by one or two of the suffixes that<br>are on the list you specify; rules whose suffixes fail to be on the<br>list are disabled.  See <a href="#Suffix-Rules">Old-Fashioned Suffix Rules</a>,<br>for full details on suffix rules.<br></p><br><dl compact="compact"><br><dt>Compiling C programs</dt><br><dd><a name="index-C_002c-rule-to-compile"></a><br><a name="index-cc"></a><br><a name="index-gcc"></a><br><a name="index-_002eo"></a><br><a name="index-_002ec"></a><br><p><samp><var>n</var>.o</samp> is made automatically from <samp><var>n</var>.c</samp> with<br>a recipe of the form ‘<samp>$(CC) $(CPPFLAGS) $(CFLAGS) -c</samp>’.<br></p><br></dd><br><dt>Compiling C++ programs</dt><br><dd><a name="index-C_002b_002b_002c-rule-to-compile"></a><br><a name="index-g_002b_002b"></a><br><a name="index-_002ecc"></a><br><a name="index-_002ecpp"></a><br><a name="index-_002eC"></a><br><p><samp><var>n</var>.o</samp> is made automatically from <samp><var>n</var>.cc</samp>,<br><samp><var>n</var>.cpp</samp>, or <samp><var>n</var>.C</samp> with a recipe of the form<br>‘<samp>$(CXX) $(CPPFLAGS) $(CXXFLAGS) -c</samp>’.  We encourage you to use the<br>suffix ‘<samp>.cc</samp>’ for C++ source files instead of ‘<samp>.C</samp>’.<br></p><br></dd><br><dt>Compiling Pascal programs</dt><br><dd><a name="index-Pascal_002c-rule-to-compile"></a><br><a name="index-pc"></a><br><a name="index-_002ep"></a><br><p><samp><var>n</var>.o</samp> is made automatically from <samp><var>n</var>.p</samp><br>with the recipe ‘<samp>$(PC) $(PFLAGS) -c</samp>’.<br></p><br></dd><br><dt>Compiling Fortran and Ratfor programs</dt><br><dd><a name="index-Fortran_002c-rule-to-compile"></a><br><a name="index-Ratfor_002c-rule-to-compile"></a><br><a name="index-f77"></a><br><a name="index-_002ef"></a><br><a name="index-_002er"></a><br><a name="index-_002eF"></a><br><p><samp><var>n</var>.o</samp> is made automatically from <samp><var>n</var>.r</samp>,<br><samp><var>n</var>.F</samp> or <samp><var>n</var>.f</samp> by running the<br>Fortran compiler.  The precise recipe used is as follows:<br></p><br><dl compact="compact"><br><dt>‘<samp>.f</samp>’</dt><br><dd><p>‘<samp>$(FC) $(FFLAGS) -c</samp>’.<br></p></dd><br><dt>‘<samp>.F</samp>’</dt><br><dd><p>‘<samp>$(FC) $(FFLAGS) $(CPPFLAGS) -c</samp>’.<br></p></dd><br><dt>‘<samp>.r</samp>’</dt><br><dd><p>‘<samp>$(FC) $(FFLAGS) $(RFLAGS) -c</samp>’.<br></p></dd><br></dl><br><br></dd><br><dt>Preprocessing Fortran and Ratfor programs</dt><br><dd><p><samp><var>n</var>.f</samp> is made automatically from <samp><var>n</var>.r</samp> or<br><samp><var>n</var>.F</samp>.  This rule runs just the preprocessor to convert a<br>Ratfor or preprocessable Fortran program into a strict Fortran<br>program.  The precise recipe used is as follows:<br></p><br><dl compact="compact"><br><dt>‘<samp>.F</samp>’</dt><br><dd><p>‘<samp>$(FC) $(CPPFLAGS) $(FFLAGS) -F</samp>’.<br></p></dd><br><dt>‘<samp>.r</samp>’</dt><br><dd><p>‘<samp>$(FC) $(FFLAGS) $(RFLAGS) -F</samp>’.<br></p></dd><br></dl><br><br></dd><br><dt>Compiling Modula-2 programs</dt><br><dd><a name="index-Modula_002d2_002c-rule-to-compile"></a><br><a name="index-m2c"></a><br><a name="index-_002esym"></a><br><a name="index-_002edef"></a><br><a name="index-_002emod"></a><br><p><samp><var>n</var>.sym</samp> is made from <samp><var>n</var>.def</samp> with a recipe<br>of the form ‘<samp>$(M2C) $(M2FLAGS) $(DEFFLAGS)</samp>’.  <samp><var>n</var>.o</samp><br>is made from <samp><var>n</var>.mod</samp>; the form is:<br>‘<samp>$(M2C)&nbsp;$(M2FLAGS)&nbsp;$(MODFLAGS)</samp>’<!-- /@w -->.<br></p><br></dd><br><dt>Assembling and preprocessing assembler programs</dt><br><dd><a name="index-assembly_002c-rule-to-compile"></a><br><a name="index-as"></a><br><a name="index-_002es"></a><br><p><samp><var>n</var>.o</samp> is made automatically from <samp><var>n</var>.s</samp> by<br>running the assembler, <code>as</code>.  The precise recipe is<br>‘<samp>$(AS) $(ASFLAGS)</samp>’.<br></p><br><a name="index-_002eS"></a><br><p><samp><var>n</var>.s</samp> is made automatically from <samp><var>n</var>.S</samp> by<br>running the C preprocessor, <code>cpp</code>.  The precise recipe is<br>‘<samp>$(CPP)&nbsp;$(CPPFLAGS)</samp>’<!-- /@w -->.<br></p><br></dd><br><dt>Linking a single object file</dt><br><dd><a name="index-linking_002c-predefined-rule-for"></a><br><a name="index-ld"></a><br><a name="index-_002eo-1"></a><br><p><samp><var>n</var></samp> is made automatically from <samp><var>n</var>.o</samp> by running<br>the linker (usually called <code>ld</code>) via the C compiler.  The precise<br>recipe used is ‘<samp>$(CC)&nbsp;$(LDFLAGS)&nbsp;<var>n</var>.o&nbsp;$(LOADLIBES)&nbsp;$(LDLIBS)</samp>’<!-- /@w -->.<br></p><br><p>This rule does the right thing for a simple program with only one<br>source file.  It will also do the right thing if there are multiple<br>object files (presumably coming from various other source files), one<br>of which has a name matching that of the executable file.  Thus,<br></p><br><div class="example"><br><pre class="example">x: y.o z.o<br></pre></div><br><br><p>when <samp>x.c</samp>, <samp>y.c</samp> and <samp>z.c</samp> all exist will execute:<br></p><br><div class="example"><br><pre class="example">cc -c x.c -o x.o<br>cc -c y.c -o y.o<br>cc -c z.c -o z.o<br>cc x.o y.o z.o -o x<br>rm -f x.o<br>rm -f y.o<br>rm -f z.o<br></pre></div><br><br><p>In more complicated cases, such as when there is no object file whose<br>name derives from the executable file name, you must write an explicit<br>recipe for linking.<br></p><br><p>Each kind of file automatically made into ‘<samp>.o</samp>’ object files will<br>be automatically linked by using the compiler (‘<samp>$(CC)</samp>’,<br>‘<samp>$(FC)</samp>’ or ‘<samp>$(PC)</samp>’; the C compiler ‘<samp>$(CC)</samp>’ is used to<br>assemble ‘<samp>.s</samp>’ files) without the ‘<samp>-c</samp>’ option.  This could be<br>done by using the ‘<samp>.o</samp>’ object files as intermediates, but it is<br>faster to do the compiling and linking in one step, so that’s how it’s<br>done.<br></p><br></dd><br><dt>Yacc for C programs</dt><br><dd><a name="index-yacc-1"></a><br><a name="index-Yacc_002c-rule-to-run"></a><br><a name="index-_002ey"></a><br><p><samp><var>n</var>.c</samp> is made automatically from <samp><var>n</var>.y</samp> by<br>running Yacc with the recipe ‘<samp>$(YACC) $(YFLAGS)</samp>’.<br></p><br></dd><br><dt>Lex for C programs</dt><br><dd><a name="index-lex"></a><br><a name="index-Lex_002c-rule-to-run"></a><br><a name="index-_002el"></a><br><p><samp><var>n</var>.c</samp> is made automatically from <samp><var>n</var>.l</samp> by<br>running Lex.  The actual recipe is ‘<samp>$(LEX) $(LFLAGS)</samp>’.<br></p><br></dd><br><dt>Lex for Ratfor programs</dt><br><dd><p><samp><var>n</var>.r</samp> is made automatically from <samp><var>n</var>.l</samp> by<br>running Lex.  The actual recipe is ‘<samp>$(LEX) $(LFLAGS)</samp>’.<br></p><br><p>The convention of using the same suffix ‘<samp>.l</samp>’ for all Lex files<br>regardless of whether they produce C code or Ratfor code makes it<br>impossible for <code>make</code> to determine automatically which of the two<br>languages you are using in any particular case.  If <code>make</code> is<br>called upon to remake an object file from a ‘<samp>.l</samp>’ file, it must<br>guess which compiler to use.  It will guess the C compiler, because<br>that is more common.  If you are using Ratfor, make sure <code>make</code><br>knows this by mentioning <samp><var>n</var>.r</samp> in the makefile.  Or, if you<br>are using Ratfor exclusively, with no C files, remove ‘<samp>.c</samp>’ from<br>the list of implicit rule suffixes with:<br></p><br><div class="example"><br><pre class="example">.SUFFIXES:<br>.SUFFIXES: .o .r .f .l …<br></pre></div><br><br></dd><br><dt>Making Lint Libraries from C, Yacc, or Lex programs</dt><br><dd><a name="index-lint"></a><br><a name="index-lint_002c-rule-to-run"></a><br><a name="index-_002eln"></a><br><p><samp><var>n</var>.ln</samp> is made from <samp><var>n</var>.c</samp> by running <code>lint</code>.<br>The precise recipe is ‘<samp>$(LINT)&nbsp;$(LINTFLAGS)&nbsp;$(CPPFLAGS)&nbsp;<span class="nolinebreak">-i</span></samp>’<!-- /@w -->.<br>The same recipe is used on the C code produced from<br><samp><var>n</var>.y</samp> or <samp><var>n</var>.l</samp>.<br></p><br></dd><br><dt>TeX and Web</dt><br><dd><a name="index-TeX_002c-rule-to-run"></a><br><a name="index-Web_002c-rule-to-run"></a><br><a name="index-tex"></a><br><a name="index-cweave"></a><br><a name="index-weave"></a><br><a name="index-tangle"></a><br><a name="index-ctangle"></a><br><a name="index-_002edvi"></a><br><a name="index-_002etex"></a><br><a name="index-_002eweb"></a><br><a name="index-_002ew"></a><br><a name="index-_002ech"></a><br><p><samp><var>n</var>.dvi</samp> is made from <samp><var>n</var>.tex</samp> with the recipe<br>‘<samp>$(TEX)</samp>’.  <samp><var>n</var>.tex</samp> is made from <samp><var>n</var>.web</samp> with<br>‘<samp>$(WEAVE)</samp>’, or from <samp><var>n</var>.w</samp> (and from <samp><var>n</var>.ch</samp> if<br>it exists or can be made) with ‘<samp>$(CWEAVE)</samp>’.  <samp><var>n</var>.p</samp> is<br>made from <samp><var>n</var>.web</samp> with ‘<samp>$(TANGLE)</samp>’ and <samp><var>n</var>.c</samp><br>is made from <samp><var>n</var>.w</samp> (and from <samp><var>n</var>.ch</samp> if it exists<br>or can be made) with ‘<samp>$(CTANGLE)</samp>’.<br></p><br></dd><br><dt>Texinfo and Info</dt><br><dd><a name="index-Texinfo_002c-rule-to-format"></a><br><a name="index-Info_002c-rule-to-format"></a><br><a name="index-texi2dvi"></a><br><a name="index-makeinfo"></a><br><a name="index-_002etexinfo"></a><br><a name="index-_002einfo"></a><br><a name="index-_002etexi"></a><br><a name="index-_002etxinfo"></a><br><p><samp><var>n</var>.dvi</samp> is made from <samp><var>n</var>.texinfo</samp>,<br><samp><var>n</var>.texi</samp>, or <samp><var>n</var>.txinfo</samp>, with the recipe<br>‘<samp>$(TEXI2DVI)&nbsp;<span class="nolinebreak">$(TEXI2DVI_FLAGS)</span></samp>’<!-- /@w -->.  <samp><var>n</var>.info</samp> is made from<br><samp><var>n</var>.texinfo</samp>, <samp><var>n</var>.texi</samp>, or <samp><var>n</var>.txinfo</samp>, with<br>the recipe ‘<samp>$(MAKEINFO)&nbsp;<span class="nolinebreak">$(MAKEINFO_FLAGS)</span></samp>’<!-- /@w -->.<br></p><br></dd><br><dt>RCS</dt><br><dd><a name="index-RCS_002c-rule-to-extract-from"></a><br><a name="index-co"></a><br><a name="index-_002cv-_0028RCS-file-extension_0029"></a><br><p>Any file <samp><var>n</var></samp> is extracted if necessary from an RCS file<br>named either <samp><var>n</var>,v</samp> or <samp>RCS/<var>n</var>,v</samp>.  The precise<br>recipe used is ‘<samp>$(CO)&nbsp;$(COFLAGS)</samp>’<!-- /@w -->.  <samp><var>n</var></samp> will not be<br>extracted from RCS if it already exists, even if the RCS file is<br>newer.  The rules for RCS are terminal<br>(see <a href="#Match_002dAnything-Rules">Match-Anything Pattern Rules</a>),<br>so RCS files cannot be generated from another source; they must<br>actually exist.<br></p><br></dd><br><dt>SCCS</dt><br><dd><a name="index-SCCS_002c-rule-to-extract-from"></a><br><a name="index-get"></a><br><a name="index-s_002e-_0028SCCS-file-prefix_0029"></a><br><p>Any file <samp><var>n</var></samp> is extracted if necessary from an SCCS file<br>named either <samp>s.<var>n</var></samp> or <samp>SCCS/s.<var>n</var></samp>.  The precise<br>recipe used is ‘<samp>$(GET)&nbsp;$(GFLAGS)</samp>’<!-- /@w -->.  The rules for SCCS are<br>terminal (see <a href="#Match_002dAnything-Rules">Match-Anything Pattern Rules</a>),<br>so SCCS files cannot be generated from another source; they must<br>actually exist.<br></p><br><a name="index-_002esh"></a><br><p>For the benefit of SCCS, a file <samp><var>n</var></samp> is copied from<br><samp><var>n</var>.sh</samp> and made executable (by everyone).  This is for<br>shell scripts that are checked into SCCS.  Since RCS preserves the<br>execution permission of a file, you do not need to use this feature<br>with RCS.<br></p><br><p>We recommend that you avoid using of SCCS.  RCS is widely held to be<br>superior, and is also free.  By choosing free software in place of<br>comparable (or inferior) proprietary software, you support the free<br>software movement.<br></p></dd><br></dl><br><br><p>Usually, you want to change only the variables listed in the table<br>above, which are documented in the following section.<br></p><br><p>However, the recipes in built-in implicit rules actually use<br>variables such as <code>COMPILE.c</code>, <code>LINK.p</code>, and<br><code>PREPROCESS.S</code>, whose values contain the recipes listed above.<br></p><br><p><code>make</code> follows the convention that the rule to compile a<br><samp>.<var>x</var></samp> source file uses the variable <code>COMPILE.<var>x</var></code>.<br>Similarly, the rule to produce an executable from a <samp>.<var>x</var></samp><br>file uses <code>LINK.<var>x</var></code>; and the rule to preprocess a<br><samp>.<var>x</var></samp> file uses <code>PREPROCESS.<var>x</var></code>.<br></p><br><a name="index-OUTPUT_005fOPTION"></a><br><p>Every rule that produces an object file uses the variable<br><code>OUTPUT_OPTION</code>.  <code>make</code> defines this variable either to<br>contain ‘<samp>-o $@</samp>’, or to be empty, depending on a compile-time<br>option.  You need the ‘<samp>-o</samp>’ option to ensure that the output goes<br>into the right file when the source file is in a different directory,<br>as when using <code>VPATH</code> (see <a href="#Directory-Search">Directory Search</a>).  However,<br>compilers on some systems do not accept a ‘<samp>-o</samp>’ switch for object<br>files.  If you use such a system, and use <code>VPATH</code>, some<br>compilations will put their output in the wrong place.<br>A possible workaround for this problem is to give <code>OUTPUT_OPTION</code><br>the value ‘<samp>;&nbsp;mv&nbsp;$<em>.o&nbsp;$@</em></samp>’<!-- /@w -->.<br></p><br><hr><br><a name="Implicit-Variables"></a><br><div class="header"><br><p><br>Next: <a href="#Chained-Rules" accesskey="n" rel="next">Chained Rules</a>, Previous: <a href="#Catalogue-of-Rules" accesskey="p" rel="prev">Catalogue of Rules</a>, Up: <a href="#Implicit-Rules" accesskey="u" rel="up">Implicit Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Variables-Used-by-Implicit-Rules"></a><br><h3 class="section">10.3 Variables Used by Implicit Rules</h3><br><a name="index-flags-for-compilers"></a><br><br><p>The recipes in built-in implicit rules make liberal use of certain<br>predefined variables.  You can alter the values of these variables in<br>the makefile, with arguments to <code>make</code>, or in the environment to<br>alter how the implicit rules work without redefining the rules<br>themselves.  You can cancel all variables used by implicit rules with<br>the ‘<samp>-R</samp>’ or ‘<samp>–no-builtin-variables</samp>’ option.<br></p><br><p>For example, the recipe used to compile a C source file actually says<br>‘<samp>$(CC) -c $(CFLAGS) $(CPPFLAGS)</samp>’.  The default values of the variables<br>used are ‘<samp>cc</samp>’ and nothing, resulting in the command ‘<samp>cc -c</samp>’.  By<br>redefining ‘<samp>CC</samp>’ to ‘<samp>ncc</samp>’, you could cause ‘<samp>ncc</samp>’ to be<br>used for all C compilations performed by the implicit rule.  By redefining<br>‘<samp>CFLAGS</samp>’ to be ‘<samp>-g</samp>’, you could pass the ‘<samp>-g</samp>’ option to<br>each compilation.  <em>All</em> implicit rules that do C compilation use<br>‘<samp>$(CC)</samp>’ to get the program name for the compiler and <em>all</em><br>include ‘<samp>$(CFLAGS)</samp>’ among the arguments given to the compiler.<br></p><br><p>The variables used in implicit rules fall into two classes: those that are<br>names of programs (like <code>CC</code>) and those that contain arguments for the<br>programs (like <code>CFLAGS</code>).  (The “name of a program” may also contain<br>some command arguments, but it must start with an actual executable program<br>name.)  If a variable value contains more than one argument, separate them<br>with spaces.<br></p><br><p>The following tables describe of some of the more commonly-used predefined<br>variables.  This list is not exhaustive, and the default values shown here may<br>not be what <code>make</code> selects for your environment.  To see the<br>complete list of predefined variables for your instance of GNU <code>make</code> you<br>can run ‘<samp>make -p</samp>’ in a directory with no makefiles.<br></p><br><p>Here is a table of some of the more common variables used as names of<br>programs in built-in rules:<br></p><br><dl compact="compact"><br><dt><code>AR</code></dt><br><dd><a name="index-AR"></a><br><p>Archive-maintaining program; default ‘<samp>ar</samp>’.<br><a name="index-ar"></a><br></p><br></dd><br><dt><code>AS</code></dt><br><dd><a name="index-AS"></a><br><p>Program for compiling assembly files; default ‘<samp>as</samp>’.<br><a name="index-as-1"></a><br></p><br></dd><br><dt><code>CC</code></dt><br><dd><a name="index-CC"></a><br><p>Program for compiling C programs; default ‘<samp>cc</samp>’.<br><a name="index-cc-1"></a><br></p><br></dd><br><dt><code>CXX</code></dt><br><dd><a name="index-CXX"></a><br><p>Program for compiling C++ programs; default ‘<samp>g++</samp>’.<br><a name="index-g_002b_002b-1"></a><br></p><br></dd><br><dt><code>CPP</code></dt><br><dd><a name="index-CPP"></a><br><p>Program for running the C preprocessor, with results to standard output;<br>default ‘<samp>$(CC) -E</samp>’.<br></p><br></dd><br><dt><code>FC</code></dt><br><dd><a name="index-FC"></a><br><p>Program for compiling or preprocessing Fortran and Ratfor programs;<br>default ‘<samp>f77</samp>’.<br><a name="index-f77-1"></a><br></p><br></dd><br><dt><code>M2C</code></dt><br><dd><a name="index-M2C"></a><br><p>Program to use to compile Modula-2 source code; default ‘<samp>m2c</samp>’.<br><a name="index-m2c-1"></a><br></p><br></dd><br><dt><code>PC</code></dt><br><dd><a name="index-PC"></a><br><p>Program for compiling Pascal programs; default ‘<samp>pc</samp>’.<br><a name="index-pc-1"></a><br></p><br></dd><br><dt><code>CO</code></dt><br><dd><a name="index-CO"></a><br><p>Program for extracting a file from RCS; default ‘<samp>co</samp>’.<br><a name="index-co-1"></a><br></p><br></dd><br><dt><code>GET</code></dt><br><dd><a name="index-GET"></a><br><p>Program for extracting a file from SCCS; default ‘<samp>get</samp>’.<br><a name="index-get-1"></a><br></p><br></dd><br><dt><code>LEX</code></dt><br><dd><a name="index-LEX"></a><br><p>Program to use to turn Lex grammars into source code; default ‘<samp>lex</samp>’.<br><a name="index-lex-1"></a><br></p><br></dd><br><dt><code>YACC</code></dt><br><dd><a name="index-YACC"></a><br><p>Program to use to turn Yacc grammars into source code; default ‘<samp>yacc</samp>’.<br><a name="index-yacc-2"></a><br></p><br></dd><br><dt><code>LINT</code></dt><br><dd><a name="index-LINT"></a><br><p>Program to use to run lint on source code; default ‘<samp>lint</samp>’.<br><a name="index-lint-1"></a><br></p><br></dd><br><dt><code>MAKEINFO</code></dt><br><dd><a name="index-MAKEINFO"></a><br><p>Program to convert a Texinfo source file into an Info file; default<br>‘<samp>makeinfo</samp>’.<br><a name="index-makeinfo-1"></a><br></p><br></dd><br><dt><code>TEX</code></dt><br><dd><a name="index-TEX"></a><br><p>Program to make TeX <small>DVI</small> files from TeX source;<br>default ‘<samp>tex</samp>’.<br><a name="index-tex-1"></a><br></p><br></dd><br><dt><code>TEXI2DVI</code></dt><br><dd><a name="index-TEXI2DVI"></a><br><p>Program to make TeX <small>DVI</small> files from Texinfo source;<br>default ‘<samp>texi2dvi</samp>’.<br><a name="index-texi2dvi-1"></a><br></p><br></dd><br><dt><code>WEAVE</code></dt><br><dd><a name="index-WEAVE"></a><br><p>Program to translate Web into TeX; default ‘<samp>weave</samp>’.<br><a name="index-weave-1"></a><br></p><br></dd><br><dt><code>CWEAVE</code></dt><br><dd><a name="index-CWEAVE"></a><br><p>Program to translate C Web into TeX; default ‘<samp>cweave</samp>’.<br><a name="index-cweave-1"></a><br></p><br></dd><br><dt><code>TANGLE</code></dt><br><dd><a name="index-TANGLE"></a><br><p>Program to translate Web into Pascal; default ‘<samp>tangle</samp>’.<br><a name="index-tangle-1"></a><br></p><br></dd><br><dt><code>CTANGLE</code></dt><br><dd><a name="index-CTANGLE"></a><br><p>Program to translate C Web into C; default ‘<samp>ctangle</samp>’.<br><a name="index-ctangle-1"></a><br></p><br></dd><br><dt><code>RM</code></dt><br><dd><a name="index-RM"></a><br><p>Command to remove a file; default ‘<samp>rm -f</samp>’.<br><a name="index-rm"></a><br></p></dd><br></dl><br><br><p>Here is a table of variables whose values are additional arguments for the<br>programs above.  The default values for all of these is the empty<br>string, unless otherwise noted.<br></p><br><dl compact="compact"><br><dt><code>ARFLAGS</code></dt><br><dd><a name="index-ARFLAGS"></a><br><p>Flags to give the archive-maintaining program; default ‘<samp>rv</samp>’.<br></p><br></dd><br><dt><code>ASFLAGS</code></dt><br><dd><a name="index-ASFLAGS"></a><br><p>Extra flags to give to the assembler (when explicitly<br>invoked on a ‘<samp>.s</samp>’ or ‘<samp>.S</samp>’ file).<br></p><br></dd><br><dt><code>CFLAGS</code></dt><br><dd><a name="index-CFLAGS"></a><br><p>Extra flags to give to the C compiler.<br></p><br></dd><br><dt><code>CXXFLAGS</code></dt><br><dd><a name="index-CXXFLAGS"></a><br><p>Extra flags to give to the C++ compiler.<br></p><br></dd><br><dt><code>COFLAGS</code></dt><br><dd><a name="index-COFLAGS"></a><br><p>Extra flags to give to the RCS <code>co</code> program.<br></p><br></dd><br><dt><code>CPPFLAGS</code></dt><br><dd><a name="index-CPPFLAGS"></a><br><p>Extra flags to give to the C preprocessor and programs<br>that use it (the C and Fortran compilers).<br></p><br></dd><br><dt><code>FFLAGS</code></dt><br><dd><a name="index-FFLAGS"></a><br><p>Extra flags to give to the Fortran compiler.<br></p><br></dd><br><dt><code>GFLAGS</code></dt><br><dd><a name="index-GFLAGS"></a><br><p>Extra flags to give to the SCCS <code>get</code> program.<br></p><br></dd><br><dt><code>LDFLAGS</code></dt><br><dd><a name="index-LDFLAGS"></a><br><p>Extra flags to give to compilers when they are supposed to invoke the linker,<br>‘<samp>ld</samp>’, such as <code>-L</code>.  Libraries (<code>-lfoo</code>) should be<br>added to the <code>LDLIBS</code> variable instead.<br></p><br></dd><br><dt><code>LDLIBS</code></dt><br><dd><a name="index-LDLIBS"></a><br><a name="index-LOADLIBES"></a><br><p>Library flags or names given to compilers when they are supposed to<br>invoke the linker, ‘<samp>ld</samp>’.  <code>LOADLIBES</code> is a deprecated (but<br>still supported) alternative to <code>LDLIBS</code>.  Non-library linker<br>flags, such as <code>-L</code>, should go in the <code>LDFLAGS</code> variable.<br></p><br></dd><br><dt><code>LFLAGS</code></dt><br><dd><a name="index-LFLAGS"></a><br><p>Extra flags to give to Lex.<br></p><br></dd><br><dt><code>YFLAGS</code></dt><br><dd><a name="index-YFLAGS"></a><br><p>Extra flags to give to Yacc.<br></p><br></dd><br><dt><code>PFLAGS</code></dt><br><dd><a name="index-PFLAGS"></a><br><p>Extra flags to give to the Pascal compiler.<br></p><br></dd><br><dt><code>RFLAGS</code></dt><br><dd><a name="index-RFLAGS"></a><br><p>Extra flags to give to the Fortran compiler for Ratfor programs.<br></p><br></dd><br><dt><code>LINTFLAGS</code></dt><br><dd><a name="index-LINTFLAGS"></a><br><p>Extra flags to give to lint.<br></p></dd><br></dl><br><br><hr><br><a name="Chained-Rules"></a><br><div class="header"><br><p><br>Next: <a href="#Pattern-Rules" accesskey="n" rel="next">Pattern Rules</a>, Previous: <a href="#Implicit-Variables" accesskey="p" rel="prev">Implicit Variables</a>, Up: <a href="#Implicit-Rules" accesskey="u" rel="up">Implicit Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Chains-of-Implicit-Rules"></a><br><h3 class="section">10.4 Chains of Implicit Rules</h3><br><br><a name="index-chains-of-rules"></a><br><a name="index-rule_002c-implicit_002c-chains-of"></a><br><p>Sometimes a file can be made by a sequence of implicit rules.  For example,<br>a file <samp><var>n</var>.o</samp> could be made from <samp><var>n</var>.y</samp> by running<br>first Yacc and then <code>cc</code>.  Such a sequence is called a <em>chain</em>.<br></p><br><p>If the file <samp><var>n</var>.c</samp> exists, or is mentioned in the makefile, no<br>special searching is required: <code>make</code> finds that the object file can<br>be made by C compilation from <samp><var>n</var>.c</samp>; later on, when considering<br>how to make <samp><var>n</var>.c</samp>, the rule for running Yacc is<br>used.  Ultimately both <samp><var>n</var>.c</samp> and <samp><var>n</var>.o</samp> are<br>updated.<br></p><br><a name="index-intermediate-files"></a><br><a name="index-files_002c-intermediate"></a><br><p>However, even if <samp><var>n</var>.c</samp> does not exist and is not mentioned,<br><code>make</code> knows how to envision it as the missing link between<br><samp><var>n</var>.o</samp> and <samp><var>n</var>.y</samp>!  In this case, <samp><var>n</var>.c</samp> is<br>called an <em>intermediate file</em>.  Once <code>make</code> has decided to use the<br>intermediate file, it is entered in the data base as if it had been<br>mentioned in the makefile, along with the implicit rule that says how to<br>create it.<br></p><br><p>Intermediate files are remade using their rules just like all other<br>files.  But intermediate files are treated differently in two ways.<br></p><br><p>The first difference is what happens if the intermediate file does not<br>exist.  If an ordinary file <var>b</var> does not exist, and <code>make</code><br>considers a target that depends on <var>b</var>, it invariably creates<br><var>b</var> and then updates the target from <var>b</var>.  But if <var>b</var> is an<br>intermediate file, then <code>make</code> can leave well enough alone.  It<br>won’t bother updating <var>b</var>, or the ultimate target, unless some<br>prerequisite of <var>b</var> is newer than that target or there is some other<br>reason to update that target.<br></p><br><p>The second difference is that if <code>make</code> <em>does</em> create <var>b</var><br>in order to update something else, it deletes <var>b</var> later on after it<br>is no longer needed.  Therefore, an intermediate file which did not<br>exist before <code>make</code> also does not exist after <code>make</code>.<br><code>make</code> reports the deletion to you by printing a ‘<samp>rm -f</samp>’<br>command showing which file it is deleting.<br></p><br><p>Ordinarily, a file cannot be intermediate if it is mentioned in the<br>makefile as a target or prerequisite.  However, you can explicitly mark a<br>file as intermediate by listing it as a prerequisite of the special target<br><code>.INTERMEDIATE</code>.  This takes effect even if the file is mentioned<br>explicitly in some other way.<br></p><br><a name="index-intermediate-files_002c-preserving"></a><br><a name="index-preserving-intermediate-files"></a><br><a name="index-secondary-files"></a><br><p>You can prevent automatic deletion of an intermediate file by marking it<br>as a <em>secondary</em> file.  To do this, list it as a prerequisite of the<br>special target <code>.SECONDARY</code>.  When a file is secondary, <code>make</code><br>will not create the file merely because it does not already exist, but<br><code>make</code> does not automatically delete the file.  Marking a file as<br>secondary also marks it as intermediate.<br></p><br><p>You can list the target pattern of an implicit rule (such as ‘<samp>%.o</samp>’)<br>as a prerequisite of the special target <code>.PRECIOUS</code> to preserve<br>intermediate files made by implicit rules whose target patterns match<br>that file’s name; see <a href="#Interrupts">Interrupts</a>.<br><a name="index-preserving-with-_002ePRECIOUS-1"></a><br><a name="index-_002ePRECIOUS-intermediate-files"></a><br></p><br><p>A chain can involve more than two implicit rules.  For example, it is<br>possible to make a file <samp>foo</samp> from <samp>RCS/foo.y,v</samp> by running RCS,<br>Yacc and <code>cc</code>.  Then both <samp>foo.y</samp> and <samp>foo.c</samp> are<br>intermediate files that are deleted at the end.<br></p><br><p>No single implicit rule can appear more than once in a chain.  This means<br>that <code>make</code> will not even consider such a ridiculous thing as making<br><samp>foo</samp> from <samp>foo.o.o</samp> by running the linker twice.  This<br>constraint has the added benefit of preventing any infinite loop in the<br>search for an implicit rule chain.<br></p><br><p>There are some special implicit rules to optimize certain cases that would<br>otherwise be handled by rule chains.  For example, making <samp>foo</samp> from<br><samp>foo.c</samp> could be handled by compiling and linking with separate<br>chained rules, using <samp>foo.o</samp> as an intermediate file.  But what<br>actually happens is that a special rule for this case does the compilation<br>and linking with a single <code>cc</code> command.  The optimized rule is used in<br>preference to the step-by-step chain because it comes earlier in the<br>ordering of rules.<br></p><br><hr><br><a name="Pattern-Rules"></a><br><div class="header"><br><p><br>Next: <a href="#Last-Resort" accesskey="n" rel="next">Last Resort</a>, Previous: <a href="#Chained-Rules" accesskey="p" rel="prev">Chained Rules</a>, Up: <a href="#Implicit-Rules" accesskey="u" rel="up">Implicit Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Defining-and-Redefining-Pattern-Rules"></a><br><h3 class="section">10.5 Defining and Redefining Pattern Rules</h3><br><br><p>You define an implicit rule by writing a <em>pattern rule</em>.  A pattern<br>rule looks like an ordinary rule, except that its target contains the<br>character ‘<samp>%</samp>’ (exactly one of them).  The target is considered a<br>pattern for matching file names; the ‘<samp>%</samp>’ can match any nonempty<br>substring, while other characters match only themselves.  The prerequisites<br>likewise use ‘<samp>%</samp>’ to show how their names relate to the target name.<br></p><br><p>Thus, a pattern rule ‘<samp>%.o : %.c</samp>’ says how to make any file<br><samp><var>stem</var>.o</samp> from another file <samp><var>stem</var>.c</samp>.<br></p><br><p>Note that expansion using ‘<samp>%</samp>’ in pattern rules occurs<br><strong>after</strong> any variable or function expansions, which take place<br>when the makefile is read.  See <a href="#Using-Variables">How to Use<br>Variables</a>, and <a href="#Functions">Functions for Transforming Text</a>.<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Pattern-Intro" accesskey="1">Pattern Intro</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">An introduction to pattern rules.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Pattern-Examples" accesskey="2">Pattern Examples</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Examples of pattern rules.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Automatic-Variables" accesskey="3">Automatic Variables</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to use automatic variables in the<br>                                  recipe of implicit rules.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Pattern-Match" accesskey="4">Pattern Match</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How patterns match.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Match_002dAnything-Rules" accesskey="5">Match-Anything Rules</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Precautions you should take prior to<br>                                  defining rules that can match any<br>                                  target file whatever.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Canceling-Rules" accesskey="6">Canceling Rules</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to override or cancel built-in rules.<br></td></tr><br></tbody></table><br><br><hr><br><a name="Pattern-Intro"></a><br><div class="header"><br><p><br>Next: <a href="#Pattern-Examples" accesskey="n" rel="next">Pattern Examples</a>, Previous: <a href="#Pattern-Rules" accesskey="p" rel="prev">Pattern Rules</a>, Up: <a href="#Pattern-Rules" accesskey="u" rel="up">Pattern Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Introduction-to-Pattern-Rules"></a><br><h4 class="subsection">10.5.1 Introduction to Pattern Rules</h4><br><a name="index-pattern-rule"></a><br><a name="index-rule_002c-pattern"></a><br><br><p>A pattern rule contains the character ‘<samp>%</samp>’ (exactly one of them)<br>in the target; otherwise, it looks exactly like an ordinary rule.  The<br>target is a pattern for matching file names; the ‘<samp>%</samp>’ matches any<br>nonempty substring, while other characters match only themselves.<br><a name="index-target-pattern_002c-implicit"></a><br><a name="index-_0025_002c-in-pattern-rules"></a><br></p><br><p>For example, ‘<samp>%.c</samp>’ as a pattern matches any file name that ends in<br>‘<samp>.c</samp>’.  ‘<samp>s.%.c</samp>’ as a pattern matches any file name that starts<br>with ‘<samp>s.</samp>’, ends in ‘<samp>.c</samp>’ and is at least five characters long.<br>(There must be at least one character to match the ‘<samp>%</samp>’.)  The substring<br>that the ‘<samp>%</samp>’ matches is called the <em>stem</em>.<br></p><br><p>‘<samp>%</samp>’ in a prerequisite of a pattern rule stands for the same stem<br>that was matched by the ‘<samp>%</samp>’ in the target.  In order for the<br>pattern rule to apply, its target pattern must match the file name<br>under consideration and all of its prerequisites (after pattern<br>substitution) must name files that exist or can be made.  These files<br>become prerequisites of the target.<br><a name="index-prerequisite-pattern_002c-implicit"></a><br></p><br><p>Thus, a rule of the form<br></p><br><div class="example"><br><pre class="example">%.o : %.c ; <var>recipe</var>…<br></pre></div><br><br><p>specifies how to make a file <samp><var>n</var>.o</samp>, with another file<br><samp><var>n</var>.c</samp> as its prerequisite, provided that <samp><var>n</var>.c</samp><br>exists or can be made.<br></p><br><p>There may also be prerequisites that do not use ‘<samp>%</samp>’; such a prerequisite<br>attaches to every file made by this pattern rule.  These unvarying<br>prerequisites are useful occasionally.<br></p><br><p>A pattern rule need not have any prerequisites that contain ‘<samp>%</samp>’, or<br>in fact any prerequisites at all.  Such a rule is effectively a general<br>wildcard.  It provides a way to make any file that matches the target<br>pattern.  See <a href="#Last-Resort">Last Resort</a>.<br></p><br><p>More than one pattern rule may match a target.  In this case<br><code>make</code> will choose the “best fit” rule.  See <a href="#Pattern-Match">How Patterns Match</a>.<br></p><br><p>Pattern rules may have more than one target.  Unlike normal rules,<br>this does not act as many different rules with the same prerequisites<br>and recipe.  If a pattern rule has multiple targets, <code>make</code> knows<br>that the rule’s recipe is responsible for making all of the targets.<br>The recipe is executed only once to make all the targets.  When<br>searching for a pattern rule to match a target, the target patterns of<br>a rule other than the one that matches the target in need of a rule<br>are incidental: <code>make</code> worries only about giving a recipe and<br>prerequisites to the file presently in question.  However, when this<br>file’s recipe is run, the other targets are marked as having been<br>updated themselves.<br><a name="index-multiple-targets_002c-in-pattern-rule"></a><br><a name="index-target_002c-multiple-in-pattern-rule"></a><br></p><br><hr><br><a name="Pattern-Examples"></a><br><div class="header"><br><p><br>Next: <a href="#Automatic-Variables" accesskey="n" rel="next">Automatic Variables</a>, Previous: <a href="#Pattern-Intro" accesskey="p" rel="prev">Pattern Intro</a>, Up: <a href="#Pattern-Rules" accesskey="u" rel="up">Pattern Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Pattern-Rule-Examples"></a><br><h4 class="subsection">10.5.2 Pattern Rule Examples</h4><br><br><p>Here are some examples of pattern rules actually predefined in<br><code>make</code>.  First, the rule that compiles ‘<samp>.c</samp>’ files into ‘<samp>.o</samp>’<br>files:<br></p><br><div class="example"><br><pre class="example">%.o : %.c<br>        $(CC) -c $(CFLAGS) $(CPPFLAGS) $&lt; -o $@<br></pre></div><br><br><p>defines a rule that can make any file <samp><var>x</var>.o</samp> from<br><samp><var>x</var>.c</samp>.  The recipe uses the automatic variables ‘<samp>$@</samp>’ and<br>‘<samp>$&lt;</samp>’ to substitute the names of the target file and the source file<br>in each case where the rule applies (see <a href="#Automatic-Variables">Automatic Variables</a>).<br></p><br><p>Here is a second built-in rule:<br></p><br><div class="example"><br><pre class="example">% :: RCS/%,v<br>        $(CO) $(COFLAGS) $&lt;<br></pre></div><br><br><p>defines a rule that can make any file <samp><var>x</var></samp> whatsoever from a<br>corresponding file <samp><var>x</var>,v</samp> in the sub-directory <samp>RCS</samp>.  Since<br>the target is ‘<samp>%</samp>’, this rule will apply to any file whatever, provided<br>the appropriate prerequisite file exists.  The double colon makes the rule<br><em>terminal</em>, which means that its prerequisite may not be an intermediate<br>file (see <a href="#Match_002dAnything-Rules">Match-Anything Pattern Rules</a>).<br></p><br><p>This pattern rule has two targets:<br></p><br><div class="example"><br><pre class="example">%.tab.c %.tab.h: %.y<br>        bison -d $&lt;<br></pre></div><br><br><p>This tells <code>make</code> that the recipe ‘<samp>bison -d <var>x</var>.y</samp>’ will<br>make both <samp><var>x</var>.tab.c</samp> and <samp><var>x</var>.tab.h</samp>.  If the file<br><samp>foo</samp> depends on the files <samp>parse.tab.o</samp> and <samp>scan.o</samp><br>and the file <samp>scan.o</samp> depends on the file <samp>parse.tab.h</samp>,<br>when <samp>parse.y</samp> is changed, the recipe ‘<samp>bison -d parse.y</samp>’<br>will be executed only once, and the prerequisites of both<br><samp>parse.tab.o</samp> and <samp>scan.o</samp> will be satisfied.  (Presumably<br>the file <samp>parse.tab.o</samp> will be recompiled from <samp>parse.tab.c</samp><br>and the file <samp>scan.o</samp> from <samp>scan.c</samp>, while <samp>foo</samp> is<br>linked from <samp>parse.tab.o</samp>, <samp>scan.o</samp>, and its other<br>prerequisites, and it will execute happily ever after.)<br></p><br><hr><br><a name="Automatic-Variables"></a><br><div class="header"><br><p><br>Next: <a href="#Pattern-Match" accesskey="n" rel="next">Pattern Match</a>, Previous: <a href="#Pattern-Examples" accesskey="p" rel="prev">Pattern Examples</a>, Up: <a href="#Pattern-Rules" accesskey="u" rel="up">Pattern Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Automatic-Variables-1"></a><br><h4 class="subsection">10.5.3 Automatic Variables</h4><br><a name="index-automatic-variables"></a><br><a name="index-variables_002c-automatic"></a><br><a name="index-variables_002c-and-implicit-rule"></a><br><br><p>Suppose you are writing a pattern rule to compile a ‘<samp>.c</samp>’ file into a<br>‘<samp>.o</samp>’ file: how do you write the ‘<samp>cc</samp>’ command so that it operates<br>on the right source file name?  You cannot write the name in the recipe,<br>because the name is different each time the implicit rule is applied.<br></p><br><p>What you do is use a special feature of <code>make</code>, the <em>automatic<br>variables</em>.  These variables have values computed afresh for each rule that<br>is executed, based on the target and prerequisites of the rule.  In this<br>example, you would use ‘<samp>$@</samp>’ for the object file name and ‘<samp>$&lt;</samp>’<br>for the source file name.<br></p><br><a name="index-automatic-variables-in-prerequisites"></a><br><a name="index-prerequisites_002c-and-automatic-variables"></a><br><p>It’s very important that you recognize the limited scope in which<br>automatic variable values are available: they only have values within<br>the recipe.  In particular, you cannot use them anywhere<br>within the target list of a rule; they have no value there and will<br>expand to the empty string.  Also, they cannot be accessed directly<br>within the prerequisite list of a rule.  A common mistake is<br>attempting to use <code>$@</code> within the prerequisites list; this will<br>not work.  However, there is a special feature of GNU <code>make</code>,<br>secondary expansion (see <a href="#Secondary-Expansion">Secondary Expansion</a>), which will allow<br>automatic variable values to be used in prerequisite lists.<br></p><br><p>Here is a table of automatic variables:<br></p><br><dl compact="compact"><br><dd><a name="index-_0024_0040"></a><br><a name="index-_0040-_0028automatic-variable_0029"></a><br></dd><br><dt><code>$@</code></dt><br><dd><p>The file name of the target of the rule.  If the target is an archive<br>member, then ‘<samp>$@</samp>’ is the name of the archive file.  In a pattern<br>rule that has multiple targets (see <a href="#Pattern-Intro">Introduction to<br>Pattern Rules</a>), ‘<samp>$@</samp>’ is the name of whichever target caused the<br>rule’s recipe to be run.<br></p><br><a name="index-_0024_0025"></a><br><a name="index-_0025-_0028automatic-variable_0029"></a><br></dd><br><dt><code>$%</code></dt><br><dd><p>The target member name, when the target is an archive member.<br>See <a href="#Archives">Archives</a>.  For example, if the target is <samp>foo.a(bar.o)</samp> then<br>‘<samp>$%</samp>’ is <samp>bar.o</samp> and ‘<samp>$@</samp>’ is <samp>foo.a</samp>.  ‘<samp>$%</samp>’ is<br>empty when the target is not an archive member.<br></p><br><a name="index-_0024_003c"></a><br><a name="index-_003c-_0028automatic-variable_0029"></a><br></dd><br><dt><code>$&lt;</code></dt><br><dd><p>The name of the first prerequisite.  If the target got its recipe from<br>an implicit rule, this will be the first prerequisite added by the<br>implicit rule (see <a href="#Implicit-Rules">Implicit Rules</a>).<br></p><br><a name="index-_0024_003f"></a><br><a name="index-_003f-_0028automatic-variable_0029"></a><br></dd><br><dt><code>$?</code></dt><br><dd><p>The names of all the prerequisites that are newer than the target, with<br>spaces between them.  For prerequisites which are archive members, only<br>the named member is used (see <a href="#Archives">Archives</a>).<br><a name="index-prerequisites_002c-list-of-changed"></a><br><a name="index-list-of-changed-prerequisites"></a><br></p><br><a name="index-_0024_005e"></a><br><a name="index-_005e-_0028automatic-variable_0029"></a><br></dd><br><dt><code>$^</code></dt><br><dd><p>The names of all the prerequisites, with spaces between them.  For<br>prerequisites which are archive members, only the named member is used<br>(see <a href="#Archives">Archives</a>).  A target has only one prerequisite on each other file<br>it depends on, no matter how many times each file is listed as a<br>prerequisite.  So if you list a prerequisite more than once for a target,<br>the value of <code>$^</code> contains just one copy of the name.  This list<br>does <strong>not</strong> contain any of the order-only prerequisites; for those<br>see the ‘<samp>$|</samp>’ variable, below.<br><a name="index-prerequisites_002c-list-of-all"></a><br><a name="index-list-of-all-prerequisites"></a><br></p><br><a name="index-_0024_002b"></a><br><a name="index-_002b-_0028automatic-variable_0029"></a><br></dd><br><dt><code>$+</code></dt><br><dd><p>This is like ‘<samp>$^</samp>’, but prerequisites listed more than once are<br>duplicated in the order they were listed in the makefile.  This is<br>primarily useful for use in linking commands where it is meaningful to<br>repeat library file names in a particular order.<br></p><br><a name="index-_0024_007c"></a><br><a name="index-_007c-_0028automatic-variable_0029"></a><br></dd><br><dt><code>$|</code></dt><br><dd><p>The names of all the order-only prerequisites, with spaces between<br>them.<br></p><br><a name="index-_0024_002a"></a><br><a name="index-_002a-_0028automatic-variable_0029"></a><br></dd><br><dt><code>$</code></dt><br><dd><p>The stem with which an implicit rule matches (see <a href="#Pattern-Match">How<br>Patterns Match</a>).  If the target is <samp>dir/a.foo.b</samp> and the target<br>pattern is <samp>a.%.b</samp> then the stem is <samp>dir/foo</samp>.  The stem is<br>useful for constructing names of related files.<br><a name="index-stem_002c-variable-for"></a><br></p><br><p>In a static pattern rule, the stem is part of the file name that matched<br>the ‘<samp>%</samp>’ in the target pattern.<br></p><br><p>In an explicit rule, there is no stem; so ‘<samp>$<em></em></samp>’ cannot be determined<br>in that way.  Instead, if the target name ends with a recognized suffix<br>(see <a href="#Suffix-Rules">Old-Fashioned Suffix Rules</a>), ‘<samp>$</samp>’ is set to<br>the target name minus the suffix.  For example, if the target name is<br>‘<samp>foo.c</samp>’, then ‘<samp>$<em></em></samp>’ is set to ‘<samp>foo</samp>’, since ‘<samp>.c</samp>’ is a<br>suffix.  GNU <code>make</code> does this bizarre thing only for compatibility<br>with other implementations of <code>make</code>.  You should generally avoid<br>using ‘<samp>$</samp>’ except in implicit rules or static pattern rules.<br></p><br><p>If the target name in an explicit rule does not end with a recognized<br>suffix, ‘<samp>$<em></em></samp>’ is set to the empty string for that rule.<br></p></dd><br></dl><br><br><p>‘<samp>$?</samp>’ is useful even in explicit rules when you wish to operate on only<br>the prerequisites that have changed.  For example, suppose that an archive<br>named <samp>lib</samp> is supposed to contain copies of several object files.<br>This rule copies just the changed object files into the archive:<br></p><br><div class="example"><br><pre class="example">lib: foo.o bar.o lose.o win.o<br>        ar r lib $?<br></pre></div><br><br><p>Of the variables listed above, four have values that are single file<br>names, and three have values that are lists of file names.  These seven<br>have variants that get just the file’s directory name or just the file<br>name within the directory.  The variant variables’ names are formed by<br>appending ‘<samp>D</samp>’ or ‘<samp>F</samp>’, respectively.  These variants are<br>semi-obsolete in GNU <code>make</code> since the functions <code>dir</code> and<br><code>notdir</code> can be used to get a similar effect (see <a href="#File-Name-Functions">Functions for File Names</a>).  Note, however, that the<br>‘<samp>D</samp>’ variants all omit the trailing slash which always appears in<br>the output of the <code>dir</code> function.  Here is a table of the variants:<br></p><br><dl compact="compact"><br><dd><a name="index-_0024_0028_0040D_0029"></a><br><a name="index-_0040D-_0028automatic-variable_0029"></a><br></dd><br><dt>‘<samp>$(@D)</samp>’</dt><br><dd><p>The directory part of the file name of the target, with the trailing<br>slash removed.  If the value of ‘<samp>$@</samp>’ is <samp>dir/foo.o</samp> then<br>‘<samp>$(@D)</samp>’ is <samp>dir</samp>.  This value is <samp>.</samp> if ‘<samp>$@</samp>’ does<br>not contain a slash.<br></p><br><a name="index-_0024_0028_0040F_0029"></a><br><a name="index-_0040F-_0028automatic-variable_0029"></a><br></dd><br><dt>‘<samp>$(@F)</samp>’</dt><br><dd><p>The file-within-directory part of the file name of the target.  If the<br>value of ‘<samp>$@</samp>’ is <samp>dir/foo.o</samp> then ‘<samp>$(@F)</samp>’ is<br><samp>foo.o</samp>.  ‘<samp>$(@F)</samp>’ is equivalent to ‘<samp>$(notdir $@)</samp>’.<br></p><br><a name="index-_0024_0028_002aD_0029"></a><br><a name="index-_002aD-_0028automatic-variable_0029"></a><br></dd><br><dt>‘<samp>$(D)</samp>’</dt><br><dd><a name="index-_0024_0028_002aF_0029"></a><br><a name="index-_002aF-_0028automatic-variable_0029"></a><br></dd><br><dt>‘<samp>$(<em>F)</em></samp>’</dt><br><dd><p>The directory part and the file-within-directory<br>part of the stem; <samp>dir</samp> and <samp>foo</samp> in this example.<br></p><br><a name="index-_0024_0028_0025D_0029"></a><br><a name="index-_0025D-_0028automatic-variable_0029"></a><br></dd><br><dt>‘<samp>$(%D)</samp>’</dt><br><dd><a name="index-_0024_0028_0025F_0029"></a><br><a name="index-_0025F-_0028automatic-variable_0029"></a><br></dd><br><dt>‘<samp>$(%F)</samp>’</dt><br><dd><p>The directory part and the file-within-directory part of the target<br>archive member name.  This makes sense only for archive member targets<br>of the form <samp><var>archive</var>(<var>member</var>)</samp> and is useful only when<br><var>member</var> may contain a directory name.  (See <a href="#Archive-Members">Archive Members as Targets</a>.)<br></p><br><a name="index-_0024_0028_003cD_0029"></a><br><a name="index-_003cD-_0028automatic-variable_0029"></a><br></dd><br><dt>‘<samp>$(&lt;D)</samp>’</dt><br><dd><a name="index-_0024_0028_003cF_0029"></a><br><a name="index-_003cF-_0028automatic-variable_0029"></a><br></dd><br><dt>‘<samp>$(&lt;F)</samp>’</dt><br><dd><p>The directory part and the file-within-directory<br>part of the first prerequisite.<br></p><br><a name="index-_0024_0028_005eD_0029"></a><br><a name="index-_005eD-_0028automatic-variable_0029"></a><br></dd><br><dt>‘<samp>$(^D)</samp>’</dt><br><dd><a name="index-_0024_0028_005eF_0029"></a><br><a name="index-_005eF-_0028automatic-variable_0029"></a><br></dd><br><dt>‘<samp>$(^F)</samp>’</dt><br><dd><p>Lists of the directory parts and the file-within-directory<br>parts of all prerequisites.<br></p><br><a name="index-_0024_0028_002bD_0029"></a><br><a name="index-_002bD-_0028automatic-variable_0029"></a><br></dd><br><dt>‘<samp>$(+D)</samp>’</dt><br><dd><a name="index-_0024_0028_002bF_0029"></a><br><a name="index-_002bF-_0028automatic-variable_0029"></a><br></dd><br><dt>‘<samp>$(+F)</samp>’</dt><br><dd><p>Lists of the directory parts and the file-within-directory<br>parts of all prerequisites, including multiple instances of duplicated<br>prerequisites.<br></p><br><a name="index-_0024_0028_003fD_0029"></a><br><a name="index-_003fD-_0028automatic-variable_0029"></a><br></dd><br><dt>‘<samp>$(?D)</samp>’</dt><br><dd><a name="index-_0024_0028_003fF_0029"></a><br><a name="index-_003fF-_0028automatic-variable_0029"></a><br></dd><br><dt>‘<samp>$(?F)</samp>’</dt><br><dd><p>Lists of the directory parts and the file-within-directory parts of<br>all prerequisites that are newer than the target.<br></p></dd><br></dl><br><br><p>Note that we use a special stylistic convention when we talk about these<br>automatic variables; we write “the value of ‘<samp>$&lt;</samp>’”, rather than<br>“the&nbsp;variable&nbsp;<code>&lt;</code>”<!-- /@w --> as we would write for ordinary variables<br>such as <code>objects</code> and <code>CFLAGS</code>.  We think this convention<br>looks more natural in this special case.  Please do not assume it has a<br>deep significance; ‘<samp>$&lt;</samp>’ refers to the variable named <code>&lt;</code> just<br>as ‘<samp>$(CFLAGS)</samp>’ refers to the variable named <code>CFLAGS</code>.<br>You could just as well use ‘<samp>$(&lt;)</samp>’ in place of ‘<samp>$&lt;</samp>’.<br></p><br><hr><br><a name="Pattern-Match"></a><br><div class="header"><br><p><br>Next: <a href="#Match_002dAnything-Rules" accesskey="n" rel="next">Match-Anything Rules</a>, Previous: <a href="#Automatic-Variables" accesskey="p" rel="prev">Automatic Variables</a>, Up: <a href="#Pattern-Rules" accesskey="u" rel="up">Pattern Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="How-Patterns-Match"></a><br><h4 class="subsection">10.5.4 How Patterns Match</h4><br><br><a name="index-stem-1"></a><br><p>A target pattern is composed of a ‘<samp>%</samp>’ between a prefix and a suffix,<br>either or both of which may be empty.  The pattern matches a file name only<br>if the file name starts with the prefix and ends with the suffix, without<br>overlap.  The text between the prefix and the suffix is called the<br><em>stem</em>.  Thus, when the pattern ‘<samp>%.o</samp>’ matches the file name<br><samp>test.o</samp>, the stem is ‘<samp>test</samp>’.  The pattern rule prerequisites are<br>turned into actual file names by substituting the stem for the character<br>‘<samp>%</samp>’.  Thus, if in the same example one of the prerequisites is written<br>as ‘<samp>%.c</samp>’, it expands to ‘<samp>test.c</samp>’.<br></p><br><p>When the target pattern does not contain a slash (and it usually does<br>not), directory names in the file names are removed from the file name<br>before it is compared with the target prefix and suffix.  After the<br>comparison of the file name to the target pattern, the directory<br>names, along with the slash that ends them, are added on to the<br>prerequisite file names generated from the pattern rule’s prerequisite<br>patterns and the file name.  The directories are ignored only for the<br>purpose of finding an implicit rule to use, not in the application of<br>that rule.  Thus, ‘<samp>e%t</samp>’ matches the file name <samp>src/eat</samp>,<br>with ‘<samp>src/a</samp>’ as the stem.  When prerequisites are turned into file<br>names, the directories from the stem are added at the front, while the<br>rest of the stem is substituted for the ‘<samp>%</samp>’.  The stem<br>‘<samp>src/a</samp>’ with a prerequisite pattern ‘<samp>c%r</samp>’ gives the file name<br><samp>src/car</samp>.<br></p><br><a name="index-pattern-rules_002c-order-of"></a><br><a name="index-order-of-pattern-rules"></a><br><p>A pattern rule can be used to build a given file only if there is a<br>target pattern that matches the file name, <em>and</em> all<br>prerequisites in that rule either exist or can be built.  The rules<br>you write take precedence over those that are built in. Note however,<br>that a rule whose prerequisites actually exist or are mentioned always<br>takes priority over a rule with prerequisites that must be made by<br>chaining other implicit rules.<br></p><br><a name="index-stem_002c-shortest"></a><br><p>It is possible that more than one pattern rule will meet these<br>criteria.  In that case, <code>make</code> will choose the rule with the<br>shortest stem (that is, the pattern that matches most specifically).<br>If more than one pattern rule has the shortest stem, <code>make</code> will<br>choose the first one found in the makefile.<br></p><br><p>This algorithm results in more specific rules being preferred over<br>more generic ones; for example:<br></p><br><div class="example"><br><pre class="example">%.o: %.c<br>        $(CC) -c $(CFLAGS) $(CPPFLAGS) $&lt; -o $@<br><br>%.o : %.f<br>        $(COMPILE.F) $(OUTPUT_OPTION) $&lt;<br><br>lib/%.o: lib/%.c<br>        $(CC) -fPIC -c $(CFLAGS) $(CPPFLAGS) $&lt; -o $@<br></pre></div><br><br><p>Given these rules and asked to build <samp>bar.o</samp> where both<br><samp>bar.c</samp> and <samp>bar.f</samp> exist, <code>make</code> will choose the first<br>rule and compile <samp>bar.c</samp> into <samp>bar.o</samp>.  In the same<br>situation where <samp>bar.c</samp> does not exist, then <code>make</code> will<br>choose the second rule and compile <samp>bar.f</samp> into <samp>bar.o</samp>.<br></p><br><p>If <code>make</code> is asked to build <samp>lib/bar.o</samp> and both<br><samp>lib/bar.c</samp> and <samp>lib/bar.f</samp> exist, then the third rule will<br>be chosen since the stem for this rule (‘<samp>bar</samp>’) is shorter than<br>the stem for the first rule (‘<samp>lib/bar</samp>’).  If <samp>lib/bar.c</samp><br>does not exist then the third rule is not eligible and the second rule<br>will be used, even though the stem is longer.<br></p><br><hr><br><a name="Match_002dAnything-Rules"></a><br><div class="header"><br><p><br>Next: <a href="#Canceling-Rules" accesskey="n" rel="next">Canceling Rules</a>, Previous: <a href="#Pattern-Match" accesskey="p" rel="prev">Pattern Match</a>, Up: <a href="#Pattern-Rules" accesskey="u" rel="up">Pattern Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Match_002dAnything-Pattern-Rules"></a><br><h4 class="subsection">10.5.5 Match-Anything Pattern Rules</h4><br><br><a name="index-match_002danything-rule"></a><br><a name="index-terminal-rule"></a><br><p>When a pattern rule’s target is just ‘<samp>%</samp>’, it matches any file name<br>whatever.  We call these rules <em>match-anything</em> rules.  They are very<br>useful, but it can take a lot of time for <code>make</code> to think about them,<br>because it must consider every such rule for each file name listed either<br>as a target or as a prerequisite.<br></p><br><p>Suppose the makefile mentions <samp>foo.c</samp>.  For this target, <code>make</code><br>would have to consider making it by linking an object file <samp>foo.c.o</samp>,<br>or by C compilation-and-linking in one step from <samp>foo.c.c</samp>, or by<br>Pascal compilation-and-linking from <samp>foo.c.p</samp>, and many other<br>possibilities.<br></p><br><p>We know these possibilities are ridiculous since <samp>foo.c</samp> is a C source<br>file, not an executable.  If <code>make</code> did consider these possibilities,<br>it would ultimately reject them, because files such as <samp>foo.c.o</samp> and<br><samp>foo.c.p</samp> would not exist.  But these possibilities are so<br>numerous that <code>make</code> would run very slowly if it had to consider<br>them.<br></p><br><p>To gain speed, we have put various constraints on the way <code>make</code><br>considers match-anything rules.  There are two different constraints that<br>can be applied, and each time you define a match-anything rule you must<br>choose one or the other for that rule.<br></p><br><p>One choice is to mark the match-anything rule as <em>terminal</em> by defining<br>it with a double colon.  When a rule is terminal, it does not apply unless<br>its prerequisites actually exist.  Prerequisites that could be made with<br>other implicit rules are not good enough.  In other words, no further<br>chaining is allowed beyond a terminal rule.<br></p><br><p>For example, the built-in implicit rules for extracting sources from RCS<br>and SCCS files are terminal; as a result, if the file <samp>foo.c,v</samp> does<br>not exist, <code>make</code> will not even consider trying to make it as an<br>intermediate file from <samp>foo.c,v.o</samp> or from <samp>RCS/SCCS/s.foo.c,v</samp>.<br>RCS and SCCS files are generally ultimate source files, which should not be<br>remade from any other files; therefore, <code>make</code> can save time by not<br>looking for ways to remake them.<br></p><br><p>If you do not mark the match-anything rule as terminal, then it is<br>non-terminal.  A non-terminal match-anything rule cannot apply to a file name<br>that indicates a specific type of data.  A file name indicates a specific<br>type of data if some non-match-anything implicit rule target matches it.<br></p><br><p>For example, the file name <samp>foo.c</samp> matches the target for the pattern<br>rule ‘<samp>%.c : %.y</samp>’ (the rule to run Yacc).  Regardless of whether this<br>rule is actually applicable (which happens only if there is a file<br><samp>foo.y</samp>), the fact that its target matches is enough to prevent<br>consideration of any non-terminal match-anything rules for the file<br><samp>foo.c</samp>.  Thus, <code>make</code> will not even consider trying to make<br><samp>foo.c</samp> as an executable file from <samp>foo.c.o</samp>, <samp>foo.c.c</samp>,<br><samp>foo.c.p</samp>, etc.<br></p><br><p>The motivation for this constraint is that non-terminal match-anything<br>rules are used for making files containing specific types of data (such as<br>executable files) and a file name with a recognized suffix indicates some<br>other specific type of data (such as a C source file).<br></p><br><p>Special built-in dummy pattern rules are provided solely to recognize<br>certain file names so that non-terminal match-anything rules will not be<br>considered.  These dummy rules have no prerequisites and no recipes, and<br>they are ignored for all other purposes.  For example, the built-in<br>implicit rule<br></p><br><div class="example"><br><pre class="example">%.p :<br></pre></div><br><br><p>exists to make sure that Pascal source files such as <samp>foo.p</samp> match a<br>specific target pattern and thereby prevent time from being wasted looking<br>for <samp>foo.p.o</samp> or <samp>foo.p.c</samp>.<br></p><br><p>Dummy pattern rules such as the one for ‘<samp>%.p</samp>’ are made for every<br>suffix listed as valid for use in suffix rules (see <a href="#Suffix-Rules">Old-Fashioned Suffix Rules</a>).<br></p><br><hr><br><a name="Canceling-Rules"></a><br><div class="header"><br><p><br>Previous: <a href="#Match_002dAnything-Rules" accesskey="p" rel="prev">Match-Anything Rules</a>, Up: <a href="#Pattern-Rules" accesskey="u" rel="up">Pattern Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Canceling-Implicit-Rules"></a><br><h4 class="subsection">10.5.6 Canceling Implicit Rules</h4><br><br><p>You can override a built-in implicit rule (or one you have defined<br>yourself) by defining a new pattern rule with the same target and<br>prerequisites, but a different recipe.  When the new rule is defined, the<br>built-in one is replaced.  The new rule’s position in the sequence of<br>implicit rules is determined by where you write the new rule.<br></p><br><p>You can cancel a built-in implicit rule by defining a pattern rule with the<br>same target and prerequisites, but no recipe.  For example, the following<br>would cancel the rule that runs the assembler:<br></p><br><div class="example"><br><pre class="example">%.o : %.s<br></pre></div><br><br><hr><br><a name="Last-Resort"></a><br><div class="header"><br><p><br>Next: <a href="#Suffix-Rules" accesskey="n" rel="next">Suffix Rules</a>, Previous: <a href="#Pattern-Rules" accesskey="p" rel="prev">Pattern Rules</a>, Up: <a href="#Implicit-Rules" accesskey="u" rel="up">Implicit Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Defining-Last_002dResort-Default-Rules"></a><br><h3 class="section">10.6 Defining Last-Resort Default Rules</h3><br><a name="index-last_002dresort-default-rules"></a><br><a name="index-default-rules_002c-last_002dresort"></a><br><br><p>You can define a last-resort implicit rule by writing a terminal<br>match-anything pattern rule with no prerequisites (see <a href="#Match_002dAnything-Rules">Match-Anything Rules</a>).  This is just like any other pattern rule; the only thing<br>special about it is that it will match any target.  So such a rule’s<br>recipe is used for all targets and prerequisites that have no recipe<br>of their own and for which no other implicit rule applies.<br></p><br><p>For example, when testing a makefile, you might not care if the source<br>files contain real data, only that they exist.  Then you might do this:<br></p><br><div class="example"><br><pre class="example">%::<br>        touch $@<br></pre></div><br><br><p>to cause all the source files needed (as prerequisites) to be created<br>automatically.<br></p><br><a name="index-_002eDEFAULT-1"></a><br><p>You can instead define a recipe to be used for targets for which there<br>are no rules at all, even ones which don’t specify recipes.  You do<br>this by writing a rule for the target <code>.DEFAULT</code>.  Such a rule’s<br>recipe is used for all prerequisites which do not appear as targets in<br>any explicit rule, and for which no implicit rule applies.  Naturally,<br>there is no <code>.DEFAULT</code> rule unless you write one.<br></p><br><p>If you use <code>.DEFAULT</code> with no recipe or prerequisites:<br></p><br><div class="example"><br><pre class="example">.DEFAULT:<br></pre></div><br><br><p>the recipe previously stored for <code>.DEFAULT</code> is cleared.  Then<br><code>make</code> acts as if you had never defined <code>.DEFAULT</code> at all.<br></p><br><p>If you do not want a target to get the recipe from a match-anything<br>pattern rule or <code>.DEFAULT</code>, but you also do not want any recipe<br>to be run for the target, you can give it an empty recipe<br>(see <a href="#Empty-Recipes">Defining Empty Recipes</a>).<br></p><br><p>You can use a last-resort rule to override part of another makefile.<br>See <a href="#Overriding-Makefiles">Overriding Part of Another Makefile</a>.<br></p><br><hr><br><a name="Suffix-Rules"></a><br><div class="header"><br><p><br>Next: <a href="#Implicit-Rule-Search" accesskey="n" rel="next">Implicit Rule Search</a>, Previous: <a href="#Last-Resort" accesskey="p" rel="prev">Last Resort</a>, Up: <a href="#Implicit-Rules" accesskey="u" rel="up">Implicit Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Old_002dFashioned-Suffix-Rules"></a><br><h3 class="section">10.7 Old-Fashioned Suffix Rules</h3><br><a name="index-old_002dfashioned-suffix-rules"></a><br><a name="index-suffix-rule"></a><br><br><p><em>Suffix rules</em> are the old-fashioned way of defining implicit rules for<br><code>make</code>.  Suffix rules are obsolete because pattern rules are more<br>general and clearer.  They are supported in GNU <code>make</code> for<br>compatibility with old makefiles.  They come in two kinds:<br><em>double-suffix</em> and <em>single-suffix</em>.<br></p><br><p>A double-suffix rule is defined by a pair of suffixes: the target suffix<br>and the source suffix.  It matches any file whose name ends with the<br>target suffix.  The corresponding implicit prerequisite is made by<br>replacing the target suffix with the source suffix in the file name.  A<br>two-suffix rule whose target and source suffixes are ‘<samp>.o</samp>’ and<br>‘<samp>.c</samp>’ is equivalent to the pattern rule ‘<samp>%.o : %.c</samp>’.<br></p><br><p>A single-suffix rule is defined by a single suffix, which is the source<br>suffix.  It matches any file name, and the corresponding implicit<br>prerequisite name is made by appending the source suffix.  A single-suffix<br>rule whose source suffix is ‘<samp>.c</samp>’ is equivalent to the pattern rule<br>‘<samp>% : %.c</samp>’.<br></p><br><p>Suffix rule definitions are recognized by comparing each rule’s target<br>against a defined list of known suffixes.  When <code>make</code> sees a rule<br>whose target is a known suffix, this rule is considered a single-suffix<br>rule.  When <code>make</code> sees a rule whose target is two known suffixes<br>concatenated, this rule is taken as a double-suffix rule.<br></p><br><p>For example, ‘<samp>.c</samp>’ and ‘<samp>.o</samp>’ are both on the default list of<br>known suffixes.  Therefore, if you define a rule whose target is<br>‘<samp>.c.o</samp>’, <code>make</code> takes it to be a double-suffix rule with source<br>suffix ‘<samp>.c</samp>’ and target suffix ‘<samp>.o</samp>’.  Here is the old-fashioned<br>way to define the rule for compiling a C source file:<br></p><br><div class="example"><br><pre class="example">.c.o:<br>        $(CC) -c $(CFLAGS) $(CPPFLAGS) -o $@ $&lt;<br></pre></div><br><br><p>Suffix rules cannot have any prerequisites of their own.  If they have any,<br>they are treated as normal files with funny names, not as suffix rules.<br>Thus, the rule:<br></p><br><div class="example"><br><pre class="example">.c.o: foo.h<br>        $(CC) -c $(CFLAGS) $(CPPFLAGS) -o $@ $&lt;<br></pre></div><br><br><p>tells how to make the file <samp>.c.o</samp> from the prerequisite file<br><samp>foo.h</samp>, and is not at all like the pattern rule:<br></p><br><div class="example"><br><pre class="example">%.o: %.c foo.h<br>        $(CC) -c $(CFLAGS) $(CPPFLAGS) -o $@ $&lt;<br></pre></div><br><br><p>which tells how to make ‘<samp>.o</samp>’ files from ‘<samp>.c</samp>’ files, and makes all<br>‘<samp>.o</samp>’ files using this pattern rule also depend on <samp>foo.h</samp>.<br></p><br><p>Suffix rules with no recipe are also meaningless.  They do not remove<br>previous rules as do pattern rules with no recipe (see <a href="#Canceling-Rules">Canceling Implicit Rules</a>).  They simply enter the suffix or<br>pair of suffixes concatenated as a target in the data base.<br></p><br><a name="index-_002eSUFFIXES-1"></a><br><p>The known suffixes are simply the names of the prerequisites of the special<br>target <code>.SUFFIXES</code>.  You can add your own suffixes by writing a rule<br>for <code>.SUFFIXES</code> that adds more prerequisites, as in:<br></p><br><div class="example"><br><pre class="example">.SUFFIXES: .hack .win<br></pre></div><br><br><p>which adds ‘<samp>.hack</samp>’ and ‘<samp>.win</samp>’ to the end of the list of suffixes.<br></p><br><p>If you wish to eliminate the default known suffixes instead of just adding<br>to them, write a rule for <code>.SUFFIXES</code> with no prerequisites.  By<br>special dispensation, this eliminates all existing prerequisites of<br><code>.SUFFIXES</code>.  You can then write another rule to add the suffixes you<br>want.  For example,<br></p><br><div class="example"><br><pre class="example">.SUFFIXES:            # <span class="roman">Delete the default suffixes</span><br>.SUFFIXES: .c .o .h   # <span class="roman">Define our suffix list</span><br></pre></div><br><br><p>The ‘<samp>-r</samp>’ or ‘<samp>–no-builtin-rules</samp>’ flag causes the default<br>list of suffixes to be empty.<br></p><br><a name="index-SUFFIXES"></a><br><p>The variable <code>SUFFIXES</code> is defined to the default list of suffixes<br>before <code>make</code> reads any makefiles.  You can change the list of suffixes<br>with a rule for the special target <code>.SUFFIXES</code>, but that does not alter<br>this variable.<br></p><br><hr><br><a name="Implicit-Rule-Search"></a><br><div class="header"><br><p><br>Previous: <a href="#Suffix-Rules" accesskey="p" rel="prev">Suffix Rules</a>, Up: <a href="#Implicit-Rules" accesskey="u" rel="up">Implicit Rules</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Implicit-Rule-Search-Algorithm"></a><br><h3 class="section">10.8 Implicit Rule Search Algorithm</h3><br><a name="index-implicit-rule_002c-search-algorithm"></a><br><a name="index-search-algorithm_002c-implicit-rule"></a><br><br><p>Here is the procedure <code>make</code> uses for searching for an implicit rule<br>for a target <var>t</var>.  This procedure is followed for each double-colon<br>rule with no recipe, for each target of ordinary rules none of which have<br>a recipe, and for each prerequisite that is not the target of any rule.  It<br>is also followed recursively for prerequisites that come from implicit<br>rules, in the search for a chain of rules.<br></p><br><p>Suffix rules are not mentioned in this algorithm because suffix rules are<br>converted to equivalent pattern rules once the makefiles have been read in.<br></p><br><p>For an archive member target of the form<br>‘<samp><var>archive</var>(<var>member</var>)</samp>’, the following algorithm is run<br>twice, first using the entire target name <var>t</var>, and second using<br>‘<samp>(<var>member</var>)</samp>’ as the target <var>t</var> if the first run found no<br>rule.<br></p><br><ol><br><li> Split <var>t</var> into a directory part, called <var>d</var>, and the rest,<br>called <var>n</var>.  For example, if <var>t</var> is ‘<samp>src/foo.o</samp>’, then<br><var>d</var> is ‘<samp>src/</samp>’ and <var>n</var> is ‘<samp>foo.o</samp>’.<br><br></li><li> Make a list of all the pattern rules one of whose targets matches<br><var>t</var> or <var>n</var>.  If the target pattern contains a slash, it is<br>matched against <var>t</var>; otherwise, against <var>n</var>.<br><br></li><li> If any rule in that list is <em>not</em> a match-anything rule, then<br>remove all non-terminal match-anything rules from the list.<br><br></li><li> Remove from the list all rules with no recipe.<br><br></li><li> For each pattern rule in the list:<br><br><ol><br><li> Find the stem <var>s</var>, which is the nonempty part of <var>t</var> or <var>n</var><br>matched by the ‘<samp>%</samp>’ in the target pattern.<br><br></li><li> Compute the prerequisite names by substituting <var>s</var> for ‘<samp>%</samp>’; if<br>the target pattern does not contain a slash, append <var>d</var> to<br>the front of each prerequisite name.<br><br></li><li> Test whether all the prerequisites exist or ought to exist.  (If a<br>file name is mentioned in the makefile as a target or as an explicit<br>prerequisite, then we say it ought to exist.)<br><br><p>If all prerequisites exist or ought to exist, or there are no prerequisites,<br>then this rule applies.<br></p></li></ol><br><br></li><li> If no pattern rule has been found so far, try harder.<br>For each pattern rule in the list:<br><br><ol><br><li> If the rule is terminal, ignore it and go on to the next rule.<br><br></li><li> Compute the prerequisite names as before.<br><br></li><li> Test whether all the prerequisites exist or ought to exist.<br><br></li><li> For each prerequisite that does not exist, follow this algorithm<br>recursively to see if the prerequisite can be made by an implicit<br>rule.<br><br></li><li> If all prerequisites exist, ought to exist, or can be<br>made by implicit rules, then this rule applies.<br></li></ol><br><br></li><li> If no implicit rule applies, the rule for <code>.DEFAULT</code>, if any,<br>applies.  In that case, give <var>t</var> the same recipe that<br><code>.DEFAULT</code> has.  Otherwise, there is no recipe for <var>t</var>.<br></li></ol><br><br><p>Once a rule that applies has been found, for each target pattern of<br>the rule other than the one that matched <var>t</var> or <var>n</var>, the<br>‘<samp>%</samp>’ in the pattern is replaced with <var>s</var> and the resultant<br>file name is stored until the recipe to remake the target file <var>t</var><br>is executed.  After the recipe is executed, each of these stored file<br>names are entered into the data base and marked as having been updated<br>and having the same update status as the file <var>t</var>.<br></p><br><p>When the recipe of a pattern rule is executed for <var>t</var>, the<br>automatic variables are set corresponding to the target and<br>prerequisites.  See <a href="#Automatic-Variables">Automatic Variables</a>.<br></p><br><hr><br><a name="Archives"></a><br><div class="header"><br><p><br>Next: <a href="#Extending-make" accesskey="n" rel="next">Extending make</a>, Previous: <a href="#Implicit-Rules" accesskey="p" rel="prev">Implicit Rules</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Using-make-to-Update-Archive-Files"></a><br><h2 class="chapter">11 Using <code>make</code> to Update Archive Files</h2><br><a name="index-archive"></a><br><br><p><em>Archive files</em> are files containing named sub-files called<br><em>members</em>; they are maintained with the program <code>ar</code> and their<br>main use is as subroutine libraries for linking.<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Archive-Members" accesskey="1">Archive Members</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Archive members as targets.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Archive-Update" accesskey="2">Archive Update</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">The implicit rule for archive member targets.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Archive-Pitfalls" accesskey="3">Archive Pitfalls</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Dangers to watch out for when using archives.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Archive-Suffix-Rules" accesskey="4">Archive Suffix Rules</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">You can write a special kind of suffix rule<br>                                  for updating archives.<br></td></tr><br></tbody></table><br><br><hr><br><a name="Archive-Members"></a><br><div class="header"><br><p><br>Next: <a href="#Archive-Update" accesskey="n" rel="next">Archive Update</a>, Previous: <a href="#Archives" accesskey="p" rel="prev">Archives</a>, Up: <a href="#Archives" accesskey="u" rel="up">Archives</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Archive-Members-as-Targets"></a><br><h3 class="section">11.1 Archive Members as Targets</h3><br><a name="index-archive-member-targets"></a><br><br><p>An individual member of an archive file can be used as a target or<br>prerequisite in <code>make</code>.  You specify the member named <var>member</var> in<br>archive file <var>archive</var> as follows:<br></p><br><div class="example"><br><pre class="example"><var>archive</var>(<var>member</var>)<br></pre></div><br><br><p>This construct is available only in targets and prerequisites, not in<br>recipes!  Most programs that you might use in recipes do not support<br>this syntax and cannot act directly on archive members.  Only<br><code>ar</code> and other programs specifically designed to operate on<br>archives can do so.  Therefore, valid recipes to update an archive<br>member target probably must use <code>ar</code>.  For example, this rule<br>says to create a member <samp>hack.o</samp> in archive <samp>foolib</samp> by<br>copying the file <samp>hack.o</samp>:<br></p><br><div class="example"><br><pre class="example">foolib(hack.o) : hack.o<br>        ar cr foolib hack.o<br></pre></div><br><br><p>In fact, nearly all archive member targets are updated in just this way<br>and there is an implicit rule to do it for you.  <strong>Please note:</strong> The<br>‘<samp>c</samp>’ flag to <code>ar</code> is required if the archive file does not<br>already exist.<br></p><br><p>To specify several members in the same archive, you can write all the<br>member names together between the parentheses.  For example:<br></p><br><div class="example"><br><pre class="example">foolib(hack.o kludge.o)<br></pre></div><br><br><p>is equivalent to:<br></p><br><div class="example"><br><pre class="example">foolib(hack.o) foolib(kludge.o)<br></pre></div><br><br><a name="index-wildcard_002c-in-archive-member"></a><br><p>You can also use shell-style wildcards in an archive member reference.<br>See <a href="#Wildcards">Using Wildcard Characters in File Names</a>.  For<br>example, ‘<samp>foolib(.o)</samp>’<!-- /@w --> expands to all existing members of the<br><samp>foolib</samp> archive whose names end in ‘<samp>.o</samp>’; perhaps<br>‘<samp>foolib(hack.o)<!-- /@w --> foolib(kludge.o)<!-- /@w --></samp>’.<br></p><br><hr><br><a name="Archive-Update"></a><br><div class="header"><br><p><br>Next: <a href="#Archive-Pitfalls" accesskey="n" rel="next">Archive Pitfalls</a>, Previous: <a href="#Archive-Members" accesskey="p" rel="prev">Archive Members</a>, Up: <a href="#Archives" accesskey="u" rel="up">Archives</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Implicit-Rule-for-Archive-Member-Targets"></a><br><h3 class="section">11.2 Implicit Rule for Archive Member Targets</h3><br><br><p>Recall that a target that looks like <samp><var>a</var>(<var>m</var>)</samp> stands for the<br>member named <var>m</var> in the archive file <var>a</var>.<br></p><br><p>When <code>make</code> looks for an implicit rule for such a target, as a special<br>feature it considers implicit rules that match <samp>(<var>m</var>)</samp>, as well as<br>those that match the actual target <samp><var>a</var>(<var>m</var>)</samp>.<br></p><br><p>This causes one special rule whose target is <samp>(%)</samp> to match.  This<br>rule updates the target <samp><var>a</var>(<var>m</var>)</samp> by copying the file <var>m</var><br>into the archive.  For example, it will update the archive member target<br><samp>foo.a(bar.o)</samp> by copying the <em>file</em> <samp>bar.o</samp> into the<br>archive <samp>foo.a</samp> as a <em>member</em> named <samp>bar.o</samp>.<br></p><br><p>When this rule is chained with others, the result is very powerful.<br>Thus, ‘<samp>make “foo.a(bar.o)”</samp>’ (the quotes are needed to protect the<br>‘<samp>(</samp>’ and ‘<samp>)</samp>’ from being interpreted specially by the shell) in<br>the presence of a file <samp>bar.c</samp> is enough to cause the following<br>recipe to be run, even without a makefile:<br></p><br><div class="example"><br><pre class="example">cc -c bar.c -o bar.o<br>ar r foo.a bar.o<br>rm -f bar.o<br></pre></div><br><br><p>Here <code>make</code> has envisioned the file <samp>bar.o</samp> as an intermediate<br>file.  See <a href="#Chained-Rules">Chains of Implicit Rules</a>.<br></p><br><p>Implicit rules such as this one are written using the automatic variable<br>‘<samp>$%</samp>’.  See <a href="#Automatic-Variables">Automatic Variables</a>.<br></p><br><p>An archive member name in an archive cannot contain a directory name, but<br>it may be useful in a makefile to pretend that it does.  If you write an<br>archive member target <samp>foo.a(dir/file.o)</samp>, <code>make</code> will perform<br>automatic updating with this recipe:<br></p><br><div class="example"><br><pre class="example">ar r foo.a dir/file.o<br></pre></div><br><br><p>which has the effect of copying the file <samp>dir/file.o</samp> into a member<br>named <samp>file.o</samp>.  In connection with such usage, the automatic variables<br><code>%D</code> and <code>%F</code> may be useful.<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Archive-Symbols" accesskey="1">Archive Symbols</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to update archive symbol directories.<br></td></tr><br></tbody></table><br><br><hr><br><a name="Archive-Symbols"></a><br><div class="header"><br><p><br>Previous: <a href="#Archive-Update" accesskey="p" rel="prev">Archive Update</a>, Up: <a href="#Archive-Update" accesskey="u" rel="up">Archive Update</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Updating-Archive-Symbol-Directories"></a><br><h4 class="subsection">11.2.1 Updating Archive Symbol Directories</h4><br><a name="index-_005f_005f_002eSYMDEF"></a><br><a name="index-updating-archive-symbol-directories"></a><br><a name="index-archive-symbol-directory-updating"></a><br><a name="index-symbol-directories_002c-updating-archive"></a><br><a name="index-directories_002c-updating-archive-symbol"></a><br><br><p>An archive file that is used as a library usually contains a special member<br>named <samp><strong>.SYMDEF</strong></samp> that contains a directory of the external symbol<br>names defined by all the other members.  After you update any other<br>members, you need to update <samp>.SYMDEF</samp> so that it will summarize the<br>other members properly.  This is done by running the <code>ranlib</code> program:<br></p><br><div class="example"><br><pre class="example">ranlib <var>archivefile</var><br></pre></div><br><br><p>Normally you would put this command in the rule for the archive file,<br>and make all the members of the archive file prerequisites of that rule.<br>For example,<br></p><br><div class="example"><br><pre class="example">libfoo.a: libfoo.a(x.o) libfoo.a(y.o) …<br>        ranlib libfoo.a<br></pre></div><br><br><p>The effect of this is to update archive members <samp>x.o</samp>, <samp>y.o</samp>,<br>etc., and then update the symbol directory member <samp><strong>.SYMDEF</strong></samp> by<br>running <code>ranlib</code>.  The rules for updating the members are not shown<br>here; most likely you can omit them and use the implicit rule which copies<br>files into the archive, as described in the preceding section.<br></p><br><p>This is not necessary when using the GNU <code>ar</code> program, which<br>updates the <samp>.SYMDEF</samp> member automatically.<br></p><br><hr><br><a name="Archive-Pitfalls"></a><br><div class="header"><br><p><br>Next: <a href="#Archive-Suffix-Rules" accesskey="n" rel="next">Archive Suffix Rules</a>, Previous: <a href="#Archive-Update" accesskey="p" rel="prev">Archive Update</a>, Up: <a href="#Archives" accesskey="u" rel="up">Archives</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Dangers-When-Using-Archives"></a><br><h3 class="section">11.3 Dangers When Using Archives</h3><br><a name="index-archive_002c-and-parallel-execution"></a><br><a name="index-parallel-execution_002c-and-archive-update"></a><br><a name="index-archive_002c-and-_002dj"></a><br><a name="index-_002dj_002c-and-archive-update"></a><br><br><p>It is important to be careful when using parallel execution (the<br><code>-j</code> switch; see <a href="#Parallel">Parallel Execution</a>) and archives.<br>If multiple <code>ar</code> commands run at the same time on the same archive<br>file, they will not know about each other and can corrupt the file.<br></p><br><p>Possibly a future version of <code>make</code> will provide a mechanism to<br>circumvent this problem by serializing all recipes that operate on the<br>same archive file.  But for the time being, you must either write your<br>makefiles to avoid this problem in some other way, or not use <code>-j</code>.<br></p><br><hr><br><a name="Archive-Suffix-Rules"></a><br><div class="header"><br><p><br>Previous: <a href="#Archive-Pitfalls" accesskey="p" rel="prev">Archive Pitfalls</a>, Up: <a href="#Archives" accesskey="u" rel="up">Archives</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Suffix-Rules-for-Archive-Files"></a><br><h3 class="section">11.4 Suffix Rules for Archive Files</h3><br><a name="index-suffix-rule_002c-for-archive"></a><br><a name="index-archive_002c-suffix-rule-for"></a><br><a name="index-library-archive_002c-suffix-rule-for"></a><br><a name="index-_002ea-_0028archives_0029"></a><br><br><p>You can write a special kind of suffix rule for dealing with archive<br>files.  See <a href="#Suffix-Rules">Suffix Rules</a>, for a full explanation of suffix rules.<br>Archive suffix rules are obsolete in GNU <code>make</code>, because pattern<br>rules for archives are a more general mechanism (see <a href="#Archive-Update">Archive Update</a>).  But they are retained for compatibility with other<br><code>make</code>s.<br></p><br><p>To write a suffix rule for archives, you simply write a suffix rule<br>using the target suffix ‘<samp>.a</samp>’ (the usual suffix for archive files).<br>For example, here is the old-fashioned suffix rule to update a library<br>archive from C source files:<br></p><br><div class="example"><br><pre class="example">.c.a:<br>        $(CC) $(CFLAGS) $(CPPFLAGS) -c $&lt; -o $<em>.o<br>        $(AR) r $@ $</em>.o<br>        $(RM) $<em>.o<br></em></pre></div><br><br><p>This works just as if you had written the pattern rule:<br></p><br><div class="example"><br><pre class="example">(%.o): %.c<br>        $(CC) $(CFLAGS) $(CPPFLAGS) -c $&lt; -o $.o<br>        $(AR) r $@ $<em>.o<br>        $(RM) $</em>.o<br></pre></div><br><br><p>In fact, this is just what <code>make</code> does when it sees a suffix rule<br>with ‘<samp>.a</samp>’ as the target suffix.  Any double-suffix rule<br>‘<samp>.<var>x</var>.a</samp>’<!-- /@w --> is converted to a pattern rule with the target<br>pattern ‘<samp>(%.o)</samp>’ and a prerequisite pattern of ‘<samp>%.<var>x</var></samp>’.<br></p><br><p>Since you might want to use ‘<samp>.a</samp>’ as the suffix for some other kind<br>of file, <code>make</code> also converts archive suffix rules to pattern rules<br>in the normal way (see <a href="#Suffix-Rules">Suffix Rules</a>).  Thus a double-suffix rule<br>‘<samp>.<var>x</var>.a</samp>’<!-- /@w --> produces two pattern rules: ‘<samp>(%.o):<!-- /@w --><br>%.<var>x</var><!-- /@w --></samp>’ and ‘<samp>%.a<!-- /@w -->: %.<var>x</var><!-- /@w --></samp>’.<br></p><br><hr><br><a name="Extending-make"></a><br><div class="header"><br><p><br>Next: <a href="#Integrating-make" accesskey="n" rel="next">Integrating make</a>, Previous: <a href="#Archives" accesskey="p" rel="prev">Archives</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Extending-GNU-make"></a><br><h2 class="chapter">12 Extending GNU <code>make</code></h2><br><a name="index-make-extensions"></a><br><br><p>GNU <code>make</code> provides many advanced capabilities, including many<br>useful functions.  However, it does not contain a complete programming<br>language and so it has limitations.  Sometimes these limitations can be<br>overcome through use of the <code>shell</code> function to invoke a separate<br>program, although this can be inefficient.<br></p><br><p>In cases where the built-in capabilities of GNU <code>make</code> are<br>insufficient to your requirements there are two options for extending<br><code>make</code>.  On systems where it’s provided, you can utilize GNU<br>Guile as an embedded scripting language (see <a href="#Guile-Integration">GNU<br>Guile Integration</a>).  On systems which support dynamically loadable<br>objects, you can write your own extension in any language (which can<br>be compiled into such an object) and load it to provide extended<br>capabilities (see <a href="#load-Directive">The <code>load</code> Directive</a>).<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Guile-Integration" accesskey="1">Guile Integration</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Using Guile as an embedded scripting language.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Loading-Objects" accesskey="2">Loading Objects</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Loading dynamic objects as extensions.<br></td></tr><br></tbody></table><br><br><hr><br><a name="Guile-Integration"></a><br><div class="header"><br><p><br>Next: <a href="#Loading-Objects" accesskey="n" rel="next">Loading Objects</a>, Previous: <a href="#Extending-make" accesskey="p" rel="prev">Extending make</a>, Up: <a href="#Extending-make" accesskey="u" rel="up">Extending make</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="GNU-Guile-Integration"></a><br><h3 class="section">12.1 GNU Guile Integration</h3><br><a name="index-Guile-1"></a><br><a name="index-extensions_002c-Guile"></a><br><br><p>GNU <code>make</code> may be built with support for GNU Guile as an embedded<br>extension language.  Guile implements the Scheme language.  A review<br>of GNU Guile and the Scheme language and its features is beyond the<br>scope of this manual: see the documentation for GNU Guile and Scheme.<br></p><br><p>You can determine if <code>make</code> contains support for Guile by<br>examining the <code>.FEATURES</code> variable; it will contain the word<br><var>guile</var> if Guile support is available.<br></p><br><p>The Guile integration provides one new <code>make</code> function: <code>guile</code>.<br>The <code>guile</code> function takes one argument which is first expanded<br>by <code>make</code> in the normal fashion, then passed to the GNU Guile<br>evaluator.  The result of the evaluator is converted into a string and<br>used as the expansion of the <code>guile</code> function in the makefile.<br></p><br><p>In addition, GNU <code>make</code> exposes Guile procedures for use in Guile<br>scripts.<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Guile-Types" accesskey="1">Guile Types</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Converting Guile types to <code>make</code> strings.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Guile-Interface" accesskey="2">Guile Interface</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Invoking <code>make</code> functions from Guile.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Guile-Example" accesskey="3">Guile Example</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Example using Guile in <code>make</code>.<br></td></tr><br></tbody></table><br><br><hr><br><a name="Guile-Types"></a><br><div class="header"><br><p><br>Next: <a href="#Guile-Interface" accesskey="n" rel="next">Guile Interface</a>, Previous: <a href="#Guile-Integration" accesskey="p" rel="prev">Guile Integration</a>, Up: <a href="#Guile-Integration" accesskey="u" rel="up">Guile Integration</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Conversion-of-Guile-Types"></a><br><h4 class="subsection">12.1.1 Conversion of Guile Types</h4><br><a name="index-convert-guile-types"></a><br><a name="index-guile_002c-conversion-of-types"></a><br><a name="index-types_002c-conversion-of"></a><br><br><p>There is only one “data type” in <code>make</code>: a string.  GNU Guile,<br>on the other hand, provides a rich variety of different data types.<br>An important aspect of the interface between <code>make</code> and GNU Guile<br>is the conversion of Guile data types into <code>make</code> strings.<br></p><br><p>This conversion is relevant in two places: when a makefile invokes the<br><code>guile</code> function to evaluate a Guile expression, the result of<br>that evaluation must be converted into a make string so it can be<br>further evaluated by <code>make</code>.  And secondly, when a Guile script<br>invokes one of the procedures exported by <code>make</code> the argument<br>provided to the procedure must be converted into a string.<br></p><br><p>The conversion of Guile types into <code>make</code> strings is as below:<br></p><br><dl compact="compact"><br><dt><code>#f</code></dt><br><dd><p>False is converted into the empty string: in <code>make</code> conditionals<br>the empty string is considered false.<br></p><br></dd><br><dt><code>#t</code></dt><br><dd><p>True is converted to the string ‘<samp>#t</samp>’: in <code>make</code> conditionals<br>any non-empty string is considered true.<br></p><br></dd><br><dt><code>symbol</code></dt><br><dt><code>number</code></dt><br><dd><p>A symbol or number is converted into the string representation of that<br>symbol or number.<br></p><br></dd><br><dt><code>character</code></dt><br><dd><p>A printable character is converted to the same character.<br></p><br></dd><br><dt><code>string</code></dt><br><dd><p>A string containing only printable characters is converted to the same<br>string.<br></p><br></dd><br><dt><code>list</code></dt><br><dd><p>A list is converted recursively according to the above rules.  This<br>implies that any structured list will be flattened (that is, a result<br>of ‘<samp>‘(a b (c d) e)</samp>’ will be converted to the <code>make</code> string<br>‘<samp>a b c d e</samp>’).<br></p><br></dd><br><dt><code>other</code></dt><br><dd><p>Any other Guile type results in an error.  In future versions of<br><code>make</code>, other Guile types may be converted.<br></p><br></dd><br></dl><br><br><p>The translation of ‘<samp>#f</samp>’ (to the empty string) and ‘<samp>#t</samp>’ (to<br>the non-empty string ‘<samp>#t</samp>’) is designed to allow you to use Guile<br>boolean results directly as <code>make</code> boolean conditions.  For<br>example:<br></p><br><div class="example"><br><pre class="example">$(if $(guile (access? “myfile” R_OK)),$(info myfile exists))<br></pre></div><br><br><p>As a consequence of these conversion rules you must consider the<br>result of your Guile script, as that result will be converted into a<br>string and parsed by <code>make</code>.  If there is no natural result for<br>the script (that is, the script exists solely for its side-effects),<br>you should add ‘<samp>#f</samp>’ as the final expression in order to avoid<br>syntax errors in your makefile.<br></p><br><hr><br><a name="Guile-Interface"></a><br><div class="header"><br><p><br>Next: <a href="#Guile-Example" accesskey="n" rel="next">Guile Example</a>, Previous: <a href="#Guile-Types" accesskey="p" rel="prev">Guile Types</a>, Up: <a href="#Guile-Integration" accesskey="u" rel="up">Guile Integration</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Interfaces-from-Guile-to-make"></a><br><h4 class="subsection">12.1.2 Interfaces from Guile to <code>make</code></h4><br><a name="index-make-interface-to-guile"></a><br><a name="index-make-procedures-in-guile"></a><br><br><p>In addition to the <code>guile</code> function available in makefiles,<br><code>make</code> exposes some procedures for use in your Guile scripts.  At<br>startup <code>make</code> creates a new Guile module, <code>gnu make</code>, and<br>exports these procedures as public interfaces from that module:<br></p><br><dl compact="compact"><br><dt><code>gmk-expand</code></dt><br><dd><a name="index-gmk_002dexpand"></a><br><p>This procedure takes a single argument which is converted into a<br>string.  The string is expanded by <code>make</code> using normal<br><code>make</code> expansion rules.  The result of the expansion is converted<br>into a Guile string and provided as the result of the procedure.<br></p><br></dd><br><dt><code>gmk-eval</code></dt><br><dd><a name="index-gmk_002deval"></a><br><p>This procedure takes a single argument which is converted into a<br>string.  The string is evaluated by <code>make</code> as if it were a<br>makefile.  This is the same capability available via the <code>eval</code><br>function (see <a href="#Eval-Function">Eval Function</a>).  The result of the <code>gmk-eval</code><br>procedure is always the empty string.<br></p><br><p>Note that <code>gmk-eval</code> is not quite the same as using<br><code>gmk-expand</code> with the <code>eval</code> function: in the latter case<br>the evaluated string will be expanded <em>twice</em>; first by<br><code>gmk-expand</code>, then again by the <code>eval</code> function.<br></p><br></dd><br></dl><br><br><hr><br><a name="Guile-Example"></a><br><div class="header"><br><p><br>Previous: <a href="#Guile-Interface" accesskey="p" rel="prev">Guile Interface</a>, Up: <a href="#Guile-Integration" accesskey="u" rel="up">Guile Integration</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Example-Using-Guile-in-make"></a><br><h4 class="subsection">12.1.3 Example Using Guile in <code>make</code></h4><br><a name="index-Guile-example"></a><br><a name="index-example-using-Guile"></a><br><br><p>Here is a very simple example using GNU Guile to manage writing to a<br>file.  These Guile procedures simply open a file, allow writing to the<br>file (one string per line), and close the file.  Note that because we<br>cannot store complex values such as Guile ports in <code>make</code><br>variables, we’ll keep the port as a global variable in the Guile<br>interpreter.<br></p><br><p>You can create Guile functions easily using <code>define</code>/<code>endef</code><br>to create a Guile script, then use the <code>guile</code> function to<br>internalize it:<br></p><br><div class="example"><br><pre class="example">define GUILEIO<br>;; A simple Guile IO library for GNU make<br><br>(define MKPORT #f)<br><br>(define (mkopen name mode)<br>  (set! MKPORT (open-file name mode))<br>  #f)<br><br>(define (mkwrite s)<br>  (display s MKPORT)<br>  (newline MKPORT)<br>  #f)<br><br>(define (mkclose)<br>  (close-port MKPORT)<br>  #f)<br><br>#f<br>endef<br><br># Internalize the Guile IO functions<br>$(guile $(GUILEIO))<br></pre></div><br><br><p>If you have a significant amount of Guile support code, you might<br>consider keeping it in a different file (e.g., <samp>guileio.scm</samp>) and<br>then loading it in your makefile using the <code>guile</code> function:<br></p><br><div class="example"><br><pre class="example">$(guile (load “guileio.scm”))<br></pre></div><br><br><p>An advantage to this method is that when editing <samp>guileio.scm</samp>,<br>your editor will understand that this file contains Scheme syntax<br>rather than makefile syntax.<br></p><br><p>Now you can use these Guile functions to create files.  Suppose you<br>need to operate on a very large list, which cannot fit on the command<br>line, but the utility you’re using accepts the list as input as well:<br></p><br><div class="example"><br><pre class="example">prog: $(PREREQS)<br>        @$(guile (mkopen “tmp.out” “w”)) \<br>         $(foreach X,$^,$(guile (mkwrite “$(X)”))) \<br>         $(guile (mkclose))<br>        $(LINK) &lt; tmp.out<br></pre></div><br><br><p>A more comprehensive suite of file manipulation procedures is possible<br>of course.  You could, for example, maintain multiple output files at<br>the same time by choosing a symbol for each one and using it as the<br>key to a hash table, where the value is a port, then returning the<br>symbol to be stored in a <code>make</code> variable.<br></p><br><hr><br><a name="Loading-Objects"></a><br><div class="header"><br><p><br>Previous: <a href="#Guile-Integration" accesskey="p" rel="prev">Guile Integration</a>, Up: <a href="#Extending-make" accesskey="u" rel="up">Extending make</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Loading-Dynamic-Objects"></a><br><h3 class="section">12.2 Loading Dynamic Objects</h3><br><a name="index-loaded-objects"></a><br><a name="index-objects_002c-loaded"></a><br><a name="index-extensions_002c-loading"></a><br><br><table class="cartouche" border="1"><tbody><tr><td><br><blockquote><br><p><b>Warning:</b> The <code>load</code> directive and extension capability is considered a<br>“technology preview” in this release of GNU make.  We encourage you<br>to experiment with this feature and we appreciate any feedback on it.<br>However we cannot guarantee to maintain backward-compatibility in the<br>next release.  Consider using GNU Guile instead for extending GNU make<br>(see <a href="#Guile-Function">The <code>guile</code> Function</a>).<br></p></blockquote><br></td></tr></tbody></table><br><br><p>Many operating systems provide a facility for dynamically loading<br>compiled objects.  If your system provides this facility, GNU<br><code>make</code> can make use of it to load dynamic objects at runtime,<br>providing new capabilities which may then be invoked by your makefile.<br></p><br><p>The <code>load</code> directive is used to load a dynamic object.  Once the<br>object is loaded, a “setup” function will be invoked to allow the<br>object to initialize itself and register new facilities with GNU<br><code>make</code>.  A dynamic object might include new <code>make</code> functions,<br>for example, and the “setup” function would register them with GNU<br><code>make</code>’s function handling system.<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#load-Directive" accesskey="1">load Directive</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Loading dynamic objects as extensions.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Remaking-Loaded-Objects" accesskey="2">Remaking Loaded Objects</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How loaded objects get remade.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Loaded-Object-API" accesskey="3">Loaded Object API</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Programmatic interface for loaded objects.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Loaded-Object-Example" accesskey="4">Loaded Object Example</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Example of a loaded object<br></td></tr><br></tbody></table><br><br><hr><br><a name="load-Directive"></a><br><div class="header"><br><p><br>Next: <a href="#Remaking-Loaded-Objects" accesskey="n" rel="next">Remaking Loaded Objects</a>, Previous: <a href="#Loading-Objects" accesskey="p" rel="prev">Loading Objects</a>, Up: <a href="#Loading-Objects" accesskey="u" rel="up">Loading Objects</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="The-load-Directive"></a><br><h4 class="subsection">12.2.1 The <code>load</code> Directive</h4><br><a name="index-load-directive"></a><br><a name="index-extensions_002c-load-directive"></a><br><br><p>Objects are loaded into GNU <code>make</code> by placing the <code>load</code><br>directive into your makefile.  The syntax of the <code>load</code> directive<br>is as follows:<br></p><br><a name="index-load"></a><br><div class="example"><br><pre class="example">load <var>object-file</var> …<br></pre></div><br><br><p>or:<br></p><br><div class="example"><br><pre class="example">load <var>object-file</var>(<var>symbol-name</var>) …<br></pre></div><br><br><p>The file <var>object-file</var> is dynamically loaded by GNU <code>make</code>.<br>If <var>object-file</var> does not include a directory path then it is<br>first looked for in the current directory.  If it is not found there,<br>or a directory path is included, then system-specific paths will be<br>searched.  If the load fails for any reason, <code>make</code> will print a<br>message and exit.<br></p><br><p>If the load succeeds <code>make</code> will invoke an initializing function.<br></p><br><p>If <var>symbol-name</var> is provided, it will be used as the name of the<br>initializing function.<br></p><br><p>If no <var>symbol-name</var> is provided, the initializing function name is<br>created by taking the base file name of <var>object-file</var>, up to the<br>first character which is not a valid symbol name character<br>(alphanumerics and underscores are valid symbol name characters).  To<br>this prefix will be appended the suffix <code>_gmk_setup</code>.<br></p><br><p>More than one object file may be loaded with a single <code>load</code><br>directive, and both forms of <code>load</code> arguments may be used in the<br>same directive.<br></p><br><p>The initializing function will be provided the file name and line<br>number of the invocation of the <code>load</code> operation.  It should<br>return a value of type <code>int</code>, which must be <code>0</code> on failure<br>and non-<code>0</code> on success.  If the return value is <code>-1</code>, then<br>GNU make will <em>not</em> attempt to rebuild the object file<br>(see <a href="#Remaking-Loaded-Objects">How Loaded Objects Are Remade</a>).<br></p><br><p>For example:<br></p><br><div class="example"><br><pre class="example">load ../mk_funcs.so<br></pre></div><br><br><p>will load the dynamic object <samp>../mk_funcs.so</samp>.  After the object<br>is loaded, <code>make</code> will invoke the function (assumed to be defined<br>by the shared object) <code>mk_funcs_gmk_setup</code>.<br></p><br><p>On the other hand:<br></p><br><div class="example"><br><pre class="example">load ../mk_funcs.so(init_mk_func)<br></pre></div><br><br><p>will load the dynamic object <samp>../mk_funcs.so</samp>.  After the object<br>is loaded, <code>make</code> will invoke the function <code>init_mk_func</code>.<br></p><br><p>Regardless of how many times an object file appears in a <code>load</code><br>directive, it will only be loaded (and its setup function will only<br>be invoked) once.<br></p><br><a name="index-_002eLOADED"></a><br><p>After an object has been successfully loaded, its file name is<br>appended to the <code>.LOADED</code> variable.<br></p><br><a name="index-_002dload"></a><br><p>If you would prefer that failure to load a dynamic object not be<br>reported as an error, you can use the <code>-load</code> directive instead<br>of <code>load</code>.  GNU <code>make</code> will not fail and no message will be<br>generated if an object fails to load.  The failed object is not added<br>to the <code>.LOADED</code> variable, which can then be consulted to<br>determine if the load was successful.<br></p><br><hr><br><a name="Remaking-Loaded-Objects"></a><br><div class="header"><br><p><br>Next: <a href="#Loaded-Object-API" accesskey="n" rel="next">Loaded Object API</a>, Previous: <a href="#load-Directive" accesskey="p" rel="prev">load Directive</a>, Up: <a href="#Loading-Objects" accesskey="u" rel="up">Loading Objects</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="How-Loaded-Objects-Are-Remade"></a><br><h4 class="subsection">12.2.2 How Loaded Objects Are Remade</h4><br><a name="index-updating-loaded-objects"></a><br><a name="index-remaking-loaded-objects"></a><br><a name="index-loaded-objects_002c-remaking-of"></a><br><br><p>Loaded objects undergo the same re-make procedure as makefiles<br>(see <a href="#Remaking-Makefiles">How Makefiles Are Remade</a>).  If any<br>loaded object is recreated, then <code>make</code> will start from scratch<br>and re-read all the makefiles, and reload the object files again.  It<br>is not necessary for the loaded object to do anything special to<br>support this.<br></p><br><p>It’s up to the makefile author to provide the rules needed for<br>rebuilding the loaded object.<br></p><br><hr><br><a name="Loaded-Object-API"></a><br><div class="header"><br><p><br>Next: <a href="#Loaded-Object-Example" accesskey="n" rel="next">Loaded Object Example</a>, Previous: <a href="#Remaking-Loaded-Objects" accesskey="p" rel="prev">Remaking Loaded Objects</a>, Up: <a href="#Loading-Objects" accesskey="u" rel="up">Loading Objects</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Loaded-Object-Interface"></a><br><h4 class="subsection">12.2.3 Loaded Object Interface</h4><br><a name="index-loaded-object-API"></a><br><a name="index-interface-for-loaded-objects"></a><br><br><table class="cartouche" border="1"><tbody><tr><td><br><blockquote><br><p><b>Warning:</b> For this feature to be useful your extensions will need to invoke<br>various functions internal to GNU <code>make</code>.  The programming<br>interfaces provided in this release should not be considered stable:<br>functions may be added, removed, or change calling signatures or<br>implementations in future versions of GNU <code>make</code>.<br></p></blockquote><br></td></tr></tbody></table><br><br><p>To be useful, loaded objects must be able to interact with GNU<br><code>make</code>.  This interaction includes both interfaces the loaded<br>object provides to makefiles and also interfaces <code>make</code> provides<br>to the loaded object to manipulate <code>make</code>’s operation.<br></p><br><p>The interface between loaded objects and <code>make</code> is defined by the<br><samp>gnumake.h</samp> C header file.  All loaded objects written in C<br>should include this header file.  Any loaded object not written in C<br>will need to implement the interface defined in this header file.<br></p><br><p>Typically, a loaded object will register one or more new GNU<br><code>make</code> functions using the <code>gmk_add_function</code> routine from<br>within its setup function.  The implementations of these <code>make</code><br>functions may make use of the <code>gmk_expand</code> and <code>gmk_eval</code><br>routines to perform their tasks, then optionally return a string as<br>the result of the function expansion.<br></p><br><a name="Loaded-Object-Licensing"></a><br><h4 class="subsubheading">Loaded Object Licensing</h4><br><a name="index-loaded-object-licensing"></a><br><a name="index-plugin_005fis_005fGPL_005fcompatible"></a><br><br><p>Every dynamic extension should define the global symbol<br><code>plugin_is_GPL_compatible</code> to assert that it has been licensed<br>under a GPL-compatible license.  If this symbol does not exist,<br><code>make</code> emits a fatal error and exits when it tries to load your<br>extension.<br></p><br><p>The declared type of the symbol should be <code>int</code>. It does not need<br>to be in any allocated section, though.  The code merely asserts that<br>the symbol exists in the global scope. Something like this is enough:<br></p><br><div class="example"><br><pre class="example">int plugin_is_GPL_compatible;<br></pre></div><br><br><a name="Data-Structures"></a><br><h4 class="subsubheading">Data Structures</h4><br><br><dl compact="compact"><br><dt><code>gmk_floc</code></dt><br><dd><p>This structure represents a filename/location pair.  It is provided<br>when defining items, so GNU <code>make</code> can inform the user later<br>where the definition occurred if necessary.<br></p></dd><br></dl><br><br><a name="Registering-Functions"></a><br><h4 class="subsubheading">Registering Functions</h4><br><a name="index-gmk_005fadd_005ffunction"></a><br><br><p>There is currently one way for makefiles to invoke operations provided<br>by the loaded object: through the <code>make</code> function call<br>interface.  A loaded object can register one or more new functions<br>which may then be invoked from within the makefile in the same way as<br>any other function.<br></p><br><p>Use <code>gmk_add<em>function</em></code> to create a new <code>make</code> function.  Its<br>arguments are as follows:<br></p><br><dl compact="compact"><br><dt><code>name</code></dt><br><dd><p>The function name.  This is what the makefile should use to invoke the<br>function.  The name must be between 1 and 255 characters long and it<br>may only contain alphanumeric, period (‘<samp>.</samp>’), dash (‘<samp>-</samp>’), and<br>underscore (‘<samp></samp>’) characters.  It may not begin with a period.<br></p><br></dd><br><dt><code>func_ptr</code></dt><br><dd><p>A pointer to a function that <code>make</code> will invoke when it expands<br>the function in a makefile.  This function must be defined by the<br>loaded object.<br></p><br></dd><br><dt><code>min_args</code></dt><br><dd><p>The minimum number of arguments the function will accept.  Must be<br>between 0 and 255.  GNU <code>make</code> will check this and fail before<br>invoking <code>func_ptr</code> if the function was invoked with too few<br>arguments.<br></p><br></dd><br><dt><code>max_args</code></dt><br><dd><p>The maximum number of arguments the function will accept.  Must be<br>between 0 and 255.  GNU <code>make</code> will check this and fail before<br>invoking <code>func_ptr</code> if the function was invoked with too few<br>arguments.  If the value is 0, then any number of arguments is<br>accepted.  If the value is greater than 0, then it must be greater<br>than or equal to <code>min_args</code>.<br></p><br></dd><br><dt><code>flags</code></dt><br><dd><p>Flags that specify how this function will operate; the desired flags<br>should be OR’d together.  If the <code>GMK_FUNC_NOEXPAND</code> flag is<br>given then the function arguments will not be expanded before the<br>function is called; otherwise they will be expanded first.<br></p></dd><br></dl><br><br><a name="Registered-Function-Interface"></a><br><h4 class="subsubheading">Registered Function Interface</h4><br><a name="index-gmk_005ffunc_005fptr"></a><br><br><p>A function registered with <code>make</code> must match the<br><code>gmk_func_ptr</code> type.  It will be invoked with three parameters:<br><code>name</code> (the name of the function), <code>argc</code> (the number of<br>arguments to the function), and <code>argv</code> (an array of pointers to<br>arguments to the function).  The last pointer (that is,<br><code>argv[argc]</code>) will be null (<code>0</code>).<br></p><br><p>The return value of the function is the result of expanding the<br>function.  If the function expands to nothing the return value may be<br>null.  Otherwise, it must be a pointer to a string created with<br><code>gmk_alloc</code>.  Once the function returns, <code>make</code> owns this<br>string and will free it when appropriate; it cannot be accessed by the<br>loaded object.<br></p><br><a name="GNU-make-Facilities"></a><br><h4 class="subsubheading">GNU <code>make</code> Facilities</h4><br><br><p>There are some facilities exported by GNU <code>make</code> for use by<br>loaded objects.  Typically these would be run from within the<br>setup function and/or the functions registered via<br><code>gmk_add_function</code>, to retrieve or modify the data <code>make</code><br>works with.<br></p><br><dl compact="compact"><br><dt><code>gmk_expand</code></dt><br><dd><a name="index-gmk_005fexpand"></a><br><p>This function takes a string and expands it using <code>make</code><br>expansion rules.  The result of the expansion is returned in a<br>nil-terminated string buffer.  The caller is responsible for calling<br><code>gmk_free</code> with a pointer to the returned buffer when done.<br></p><br></dd><br><dt><code>gmk_eval</code></dt><br><dd><a name="index-gmk_005feval"></a><br><p>This function takes a buffer and evaluates it as a segment of makefile<br>syntax.  This function can be used to define new variables, new rules,<br>etc.  It is equivalent to using the <code>eval</code> <code>make</code> function.<br></p></dd><br></dl><br><br><p>Note that there is a difference between <code>gmk_eval</code> and calling<br><code>gmk_expand</code> with a string using the <code>eval</code> function: in<br>the latter case the string will be expanded <em>twice</em>; once by<br><code>gmk_expand</code> and then again by the <code>eval</code> function.  Using<br><code>gmk_eval</code> the buffer is only expanded once, at most (as it’s<br>read by the <code>make</code> parser).<br></p><br><a name="Memory-Management"></a><br><h4 class="subsubheading">Memory Management</h4><br><br><p>Some systems allow for different memory management schemes.  Thus you<br>should never pass memory that you’ve allocated directly to any<br><code>make</code> function, nor should you attempt to directly free any<br>memory returned to you by any <code>make</code> function.  Instead, use the<br><code>gmk_alloc</code> and <code>gmk_free</code> functions.<br></p><br><p>In particular, the string returned to <code>make</code> by a function<br>registered using <code>gmk_add_function</code> <em>must</em> be allocated<br>using <code>gmk_alloc</code>, and the string returned from the <code>make</code><br><code>gmk_expand</code> function <em>must</em> be freed (when no longer<br>needed) using <code>gmk_free</code>.<br></p><br><dl compact="compact"><br><dt><code>gmk_alloc</code></dt><br><dd><a name="index-gmk_005falloc"></a><br><p>Return a pointer to a newly-allocated buffer.  This function will<br>always return a valid pointer; if not enough memory is available<br><code>make</code> will exit.<br></p><br></dd><br><dt><code>gmk_free</code></dt><br><dd><a name="index-gmk_005ffree"></a><br><p>Free a buffer returned to you by <code>make</code>.  Once the<br><code>gmk_free</code> function returns the string will no longer be valid.<br></p></dd><br></dl><br><br><hr><br><a name="Loaded-Object-Example"></a><br><div class="header"><br><p><br>Previous: <a href="#Loaded-Object-API" accesskey="p" rel="prev">Loaded Object API</a>, Up: <a href="#Loading-Objects" accesskey="u" rel="up">Loading Objects</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Example-Loaded-Object"></a><br><h4 class="subsection">12.2.4 Example Loaded Object</h4><br><a name="index-loaded-object-example"></a><br><a name="index-example-of-loaded-objects"></a><br><br><p>Let’s suppose we wanted to write a new GNU <code>make</code> function that<br>would create a temporary file and return its name.  We would like our<br>function to take a prefix as an argument.  First we can write the<br>function in a file <samp>mk_temp.c</samp>:<br></p><br><div class="example"><br><pre class="example">#include &lt;stdlib.h&gt;<br>#include &lt;stdlib.h&gt;<br>#include &lt;stdio.h&gt;<br>#include &lt;string.h&gt;<br>#include &lt;unistd.h&gt;<br>#include &lt;errno.h&gt;<br><br>#include &lt;gnumake.h&gt;<br><br>int plugin_is_GPL_compatible;<br><br>char <em><br>gen_tmpfile(const char </em>nm, int argc, char <strong>argv)<br>{<br>  int fd;<br><br>  /<em> Compute the size of the filename and allocate space for it.  </em>/<br>  int len = strlen (argv[0]) + 6 + 1;<br>  char <em>buf = gmk_alloc (len);<br><br>  strcpy (buf, argv[0]);<br>  strcat (buf, “XXXXXX”);<br><br>  fd = mkstemp(buf);<br>  if (fd &gt;= 0)<br>    {<br>      /</em> Don’t leak the file descriptor.  <em>/<br>      close (fd);<br>      return buf;<br>    }<br><br>  /</em> Failure.  <em>/<br>  fprintf (stderr, “mkstemp(%s) failed: %s\n”, buf, strerror (errno));<br>  gmk_free (buf);<br>  return NULL;<br>}<br><br>int<br>mk_temp_gmk_setup ()<br>{<br>  /</em> Register the function with make name “mk-temp”.  <em>/<br>  gmk_add_function (“mk-temp”, gen_tmpfile, 1, 1, 1);<br>  return 1;<br>}<br></em></strong></pre></div><br><br><p>Next, we will write a makefile that can build this shared object, load<br>it, and use it:<br></p><br><div class="example"><br><pre class="example">all:<br>        @echo Temporary file: $(mk-temp tmpfile.)<br><br>load mk_temp.so<br><br>mk_temp.so: mk_temp.c<br>        $(CC) -shared -fPIC -o $&nbsp;$&lt;<br></pre></div><br><br><p>On MS-Windows, due to peculiarities of how shared objects are<br>produced, the compiler needs to scan the <em>import library</em> produced<br>when building <code>make</code>, typically called<br><samp>libgnumake-<var>version</var>.dll.a</samp>, where <var>version</var> is the<br>version of the load object API.  So the recipe to produce a shared<br>object will look on Windows like this (assuming the API version is 1):<br></p><br><div class="example"><br><pre class="example">mk_temp.dll: mk_temp.c<br>        $(CC) -shared -o $&nbsp;$&lt; -lgnumake-1<br></pre></div><br><br><p>Now when you run <code>make</code> you’ll see something like:<br></p><br><div class="example"><br><pre class="example">$ make<br>cc -shared -fPIC -o mk_temp.so mk_temp.c<br>Temporary filename: tmpfile.A7JEwd<br></pre></div><br><br><hr><br><a name="Integrating-make"></a><br><div class="header"><br><p><br>Next: <a href="#Features" accesskey="n" rel="next">Features</a>, Previous: <a href="#Extending-make" accesskey="p" rel="prev">Extending make</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Integrating-GNU-make"></a><br><h2 class="chapter">13 Integrating GNU <code>make</code></h2><br><a name="index-make-integration"></a><br><br><p>GNU <code>make</code> is often one component in a larger system of tools,<br>including integrated development environments, compiler toolchains,<br>and others.  The role of <code>make</code> is to start commands and<br>determine whether they succeeded or not: no special integration is<br>needed to accomplish that.  However, sometimes it is convenient to<br>bind <code>make</code> more tightly with other parts of the system, both<br>higher-level (tools that invoke <code>make</code>) and lower-level (tools<br>that <code>make</code> invokes).<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Job-Slots" accesskey="1">Job Slots</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Share job slots with GNU <code>make</code>.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Terminal-Output" accesskey="2">Terminal Output</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Control output to terminals.<br></td></tr><br></tbody></table><br><br><hr><br><a name="Job-Slots"></a><br><div class="header"><br><p><br>Next: <a href="#Terminal-Output" accesskey="n" rel="next">Terminal Output</a>, Previous: <a href="#Integrating-make" accesskey="p" rel="prev">Integrating make</a>, Up: <a href="#Integrating-make" accesskey="u" rel="up">Integrating make</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Sharing-Job-Slots-with-GNU-make"></a><br><h3 class="section">13.1 Sharing Job Slots with GNU <code>make</code></h3><br><a name="index-job-slots_002c-sharing"></a><br><a name="index-tools_002c-sharing-job-slots"></a><br><br><p>GNU <code>make</code> has the ability to run multiple recipes in parallel<br>(see <a href="#Parallel">Parallel Execution</a>) and to cap the total number of<br>parallel jobs even across recursive invocations of <code>make</code><br>(see <a href="#Options_002fRecursion">Communicating Options to a<br>Sub-<code>make</code></a>).  Tools that <code>make</code> invokes which are also able<br>to run multiple operations in parallel, either using multiple threads<br>or multiple processes, can be enhanced to participate in GNU<br><code>make</code>’s job management facility to ensure that the total number<br>of active threads/processes running on the system does not exceed the<br>maximum number of slots provided to GNU <code>make</code>.<br></p><br><a name="index-jobserver"></a><br><p>GNU <code>make</code> uses a method called the “jobserver” to control the<br>number of active jobs across recursive invocations.  The actual<br>implementation of the jobserver varies across different operating<br>systems, but some fundamental aspects are always true.<br></p><br><p>First, only command lines that <code>make</code> understands to be recursive<br>invocations of <code>make</code> (see <a href="#MAKE-Variable">How the <code>MAKE</code><br>Variable Works</a>) will have access to the jobserver.  When writing<br>makefiles you must be sure to mark the command as recursive (most<br>commonly by prefixing the command line with the <code>+</code> indicator<br>(see <a href="#Recursion">Recursive Use of <code>make</code></a>).<br></p><br><p>Second, <code>make</code> will provide information necessary for accessing<br>the jobserver through the environment to its children, in the<br><code>MAKEFLAGS</code> environment variable.  Tools which want to<br>participate in the jobserver protocol will need to parse this<br>environment variable, as described in subsequent sections.<br></p><br><p>Third, every command <code>make</code> starts has one implicit job slot<br>reserved for it before it starts.  Any tool which wants to participate<br>in the jobserver protocol should assume it can always run one job<br>without having to contact the jobserver at all.<br></p><br><p>Finally, it’s critical that tools that participate in the jobserver<br>protocol return the exact number of slots they obtained from the<br>jobserver back to the jobserver before they exit, even under error<br>conditions.  Remember that the implicit job slot should <strong>not</strong><br>be returned to the jobserver!  Returning too few slots means that<br>those slots will be lost for the rest of the build process; returning<br>too many slots means that extra slots will be available.  The<br>top-level <code>make</code> command will print an error message at the end<br>of the build if it detects an incorrect number of slots available in<br>the jobserver.<br></p><br><p>As an example, suppose you are implementing a linker which provides<br>for multithreaded operation.  You would like to enhance the linker so<br>that if it is invoked by GNU <code>make</code> it can participate in the<br>jobserver protocol to control how many threads are used during link.<br>First you will need to modify the linker to determine if the<br><code>MAKEFLAGS</code> environment variable is set.  Next you will need to<br>parse the value of that variable to determine if the jobserver is<br>available, and how to access it.  If it is available then you can<br>access it to obtain job slots controlling how much parallelism your<br>tool can use.  Once done your tool must return those job slots back to<br>the jobserver.<br></p><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#POSIX-Jobserver" accesskey="1">POSIX Jobserver</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Using the jobserver on POSIX systems.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Windows-Jobserver" accesskey="2">Windows Jobserver</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Using the jobserver on Windows systems.<br></td></tr><br></tbody></table><br><br><hr><br><a name="POSIX-Jobserver"></a><br><div class="header"><br><p><br>Next: <a href="#Windows-Jobserver" accesskey="n" rel="next">Windows Jobserver</a>, Previous: <a href="#Job-Slots" accesskey="p" rel="prev">Job Slots</a>, Up: <a href="#Job-Slots" accesskey="u" rel="up">Job Slots</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="POSIX-Jobserver-Interaction"></a><br><h4 class="subsection">13.1.1 POSIX Jobserver Interaction</h4><br><a name="index-jobserver-on-POSIX"></a><br><br><p>On POSIX systems the jobserver is implemented as a simple UNIX pipe.<br>The pipe will be pre-loaded with one single-character token for each<br>available job.  To obtain an extra slot you must read a single<br>character from the jobserver pipe; to release a slot you must write a<br>single character back into the jobserver pipe.<br></p><br><p>To access the pipe you must parse the <code>MAKEFLAGS</code> variable and<br>look for the argument string <code>–jobserver-auth=R,W</code> where<br>‘<samp>R</samp>’ and ‘<samp>W</samp>’ are non-negative integers representing file<br>descriptors: ‘<samp>R</samp>’ is the read file descriptor and ‘<samp>W</samp>’ is the<br>write file descriptor.<br></p><br><p>It’s important that when you release the job slot, you write back the<br>same character you read from the pipe for that slot.  Don’t assume<br>that all tokens are the same character; different characters may have<br>different meanings to GNU <code>make</code>.  The order is not important,<br>since <code>make</code> has no idea in what order jobs will complete anyway.<br></p><br><p>There are various error conditions you must consider to ensure your<br>implementation is robust:<br></p><br><ul><br><li> Usually you will have a command-line argument controlling the parallel<br>operation of your tool.  Consider whether your tool should detect<br>situations where both the jobserver and the command-line argument are<br>specified, and how it should react.<br><br></li><li> If your tool determines that the <code>–jobserver-auth</code> option is<br>available in <code>MAKEFLAGS</code> but that the file descriptors specified<br>are closed, this means that the calling <code>make</code> process did not<br>think that your tool was a recursive <code>make</code> invocation (e.g., the<br>command line was not prefixed with a <code>+</code> character).  You should<br>notify your users of this situation.<br><br></li><li> Your tool should also examine the first word of the <code>MAKEFLAGS</code><br>variable and look for the character <code>n</code>.  If this character is<br>present then <code>make</code> was invoked with the ‘<samp>-n</samp>’ option and<br>your tool should stop without performing any operations.<br><br></li><li> Your tool should be sure to write back the tokens it read, even under<br>error conditions.  This includes not only errors in your tool but also<br>outside influences such as interrupts (<code>SIGINT</code>), etc.  You may<br>want to install signal handlers to manage this write-back.<br></li></ul><br><br><hr><br><a name="Windows-Jobserver"></a><br><div class="header"><br><p><br>Previous: <a href="#POSIX-Jobserver" accesskey="p" rel="prev">POSIX Jobserver</a>, Up: <a href="#Job-Slots" accesskey="u" rel="up">Job Slots</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Windows-Jobserver-Interaction"></a><br><h4 class="subsection">13.1.2 Windows Jobserver Interaction</h4><br><a name="index-jobserver-on-Windows"></a><br><br><p>On Windows systems the jobserver is implemented as a named semaphore.<br>The semaphore will be set with an initial count equal to the number of<br>available slots; to obtain a slot you must wait on the semaphore (with<br>or without a timeout).  To release a slot, release the semaphore.<br></p><br><p>To access the semaphore you must parse the <code>MAKEFLAGS</code> variable and<br>look for the argument string <code>–jobserver-auth=NAME</code> where<br>‘<samp>NAME</samp>’ is the name of the named semaphore.  Use this name with<br><code>OpenSemaphore</code> to create a handle to the semaphore.<br></p><br><p>There are various error conditions you must consider to ensure your<br>implementation is robust:<br></p><br><ul><br><li> Usually you will have a command-line argument controlling the parallel<br>operation of your tool.  Consider whether your tool should detect<br>situations where both the jobserver and the command-line argument are<br>specified, and how it should react.<br><br></li><li> Your tool should be sure to release the semaphore for the tokens it<br>read, even under error conditions.  This includes not only errors in<br>your tool but also outside influences such as interrupts<br>(<code>SIGINT</code>), etc.  You may want to install signal handlers to<br>manage this write-back.<br></li></ul><br><br><hr><br><a name="Terminal-Output"></a><br><div class="header"><br><p><br>Previous: <a href="#Job-Slots" accesskey="p" rel="prev">Job Slots</a>, Up: <a href="#Integrating-make" accesskey="u" rel="up">Integrating make</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Synchronized-Terminal-Output"></a><br><h3 class="section">13.2 Synchronized Terminal Output</h3><br><a name="index-parallel-output-to-terminal"></a><br><a name="index-terminal_002c-output-to"></a><br><br><p>Normally GNU <code>make</code> will invoke all commands with access to the<br>same standard and error outputs that <code>make</code> itself was started<br>with.  A number of tools will detect whether the output is a terminal<br>or not-a-terminal, and use this information to change the output<br>style.  For example if the output goes to a terminal the tool may add<br>control characters that set color, or even change the location of the<br>cursor.  If the output is not going to a terminal then these special<br>control characters are not emitted so that they don’t corrupt log<br>files, etc.<br></p><br><p>The <code>–output-sync</code> (see <a href="#Parallel-Output">Output During<br>Parallel Output</a>) option will defeat the terminal detection.  When<br>output synchronization is enabled GNU <code>make</code> arranges for all<br>command output to be written to a file, so that its output can be<br>written as a block without interference from other commands.  This<br>means that all tools invoked by <code>make</code> will believe that their<br>output is not going to be displayed on a terminal, even when it will<br>be (because <code>make</code> will display it there after the command is<br>completed).<br></p><br><p>In order to facilitate tools which would like to determine whether or<br>not their output will be displayed on a terminal, GNU <code>make</code> will<br>set the <code>MAKE_TERMOUT</code> and <code>MAKE_TERMERR</code> environment<br>variables before invoking any commands.  Tools which would like to<br>determine whether standard or error output (respectively) will be<br>displayed on a terminal can check these environment variables to<br>determine if they exist and contain a non-empty value.  If so the tool<br>can assume that the output will (eventually) be displayed on a<br>terminal.  If the variables are not set or have an empty value, then<br>the tool should fall back to its normal methods of detecting whether<br>output is going to a terminal or not.<br></p><br><p>The content of the variables can be parsed to determine the type of<br>terminal which will be used to display the output.<br></p><br><p>Similarly, environments which invoke <code>make</code> and would like to<br>capture the output and eventually display it on a terminal (or some<br>display which can interpret terminal control characters) can set these<br>variables before invoking <code>make</code>.  GNU <code>make</code> will not<br>modify these environment variables if they already exist when it<br>starts.<br></p><br><hr><br><a name="Features"></a><br><div class="header"><br><p><br>Next: <a href="#Missing" accesskey="n" rel="next">Missing</a>, Previous: <a href="#Integrating-make" accesskey="p" rel="prev">Integrating make</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Features-of-GNU-make"></a><br><h2 class="chapter">14 Features of GNU <code>make</code></h2><br><a name="index-features-of-GNU-make"></a><br><a name="index-portability"></a><br><a name="index-compatibility"></a><br><br><p>Here is a summary of the features of GNU <code>make</code>, for comparison<br>with and credit to other versions of <code>make</code>.  We consider the<br>features of <code>make</code> in 4.2 BSD systems as a baseline.  If you are<br>concerned with writing portable makefiles, you should not use the<br>features of <code>make</code> listed here, nor the ones in <a href="#Missing">Missing</a>.<br></p><br><p>Many features come from the version of <code>make</code> in System V.<br></p><br><ul><br><li> The <code>VPATH</code> variable and its special meaning.<br>See <a href="#Directory-Search">Searching Directories for Prerequisites</a>.<br>This feature exists in System V <code>make</code>, but is undocumented.<br>It is documented in 4.3 BSD <code>make</code> (which says it mimics System V’s<br><code>VPATH</code> feature).<br><br></li><li> Included makefiles.  See <a href="#Include">Including Other Makefiles</a>.<br>Allowing multiple files to be included with a single directive is a GNU<br>extension.<br><br></li><li> Variables are read from and communicated via the environment.<br>See <a href="#Environment">Variables from the Environment</a>.<br><br></li><li> Options passed through the variable <code>MAKEFLAGS</code> to recursive<br>invocations of <code>make</code>.<br>See <a href="#Options_002fRecursion">Communicating Options to a Sub-<code>make</code></a>.<br><br></li><li> The automatic variable <code>$%</code> is set to the member name<br>in an archive reference.  See <a href="#Automatic-Variables">Automatic Variables</a>.<br><br></li><li> The automatic variables <code>$@</code>, <code>$</code>, <code>$&lt;</code>, <code>$%</code>,<br>and <code>$?</code> have corresponding forms like <code>$(@F)</code> and<br><code>$(@D)</code>.  We have generalized this to <code>$^</code> as an obvious<br>extension.  See <a href="#Automatic-Variables">Automatic Variables</a>.<br><br></li><li> Substitution variable references.<br>See <a href="#Reference">Basics of Variable References</a>.<br><br></li><li> The command line options ‘<samp>-b</samp>’ and ‘<samp>-m</samp>’, accepted and<br>ignored.  In System V <code>make</code>, these options actually do something.<br><br></li><li> Execution of recursive commands to run <code>make</code> via the variable<br><code>MAKE</code> even if ‘<samp>-n</samp>’, ‘<samp>-q</samp>’ or ‘<samp>-t</samp>’ is specified.<br>See <a href="#Recursion">Recursive Use of <code>make</code></a>.<br><br></li><li> Support for suffix ‘<samp>.a</samp>’ in suffix rules.  See <a href="#Archive-Suffix-Rules">Archive Suffix Rules</a>.  This feature is obsolete in GNU <code>make</code>, because the<br>general feature of rule chaining (see <a href="#Chained-Rules">Chains of<br>Implicit Rules</a>) allows one pattern rule for installing members in an<br>archive (see <a href="#Archive-Update">Archive Update</a>) to be sufficient.<br><br></li><li> The arrangement of lines and backslash/newline combinations in<br>recipes is retained when the recipes are printed, so they appear as<br>they do in the makefile, except for the stripping of initial<br>whitespace.<br></li></ul><br><br><p>The following features were inspired by various other versions of<br><code>make</code>.  In some cases it is unclear exactly which versions inspired<br>which others.<br></p><br><ul><br><li> Pattern rules using ‘<samp>%</samp>’.<br>This has been implemented in several versions of <code>make</code>.<br>We’re not sure who invented it first, but it’s been spread around a bit.<br>See <a href="#Pattern-Rules">Defining and Redefining Pattern Rules</a>.<br><br></li><li> Rule chaining and implicit intermediate files.<br>This was implemented by Stu Feldman in his version of <code>make</code><br>for AT&amp;T Eighth Edition Research Unix, and later by Andrew Hume of<br>AT&amp;T Bell Labs in his <code>mk</code> program (where he terms it<br>“transitive closure”).  We do not really know if<br>we got this from either of them or thought it up ourselves at the<br>same time.  See <a href="#Chained-Rules">Chains of Implicit Rules</a>.<br><br></li><li> The automatic variable <code>$^</code> containing a list of all prerequisites<br>of the current target.  We did not invent this, but we have no idea who<br>did.  See <a href="#Automatic-Variables">Automatic Variables</a>.  The automatic variable<br><code>$+</code> is a simple extension of <code>$^</code>.<br><br></li><li> The “what if” flag (‘<samp>-W</samp>’ in GNU <code>make</code>) was (as far as we know)<br>invented by Andrew Hume in <code>mk</code>.<br>See <a href="#Instead-of-Execution">Instead of Executing Recipes</a>.<br><br></li><li> The concept of doing several things at once (parallelism) exists in<br>many incarnations of <code>make</code> and similar programs, though not in the<br>System V or BSD implementations.  See <a href="#Execution">Recipe Execution</a>.<br><br></li><li> A number of different build tools that support parallelism also<br>support collecting output and displaying as a single block.<br>See <a href="#Parallel-Output">Output During Parallel Execution</a>.<br><br></li><li> Modified variable references using pattern substitution come from<br>SunOS 4.  See <a href="#Reference">Basics of Variable References</a>.<br>This functionality was provided in GNU <code>make</code> by the<br><code>patsubst</code> function before the alternate syntax was implemented<br>for compatibility with SunOS 4.  It is not altogether clear who<br>inspired whom, since GNU <code>make</code> had <code>patsubst</code> before SunOS<br>4 was released.<br><br></li><li> The special significance of ‘<samp>+</samp>’ characters preceding recipe lines<br>(see <a href="#Instead-of-Execution">Instead of Executing Recipes</a>) is<br>mandated by <cite>IEEE Standard 1003.2-1992</cite> (POSIX.2).<br><br></li><li> The ‘<samp>+=</samp>’ syntax to append to the value of a variable comes from SunOS<br>4 <code>make</code>.  See <a href="#Appending">Appending More Text to Variables</a>.<br><br></li><li> The syntax ‘<samp><var>archive</var>(<var>mem1</var>&nbsp;<var>mem2</var>…)</samp>’<!-- /@w --> to list<br>multiple members in a single archive file comes from SunOS 4 <code>make</code>.<br>See <a href="#Archive-Members">Archive Members</a>.<br><br></li><li> The <code>-include</code> directive to include makefiles with no error for a<br>nonexistent file comes from SunOS 4 <code>make</code>.  (But note that SunOS 4<br><code>make</code> does not allow multiple makefiles to be specified in one<br><code>-include</code> directive.)  The same feature appears with the name<br><code>sinclude</code> in SGI <code>make</code> and perhaps others.<br><br></li><li> The <code>!=</code> shell assignment operator exists in many BSD of<br><code>make</code> and is purposefully implemented here to behave identically<br>to those implementations.<br><br></li><li> Various build management tools are implemented using scripting<br>languages such as Perl or Python and thus provide a natural embedded<br>scripting language, similar to GNU <code>make</code>’s integration of GNU<br>Guile.<br></li></ul><br><br><p>The remaining features are inventions new in GNU <code>make</code>:<br></p><br><ul><br><li> Use the ‘<samp>-v</samp>’ or ‘<samp>–version</samp>’ option to print version and<br>copyright information.<br><br></li><li> Use the ‘<samp>-h</samp>’ or ‘<samp>–help</samp>’ option to summarize the options to<br><code>make</code>.<br><br></li><li> Simply-expanded variables.  See <a href="#Flavors">The Two Flavors of Variables</a>.<br><br></li><li> Pass command line variable assignments automatically through the<br>variable <code>MAKE</code> to recursive <code>make</code> invocations.<br>See <a href="#Recursion">Recursive Use of <code>make</code></a>.<br><br></li><li> Use the ‘<samp>-C</samp>’ or ‘<samp>–directory</samp>’ command option to change<br>directory.  See <a href="#Options-Summary">Summary of Options</a>.<br><br></li><li> Make verbatim variable definitions with <code>define</code>.<br>See <a href="#Multi_002dLine">Defining Multi-Line Variables</a>.<br><br></li><li> Declare phony targets with the special target <code>.PHONY</code>.<br><br><p>Andrew Hume of AT&amp;T Bell Labs implemented a similar feature with a<br>different syntax in his <code>mk</code> program.  This seems to be a case of<br>parallel discovery.  See <a href="#Phony-Targets">Phony Targets</a>.<br></p><br></li><li> Manipulate text by calling functions.<br>See <a href="#Functions">Functions for Transforming Text</a>.<br><br></li><li> Use the ‘<samp>-o</samp>’ or ‘<samp>–old-file</samp>’<br>option to pretend a file’s modification-time is old.<br>See <a href="#Avoiding-Compilation">Avoiding Recompilation of Some Files</a>.<br><br></li><li> Conditional execution.<br><br><p>This feature has been implemented numerous times in various versions<br>of <code>make</code>; it seems a natural extension derived from the features<br>of the C preprocessor and similar macro languages and is not a<br>revolutionary concept.  See <a href="#Conditionals">Conditional Parts of Makefiles</a>.<br></p><br></li><li> Specify a search path for included makefiles.<br>See <a href="#Include">Including Other Makefiles</a>.<br><br></li><li> Specify extra makefiles to read with an environment variable.<br>See <a href="#MAKEFILES-Variable">The Variable <code>MAKEFILES</code></a>.<br><br></li><li> Strip leading sequences of ‘<samp>./</samp>’ from file names, so that<br><samp>./<var>file</var></samp> and <samp><var>file</var></samp> are considered to be the<br>same file.<br><br></li><li> Use a special search method for library prerequisites written in the<br>form ‘<samp>-l<var>name</var></samp>’.<br>See <a href="#Libraries_002fSearch">Directory Search for Link Libraries</a>.<br><br></li><li> Allow suffixes for suffix rules<br>(see <a href="#Suffix-Rules">Old-Fashioned Suffix Rules</a>) to contain any<br>characters.  In other versions of <code>make</code>, they must begin with<br>‘<samp>.</samp>’ and not contain any ‘<samp>/</samp>’ characters.<br><br></li><li> Keep track of the current level of <code>make</code> recursion using the<br>variable <code>MAKELEVEL</code>.  See <a href="#Recursion">Recursive Use of <code>make</code></a>.<br><br></li><li> Provide any goals given on the command line in the variable<br><code>MAKECMDGOALS</code>.  See <a href="#Goals">Arguments to Specify the Goals</a>.<br><br></li><li> Specify static pattern rules.  See <a href="#Static-Pattern">Static Pattern Rules</a>.<br><br></li><li> Provide selective <code>vpath</code> search.<br>See <a href="#Directory-Search">Searching Directories for Prerequisites</a>.<br><br></li><li> Provide computed variable references.<br>See <a href="#Reference">Basics of Variable References</a>.<br><br></li><li> Update makefiles.  See <a href="#Remaking-Makefiles">How Makefiles Are Remade</a>.<br>System V <code>make</code> has a very, very limited form of this<br>functionality in that it will check out SCCS files for makefiles.<br><br></li><li> Various new built-in implicit rules.<br>See <a href="#Catalogue-of-Rules">Catalogue of Built-In Rules</a>.<br><br></li><li> Load dynamic objects which can modify the behavior of <code>make</code>.<br>See <a href="#Loading-Objects">Loading Dynamic Objects</a>.<br></li></ul><br><br><hr><br><a name="Missing"></a><br><div class="header"><br><p><br>Next: <a href="#Makefile-Conventions" accesskey="n" rel="next">Makefile Conventions</a>, Previous: <a href="#Features" accesskey="p" rel="prev">Features</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Incompatibilities-and-Missing-Features"></a><br><h2 class="chapter">15 Incompatibilities and Missing Features</h2><br><a name="index-incompatibilities"></a><br><a name="index-missing-features"></a><br><a name="index-features_002c-missing"></a><br><br><p>The <code>make</code> programs in various other systems support a few features<br>that are not implemented in GNU <code>make</code>.  The POSIX.2 standard<br>(<cite>IEEE Standard 1003.2-1992</cite>) which specifies <code>make</code> does not<br>require any of these features.<br></p><br><ul><br><li> A target of the form ‘<samp><var>file</var>((<var>entry</var>))</samp>’ stands for a member<br>of archive file <var>file</var>.  The member is chosen, not by name, but by<br>being an object file which defines the linker symbol <var>entry</var>.<br><br><p>This feature was not put into GNU <code>make</code> because of the<br>non-modularity of putting knowledge into <code>make</code> of the internal<br>format of archive file symbol tables.<br>See <a href="#Archive-Symbols">Updating Archive Symbol Directories</a>.<br></p><br></li><li> Suffixes (used in suffix rules) that end with the character ‘<samp>~</samp>’<br>have a special meaning to System V <code>make</code>;<br>they refer to the SCCS file that corresponds<br>to the file one would get without the ‘<samp>~</samp>’.  For example, the<br>suffix rule ‘<samp>.c~.o</samp>’ would make the file <samp><var>n</var>.o</samp> from<br>the SCCS file <samp>s.<var>n</var>.c</samp>.  For complete coverage, a whole<br>series of such suffix rules is required.<br>See <a href="#Suffix-Rules">Old-Fashioned Suffix Rules</a>.<br><br><p>In GNU <code>make</code>, this entire series of cases is handled by two<br>pattern rules for extraction from SCCS, in combination with the<br>general feature of rule chaining.<br>See <a href="#Chained-Rules">Chains of Implicit Rules</a>.<br></p><br></li><li> In System V and 4.3 BSD <code>make</code>, files found by <code>VPATH</code><br>search (see <a href="#Directory-Search">Searching Directories for<br>Prerequisites</a>) have their names changed inside recipes.  We feel it<br>is much cleaner to always use automatic variables and thus make this<br>feature obsolete.<br><br></li><li> In some Unix <code>make</code>s, the automatic variable <code>$<em></em></code> appearing in<br>the prerequisites of a rule has the amazingly strange “feature” of<br>expanding to the full name of the <em>target of that rule</em>.  We cannot<br>imagine what went on in the minds of Unix <code>make</code> developers to do<br>this; it is utterly inconsistent with the normal definition of <code>$</code>.<br><a name="index-_002a-_0028automatic-variable_0029_002c-unsupported-bizarre-usage"></a><br><br></li><li> In some Unix <code>make</code>s, implicit rule search (see <a href="#Implicit-Rules">Using Implicit Rules</a>) is apparently done for <em>all</em><br>targets, not just those without recipes.  This means you can<br>do:<br><br><div class="example"><br><pre class="example">foo.o:<br>        cc -c foo.c<br></pre></div><br><br><p>and Unix <code>make</code> will intuit that <samp>foo.o</samp> depends on<br><samp>foo.c</samp>.<br></p><br><p>We feel that such usage is broken.  The prerequisite properties of<br><code>make</code> are well-defined (for GNU <code>make</code>, at least),<br>and doing such a thing simply does not fit the model.<br></p><br></li><li> GNU <code>make</code> does not include any built-in implicit rules for<br>compiling or preprocessing EFL programs.  If we hear of anyone who is<br>using EFL, we will gladly add them.<br><br></li><li> It appears that in SVR4 <code>make</code>, a suffix rule can be specified<br>with no recipe, and it is treated as if it had an empty recipe<br>(see <a href="#Empty-Recipes">Empty Recipes</a>).  For example:<br><br><div class="example"><br><pre class="example">.c.a:<br></pre></div><br><br><p>will override the built-in <samp>.c.a</samp> suffix rule.<br></p><br><p>We feel that it is cleaner for a rule without a recipe to always simply<br>add to the prerequisite list for the target.  The above example can be<br>easily rewritten to get the desired behavior in GNU <code>make</code>:<br></p><br><div class="example"><br><pre class="example">.c.a: ;<br></pre></div><br><br></li><li> Some versions of <code>make</code> invoke the shell with the ‘<samp>-e</samp>’ flag,<br>except under ‘<samp>-k</samp>’ (see <a href="#Testing">Testing the Compilation of a<br>Program</a>).  The ‘<samp>-e</samp>’ flag tells the shell to exit as soon as any<br>program it runs returns a nonzero status.  We feel it is cleaner to<br>write each line of the recipe to stand on its own and not require this<br>special treatment.<br></li></ul><br><br><br><hr><br><a name="Makefile-Conventions"></a><br><div class="header"><br><p><br>Next: <a href="#Quick-Reference" accesskey="n" rel="next">Quick Reference</a>, Previous: <a href="#Missing" accesskey="p" rel="prev">Missing</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Makefile-Conventions-1"></a><br><h2 class="chapter">16 Makefile Conventions</h2><br><a name="index-makefile_002c-conventions-for"></a><br><a name="index-conventions-for-makefiles"></a><br><a name="index-standards-for-makefiles"></a><br><br><br><p>This<br>describes conventions for writing the Makefiles for GNU programs.<br>Using Automake will help you write a Makefile that follows these<br>conventions.  For more information on portable Makefiles, see<br><small>POSIX</small> and <a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Portable-Make" target="_blank" rel="external">Portable Make Programming</a> in <cite>Autoconf</cite>.<br></p><br><br><table class="menu" border="0" cellspacing="0"><br><tbody><tr><td align="left" valign="top">• <a href="#Makefile-Basics" accesskey="1">Makefile Basics</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">General conventions for Makefiles.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Utilities-in-Makefiles" accesskey="2">Utilities in Makefiles</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Utilities to be used in Makefiles.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Command-Variables" accesskey="3">Command Variables</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Variables for specifying commands.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#DESTDIR" accesskey="4">DESTDIR</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Supporting staged installs.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Directory-Variables" accesskey="5">Directory Variables</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Variables for installation directories.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Standard-Targets" accesskey="6">Standard Targets</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Standard targets for users.<br></td></tr><br><tr><td align="left" valign="top">• <a href="#Install-Command-Categories" accesskey="7">Install Command Categories</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Three categories of commands in the ‘<samp>install</samp>’<br>                                  rule: normal, pre-install and post-install.<br></td></tr><br></tbody></table><br><br><hr><br><a name="Makefile-Basics"></a><br><div class="header"><br><p><br>Next: <a href="#Utilities-in-Makefiles" accesskey="n" rel="next">Utilities in Makefiles</a>, Up: <a href="#Makefile-Conventions" accesskey="u" rel="up">Makefile Conventions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="General-Conventions-for-Makefiles"></a><br><h3 class="section">16.1 General Conventions for Makefiles</h3><br><br><p>Every Makefile should contain this line:<br></p><br><div class="example"><br><pre class="example">SHELL = /bin/sh<br></pre></div><br><br><p>to avoid trouble on systems where the <code>SHELL</code> variable might be<br>inherited from the environment.  (This is never a problem with GNU<br><code>make</code>.)<br></p><br><p>Different <code>make</code> programs have incompatible suffix lists and<br>implicit rules, and this sometimes creates confusion or misbehavior.  So<br>it is a good idea to set the suffix list explicitly using only the<br>suffixes you need in the particular Makefile, like this:<br></p><br><div class="example"><br><pre class="example">.SUFFIXES:<br>.SUFFIXES: .c .o<br></pre></div><br><br><p>The first line clears out the suffix list, the second introduces all<br>suffixes which may be subject to implicit rules in this Makefile.<br></p><br><p>Don’t assume that <samp>.</samp> is in the path for command execution.  When<br>you need to run programs that are a part of your package during the<br>make, please make sure that it uses <samp>./</samp> if the program is built as<br>part of the make or <samp>$(srcdir)/</samp> if the file is an unchanging part<br>of the source code.  Without one of these prefixes, the current search<br>path is used.<br></p><br><p>The distinction between <samp>./</samp> (the <em>build directory</em>) and<br><samp>$(srcdir)/</samp> (the <em>source directory</em>) is important because<br>users can build in a separate directory using the ‘<samp>–srcdir</samp>’ option<br>to <samp>configure</samp>.  A rule of the form:<br></p><br><div class="smallexample"><br><pre class="smallexample">foo.1 : foo.man sedscript<br>        sed -f sedscript foo.man &gt; foo.1<br></pre></div><br><br><p>will fail when the build directory is not the source directory, because<br><samp>foo.man</samp> and <samp>sedscript</samp> are in the source directory.<br></p><br><p>When using GNU <code>make</code>, relying on ‘<samp>VPATH</samp>’ to find the source<br>file will work in the case where there is a single dependency file,<br>since the <code>make</code> automatic variable ‘<samp>$&lt;</samp>’ will represent the<br>source file wherever it is.  (Many versions of <code>make</code> set ‘<samp>$&lt;</samp>’<br>only in implicit rules.)  A Makefile target like<br></p><br><div class="smallexample"><br><pre class="smallexample">foo.o : bar.c<br>        $(CC) -I. -I$(srcdir) $(CFLAGS) -c bar.c -o foo.o<br></pre></div><br><br><p>should instead be written as<br></p><br><div class="smallexample"><br><pre class="smallexample">foo.o : bar.c<br>        $(CC) -I. -I$(srcdir) $(CFLAGS) -c $&lt; -o $@<br></pre></div><br><br><p>in order to allow ‘<samp>VPATH</samp>’ to work correctly.  When the target has<br>multiple dependencies, using an explicit ‘<samp>$(srcdir)</samp>’ is the easiest<br>way to make the rule work well.  For example, the target above for<br><samp>foo.1</samp> is best written as:<br></p><br><div class="smallexample"><br><pre class="smallexample">foo.1 : foo.man sedscript<br>        sed -f $(srcdir)/sedscript $(srcdir)/foo.man &gt; $@<br></pre></div><br><br><p>GNU distributions usually contain some files which are not source<br>files—for example, Info files, and the output from Autoconf, Automake,<br>Bison or Flex.  Since these files normally appear in the source<br>directory, they should always appear in the source directory, not in the<br>build directory.  So Makefile rules to update them should put the<br>updated files in the source directory.<br></p><br><p>However, if a file does not appear in the distribution, then the<br>Makefile should not put it in the source directory, because building a<br>program in ordinary circumstances should not modify the source directory<br>in any way.<br></p><br><p>Try to make the build and installation targets, at least (and all their<br>subtargets) work correctly with a parallel <code>make</code>.<br></p><br><hr><br><a name="Utilities-in-Makefiles"></a><br><div class="header"><br><p><br>Next: <a href="#Command-Variables" accesskey="n" rel="next">Command Variables</a>, Previous: <a href="#Makefile-Basics" accesskey="p" rel="prev">Makefile Basics</a>, Up: <a href="#Makefile-Conventions" accesskey="u" rel="up">Makefile Conventions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Utilities-in-Makefiles-1"></a><br><h3 class="section">16.2 Utilities in Makefiles</h3><br><br><p>Write the Makefile commands (and any shell scripts, such as<br><code>configure</code>) to run under <code>sh</code> (both the traditional Bourne<br>shell and the <small>POSIX</small> shell), not <code>csh</code>.  Don’t use any<br>special features of <code>ksh</code> or <code>bash</code>, or <small>POSIX</small> features<br>not widely supported in traditional Bourne <code>sh</code>.<br></p><br><p>The <code>configure</code> script and the Makefile rules for building and<br>installation should not use any utilities directly except these:<br></p><br><br><div class="example"><br><pre class="example">awk cat cmp cp diff echo egrep expr false grep install-info ln ls<br>mkdir mv printf pwd rm rmdir sed sleep sort tar test touch tr true<br></pre></div><br><br><p>Compression programs such as <code>gzip</code> can be used in the<br><code>dist</code> rule.<br></p><br><p>Generally, stick to the widely-supported (usually<br><small>POSIX</small>-specified) options and features of these programs.  For<br>example, don’t use ‘<samp>mkdir -p</samp>’, convenient as it may be, because a<br>few systems don’t support it at all and with others, it is not safe<br>for parallel execution.  For a list of known incompatibilities, see<br><a href="http://www.gnu.org/software/autoconf/manual/autoconf.html#Portable-Shell" target="_blank" rel="external">Portable Shell Programming</a> in <cite>Autoconf</cite>.<br></p><br><br><p>It is a good idea to avoid creating symbolic links in makefiles, since a<br>few file systems don’t support them.<br></p><br><p>The Makefile rules for building and installation can also use compilers<br>and related programs, but should do so via <code>make</code> variables so that the<br>user can substitute alternatives.  Here are some of the programs we<br>mean:<br></p><br><div class="example"><br><pre class="example">ar bison cc flex install ld ldconfig lex<br>make makeinfo ranlib texi2dvi yacc<br></pre></div><br><br><p>Use the following <code>make</code> variables to run those programs:<br></p><br><div class="example"><br><pre class="example">$(AR) $(BISON) $(CC) $(FLEX) $(INSTALL) $(LD) $(LDCONFIG) $(LEX)<br>$(MAKE) $(MAKEINFO) $(RANLIB) $(TEXI2DVI) $(YACC)<br></pre></div><br><br><p>When you use <code>ranlib</code> or <code>ldconfig</code>, you should make sure<br>nothing bad happens if the system does not have the program in question.<br>Arrange to ignore an error from that command, and print a message before<br>the command to tell the user that failure of this command does not mean<br>a problem.  (The Autoconf ‘<samp>AC_PROG_RANLIB</samp>’ macro can help with<br>this.)<br></p><br><p>If you use symbolic links, you should implement a fallback for systems<br>that don’t have symbolic links.<br></p><br><p>Additional utilities that can be used via Make variables are:<br></p><br><div class="example"><br><pre class="example">chgrp chmod chown mknod<br></pre></div><br><br><p>It is ok to use other utilities in Makefile portions (or scripts)<br>intended only for particular systems where you know those utilities<br>exist.<br></p><br><hr><br><a name="Command-Variables"></a><br><div class="header"><br><p><br>Next: <a href="#DESTDIR" accesskey="n" rel="next">DESTDIR</a>, Previous: <a href="#Utilities-in-Makefiles" accesskey="p" rel="prev">Utilities in Makefiles</a>, Up: <a href="#Makefile-Conventions" accesskey="u" rel="up">Makefile Conventions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Variables-for-Specifying-Commands"></a><br><h3 class="section">16.3 Variables for Specifying Commands</h3><br><br><p>Makefiles should provide variables for overriding certain commands, options,<br>and so on.<br></p><br><p>In particular, you should run most utility programs via variables.<br>Thus, if you use Bison, have a variable named <code>BISON</code> whose default<br>value is set with ‘<samp>BISON = bison</samp>’, and refer to it with<br><code>$(BISON)</code> whenever you need to use Bison.<br></p><br><p>File management utilities such as <code>ln</code>, <code>rm</code>, <code>mv</code>, and<br>so on, need not be referred to through variables in this way, since users<br>don’t need to replace them with other programs.<br></p><br><p>Each program-name variable should come with an options variable that is<br>used to supply options to the program.  Append ‘<samp>FLAGS</samp>’ to the<br>program-name variable name to get the options variable name—for<br>example, <code>BISONFLAGS</code>.  (The names <code>CFLAGS</code> for the C<br>compiler, <code>YFLAGS</code> for yacc, and <code>LFLAGS</code> for lex, are<br>exceptions to this rule, but we keep them because they are standard.)<br>Use <code>CPPFLAGS</code> in any compilation command that runs the<br>preprocessor, and use <code>LDFLAGS</code> in any compilation command that<br>does linking as well as in any direct use of <code>ld</code>.<br></p><br><p>If there are C compiler options that <em>must</em> be used for proper<br>compilation of certain files, do not include them in <code>CFLAGS</code>.<br>Users expect to be able to specify <code>CFLAGS</code> freely themselves.<br>Instead, arrange to pass the necessary options to the C compiler<br>independently of <code>CFLAGS</code>, by writing them explicitly in the<br>compilation commands or by defining an implicit rule, like this:<br></p><br><div class="smallexample"><br><pre class="smallexample">CFLAGS = -g<br>ALL_CFLAGS = -I. $(CFLAGS)<br>.c.o:<br>        $(CC) -c $(CPPFLAGS) $(ALL_CFLAGS) $&lt;<br></pre></div><br><br><p>Do include the ‘<samp>-g</samp>’ option in <code>CFLAGS</code>, because that is not<br><em>required</em> for proper compilation.  You can consider it a default<br>that is only recommended.  If the package is set up so that it is<br>compiled with GCC by default, then you might as well include ‘<samp>-O</samp>’<br>in the default value of <code>CFLAGS</code> as well.<br></p><br><p>Put <code>CFLAGS</code> last in the compilation command, after other variables<br>containing compiler options, so the user can use <code>CFLAGS</code> to<br>override the others.<br></p><br><p><code>CFLAGS</code> should be used in every invocation of the C compiler,<br>both those which do compilation and those which do linking.<br></p><br><p>Every Makefile should define the variable <code>INSTALL</code>, which is the<br>basic command for installing a file into the system.<br></p><br><p>Every Makefile should also define the variables <code>INSTALL_PROGRAM</code><br>and <code>INSTALL_DATA</code>.  (The default for <code>INSTALL_PROGRAM</code> should<br>be <code>$(INSTALL)</code>; the default for <code>INSTALL_DATA</code> should be<br><code>${INSTALL} -m 644</code>.)  Then it should use those variables as the<br>commands for actual installation, for executables and non-executables<br>respectively.  Minimal use of these variables is as follows:<br></p><br><div class="example"><br><pre class="example">$(INSTALL_PROGRAM) foo $(bindir)/foo<br>$(INSTALL_DATA) libfoo.a $(libdir)/libfoo.a<br></pre></div><br><br><p>However, it is preferable to support a <code>DESTDIR</code> prefix on the<br>target files, as explained in the next section.<br></p><br><p>It is acceptable, but not required, to install multiple files in one<br>command, with the final argument being a directory, as in:<br></p><br><div class="example"><br><pre class="example">$(INSTALL_PROGRAM) foo bar baz $(bindir)<br></pre></div><br><br><br><hr><br><a name="DESTDIR"></a><br><div class="header"><br><p><br>Next: <a href="#Directory-Variables" accesskey="n" rel="next">Directory Variables</a>, Previous: <a href="#Command-Variables" accesskey="p" rel="prev">Command Variables</a>, Up: <a href="#Makefile-Conventions" accesskey="u" rel="up">Makefile Conventions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="DESTDIR_003a-Support-for-Staged-Installs"></a><br><h3 class="section">16.4 <code>DESTDIR</code>: Support for Staged Installs</h3><br><br><a name="index-DESTDIR"></a><br><a name="index-staged-installs"></a><br><a name="index-installations_002c-staged"></a><br><br><p><code>DESTDIR</code> is a variable prepended to each installed target file,<br>like this:<br></p><br><div class="example"><br><pre class="example">$(INSTALL_PROGRAM) foo $(DESTDIR)$(bindir)/foo<br>$(INSTALL_DATA) libfoo.a $(DESTDIR)$(libdir)/libfoo.a<br></pre></div><br><br><p>The <code>DESTDIR</code> variable is specified by the user on the <code>make</code><br>command line as an absolute file name.  For example:<br></p><br><div class="example"><br><pre class="example">make DESTDIR=/tmp/stage install<br></pre></div><br><br><p><code>DESTDIR</code> should be supported only in the <code>install<em></em></code> and<br><code>uninstall</code> targets, as those are the only targets where it is<br>useful.<br></p><br><p>If your installation step would normally install<br><samp>/usr/local/bin/foo</samp> and <samp>/usr/local/lib/libfoo.a</samp>, then an<br>installation invoked as in the example above would install<br><samp>/tmp/stage/usr/local/bin/foo</samp> and<br><samp>/tmp/stage/usr/local/lib/libfoo.a</samp> instead.<br></p><br><p>Prepending the variable <code>DESTDIR</code> to each target in this way<br>provides for <em>staged installs</em>, where the installed files are not<br>placed directly into their expected location but are instead copied<br>into a temporary location (<code>DESTDIR</code>).  However, installed files<br>maintain their relative directory structure and any embedded file names<br>will not be modified.<br></p><br><p>You should not set the value of <code>DESTDIR</code> in your <samp>Makefile</samp><br>at all; then the files are installed into their expected locations by<br>default.  Also, specifying <code>DESTDIR</code> should not change the<br>operation of the software in any way, so its value should not be<br>included in any file contents.<br></p><br><p><code>DESTDIR</code> support is commonly used in package creation.  It is<br>also helpful to users who want to understand what a given package will<br>install where, and to allow users who don’t normally have permissions<br>to install into protected areas to build and install before gaining<br>those permissions.  Finally, it can be useful with tools such as<br><code>stow</code>, where code is installed in one place but made to appear<br>to be installed somewhere else using symbolic links or special mount<br>operations.  So, we strongly recommend GNU packages support<br><code>DESTDIR</code>, though it is not an absolute requirement.<br></p><br><br><hr><br><a name="Directory-Variables"></a><br><div class="header"><br><p><br>Next: <a href="#Standard-Targets" accesskey="n" rel="next">Standard Targets</a>, Previous: <a href="#DESTDIR" accesskey="p" rel="prev">DESTDIR</a>, Up: <a href="#Makefile-Conventions" accesskey="u" rel="up">Makefile Conventions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Variables-for-Installation-Directories"></a><br><h3 class="section">16.5 Variables for Installation Directories</h3><br><br><p>Installation directories should always be named by variables, so it is<br>easy to install in a nonstandard place.  The standard names for these<br>variables and the values they should have in GNU packages are<br>described below.  They are based on a standard file system layout;<br>variants of it are used in GNU/Linux and other modern operating<br>systems.<br></p><br><p>Installers are expected to override these values when calling<br><code>make</code> (e.g., <kbd>make prefix=/usr install</kbd>) or<br><code>configure</code> (e.g., <kbd>configure –prefix=/usr</kbd>).  GNU<br>packages should not try to guess which value should be appropriate for<br>these variables on the system they are being installed onto: use the<br>default settings specified here so that all GNU packages behave<br>identically, allowing the installer to achieve any desired layout.<br></p><br><a name="index-directories_002c-creating-installation"></a><br><a name="index-installation-directories_002c-creating"></a><br><p>All installation directories, and their parent directories, should be<br>created (if necessary) before they are installed into.<br></p><br><p>These first two variables set the root for the installation.  All the<br>other installation directories should be subdirectories of one of<br>these two, and nothing should be directly installed into these two<br>directories.<br></p><br><dl compact="compact"><br><dt><code>prefix</code></dt><br><dd><a name="index-prefix"></a><br><p>A prefix used in constructing the default values of the variables listed<br>below.  The default value of <code>prefix</code> should be <samp>/usr/local</samp>.<br>When building the complete GNU system, the prefix will be empty and<br><samp>/usr</samp> will be a symbolic link to <samp>/</samp>.<br>(If you are using Autoconf, write it as ‘<samp>@prefix@</samp>’.)<br></p><br><p>Running ‘<samp>make install</samp>’ with a different value of <code>prefix</code> from<br>the one used to build the program should <em>not</em> recompile the<br>program.<br></p><br></dd><br><dt><code>exec_prefix</code></dt><br><dd><a name="index-exec_005fprefix"></a><br><p>A prefix used in constructing the default values of some of the<br>variables listed below.  The default value of <code>exec_prefix</code> should<br>be <code>$(prefix)</code>.<br>(If you are using Autoconf, write it as ‘<samp>@exec_prefix@</samp>’.)<br></p><br><p>Generally, <code>$(exec_prefix)</code> is used for directories that contain<br>machine-specific files (such as executables and subroutine libraries),<br>while <code>$(prefix)</code> is used directly for other directories.<br></p><br><p>Running ‘<samp>make install</samp>’ with a different value of <code>exec_prefix</code><br>from the one used to build the program should <em>not</em> recompile the<br>program.<br></p></dd><br></dl><br><br><p>Executable programs are installed in one of the following directories.<br></p><br><dl compact="compact"><br><dt><code>bindir</code></dt><br><dd><a name="index-bindir"></a><br><p>The directory for installing executable programs that users can run.<br>This should normally be <samp>/usr/local/bin</samp>, but write it as<br><samp>$(exec_prefix)/bin</samp>.<br>(If you are using Autoconf, write it as ‘<samp>@bindir@</samp>’.)<br></p><br></dd><br><dt><code>sbindir</code></dt><br><dd><a name="index-sbindir"></a><br><p>The directory for installing executable programs that can be run from<br>the shell, but are only generally useful to system administrators.  This<br>should normally be <samp>/usr/local/sbin</samp>, but write it as<br><samp>$(exec_prefix)/sbin</samp>.<br>(If you are using Autoconf, write it as ‘<samp>@sbindir@</samp>’.)<br></p><br></dd><br><dt><code>libexecdir</code></dt><br><dd><a name="index-libexecdir"></a><br><p>The directory for installing executable programs to be run by other<br>programs rather than by users.  This directory should normally be<br><samp>/usr/local/libexec</samp>, but write it as <samp>$(exec_prefix)/libexec</samp>.<br>(If you are using Autoconf, write it as ‘<samp>@libexecdir@</samp>’.)<br></p><br><p>The definition of ‘<samp>libexecdir</samp>’ is the same for all packages, so<br>you should install your data in a subdirectory thereof.  Most packages<br>install their data under <samp>$(libexecdir)/<var>package-name</var>/</samp>,<br>possibly within additional subdirectories thereof, such as<br><samp>$(libexecdir)/<var>package-name</var>/<var>machine</var>/<var>version</var></samp>.<br></p></dd><br></dl><br><br><p>Data files used by the program during its execution are divided into<br>categories in two ways.<br></p><br><ul><br><li> Some files are normally modified by programs; others are never normally<br>modified (though users may edit some of these).<br><br></li><li> Some files are architecture-independent and can be shared by all<br>machines at a site; some are architecture-dependent and can be shared<br>only by machines of the same kind and operating system; others may never<br>be shared between two machines.<br></li></ul><br><br><p>This makes for six different possibilities.  However, we want to<br>discourage the use of architecture-dependent files, aside from object<br>files and libraries.  It is much cleaner to make other data files<br>architecture-independent, and it is generally not hard.<br></p><br><p>Here are the variables Makefiles should use to specify directories<br>to put these various kinds of files in:<br></p><br><dl compact="compact"><br><dt>‘<samp>datarootdir</samp>’</dt><br><dd><p>The root of the directory tree for read-only architecture-independent<br>data files.  This should normally be <samp>/usr/local/share</samp>, but<br>write it as <samp>$(prefix)/share</samp>.  (If you are using Autoconf, write<br>it as ‘<samp>@datarootdir@</samp>’.)  ‘<samp>datadir</samp>’’s default value is<br>based on this variable; so are ‘<samp>infodir</samp>’, ‘<samp>mandir</samp>’, and<br>others.<br></p><br></dd><br><dt>‘<samp>datadir</samp>’</dt><br><dd><p>The directory for installing idiosyncratic read-only<br>architecture-independent data files for this program.  This is usually<br>the same place as ‘<samp>datarootdir</samp>’, but we use the two separate<br>variables so that you can move these program-specific files without<br>altering the location for Info files, man pages, etc.<br></p><br><p>This should normally be <samp>/usr/local/share</samp>, but write it as<br><samp>$(datarootdir)</samp>.  (If you are using Autoconf, write it as<br>‘<samp>@datadir@</samp>’.)<br></p><br><p>The definition of ‘<samp>datadir</samp>’ is the same for all packages, so you<br>should install your data in a subdirectory thereof.  Most packages<br>install their data under <samp>$(datadir)/<var>package-name</var>/</samp>.<br></p><br></dd><br><dt>‘<samp>sysconfdir</samp>’</dt><br><dd><p>The directory for installing read-only data files that pertain to a<br>single machine–that is to say, files for configuring a host.  Mailer<br>and network configuration files, <samp>/etc/passwd</samp>, and so forth belong<br>here.  All the files in this directory should be ordinary ASCII text<br>files.  This directory should normally be <samp>/usr/local/etc</samp>, but<br>write it as <samp>$(prefix)/etc</samp>.<br>(If you are using Autoconf, write it as ‘<samp>@sysconfdir@</samp>’.)<br></p><br><p>Do not install executables here in this directory (they probably belong<br>in <samp>$(libexecdir)</samp> or <samp>$(sbindir)</samp>).  Also do not install<br>files that are modified in the normal course of their use (programs<br>whose purpose is to change the configuration of the system excluded).<br>Those probably belong in <samp>$(localstatedir)</samp>.<br></p><br></dd><br><dt>‘<samp>sharedstatedir</samp>’</dt><br><dd><p>The directory for installing architecture-independent data files which<br>the programs modify while they run.  This should normally be<br><samp>/usr/local/com</samp>, but write it as <samp>$(prefix)/com</samp>.<br>(If you are using Autoconf, write it as ‘<samp>@sharedstatedir@</samp>’.)<br></p><br></dd><br><dt>‘<samp>localstatedir</samp>’</dt><br><dd><p>The directory for installing data files which the programs modify while<br>they run, and that pertain to one specific machine.  Users should never<br>need to modify files in this directory to configure the package’s<br>operation; put such configuration information in separate files that go<br>in <samp>$(datadir)</samp> or <samp>$(sysconfdir)</samp>.  <samp>$(localstatedir)</samp><br>should normally be <samp>/usr/local/var</samp>, but write it as<br><samp>$(prefix)/var</samp>.<br>(If you are using Autoconf, write it as ‘<samp>@localstatedir@</samp>’.)<br></p><br></dd><br><dt>‘<samp>runstatedir</samp>’</dt><br><dd><p>The directory for installing data files which the programs modify<br>while they run, that pertain to one specific machine, and which need<br>not persist longer than the execution of the program—which is<br>generally long-lived, for example, until the next reboot.  PID files<br>for system daemons are a typical use.  In addition, this directory<br>should not be cleaned except perhaps at reboot, while the general<br><samp>/tmp</samp> (<code>TMPDIR</code>) may be cleaned arbitrarily.  This should<br>normally be <samp>/var/run</samp>, but write it as<br><samp>$(localstatedir)/run</samp>.  Having it as a separate variable allows<br>the use of <samp>/run</samp> if desired, for example.  (If you are using<br>Autoconf 2.70 or later, write it as ‘<samp>@runstatedir@</samp>’.)<br></p></dd><br></dl><br><br><p>These variables specify the directory for installing certain specific<br>types of files, if your program has them.  Every GNU package should<br>have Info files, so every program needs ‘<samp>infodir</samp>’, but not all<br>need ‘<samp>libdir</samp>’ or ‘<samp>lispdir</samp>’.<br></p><br><dl compact="compact"><br><dt>‘<samp>includedir</samp>’</dt><br><dd><p>The directory for installing header files to be included by user<br>programs with the C ‘<samp>#include</samp>’ preprocessor directive.  This<br>should normally be <samp>/usr/local/include</samp>, but write it as<br><samp>$(prefix)/include</samp>.<br>(If you are using Autoconf, write it as ‘<samp>@includedir@</samp>’.)<br></p><br><p>Most compilers other than GCC do not look for header files in directory<br><samp>/usr/local/include</samp>.  So installing the header files this way is<br>only useful with GCC.  Sometimes this is not a problem because some<br>libraries are only really intended to work with GCC.  But some libraries<br>are intended to work with other compilers.  They should install their<br>header files in two places, one specified by <code>includedir</code> and one<br>specified by <code>oldincludedir</code>.<br></p><br></dd><br><dt>‘<samp>oldincludedir</samp>’</dt><br><dd><p>The directory for installing ‘<samp>#include</samp>’ header files for use with<br>compilers other than GCC.  This should normally be <samp>/usr/include</samp>.<br>(If you are using Autoconf, you can write it as ‘<samp>@oldincludedir@</samp>’.)<br></p><br><p>The Makefile commands should check whether the value of<br><code>oldincludedir</code> is empty.  If it is, they should not try to use<br>it; they should cancel the second installation of the header files.<br></p><br><p>A package should not replace an existing header in this directory unless<br>the header came from the same package.  Thus, if your Foo package<br>provides a header file <samp>foo.h</samp>, then it should install the header<br>file in the <code>oldincludedir</code> directory if either (1) there is no<br><samp>foo.h</samp> there or (2) the <samp>foo.h</samp> that exists came from the Foo<br>package.<br></p><br><p>To tell whether <samp>foo.h</samp> came from the Foo package, put a magic<br>string in the file—part of a comment—and <code>grep</code> for that string.<br></p><br></dd><br><dt>‘<samp>docdir</samp>’</dt><br><dd><p>The directory for installing documentation files (other than Info) for<br>this package.  By default, it should be<br><samp>/usr/local/share/doc/<var>yourpkg</var></samp>, but it should be written as<br><samp>$(datarootdir)/doc/<var>yourpkg</var></samp>.  (If you are using Autoconf,<br>write it as ‘<samp>@docdir@</samp>’.)  The <var>yourpkg</var> subdirectory, which<br>may include a version number, prevents collisions among files with<br>common names, such as <samp>README</samp>.<br></p><br></dd><br><dt>‘<samp>infodir</samp>’</dt><br><dd><p>The directory for installing the Info files for this package.  By<br>default, it should be <samp>/usr/local/share/info</samp>, but it should be<br>written as <samp>$(datarootdir)/info</samp>.  (If you are using Autoconf,<br>write it as ‘<samp>@infodir@</samp>’.)  <code>infodir</code> is separate from<br><code>docdir</code> for compatibility with existing practice.<br></p><br></dd><br><dt>‘<samp>htmldir</samp>’</dt><br><dt>‘<samp>dvidir</samp>’</dt><br><dt>‘<samp>pdfdir</samp>’</dt><br><dt>‘<samp>psdir</samp>’</dt><br><dd><p>Directories for installing documentation files in the particular<br>format.  They should all be set to <code>$(docdir)</code> by default.  (If<br>you are using Autoconf, write them as ‘<samp>@htmldir@</samp>’,<br>‘<samp>@dvidir@</samp>’, etc.)  Packages which supply several translations<br>of their documentation should install them in<br>‘<samp>$(htmldir)/</samp>’<var>ll</var>, ‘<samp>$(pdfdir)/</samp>’<var>ll</var>, etc. where<br><var>ll</var> is a locale abbreviation such as ‘<samp>en</samp>’ or ‘<samp>pt_BR</samp>’.<br></p><br></dd><br><dt>‘<samp>libdir</samp>’</dt><br><dd><p>The directory for object files and libraries of object code.  Do not<br>install executables here, they probably ought to go in <samp>$(libexecdir)</samp><br>instead.  The value of <code>libdir</code> should normally be<br><samp>/usr/local/lib</samp>, but write it as <samp>$(exec_prefix)/lib</samp>.<br>(If you are using Autoconf, write it as ‘<samp>@libdir@</samp>’.)<br></p><br></dd><br><dt>‘<samp>lispdir</samp>’</dt><br><dd><p>The directory for installing any Emacs Lisp files in this package.  By<br>default, it should be <samp>/usr/local/share/emacs/site-lisp</samp>, but it<br>should be written as <samp>$(datarootdir)/emacs/site-lisp</samp>.<br></p><br><p>If you are using Autoconf, write the default as ‘<samp>@lispdir@</samp>’.<br>In order to make ‘<samp>@lispdir@</samp>’ work, you need the following lines<br>in your <samp>configure.ac</samp> file:<br></p><br><div class="example"><br><pre class="example">lispdir=’${datarootdir}/emacs/site-lisp’<br>AC_SUBST(lispdir)<br></pre></div><br><br></dd><br><dt>‘<samp>localedir</samp>’</dt><br><dd><p>The directory for installing locale-specific message catalogs for this<br>package.  By default, it should be <samp>/usr/local/share/locale</samp>, but<br>it should be written as <samp>$(datarootdir)/locale</samp>.  (If you are<br>using Autoconf, write it as ‘<samp>@localedir@</samp>’.)  This directory<br>usually has a subdirectory per locale.<br></p></dd><br></dl><br><br><p>Unix-style man pages are installed in one of the following:<br></p><br><dl compact="compact"><br><dt>‘<samp>mandir</samp>’</dt><br><dd><p>The top-level directory for installing the man pages (if any) for this<br>package.  It will normally be <samp>/usr/local/share/man</samp>, but you<br>should write it as <samp>$(datarootdir)/man</samp>.  (If you are using<br>Autoconf, write it as ‘<samp>@mandir@</samp>’.)<br></p><br></dd><br><dt>‘<samp>man1dir</samp>’</dt><br><dd><p>The directory for installing section 1 man pages.  Write it as<br><samp>$(mandir)/man1</samp>.<br></p></dd><br><dt>‘<samp>man2dir</samp>’</dt><br><dd><p>The directory for installing section 2 man pages.  Write it as<br><samp>$(mandir)/man2</samp><br></p></dd><br><dt>‘<samp>…</samp>’</dt><br><dd><br><p><strong>Don’t make the primary documentation for any GNU software be a<br>man page.  Write a manual in Texinfo instead.  Man pages are just for<br>the sake of people running GNU software on Unix, which is a secondary<br>application only.</strong><br></p><br></dd><br><dt>‘<samp>manext</samp>’</dt><br><dd><p>The file name extension for the installed man page.  This should contain<br>a period followed by the appropriate digit; it should normally be ‘<samp>.1</samp>’.<br></p><br></dd><br><dt>‘<samp>man1ext</samp>’</dt><br><dd><p>The file name extension for installed section 1 man pages.<br></p></dd><br><dt>‘<samp>man2ext</samp>’</dt><br><dd><p>The file name extension for installed section 2 man pages.<br></p></dd><br><dt>‘<samp>…</samp>’</dt><br><dd><p>Use these names instead of ‘<samp>manext</samp>’ if the package needs to install man<br>pages in more than one section of the manual.<br></p></dd><br></dl><br><br><p>And finally, you should set the following variable:<br></p><br><dl compact="compact"><br><dt>‘<samp>srcdir</samp>’</dt><br><dd><p>The directory for the sources being compiled.  The value of this<br>variable is normally inserted by the <code>configure</code> shell script.<br>(If you are using Autoconf, use ‘<samp>srcdir = @srcdir@</samp>’.)<br></p></dd><br></dl><br><br><p>For example:<br></p><br><div class="smallexample"><br><pre class="smallexample"># Common prefix for installation directories.<br># NOTE: This directory must exist when you start the install.<br>prefix = /usr/local<br>datarootdir = $(prefix)/share<br>datadir = $(datarootdir)<br>exec_prefix = $(prefix)<br># Where to put the executable for the command ‘gcc’.<br>bindir = $(exec_prefix)/bin<br># Where to put the directories used by the compiler.<br>libexecdir = $(exec_prefix)/libexec<br># Where to put the Info files.<br>infodir = $(datarootdir)/info<br></pre></div><br><br><p>If your program installs a large number of files into one of the<br>standard user-specified directories, it might be useful to group them<br>into a subdirectory particular to that program.  If you do this, you<br>should write the <code>install</code> rule to create these subdirectories.<br></p><br><p>Do not expect the user to include the subdirectory name in the value of<br>any of the variables listed above.  The idea of having a uniform set of<br>variable names for installation directories is to enable the user to<br>specify the exact same values for several different GNU packages.  In<br>order for this to be useful, all the packages must be designed so that<br>they will work sensibly when the user does so.<br></p><br><p>At times, not all of these variables may be implemented in the current<br>release of Autoconf and/or Automake; but as of Autoconf&nbsp;2.60, we<br>believe all of them are.  When any are missing, the descriptions here<br>serve as specifications for what Autoconf will implement.  As a<br>programmer, you can either use a development version of Autoconf or<br>avoid using these variables until a stable release is made which<br>supports them.<br></p><br><br><hr><br><a name="Standard-Targets"></a><br><div class="header"><br><p><br>Next: <a href="#Install-Command-Categories" accesskey="n" rel="next">Install Command Categories</a>, Previous: <a href="#Directory-Variables" accesskey="p" rel="prev">Directory Variables</a>, Up: <a href="#Makefile-Conventions" accesskey="u" rel="up">Makefile Conventions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Standard-Targets-for-Users"></a><br><h3 class="section">16.6 Standard Targets for Users</h3><br><br><p>All GNU programs should have the following targets in their Makefiles:<br></p><br><dl compact="compact"><br><dt>‘<samp>all</samp>’</dt><br><dd><p>Compile the entire program.  This should be the default target.  This<br>target need not rebuild any documentation files; Info files should<br>normally be included in the distribution, and DVI (and other<br>documentation format) files should be made only when explicitly asked<br>for.<br></p><br><p>By default, the Make rules should compile and link with ‘<samp>-g</samp>’, so<br>that executable programs have debugging symbols.  Otherwise, you are<br>essentially helpless in the face of a crash, and it is often far from<br>easy to reproduce with a fresh build.<br></p><br></dd><br><dt>‘<samp>install</samp>’</dt><br><dd><p>Compile the program and copy the executables, libraries, and so on to<br>the file names where they should reside for actual use.  If there is a<br>simple test to verify that a program is properly installed, this target<br>should run that test.<br></p><br><p>Do not strip executables when installing them.  This helps eventual<br>debugging that may be needed later, and nowadays disk space is cheap<br>and dynamic loaders typically ensure debug sections are not loaded during<br>normal execution.  Users that need stripped binaries may invoke the<br><code>install-strip</code> target to do that.<br></p><br><p>If possible, write the <code>install</code> target rule so that it does not<br>modify anything in the directory where the program was built, provided<br>‘<samp>make all</samp>’ has just been done.  This is convenient for building the<br>program under one user name and installing it under another.<br></p><br><p>The commands should create all the directories in which files are to be<br>installed, if they don’t already exist.  This includes the directories<br>specified as the values of the variables <code>prefix</code> and<br><code>exec_prefix</code>, as well as all subdirectories that are needed.<br>One way to do this is by means of an <code>installdirs</code> target<br>as described below.<br></p><br><p>Use ‘<samp>-</samp>’ before any command for installing a man page, so that<br><code>make</code> will ignore any errors.  This is in case there are systems<br>that don’t have the Unix man page documentation system installed.<br></p><br><p>The way to install Info files is to copy them into <samp>$(infodir)</samp><br>with <code>$(INSTALL_DATA)</code> (see <a href="#Command-Variables">Command Variables</a>), and then run<br>the <code>install-info</code> program if it is present.  <code>install-info</code><br>is a program that edits the Info <samp>dir</samp> file to add or update the<br>menu entry for the given Info file; it is part of the Texinfo package.<br></p><br><p>Here is a sample rule to install an Info file that also tries to<br>handle some additional situations, such as <code>install-info</code> not<br>being present.<br></p><br><div class="smallexample"><br><pre class="smallexample">do-install-info: foo.info installdirs<br>        $(NORMAL_INSTALL)<br># Prefer an info file in . to one in srcdir.<br>        if test -f foo.info; then d=.; \<br>         else d=”$(srcdir)”; fi; \<br>        $(INSTALL_DATA) $$d/foo.info \<br>          “$(DESTDIR)$(infodir)/foo.info”<br># Run install-info only if it exists.<br># Use ‘if’ instead of just prepending ‘-‘ to the<br># line so we notice real errors from install-info.<br># Use ‘$(SHELL) -c’ because some shells do not<br># fail gracefully when there is an unknown command.<br>        $(POST_INSTALL)<br>        if $(SHELL) -c ‘install-info –version’ \<br>           &gt;/dev/null 2&gt;&amp;1; then \<br>          install-info –dir-file=”$(DESTDIR)$(infodir)/dir” \<br>                       “$(DESTDIR)$(infodir)/foo.info”; \<br>        else true; fi<br></pre></div><br><br><p>When writing the <code>install</code> target, you must classify all the<br>commands into three categories: normal ones, <em>pre-installation</em><br>commands and <em>post-installation</em> commands.  See <a href="#Install-Command-Categories">Install Command Categories</a>.<br></p><br></dd><br><dt>‘<samp>install-html</samp>’</dt><br><dt>‘<samp>install-dvi</samp>’</dt><br><dt>‘<samp>install-pdf</samp>’</dt><br><dt>‘<samp>install-ps</samp>’</dt><br><dd><p>These targets install documentation in formats other than Info;<br>they’re intended to be called explicitly by the person installing the<br>package, if that format is desired.  GNU prefers Info files, so these<br>must be installed by the <code>install</code> target.<br></p><br><p>When you have many documentation files to install, we recommend that<br>you avoid collisions and clutter by arranging for these targets to<br>install in subdirectories of the appropriate installation directory,<br>such as <code>htmldir</code>.  As one example, if your package has multiple<br>manuals, and you wish to install HTML documentation with many files<br>(such as the “split” mode output by <code>makeinfo –html</code>), you’ll<br>certainly want to use subdirectories, or two nodes with the same name<br>in different manuals will overwrite each other.<br></p><br><p>Please make these <code>install-<var>format</var></code> targets invoke the<br>commands for the <var>format</var> target, for example, by making<br><var>format</var> a dependency.<br></p><br></dd><br><dt>‘<samp>uninstall</samp>’</dt><br><dd><p>Delete all the installed files—the copies that the ‘<samp>install</samp>’<br>and ‘<samp>install-<em></em></samp>’ targets create.<br></p><br><p>This rule should not modify the directories where compilation is done,<br>only the directories where files are installed.<br></p><br><p>The uninstallation commands are divided into three categories, just like<br>the installation commands.  See <a href="#Install-Command-Categories">Install Command Categories</a>.<br></p><br></dd><br><dt>‘<samp>install-strip</samp>’</dt><br><dd><p>Like <code>install</code>, but strip the executable files while installing<br>them.  In simple cases, this target can use the <code>install</code> target in<br>a simple way:<br></p><br><div class="smallexample"><br><pre class="smallexample">install-strip:<br>        $(MAKE) INSTALL_PROGRAM=’$(INSTALL_PROGRAM) -s’ \<br>                install<br></pre></div><br><br><p>But if the package installs scripts as well as real executables, the<br><code>install-strip</code> target can’t just refer to the <code>install</code><br>target; it has to strip the executables but not the scripts.<br></p><br><p><code>install-strip</code> should not strip the executables in the build<br>directory which are being copied for installation.  It should only strip<br>the copies that are installed.<br></p><br><p>Normally we do not recommend stripping an executable unless you are sure<br>the program has no bugs.  However, it can be reasonable to install a<br>stripped executable for actual execution while saving the unstripped<br>executable elsewhere in case there is a bug.<br></p><br></dd><br><dt>‘<samp>clean</samp>’</dt><br><dd><p>Delete all files in the current directory that are normally created by<br>building the program.  Also delete files in other directories if they<br>are created by this makefile.  However, don’t delete the files that<br>record the configuration.  Also preserve files that could be made by<br>building, but normally aren’t because the distribution comes with<br>them.  There is no need to delete parent directories that were created<br>with ‘<samp>mkdir -p</samp>’, since they could have existed anyway.<br></p><br><p>Delete <samp>.dvi</samp> files here if they are not part of the distribution.<br></p><br></dd><br><dt>‘<samp>distclean</samp>’</dt><br><dd><p>Delete all files in the current directory (or created by this<br>makefile) that are created by configuring or building the program.  If<br>you have unpacked the source and built the program without creating<br>any other files, ‘<samp>make distclean</samp>’ should leave only the files<br>that were in the distribution.  However, there is no need to delete<br>parent directories that were created with ‘<samp>mkdir -p</samp>’, since they<br>could have existed anyway.<br></p><br></dd><br><dt>‘<samp>mostlyclean</samp>’</dt><br><dd><p>Like ‘<samp>clean</samp>’, but may refrain from deleting a few files that people<br>normally don’t want to recompile.  For example, the ‘<samp>mostlyclean</samp>’<br>target for GCC does not delete <samp>libgcc.a</samp>, because recompiling it<br>is rarely necessary and takes a lot of time.<br></p><br></dd><br><dt>‘<samp>maintainer-clean</samp>’</dt><br><dd><p>Delete almost everything that can be reconstructed with this Makefile.<br>This typically includes everything deleted by <code>distclean</code>, plus<br>more: C source files produced by Bison, tags tables, Info files, and<br>so on.<br></p><br><p>The reason we say “almost everything” is that running the command<br>‘<samp>make maintainer-clean</samp>’ should not delete <samp>configure</samp> even<br>if <samp>configure</samp> can be remade using a rule in the Makefile.  More<br>generally, ‘<samp>make maintainer-clean</samp>’ should not delete anything<br>that needs to exist in order to run <samp>configure</samp> and then begin to<br>build the program.  Also, there is no need to delete parent<br>directories that were created with ‘<samp>mkdir -p</samp>’, since they could<br>have existed anyway.  These are the only exceptions;<br><code>maintainer-clean</code> should delete everything else that can be<br>rebuilt.<br></p><br><p>The ‘<samp>maintainer-clean</samp>’ target is intended to be used by a maintainer of<br>the package, not by ordinary users.  You may need special tools to<br>reconstruct some of the files that ‘<samp>make maintainer-clean</samp>’ deletes.<br>Since these files are normally included in the distribution, we don’t<br>take care to make them easy to reconstruct.  If you find you need to<br>unpack the full distribution again, don’t blame us.<br></p><br><p>To help make users aware of this, the commands for the special<br><code>maintainer-clean</code> target should start with these two:<br></p><br><div class="smallexample"><br><pre class="smallexample">@echo ‘This command is intended for maintainers to use; it’<br>@echo ‘deletes files that may need special tools to rebuild.’<br></pre></div><br><br></dd><br><dt>‘<samp>TAGS</samp>’</dt><br><dd><p>Update a tags table for this program.<br></p><br></dd><br><dt>‘<samp>info</samp>’</dt><br><dd><p>Generate any Info files needed.  The best way to write the rules is as<br>follows:<br></p><br><div class="smallexample"><br><pre class="smallexample">info: foo.info<br><br>foo.info: foo.texi chap1.texi chap2.texi<br>        $(MAKEINFO) $(srcdir)/foo.texi<br></pre></div><br><br><p>You must define the variable <code>MAKEINFO</code> in the Makefile.  It should<br>run the <code>makeinfo</code> program, which is part of the Texinfo<br>distribution.<br></p><br><p>Normally a GNU distribution comes with Info files, and that means the<br>Info files are present in the source directory.  Therefore, the Make<br>rule for an info file should update it in the source directory.  When<br>users build the package, ordinarily Make will not update the Info files<br>because they will already be up to date.<br></p><br></dd><br><dt>‘<samp>dvi</samp>’</dt><br><dt>‘<samp>html</samp>’</dt><br><dt>‘<samp>pdf</samp>’</dt><br><dt>‘<samp>ps</samp>’</dt><br><dd><p>Generate documentation files in the given format.  These targets<br>should always exist, but any or all can be a no-op if the given output<br>format cannot be generated.  These targets should not be dependencies<br>of the <code>all</code> target; the user must manually invoke them.<br></p><br><p>Here’s an example rule for generating DVI files from Texinfo:<br></p><br><div class="smallexample"><br><pre class="smallexample">dvi: foo.dvi<br><br>foo.dvi: foo.texi chap1.texi chap2.texi<br>        $(TEXI2DVI) $(srcdir)/foo.texi<br></pre></div><br><br><p>You must define the variable <code>TEXI2DVI</code> in the Makefile.  It<br>should run the program <code>texi2dvi</code>, which is part of the Texinfo<br>distribution.  (<code>texi2dvi</code> uses TeX to do the real work of<br>formatting. TeX is not distributed with Texinfo.)  Alternatively,<br>write only the dependencies, and allow GNU <code>make</code> to provide the<br>command.<br></p><br><p>Here’s another example, this one for generating HTML from Texinfo:<br></p><br><div class="smallexample"><br><pre class="smallexample">html: foo.html<br><br>foo.html: foo.texi chap1.texi chap2.texi<br>        $(TEXI2HTML) $(srcdir)/foo.texi<br></pre></div><br><br><p>Again, you would define the variable <code>TEXI2HTML</code> in the Makefile;<br>for example, it might run <code>makeinfo –no-split –html</code><br>(<code>makeinfo</code> is part of the Texinfo distribution).<br></p><br></dd><br><dt>‘<samp>dist</samp>’</dt><br><dd><p>Create a distribution tar file for this program.  The tar file should be<br>set up so that the file names in the tar file start with a subdirectory<br>name which is the name of the package it is a distribution for.  This<br>name can include the version number.<br></p><br><p>For example, the distribution tar file of GCC version 1.40 unpacks into<br>a subdirectory named <samp>gcc-1.40</samp>.<br></p><br><p>The easiest way to do this is to create a subdirectory appropriately<br>named, use <code>ln</code> or <code>cp</code> to install the proper files in it, and<br>then <code>tar</code> that subdirectory.<br></p><br><p>Compress the tar file with <code>gzip</code>.  For example, the actual<br>distribution file for GCC version 1.40 is called <samp>gcc-1.40.tar.gz</samp>.<br>It is ok to support other free compression formats as well.<br></p><br><p>The <code>dist</code> target should explicitly depend on all non-source files<br>that are in the distribution, to make sure they are up to date in the<br>distribution.<br>See <a href="http://www.gnu.org/prep/standards/standards.html#Releases" target="_blank" rel="external">Making Releases</a> in <cite>GNU Coding Standards</cite>.<br></p><br></dd><br><dt>‘<samp>check</samp>’</dt><br><dd><p>Perform self-tests (if any).  The user must build the program before<br>running the tests, but need not install the program; you should write<br>the self-tests so that they work when the program is built but not<br>installed.<br></p></dd><br></dl><br><br><p>The following targets are suggested as conventional names, for programs<br>in which they are useful.<br></p><br><dl compact="compact"><br><dt><code>installcheck</code></dt><br><dd><p>Perform installation tests (if any).  The user must build and install<br>the program before running the tests.  You should not assume that<br><samp>$(bindir)</samp> is in the search path.<br></p><br></dd><br><dt><code>installdirs</code></dt><br><dd><p>It’s useful to add a target named ‘<samp>installdirs</samp>’ to create the<br>directories where files are installed, and their parent directories.<br>There is a script called <samp>mkinstalldirs</samp> which is convenient for<br>this; you can find it in the Gnulib package.<br>You can use a rule like this:<br></p><br><div class="smallexample"><br><pre class="smallexample"># Make sure all installation directories (e.g. $(bindir))<br># actually exist by making them if necessary.<br>installdirs: mkinstalldirs<br>        $(srcdir)/mkinstalldirs $(bindir) $(datadir) \<br>                                $(libdir) $(infodir) \<br>                                $(mandir)<br></pre></div><br><br><p>or, if you wish to support <code>DESTDIR</code> (strongly encouraged),<br></p><br><div class="smallexample"><br><pre class="smallexample"># Make sure all installation directories (e.g. $(bindir))<br># actually exist by making them if necessary.<br>installdirs: mkinstalldirs<br>        $(srcdir)/mkinstalldirs \<br>            $(DESTDIR)$(bindir) $(DESTDIR)$(datadir) \<br>            $(DESTDIR)$(libdir) $(DESTDIR)$(infodir) \<br>            $(DESTDIR)$(mandir)<br></pre></div><br><br><p>This rule should not modify the directories where compilation is done.<br>It should do nothing but create installation directories.<br></p></dd><br></dl><br><br><hr><br><a name="Install-Command-Categories"></a><br><div class="header"><br><p><br>Previous: <a href="#Standard-Targets" accesskey="p" rel="prev">Standard Targets</a>, Up: <a href="#Makefile-Conventions" accesskey="u" rel="up">Makefile Conventions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Install-Command-Categories-1"></a><br><h3 class="section">16.7 Install Command Categories</h3><br><br><a name="index-pre_002dinstallation-commands"></a><br><a name="index-post_002dinstallation-commands"></a><br><p>When writing the <code>install</code> target, you must classify all the<br>commands into three categories: normal ones, <em>pre-installation</em><br>commands and <em>post-installation</em> commands.<br></p><br><p>Normal commands move files into their proper places, and set their<br>modes.  They may not alter any files except the ones that come entirely<br>from the package they belong to.<br></p><br><p>Pre-installation and post-installation commands may alter other files;<br>in particular, they can edit global configuration files or data bases.<br></p><br><p>Pre-installation commands are typically executed before the normal<br>commands, and post-installation commands are typically run after the<br>normal commands.<br></p><br><p>The most common use for a post-installation command is to run<br><code>install-info</code>.  This cannot be done with a normal command, since<br>it alters a file (the Info directory) which does not come entirely and<br>solely from the package being installed.  It is a post-installation<br>command because it needs to be done after the normal command which<br>installs the package’s Info files.<br></p><br><p>Most programs don’t need any pre-installation commands, but we have the<br>feature just in case it is needed.<br></p><br><p>To classify the commands in the <code>install</code> rule into these three<br>categories, insert <em>category lines</em> among them.  A category line<br>specifies the category for the commands that follow.<br></p><br><p>A category line consists of a tab and a reference to a special Make<br>variable, plus an optional comment at the end.  There are three<br>variables you can use, one for each category; the variable name<br>specifies the category.  Category lines are no-ops in ordinary execution<br>because these three Make variables are normally undefined (and you<br><em>should not</em> define them in the makefile).<br></p><br><p>Here are the three possible category lines, each with a comment that<br>explains what it means:<br></p><br><div class="smallexample"><br><pre class="smallexample">        $(PRE_INSTALL)     # <span class="roman">Pre-install commands follow.</span><br>        $(POST_INSTALL)    # <span class="roman">Post-install commands follow.</span><br>        $(NORMAL_INSTALL)  # <span class="roman">Normal commands follow.</span><br></pre></div><br><br><p>If you don’t use a category line at the beginning of the <code>install</code><br>rule, all the commands are classified as normal until the first category<br>line.  If you don’t use any category lines, all the commands are<br>classified as normal.<br></p><br><p>These are the category lines for <code>uninstall</code>:<br></p><br><div class="smallexample"><br><pre class="smallexample">        $(PRE_UNINSTALL)     # <span class="roman">Pre-uninstall commands follow.</span><br>        $(POST_UNINSTALL)    # <span class="roman">Post-uninstall commands follow.</span><br>        $(NORMAL_UNINSTALL)  # <span class="roman">Normal commands follow.</span><br></pre></div><br><br><p>Typically, a pre-uninstall command would be used for deleting entries<br>from the Info directory.<br></p><br><p>If the <code>install</code> or <code>uninstall</code> target has any dependencies<br>which act as subroutines of installation, then you should start<br><em>each</em> dependency’s commands with a category line, and start the<br>main target’s commands with a category line also.  This way, you can<br>ensure that each command is placed in the right category regardless of<br>which of the dependencies actually run.<br></p><br><p>Pre-installation and post-installation commands should not run any<br>programs except for these:<br></p><br><div class="example"><br><pre class="example">[ basename bash cat chgrp chmod chown cmp cp dd diff echo<br>egrep expand expr false fgrep find getopt grep gunzip gzip<br>hostname install install-info kill ldconfig ln ls md5sum<br>mkdir mkfifo mknod mv printenv pwd rm rmdir sed sort tee<br>test touch true uname xargs yes<br></pre></div><br><br><a name="index-binary-packages"></a><br><p>The reason for distinguishing the commands in this way is for the sake<br>of making binary packages.  Typically a binary package contains all the<br>executables and other files that need to be installed, and has its own<br>method of installing them—so it does not need to run the normal<br>installation commands.  But installing the binary package does need to<br>execute the pre-installation and post-installation commands.<br></p><br><p>Programs to build binary packages work by extracting the<br>pre-installation and post-installation commands.  Here is one way of<br>extracting the pre-installation commands (the <samp>-s</samp> option to<br><code>make</code> is needed to silence messages about entering<br>subdirectories):<br></p><br><div class="smallexample"><br><pre class="smallexample">make -s -n install -o all \<br>      PRE_INSTALL=pre-install \<br>      POST_INSTALL=post-install \<br>      NORMAL_INSTALL=normal-install \<br>  | gawk -f pre-install.awk<br></pre></div><br><br><p>where the file <samp>pre-install.awk</samp> could contain this:<br></p><br><div class="smallexample"><br><pre class="smallexample">$0 ~ /^(normal-install|post-install)[ \t]$/ {on = 0}<br>on {print $0}<br>$0 ~ /^pre-install[ \t]<em>$/ {on = 1}<br></em></pre></div><br><br><hr><br><a name="Quick-Reference"></a><br><div class="header"><br><p><br>Next: <a href="#Error-Messages" accesskey="n" rel="next">Error Messages</a>, Previous: <a href="#Makefile-Conventions" accesskey="p" rel="prev">Makefile Conventions</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Quick-Reference-1"></a><br><h2 class="appendix">Appendix A Quick Reference</h2><br><br><p>This appendix summarizes the directives, text manipulation functions,<br>and special variables which GNU <code>make</code> understands.<br>See <a href="#Special-Targets">Special Targets</a>, <a href="#Catalogue-of-Rules">Catalogue of Built-In Rules</a>,<br>and <a href="#Options-Summary">Summary of Options</a>,<br>for other summaries.<br></p><br><p>Here is a summary of the directives GNU <code>make</code> recognizes:<br></p><br><dl compact="compact"><br><dt><code>define <var>variable</var></code></dt><br><dt><code>define <var>variable</var> =</code></dt><br><dt><code>define <var>variable</var> :=</code></dt><br><dt><code>define <var>variable</var> ::=</code></dt><br><dt><code>define <var>variable</var> +=</code></dt><br><dt><code>define <var>variable</var> ?=</code></dt><br><dt><code>endef</code></dt><br><dd><p>Define multi-line variables.<br><br>See <a href="#Multi_002dLine">Multi-Line</a>.<br></p><br></dd><br><dt><code>undefine <var>variable</var></code></dt><br><dd><p>Undefining variables.<br><br>See <a href="#Undefine-Directive">Undefine Directive</a>.<br></p><br></dd><br><dt><code>ifdef <var>variable</var></code></dt><br><dt><code>ifndef <var>variable</var></code></dt><br><dt><code>ifeq (<var>a</var>,<var>b</var>)</code></dt><br><dt><code>ifeq “<var>a</var>“ “<var>b</var>“</code></dt><br><dt><code>ifeq ‘<var>a</var>‘ ‘<var>b</var>‘</code></dt><br><dt><code>ifneq (<var>a</var>,<var>b</var>)</code></dt><br><dt><code>ifneq “<var>a</var>“ “<var>b</var>“</code></dt><br><dt><code>ifneq ‘<var>a</var>‘ ‘<var>b</var>‘</code></dt><br><dt><code>else</code></dt><br><dt><code>endif</code></dt><br><dd><p>Conditionally evaluate part of the makefile.<br><br>See <a href="#Conditionals">Conditionals</a>.<br></p><br></dd><br><dt><code>include <var>file</var></code></dt><br><dt><code>-include <var>file</var></code></dt><br><dt><code>sinclude <var>file</var></code></dt><br><dd><p>Include another makefile.<br><br>See <a href="#Include">Including Other Makefiles</a>.<br></p><br></dd><br><dt><code>override <var>variable-assignment</var></code></dt><br><dd><p>Define a variable, overriding any previous definition, even one from<br>the command line.<br><br>See <a href="#Override-Directive">The <code>override</code> Directive</a>.<br></p><br></dd><br><dt><code>export</code></dt><br><dd><p>Tell <code>make</code> to export all variables to child processes by default.<br><br>See <a href="#Variables_002fRecursion">Communicating Variables to a Sub-<code>make</code></a>.<br></p><br></dd><br><dt><code>export <var>variable</var></code></dt><br><dt><code>export <var>variable-assignment</var></code></dt><br><dt><code>unexport <var>variable</var></code></dt><br><dd><p>Tell <code>make</code> whether or not to export a particular variable to child<br>processes.<br><br>See <a href="#Variables_002fRecursion">Communicating Variables to a Sub-<code>make</code></a>.<br></p><br></dd><br><dt><code>private <var>variable-assignment</var></code></dt><br><dd><p>Do not allow this variable assignment to be inherited by prerequisites.<br><br>See <a href="#Suppressing-Inheritance">Suppressing Inheritance</a>.<br></p><br></dd><br><dt><code>vpath <var>pattern</var> <var>path</var></code></dt><br><dd><p>Specify a search path for files matching a ‘<samp>%</samp>’ pattern.<br><br>See <a href="#Selective-Search">The <code>vpath</code> Directive</a>.<br></p><br></dd><br><dt><code>vpath <var>pattern</var></code></dt><br><dd><p>Remove all search paths previously specified for <var>pattern</var>.<br></p><br></dd><br><dt><code>vpath</code></dt><br><dd><p>Remove all search paths previously specified in any <code>vpath</code><br>directive.<br></p></dd><br></dl><br><br><p>Here is a summary of the built-in functions (see <a href="#Functions">Functions</a>):<br></p><br><dl compact="compact"><br><dt><code>$(subst <var>from</var>,<var>to</var>,<var>text</var>)</code></dt><br><dd><p>Replace <var>from</var> with <var>to</var> in <var>text</var>.<br><br>See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.<br></p><br></dd><br><dt><code>$(patsubst <var>pattern</var>,<var>replacement</var>,<var>text</var>)</code></dt><br><dd><p>Replace words matching <var>pattern</var> with <var>replacement</var> in <var>text</var>.<br><br>See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.<br></p><br></dd><br><dt><code>$(strip <var>string</var>)</code></dt><br><dd><p>Remove excess whitespace characters from <var>string</var>.<br><br>See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.<br></p><br></dd><br><dt><code>$(findstring <var>find</var>,<var>text</var>)</code></dt><br><dd><p>Locate <var>find</var> in <var>text</var>.<br><br>See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.<br></p><br></dd><br><dt><code>$(filter <var>pattern</var>…,<var>text</var>)</code></dt><br><dd><p>Select words in <var>text</var> that match one of the <var>pattern</var> words.<br><br>See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.<br></p><br></dd><br><dt><code>$(filter-out <var>pattern</var>…,<var>text</var>)</code></dt><br><dd><p>Select words in <var>text</var> that <em>do not</em> match any of the <var>pattern</var> words.<br><br>See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.<br></p><br></dd><br><dt><code>$(sort <var>list</var>)</code></dt><br><dd><p>Sort the words in <var>list</var> lexicographically, removing duplicates.<br><br>See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.<br></p><br></dd><br><dt><code>$(word <var>n</var>,<var>text</var>)</code></dt><br><dd><p>Extract the <var>n</var>th word (one-origin) of <var>text</var>.<br><br>See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.<br></p><br></dd><br><dt><code>$(words <var>text</var>)</code></dt><br><dd><p>Count the number of words in <var>text</var>.<br><br>See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.<br></p><br></dd><br><dt><code>$(wordlist <var>s</var>,<var>e</var>,<var>text</var>)</code></dt><br><dd><p>Returns the list of words in <var>text</var> from <var>s</var> to <var>e</var>.<br><br>See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.<br></p><br></dd><br><dt><code>$(firstword <var>names</var>…)</code></dt><br><dd><p>Extract the first word of <var>names</var>.<br><br>See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.<br></p><br></dd><br><dt><code>$(lastword <var>names</var>…)</code></dt><br><dd><p>Extract the last word of <var>names</var>.<br><br>See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.<br></p><br></dd><br><dt><code>$(dir <var>names</var>…)</code></dt><br><dd><p>Extract the directory part of each file name.<br><br>See <a href="#File-Name-Functions">Functions for File Names</a>.<br></p><br></dd><br><dt><code>$(notdir <var>names</var>…)</code></dt><br><dd><p>Extract the non-directory part of each file name.<br><br>See <a href="#File-Name-Functions">Functions for File Names</a>.<br></p><br></dd><br><dt><code>$(suffix <var>names</var>…)</code></dt><br><dd><p>Extract the suffix (the last ‘<samp>.</samp>’ and following characters) of each file name.<br><br>See <a href="#File-Name-Functions">Functions for File Names</a>.<br></p><br></dd><br><dt><code>$(basename <var>names</var>…)</code></dt><br><dd><p>Extract the base name (name without suffix) of each file name.<br><br>See <a href="#File-Name-Functions">Functions for File Names</a>.<br></p><br></dd><br><dt><code>$(addsuffix <var>suffix</var>,<var>names</var>…)</code></dt><br><dd><p>Append <var>suffix</var> to each word in <var>names</var>.<br><br>See <a href="#File-Name-Functions">Functions for File Names</a>.<br></p><br></dd><br><dt><code>$(addprefix <var>prefix</var>,<var>names</var>…)</code></dt><br><dd><p>Prepend <var>prefix</var> to each word in <var>names</var>.<br><br>See <a href="#File-Name-Functions">Functions for File Names</a>.<br></p><br></dd><br><dt><code>$(join <var>list1</var>,<var>list2</var>)</code></dt><br><dd><p>Join two parallel lists of words.<br><br>See <a href="#File-Name-Functions">Functions for File Names</a>.<br></p><br></dd><br><dt><code>$(wildcard <var>pattern</var>…)</code></dt><br><dd><p>Find file names matching a shell file name pattern (<em>not</em> a<br>‘<samp>%</samp>’ pattern).<br><br>See <a href="#Wildcard-Function">The Function <code>wildcard</code></a>.<br></p><br></dd><br><dt><code>$(realpath <var>names</var>…)</code></dt><br><dd><p>For each file name in <var>names</var>, expand to an absolute name that<br>does not contain any <code>.</code>, <code>..</code>, nor symlinks.<br><br>See <a href="#File-Name-Functions">Functions for File Names</a>.<br></p><br></dd><br><dt><code>$(abspath <var>names</var>…)</code></dt><br><dd><p>For each file name in <var>names</var>, expand to an absolute name that<br>does not contain any <code>.</code> or <code>..</code> components, but preserves<br>symlinks.<br><br>See <a href="#File-Name-Functions">Functions for File Names</a>.<br></p><br></dd><br><dt><code>$(error <var>text</var>…)</code></dt><br><dd><p>When this function is evaluated, <code>make</code> generates a fatal error<br>with the message <var>text</var>.<br><br>See <a href="#Make-Control-Functions">Functions That Control Make</a>.<br></p><br></dd><br><dt><code>$(warning <var>text</var>…)</code></dt><br><dd><p>When this function is evaluated, <code>make</code> generates a warning with<br>the message <var>text</var>.<br><br>See <a href="#Make-Control-Functions">Functions That Control Make</a>.<br></p><br></dd><br><dt><code>$(shell <var>command</var>)</code></dt><br><dd><p>Execute a shell command and return its output.<br><br>See <a href="#Shell-Function">The <code>shell</code> Function</a>.<br></p><br></dd><br><dt><code>$(origin <var>variable</var>)</code></dt><br><dd><p>Return a string describing how the <code>make</code> variable <var>variable</var> was<br>defined.<br><br>See <a href="#Origin-Function">The <code>origin</code> Function</a>.<br></p><br></dd><br><dt><code>$(flavor <var>variable</var>)</code></dt><br><dd><p>Return a string describing the flavor of the <code>make</code> variable<br><var>variable</var>.<br><br>See <a href="#Flavor-Function">The <code>flavor</code> Function</a>.<br></p><br></dd><br><dt><code>$(foreach <var>var</var>,<var>words</var>,<var>text</var>)</code></dt><br><dd><p>Evaluate <var>text</var> with <var>var</var> bound to each word in <var>words</var>,<br>and concatenate the results.<br><br>See <a href="#Foreach-Function">The <code>foreach</code> Function</a>.<br></p><br></dd><br><dt><code>$(if <var>condition</var>,<var>then-part</var>[,<var>else-part</var>])</code></dt><br><dd><p>Evaluate the condition <var>condition</var>; if it’s non-empty substitute<br>the expansion of the <var>then-part</var> otherwise substitute the<br>expansion of the <var>else-part</var>.<br><br>See <a href="#Conditional-Functions">Functions for Conditionals</a>.<br></p><br></dd><br><dt><code>$(or <var>condition1</var>[,<var>condition2</var>[,<var>condition3</var>…]])</code></dt><br><dd><p>Evaluate each condition <var>conditionN</var> one at a time; substitute the<br>first non-empty expansion.  If all expansions are empty, substitute<br>the empty string.<br><br>See <a href="#Conditional-Functions">Functions for Conditionals</a>.<br></p><br></dd><br><dt><code>$(and <var>condition1</var>[,<var>condition2</var>[,<var>condition3</var>…]])</code></dt><br><dd><p>Evaluate each condition <var>conditionN</var> one at a time; if any<br>expansion results in the empty string substitute the empty string.  If<br>all expansions result in a non-empty string, substitute the expansion<br>of the last <var>condition</var>.<br><br>See <a href="#Conditional-Functions">Functions for Conditionals</a>.<br></p><br></dd><br><dt><code>$(call <var>var</var>,<var>param</var>,…)</code></dt><br><dd><p>Evaluate the variable <var>var</var> replacing any references to <code>$(1)</code>,<br><code>$(2)</code> with the first, second, etc. <var>param</var> values.<br><br>See <a href="#Call-Function">The <code>call</code> Function</a>.<br></p><br></dd><br><dt><code>$(eval <var>text</var>)</code></dt><br><dd><p>Evaluate <var>text</var> then read the results as makefile commands.<br>Expands to the empty string.<br><br>See <a href="#Eval-Function">The <code>eval</code> Function</a>.<br></p><br></dd><br><dt><code>$(file <var>op</var> <var>filename</var>,<var>text</var>)</code></dt><br><dd><p>Expand the arguments, then open the file <var>filename</var> using mode<br><var>op</var> and write <var>text</var> to that file.<br><br>See <a href="#File-Function">The <code>file</code> Function</a>.<br></p><br></dd><br><dt><code>$(value <var>var</var>)</code></dt><br><dd><p>Evaluates to the contents of the variable <var>var</var>, with no expansion<br>performed on it.<br><br>See <a href="#Value-Function">The <code>value</code> Function</a>.<br></p></dd><br></dl><br><br><p>Here is a summary of the automatic variables.<br>See <a href="#Automatic-Variables">Automatic Variables</a>,<br>for full information.<br></p><br><dl compact="compact"><br><dt><code>$@</code></dt><br><dd><p>The file name of the target.<br></p><br></dd><br><dt><code>$%</code></dt><br><dd><p>The target member name, when the target is an archive member.<br></p><br></dd><br><dt><code>$&lt;</code></dt><br><dd><p>The name of the first prerequisite.<br></p><br></dd><br><dt><code>$?</code></dt><br><dd><p>The names of all the prerequisites that are<br>newer than the target, with spaces between them.<br>For prerequisites which are archive members, only<br>the named member is used (see <a href="#Archives">Archives</a>).<br></p><br></dd><br><dt><code>$^</code></dt><br><dt><code>$+</code></dt><br><dd><p>The names of all the prerequisites, with spaces between them.  For<br>prerequisites which are archive members, only the named member is used<br>(see <a href="#Archives">Archives</a>).  The value of <code>$^</code> omits duplicate<br>prerequisites, while <code>$+</code> retains them and preserves their order.<br></p><br></dd><br><dt><code>$</code></dt><br><dd><p>The stem with which an implicit rule matches<br>(see <a href="#Pattern-Match">How Patterns Match</a>).<br></p><br></dd><br><dt><code>$(@D)</code></dt><br><dt><code>$(@F)</code></dt><br><dd><p>The directory part and the file-within-directory part of <code>$@</code>.<br></p><br></dd><br><dt><code>$(<em>D)</em></code></dt><br><dt><code>$(F)</code></dt><br><dd><p>The directory part and the file-within-directory part of <code>$<em></em></code>.<br></p><br></dd><br><dt><code>$(%D)</code></dt><br><dt><code>$(%F)</code></dt><br><dd><p>The directory part and the file-within-directory part of <code>$%</code>.<br></p><br></dd><br><dt><code>$(&lt;D)</code></dt><br><dt><code>$(&lt;F)</code></dt><br><dd><p>The directory part and the file-within-directory part of <code>$&lt;</code>.<br></p><br></dd><br><dt><code>$(^D)</code></dt><br><dt><code>$(^F)</code></dt><br><dd><p>The directory part and the file-within-directory part of <code>$^</code>.<br></p><br></dd><br><dt><code>$(+D)</code></dt><br><dt><code>$(+F)</code></dt><br><dd><p>The directory part and the file-within-directory part of <code>$+</code>.<br></p><br></dd><br><dt><code>$(?D)</code></dt><br><dt><code>$(?F)</code></dt><br><dd><p>The directory part and the file-within-directory part of <code>$?</code>.<br></p></dd><br></dl><br><br><p>These variables are used specially by GNU <code>make</code>:<br></p><br><dl compact="compact"><br><dt><code>MAKEFILES</code></dt><br><dd><br><p>Makefiles to be read on every invocation of <code>make</code>.<br><br>See <a href="#MAKEFILES-Variable">The Variable <code>MAKEFILES</code></a>.<br></p><br></dd><br><dt><code>VPATH</code></dt><br><dd><br><p>Directory search path for files not found in the current directory.<br><br>See <a href="#General-Search"><code>VPATH</code> Search Path for All Prerequisites</a>.<br></p><br></dd><br><dt><code>SHELL</code></dt><br><dd><br><p>The name of the system default command interpreter, usually <samp>/bin/sh</samp>.<br>You can set <code>SHELL</code> in the makefile to change the shell used to run<br>recipes.  See <a href="#Execution">Recipe Execution</a>.  The <code>SHELL</code><br>variable is handled specially when importing from and exporting to the<br>environment.  See <a href="#Choosing-the-Shell">Choosing the Shell</a>.<br></p><br></dd><br><dt><code>MAKESHELL</code></dt><br><dd><br><p>On MS-DOS only, the name of the command interpreter that is to be used<br>by <code>make</code>.  This value takes precedence over the value of<br><code>SHELL</code>.  See <a href="#Execution">MAKESHELL variable</a>.<br></p><br></dd><br><dt><code>MAKE</code></dt><br><dd><br><p>The name with which <code>make</code> was invoked.  Using this variable in<br>recipes has special meaning.  See <a href="#MAKE-Variable">How the<br><code>MAKE</code> Variable Works</a>.<br></p><br></dd><br><dt><code>MAKE_VERSION</code></dt><br><dd><br><p>The built-in variable ‘<samp>MAKE_VERSION</samp>’ expands to the version<br>number of the GNU <code>make</code> program.<br><a name="index-MAKE_005fVERSION"></a><br></p><br></dd><br><dt><code>MAKE_HOST</code></dt><br><dd><br><p>The built-in variable ‘<samp>MAKE_HOST</samp>’ expands to a string<br>representing the host that GNU <code>make</code> was built to run on.<br><a name="index-MAKE_005fHOST"></a><br></p><br></dd><br><dt><code>MAKELEVEL</code></dt><br><dd><br><p>The number of levels of recursion (sub-<code>make</code>s).<br><br>See <a href="#Variables_002fRecursion">Variables/Recursion</a>.<br></p><br></dd><br><dt><code>MAKEFLAGS</code></dt><br><dd><br><p>The flags given to <code>make</code>.  You can set this in the environment or<br>a makefile to set flags.<br><br>See <a href="#Options_002fRecursion">Communicating Options to a Sub-<code>make</code></a>.<br></p><br><p>It is <em>never</em> appropriate to use <code>MAKEFLAGS</code> directly in a<br>recipe line: its contents may not be quoted correctly for use in the<br>shell.  Always allow recursive <code>make</code>’s to obtain these values<br>through the environment from its parent.<br></p><br></dd><br><dt><code>GNUMAKEFLAGS</code></dt><br><dd><br><p>Other flags parsed by <code>make</code>.  You can set this in the environment or<br>a makefile to set <code>make</code> command-line flags.  GNU <code>make</code><br>never sets this variable itself.  This variable is only needed if<br>you’d like to set GNU <code>make</code>-specific flags in a POSIX-compliant<br>makefile.  This variable will be seen by GNU <code>make</code> and ignored<br>by other <code>make</code> implementations.  It’s not needed if you only use<br>GNU <code>make</code>; just use <code>MAKEFLAGS</code> directly.<br>See <a href="#Options_002fRecursion">Communicating Options to a Sub-<code>make</code></a>.<br></p><br></dd><br><dt><code>MAKECMDGOALS</code></dt><br><dd><br><p>The targets given to <code>make</code> on the command line.  Setting this<br>variable has no effect on the operation of <code>make</code>.<br><br>See <a href="#Goals">Arguments to Specify the Goals</a>.<br></p><br></dd><br><dt><code>CURDIR</code></dt><br><dd><br><p>Set to the absolute pathname of the current working directory (after<br>all <code>-C</code> options are processed, if any).  Setting this variable<br>has no effect on the operation of <code>make</code>.<br><br>See <a href="#Recursion">Recursive Use of <code>make</code></a>.<br></p><br></dd><br><dt><code>SUFFIXES</code></dt><br><dd><br><p>The default list of suffixes before <code>make</code> reads any makefiles.<br></p><br></dd><br><dt><code>.LIBPATTERNS</code></dt><br><dd><p>Defines the naming of the libraries <code>make</code> searches for, and their<br>order.<br><br>See <a href="#Libraries_002fSearch">Directory Search for Link Libraries</a>.<br></p></dd><br></dl><br><br><hr><br><a name="Error-Messages"></a><br><div class="header"><br><p><br>Next: <a href="#Complex-Makefile" accesskey="n" rel="next">Complex Makefile</a>, Previous: <a href="#Quick-Reference" accesskey="p" rel="prev">Quick Reference</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Errors-Generated-by-Make"></a><br><h2 class="appendix">Appendix B Errors Generated by Make</h2><br><br><p>Here is a list of the more common errors you might see generated by<br><code>make</code>, and some information about what they mean and how to fix<br>them.<br></p><br><p>Sometimes <code>make</code> errors are not fatal, especially in the presence<br>of a <code>-</code> prefix on a recipe line, or the <code>-k</code> command line<br>option.  Errors that are fatal are prefixed with the string<br><code></code>.<br></p><br><p>Error messages are all either prefixed with the name of the program<br>(usually ‘<samp>make</samp>’), or, if the error is found in a makefile, the name<br>of the file and line number containing the problem.<br></p><br><p>In the table below, these common prefixes are left off.<br></p><br><dl compact="compact"><br><dt>‘<samp>[<var>foo</var>] Error <var>NN</var></samp>’</dt><br><dt>‘<samp>[<var>foo</var>] <var>signal description</var></samp>’</dt><br><dd><p>These errors are not really <code>make</code> errors at all.  They mean that a<br>program that <code>make</code> invoked as part of a recipe returned a<br>non-0 error code (‘<samp>Error <var>NN</var></samp>’), which <code>make</code> interprets<br>as failure, or it exited in some other abnormal fashion (with a<br>signal of some type).  See <a href="#Errors">Errors in Recipes</a>.<br></p><br><p>If no <code><em>**</em></code> is attached to the message, then the sub-process failed<br>but the rule in the makefile was prefixed with the <code>-</code> special<br>character, so <code>make</code> ignored the error.<br></p><br></dd><br><dt>‘<samp>missing separator.  Stop.</samp>’</dt><br><dt>‘<samp>missing separator (did you mean TAB instead of 8 spaces?).  Stop.</samp>’</dt><br><dd><p>This means that <code>make</code> could not understand much of anything<br>about the makefile line it just read.  GNU <code>make</code> looks for<br>various separators (<code>:</code>, <code>=</code>, recipe prefix characters,<br>etc.) to indicate what kind of line it’s parsing.  This message means<br>it couldn’t find a valid one.<br></p><br><p>One of the most common reasons for this message is that you (or<br>perhaps your oh-so-helpful editor, as is the case with many MS-Windows<br>editors) have attempted to indent your recipe lines with spaces<br>instead of a tab character.  In this case, <code>make</code> will use the<br>second form of the error above.  Remember that every line in the<br>recipe must begin with a tab character (unless you set<br><code>.RECIPEPREFIX</code>; see <a href="#Special-Variables">Special Variables</a>).  Eight spaces do not<br>count.  See <a href="#Rule-Syntax">Rule Syntax</a>.<br></p><br></dd><br><dt>‘<samp>recipe commences before first target.  Stop.</samp>’</dt><br><dt>‘<samp>missing rule before recipe.  Stop.</samp>’</dt><br><dd><p>This means the first thing in the makefile seems to be part of a<br>recipe: it begins with a recipe prefix character and doesn’t appear to<br>be a legal <code>make</code> directive (such as a variable assignment).<br>Recipes must always be associated with a target.<br></p><br><p>The second form is generated if the line has a semicolon as the first<br>non-whitespace character; <code>make</code> interprets this to mean you left<br>out the “target: prerequisite” section of a rule.  See <a href="#Rule-Syntax">Rule Syntax</a>.<br></p><br></dd><br><dt>‘<samp>No rule to make target <code>&lt;var&gt;xxx&lt;/var&gt;&#39;.&lt;/samp&gt;’&lt;/dt&gt;
&lt;dt&gt;‘&lt;samp&gt;No rule to make target</code><var>xxx</var>‘, needed by <code>&lt;var&gt;yyy&lt;/var&gt;&#39;.&lt;/samp&gt;’&lt;/dt&gt;
&lt;dd&gt;&lt;p&gt;This means that &lt;code&gt;make&lt;/code&gt; decided it needed to build a target, but
then couldn’t find any instructions in the makefile on how to do that,
either explicit or implicit (including in the default rules database).
&lt;/p&gt;
&lt;p&gt;If you want that file to be built, you will need to add a rule to your
makefile describing how that target can be built.  Other possible
sources of this problem are typos in the makefile (if that file name is
wrong) or a corrupted source tree (if that file is not supposed to be
built, but rather only a prerequisite).
&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;‘&lt;samp&gt;No targets specified and no makefile found.  Stop.&lt;/samp&gt;’&lt;/dt&gt;
&lt;dt&gt;‘&lt;samp&gt;No targets.  Stop.&lt;/samp&gt;’&lt;/dt&gt;
&lt;dd&gt;&lt;p&gt;The former means that you didn’t provide any targets to be built on the
command line, and &lt;code&gt;make&lt;/code&gt; couldn’t find any makefiles to read in.
The latter means that some makefile was found, but it didn’t contain any
default goal and none was given on the command line.  GNU &lt;code&gt;make&lt;/code&gt;
has nothing to do in these situations.
See &lt;a href=&quot;#Makefile-Arguments&quot;&gt;Arguments to Specify the Makefile&lt;/a&gt;.
&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;‘&lt;samp&gt;Makefile</code><var>xxx</var>‘ was not found.</samp>’</dt><br><dt>‘<samp>Included makefile <code>&lt;var&gt;xxx&lt;/var&gt;&#39; was not found.&lt;/samp&gt;’&lt;/dt&gt;
&lt;dd&gt;&lt;p&gt;A makefile specified on the command line (first form) or included
(second form) was not found.
&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;‘&lt;samp&gt;warning: overriding recipe for target</code><var>xxx</var>‘</samp>’</dt><br><dt>‘<samp>warning: ignoring old recipe for target <code>&lt;var&gt;xxx&lt;/var&gt;&#39;&lt;/samp&gt;’&lt;/dt&gt;
&lt;dd&gt;&lt;p&gt;GNU &lt;code&gt;make&lt;/code&gt; allows only one recipe to be specified per target
(except for double-colon rules).  If you give a recipe for a target
which already has been defined to have one, this warning is issued and
the second recipe will overwrite the first.  See &lt;a href=&quot;#Multiple-Rules&quot;&gt;Multiple Rules for One Target&lt;/a&gt;.
&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;‘&lt;samp&gt;Circular &lt;var&gt;xxx&lt;/var&gt; &amp;lt;- &lt;var&gt;yyy&lt;/var&gt; dependency dropped.&lt;/samp&gt;’&lt;/dt&gt;
&lt;dd&gt;&lt;p&gt;This means that &lt;code&gt;make&lt;/code&gt; detected a loop in the dependency graph:
after tracing the prerequisite &lt;var&gt;yyy&lt;/var&gt; of target &lt;var&gt;xxx&lt;/var&gt;, and its
prerequisites, etc., one of them depended on &lt;var&gt;xxx&lt;/var&gt; again.
&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;‘&lt;samp&gt;Recursive variable</code><var>xxx</var>‘ references itself (eventually).  Stop.</samp>’</dt><br><dd><p>This means you’ve defined a normal (recursive) <code>make</code> variable<br><var>xxx</var> that, when it’s expanded, will refer to itself (<var>xxx</var>).<br>This is not allowed; either use simply-expanded variables (‘<samp>:=</samp>’<br>or ‘<samp>::=</samp>’) or use the append operator (‘<samp>+=</samp>’).  See <a href="#Using-Variables">How to Use Variables</a>.<br></p><br></dd><br><dt>‘<samp>Unterminated variable reference.  Stop.</samp>’</dt><br><dd><p>This means you forgot to provide the proper closing parenthesis<br>or brace in your variable or function reference.<br></p><br></dd><br><dt>‘<samp>insufficient arguments to function <code>&lt;var&gt;xxx&lt;/var&gt;&#39;.  Stop.&lt;/samp&gt;’&lt;/dt&gt;
&lt;dd&gt;&lt;p&gt;This means you haven’t provided the requisite number of arguments for
this function.  See the documentation of the function for a description
of its arguments.  See &lt;a href=&quot;#Functions&quot;&gt;Functions for Transforming Text&lt;/a&gt;.
&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;‘&lt;samp&gt;missing target pattern.  Stop.&lt;/samp&gt;’&lt;/dt&gt;
&lt;dt&gt;‘&lt;samp&gt;multiple target patterns.  Stop.&lt;/samp&gt;’&lt;/dt&gt;
&lt;dt&gt;‘&lt;samp&gt;target pattern contains no</code>%’.  Stop.</samp>’</dt><br><dt>‘<samp>mixed implicit and static pattern rules.  Stop.</samp>’</dt><br><dd><p>These are generated for malformed static pattern rules.  The first<br>means there’s no pattern in the target section of the rule; the second<br>means there are multiple patterns in the target section; the third<br>means the target doesn’t contain a pattern character (<code>%</code>); and<br>the fourth means that all three parts of the static pattern rule<br>contain pattern characters (<code>%</code>)–only the first two parts<br>should.  If you see these errors and you aren’t trying to create a<br>static pattern rule, check the value of any variables in your target<br>and prerequisite lists to be sure they do not contain colons.<br>See <a href="#Static-Usage">Syntax of Static Pattern Rules</a>.<br></p><br></dd><br><dt>‘<samp>warning: -jN forced in submake: disabling jobserver mode.</samp>’</dt><br><dd><p>This warning and the next are generated if <code>make</code> detects error<br>conditions related to parallel processing on systems where<br>sub-<code>make</code>s can communicate (see <a href="#Options_002fRecursion">Communicating Options to a Sub-<code>make</code></a>).  This warning is<br>generated if a recursive invocation of a <code>make</code> process is forced<br>to have ‘<samp>-j<var>N</var></samp>’ in its argument list (where <var>N</var> is greater<br>than one).  This could happen, for example, if you set the <code>MAKE</code><br>environment variable to ‘<samp>make -j2</samp>’.  In this case, the<br>sub-<code>make</code> doesn’t communicate with other <code>make</code> processes and<br>will simply pretend it has two jobs of its own.<br></p><br></dd><br><dt>‘<samp>warning: jobserver unavailable: using -j1.  Add `+’ to parent make rule.</samp>’</dt><br><dd><p>In order for <code>make</code> processes to communicate, the parent will pass<br>information to the child.  Since this could result in problems if the<br>child process isn’t actually a <code>make</code>, the parent will only do this<br>if it thinks the child is a <code>make</code>.  The parent uses the normal<br>algorithms to determine this (see <a href="#MAKE-Variable">How the <code>MAKE</code><br>Variable Works</a>).  If the makefile is constructed such that the parent<br>doesn’t know the child is a <code>make</code> process, then the child will<br>receive only part of the information necessary.  In this case, the child<br>will generate this warning message and proceed with its build in a<br>sequential manner.<br></p><br></dd><br></dl><br><br><hr><br><a name="Complex-Makefile"></a><br><div class="header"><br><p><br>Next: <a href="#GNU-Free-Documentation-License" accesskey="n" rel="next">GNU Free Documentation License</a>, Previous: <a href="#Error-Messages" accesskey="p" rel="prev">Error Messages</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Complex-Makefile-Example"></a><br><h2 class="appendix">Appendix C Complex Makefile Example</h2><br><br><p>Here is the makefile for the GNU <code>tar</code> program.  This is a<br>moderately complex makefile.  The first line uses a <code>#!</code> setting<br>to allow the makefile to be executed directly.<br></p><br><p>Because it is the first target, the default goal is ‘<samp>all</samp>’.  An<br>interesting feature of this makefile is that <samp>testpad.h</samp> is a<br>source file automatically created by the <code>testpad</code> program,<br>itself compiled from <samp>testpad.c</samp>.<br></p><br><p>If you type ‘<samp>make</samp>’ or ‘<samp>make all</samp>’, then <code>make</code> creates<br>the <samp>tar</samp> executable, the <samp>rmt</samp> daemon that provides<br>remote tape access, and the <samp>tar.info</samp> Info file.<br></p><br><p>If you type ‘<samp>make install</samp>’, then <code>make</code> not only creates<br><samp>tar</samp>, <samp>rmt</samp>, and <samp>tar.info</samp>, but also installs<br>them.<br></p><br><p>If you type ‘<samp>make clean</samp>’, then <code>make</code> removes the ‘<samp>.o</samp>’<br>files, and the <samp>tar</samp>, <samp>rmt</samp>, <samp>testpad</samp>,<br><samp>testpad.h</samp>, and <samp>core</samp> files.<br></p><br><p>If you type ‘<samp>make distclean</samp>’, then <code>make</code> not only removes<br>the same files as does ‘<samp>make clean</samp>’ but also the<br><samp>TAGS</samp>, <samp>Makefile</samp>, and <samp>config.status</samp> files.<br>(Although it is not evident, this makefile (and<br><samp>config.status</samp>) is generated by the user with the<br><code>configure</code> program, which is provided in the <code>tar</code><br>distribution, but is not shown here.)<br></p><br><p>If you type ‘<samp>make realclean</samp>’, then <code>make</code> removes the same<br>files as does ‘<samp>make distclean</samp>’ and also removes the Info files<br>generated from <samp>tar.texinfo</samp>.<br></p><br><p>In addition, there are targets <code>shar</code> and <code>dist</code> that create<br>distribution kits.<br></p><br><div class="example"><br><pre class="example">#!/usr/bin/make -f<br># Generated automatically from Makefile.in by configure.<br># Unx Makefile for GNU tar program.<br># Copyright (C) 1991 Free Software Foundation, Inc.<br></pre><pre class="example"><br></pre><pre class="example"># This program is free software; you can redistribute<br># it and/or modify it under the terms of the GNU<br># General Public License …<br>…<br>…<br></pre><pre class="example"><br>SHELL = /bin/sh<br><br>#### Start of system configuration section. ####<br><br>srcdir = .<br><br></pre><pre class="example"># If you use gcc, you should either run the<br># fixincludes script that comes with it or else use<br># gcc with the -traditional option.  Otherwise ioctl<br># calls will be compiled incorrectly on some systems.<br>CC = gcc -O<br>YACC = bison -y<br>INSTALL = /usr/local/bin/install -c<br>INSTALLDATA = /usr/local/bin/install -c -m 644<br></pre><pre class="example"><br># Things you might add to DEFS:<br># -DSTDC_HEADERS        If you have ANSI C headers and<br>#                       libraries.<br># -DPOSIX               If you have POSIX.1 headers and<br>#                       libraries.<br># -DBSD42               If you have sys/dir.h (unless<br>#                       you use -DPOSIX), sys/file.h,<br>#                       and st_blocks in <code>struct stat&#39;.
# -DUSG                 If you have System V/ANSI C
#                       string and memory functions
#                       and headers, sys/sysmacros.h,
#                       fcntl.h, getcwd, no valloc,
#                       and ndir.h (unless
#                       you use -DDIRENT).
# -DNO_MEMORY_H         If USG or STDC_HEADERS but do not
#                       include memory.h.
# -DDIRENT              If USG and you have dirent.h
#                       instead of ndir.h.
# -DSIGTYPE=int         If your signal handlers
#                       return int, not void.
# -DNO_MTIO             If you lack sys/mtio.h
#                       (magtape ioctls).
# -DNO_REMOTE           If you do not have a remote shell
#                       or rexec.
# -DUSE_REXEC           To use rexec for remote tape
#                       operations instead of
#                       forking rsh or remsh.
# -DVPRINTF_MISSING     If you lack vprintf function
#                       (but have _doprnt).
# -DDOPRNT_MISSING      If you lack _doprnt function.
#                       Also need to define
#                       -DVPRINTF_MISSING.
# -DFTIME_MISSING       If you lack ftime system call.
# -DSTRSTR_MISSING      If you lack strstr function.
# -DVALLOC_MISSING      If you lack valloc function.
# -DMKDIR_MISSING       If you lack mkdir and
#                       rmdir system calls.
# -DRENAME_MISSING      If you lack rename system call.
# -DFTRUNCATE_MISSING   If you lack ftruncate
#                       system call.
# -DV7                  On Version 7 Unix (not
#                       tested in a long time).
# -DEMUL_OPEN3          If you lack a 3-argument version
#                       of open, and want to emulate it
#                       with system calls you do have.
# -DNO_OPEN3            If you lack the 3-argument open
#                       and want to disable the tar -k
#                       option instead of emulating open.
# -DXENIX               If you have sys/inode.h
#                       and need it 94 to be included.

DEFS =  -DSIGTYPE=int -DDIRENT -DSTRSTR_MISSING \
        -DVPRINTF_MISSING -DBSD42
# Set this to rtapelib.o unless you defined NO_REMOTE,
# in which case make it empty.
RTAPELIB = rtapelib.o
LIBS =
DEF_AR_FILE = /dev/rmt8
DEFBLOCKING = 20

&lt;/pre&gt;&lt;pre class=&quot;example&quot;&gt;CDEBUG = -g
CFLAGS = $(CDEBUG) -I. -I$(srcdir) $(DEFS) \
        -DDEF_AR_FILE=\&quot;$(DEF_AR_FILE)\&quot; \
        -DDEFBLOCKING=$(DEFBLOCKING)
LDFLAGS = -g
&lt;/pre&gt;&lt;pre class=&quot;example&quot;&gt;
&lt;/pre&gt;&lt;pre class=&quot;example&quot;&gt;prefix = /usr/local
# Prefix for each installed program,
# normally empty or</code>g’.<br>binprefix =<br><br># The directory to install tar in.<br>bindir = $(prefix)/bin<br><br># The directory to install the info files in.<br>infodir = $(prefix)/info<br></pre><pre class="example"><br>#### End of system configuration section. ####<br><br></pre><pre class="example">SRCS_C  = tar.c create.c extract.c buffer.c   \<br>          getoldopt.c update.c gnu.c mangle.c \<br>          version.c list.c names.c diffarch.c \<br>          port.c wildmat.c getopt.c getopt1.c \<br>          regex.c<br>SRCS_Y  = getdate.y<br>SRCS    = $(SRCS_C) $(SRCS_Y)<br>OBJS    = $(SRCS_C:.c=.o) $(SRCS_Y:.y=.o) $(RTAPELIB)<br></pre><pre class="example">AUX =   README COPYING ChangeLog Makefile.in  \<br>        makefile.pc configure configure.in \<br>        tar.texinfo tar.info<em> texinfo.tex \<br>        tar.h port.h open3.h getopt.h regex.h \<br>        rmt.h rmt.c rtapelib.c alloca.c \<br>        msd_dir.h msd_dir.c tcexparg.c \<br>        level-0 level-1 backup-specs testpad.c<br></em></pre><pre class="example"><br>.PHONY: all<br>all:    tar rmt tar.info<br><br></pre><pre class="example">tar:    $(OBJS)<br>        $(CC) $(LDFLAGS) -o $@ $(OBJS) $(LIBS)<br></pre><pre class="example"><br></pre><pre class="example">rmt:    rmt.c<br>        $(CC) $(CFLAGS) $(LDFLAGS) -o $@ rmt.c<br></pre><pre class="example"><br></pre><pre class="example">tar.info: tar.texinfo<br>        makeinfo tar.texinfo<br></pre><pre class="example"><br></pre><pre class="example">.PHONY: install<br>install: all<br>        $(INSTALL) tar $(bindir)/$(binprefix)tar<br>        -test ! -f rmt || $(INSTALL) rmt /etc/rmt<br>        $(INSTALLDATA) $(srcdir)/tar.info $(infodir)<br></pre><pre class="example"><br></pre><pre class="example">$(OBJS): tar.h port.h testpad.h<br>regex.o buffer.o tar.o: regex.h<br># getdate.y has 8 shift/reduce conflicts.<br></pre><pre class="example"><br></pre><pre class="example">testpad.h: testpad<br>        ./testpad<br></pre><pre class="example"><br></pre><pre class="example">testpad: testpad.o<br>        $(CC) -o $@ testpad.o<br></pre><pre class="example"><br></pre><pre class="example">TAGS:   $(SRCS)<br>        etags $(SRCS)<br></pre><pre class="example"><br></pre><pre class="example">.PHONY: clean<br>clean:<br>        rm -f <em>.o tar rmt testpad testpad.h core<br></em></pre><pre class="example"><br></pre><pre class="example">.PHONY: distclean<br>distclean: clean<br>        rm -f TAGS Makefile config.status<br></pre><pre class="example"><br></pre><pre class="example">.PHONY: realclean<br>realclean: distclean<br>        rm -f tar.info<br></pre><pre class="example"><br></pre><pre class="example">.PHONY: shar<br>shar: $(SRCS) $(AUX)<br>        shar $(SRCS) $(AUX) | compress \<br>          &gt; tar-<code>sed -e &#39;/version_string/!d&#39; \
                     -e &#39;s/[^0-9.]*\([0-9.]*\).*/\1/&#39; \
                     -e q
                     version.c</code>.shar.Z<br></pre><pre class="example"><br></pre><pre class="example">.PHONY: dist<br>dist: $(SRCS) $(AUX)<br>        echo tar-<code>sed \
             -e &#39;/version_string/!d&#39; \
             -e &#39;s/[^0-9.]*\([0-9.]*\).*/\1/&#39; \
             -e q
             version.c</code> &gt; .fname<br>        -rm -rf <code>cat .fname</code><br>        mkdir <code>cat .fname</code><br>        ln $(SRCS) $(AUX) <code>cat .fname</code><br>        tar chZf <code>cat .fname</code>.tar.Z <code>cat .fname</code><br>        -rm -rf <code>cat .fname</code> .fname<br></pre><pre class="example"><br></pre><pre class="example">tar.zoo: $(SRCS) $(AUX)<br>        -rm -rf tmp.dir<br>        -mkdir tmp.dir<br>        -rm tar.zoo<br>        for X in $(SRCS) $(AUX) ; do \<br>            echo $$X ; \<br>            sed ‘s/$$/^M/‘ $$X \<br>            &gt; tmp.dir/$$X ; done<br>        cd tmp.dir ; zoo aM ../tar.zoo <em><br>        -rm -rf tmp.dir<br></em></pre></div><br><br><hr><br><a name="GNU-Free-Documentation-License"></a><br><div class="header"><br><p><br>Next: <a href="#Concept-Index" accesskey="n" rel="next">Concept Index</a>, Previous: <a href="#Complex-Makefile" accesskey="p" rel="prev">Complex Makefile</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="GNU-Free-Documentation-License-1"></a><br><h3 class="appendixsec">C.1 GNU Free Documentation License</h3><br><a name="index-FDL_002c-GNU-Free-Documentation-License"></a><br><div align="center">Version 1.3, 3 November 2008<br></div><br><br><div class="display"><br><pre class="display">Copyright © 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.<br><a href="http://fsf.org/" target="_blank" rel="external">http://fsf.org/</a><br><br>Everyone is permitted to copy and distribute verbatim copies<br>of this license document, but changing it is not allowed.<br></pre></div><br><br><ol><br><li> PREAMBLE<br><br><p>The purpose of this License is to make a manual, textbook, or other<br>functional and useful document <em>free</em> in the sense of freedom: to<br>assure everyone the effective freedom to copy and redistribute it,<br>with or without modifying it, either commercially or noncommercially.<br>Secondarily, this License preserves for the author and publisher a way<br>to get credit for their work, while not being considered responsible<br>for modifications made by others.<br></p><br><p>This License is a kind of “copyleft”, which means that derivative<br>works of the document must themselves be free in the same sense.  It<br>complements the GNU General Public License, which is a copyleft<br>license designed for free software.<br></p><br><p>We have designed this License in order to use it for manuals for free<br>software, because free software needs free documentation: a free<br>program should come with manuals providing the same freedoms that the<br>software does.  But this License is not limited to software manuals;<br>it can be used for any textual work, regardless of subject matter or<br>whether it is published as a printed book.  We recommend this License<br>principally for works whose purpose is instruction or reference.<br></p><br></li><li> APPLICABILITY AND DEFINITIONS<br><br><p>This License applies to any manual or other work, in any medium, that<br>contains a notice placed by the copyright holder saying it can be<br>distributed under the terms of this License.  Such a notice grants a<br>world-wide, royalty-free license, unlimited in duration, to use that<br>work under the conditions stated herein.  The “Document”, below,<br>refers to any such manual or work.  Any member of the public is a<br>licensee, and is addressed as “you”.  You accept the license if you<br>copy, modify or distribute the work in a way requiring permission<br>under copyright law.<br></p><br><p>A “Modified Version” of the Document means any work containing the<br>Document or a portion of it, either copied verbatim, or with<br>modifications and/or translated into another language.<br></p><br><p>A “Secondary Section” is a named appendix or a front-matter section<br>of the Document that deals exclusively with the relationship of the<br>publishers or authors of the Document to the Document’s overall<br>subject (or to related matters) and contains nothing that could fall<br>directly within that overall subject.  (Thus, if the Document is in<br>part a textbook of mathematics, a Secondary Section may not explain<br>any mathematics.)  The relationship could be a matter of historical<br>connection with the subject or with related matters, or of legal,<br>commercial, philosophical, ethical or political position regarding<br>them.<br></p><br><p>The “Invariant Sections” are certain Secondary Sections whose titles<br>are designated, as being those of Invariant Sections, in the notice<br>that says that the Document is released under this License.  If a<br>section does not fit the above definition of Secondary then it is not<br>allowed to be designated as Invariant.  The Document may contain zero<br>Invariant Sections.  If the Document does not identify any Invariant<br>Sections then there are none.<br></p><br><p>The “Cover Texts” are certain short passages of text that are listed,<br>as Front-Cover Texts or Back-Cover Texts, in the notice that says that<br>the Document is released under this License.  A Front-Cover Text may<br>be at most 5 words, and a Back-Cover Text may be at most 25 words.<br></p><br><p>A “Transparent” copy of the Document means a machine-readable copy,<br>represented in a format whose specification is available to the<br>general public, that is suitable for revising the document<br>straightforwardly with generic text editors or (for images composed of<br>pixels) generic paint programs or (for drawings) some widely available<br>drawing editor, and that is suitable for input to text formatters or<br>for automatic translation to a variety of formats suitable for input<br>to text formatters.  A copy made in an otherwise Transparent file<br>format whose markup, or absence of markup, has been arranged to thwart<br>or discourage subsequent modification by readers is not Transparent.<br>An image format is not Transparent if used for any substantial amount<br>of text.  A copy that is not “Transparent” is called “Opaque”.<br></p><br><p>Examples of suitable formats for Transparent copies include plain<br>ASCII without markup, Texinfo input format, LaTeX input<br>format, SGML or XML using a publicly available<br>DTD, and standard-conforming simple HTML,<br>PostScript or PDF designed for human modification.  Examples<br>of transparent image formats include PNG, XCF and<br>JPG.  Opaque formats include proprietary formats that can be<br>read and edited only by proprietary word processors, SGML or<br>XML for which the DTD and/or processing tools are<br>not generally available, and the machine-generated HTML,<br>PostScript or PDF produced by some word processors for<br>output purposes only.<br></p><br><p>The “Title Page” means, for a printed book, the title page itself,<br>plus such following pages as are needed to hold, legibly, the material<br>this License requires to appear in the title page.  For works in<br>formats which do not have any title page as such, “Title Page” means<br>the text near the most prominent appearance of the work’s title,<br>preceding the beginning of the body of the text.<br></p><br><p>The “publisher” means any person or entity that distributes copies<br>of the Document to the public.<br></p><br><p>A section “Entitled XYZ” means a named subunit of the Document whose<br>title either is precisely XYZ or contains XYZ in parentheses following<br>text that translates XYZ in another language.  (Here XYZ stands for a<br>specific section name mentioned below, such as “Acknowledgements”,<br>“Dedications”, “Endorsements”, or “History”.)  To “Preserve the Title”<br>of such a section when you modify the Document means that it remains a<br>section “Entitled XYZ” according to this definition.<br></p><br><p>The Document may include Warranty Disclaimers next to the notice which<br>states that this License applies to the Document.  These Warranty<br>Disclaimers are considered to be included by reference in this<br>License, but only as regards disclaiming warranties: any other<br>implication that these Warranty Disclaimers may have is void and has<br>no effect on the meaning of this License.<br></p><br></li><li> VERBATIM COPYING<br><br><p>You may copy and distribute the Document in any medium, either<br>commercially or noncommercially, provided that this License, the<br>copyright notices, and the license notice saying this License applies<br>to the Document are reproduced in all copies, and that you add no other<br>conditions whatsoever to those of this License.  You may not use<br>technical measures to obstruct or control the reading or further<br>copying of the copies you make or distribute.  However, you may accept<br>compensation in exchange for copies.  If you distribute a large enough<br>number of copies you must also follow the conditions in section 3.<br></p><br><p>You may also lend copies, under the same conditions stated above, and<br>you may publicly display copies.<br></p><br></li><li> COPYING IN QUANTITY<br><br><p>If you publish printed copies (or copies in media that commonly have<br>printed covers) of the Document, numbering more than 100, and the<br>Document’s license notice requires Cover Texts, you must enclose the<br>copies in covers that carry, clearly and legibly, all these Cover<br>Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on<br>the back cover.  Both covers must also clearly and legibly identify<br>you as the publisher of these copies.  The front cover must present<br>the full title with all words of the title equally prominent and<br>visible.  You may add other material on the covers in addition.<br>Copying with changes limited to the covers, as long as they preserve<br>the title of the Document and satisfy these conditions, can be treated<br>as verbatim copying in other respects.<br></p><br><p>If the required texts for either cover are too voluminous to fit<br>legibly, you should put the first ones listed (as many as fit<br>reasonably) on the actual cover, and continue the rest onto adjacent<br>pages.<br></p><br><p>If you publish or distribute Opaque copies of the Document numbering<br>more than 100, you must either include a machine-readable Transparent<br>copy along with each Opaque copy, or state in or with each Opaque copy<br>a computer-network location from which the general network-using<br>public has access to download using public-standard network protocols<br>a complete Transparent copy of the Document, free of added material.<br>If you use the latter option, you must take reasonably prudent steps,<br>when you begin distribution of Opaque copies in quantity, to ensure<br>that this Transparent copy will remain thus accessible at the stated<br>location until at least one year after the last time you distribute an<br>Opaque copy (directly or through your agents or retailers) of that<br>edition to the public.<br></p><br><p>It is requested, but not required, that you contact the authors of the<br>Document well before redistributing any large number of copies, to give<br>them a chance to provide you with an updated version of the Document.<br></p><br></li><li> MODIFICATIONS<br><br><p>You may copy and distribute a Modified Version of the Document under<br>the conditions of sections 2 and 3 above, provided that you release<br>the Modified Version under precisely this License, with the Modified<br>Version filling the role of the Document, thus licensing distribution<br>and modification of the Modified Version to whoever possesses a copy<br>of it.  In addition, you must do these things in the Modified Version:<br></p><br><ol><br><li> Use in the Title Page (and on the covers, if any) a title distinct<br>from that of the Document, and from those of previous versions<br>(which should, if there were any, be listed in the History section<br>of the Document).  You may use the same title as a previous version<br>if the original publisher of that version gives permission.<br><br></li><li> List on the Title Page, as authors, one or more persons or entities<br>responsible for authorship of the modifications in the Modified<br>Version, together with at least five of the principal authors of the<br>Document (all of its principal authors, if it has fewer than five),<br>unless they release you from this requirement.<br><br></li><li> State on the Title page the name of the publisher of the<br>Modified Version, as the publisher.<br><br></li><li> Preserve all the copyright notices of the Document.<br><br></li><li> Add an appropriate copyright notice for your modifications<br>adjacent to the other copyright notices.<br><br></li><li> Include, immediately after the copyright notices, a license notice<br>giving the public permission to use the Modified Version under the<br>terms of this License, in the form shown in the Addendum below.<br><br></li><li> Preserve in that license notice the full lists of Invariant Sections<br>and required Cover Texts given in the Document’s license notice.<br><br></li><li> Include an unaltered copy of this License.<br><br></li><li> Preserve the section Entitled “History”, Preserve its Title, and add<br>to it an item stating at least the title, year, new authors, and<br>publisher of the Modified Version as given on the Title Page.  If<br>there is no section Entitled “History” in the Document, create one<br>stating the title, year, authors, and publisher of the Document as<br>given on its Title Page, then add an item describing the Modified<br>Version as stated in the previous sentence.<br><br></li><li> Preserve the network location, if any, given in the Document for<br>public access to a Transparent copy of the Document, and likewise<br>the network locations given in the Document for previous versions<br>it was based on.  These may be placed in the “History” section.<br>You may omit a network location for a work that was published at<br>least four years before the Document itself, or if the original<br>publisher of the version it refers to gives permission.<br><br></li><li> For any section Entitled “Acknowledgements” or “Dedications”, Preserve<br>the Title of the section, and preserve in the section all the<br>substance and tone of each of the contributor acknowledgements and/or<br>dedications given therein.<br><br></li><li> Preserve all the Invariant Sections of the Document,<br>unaltered in their text and in their titles.  Section numbers<br>or the equivalent are not considered part of the section titles.<br><br></li><li> Delete any section Entitled “Endorsements”.  Such a section<br>may not be included in the Modified Version.<br><br></li><li> Do not retitle any existing section to be Entitled “Endorsements” or<br>to conflict in title with any Invariant Section.<br><br></li><li> Preserve any Warranty Disclaimers.<br></li></ol><br><br><p>If the Modified Version includes new front-matter sections or<br>appendices that qualify as Secondary Sections and contain no material<br>copied from the Document, you may at your option designate some or all<br>of these sections as invariant.  To do this, add their titles to the<br>list of Invariant Sections in the Modified Version’s license notice.<br>These titles must be distinct from any other section titles.<br></p><br><p>You may add a section Entitled “Endorsements”, provided it contains<br>nothing but endorsements of your Modified Version by various<br>parties—for example, statements of peer review or that the text has<br>been approved by an organization as the authoritative definition of a<br>standard.<br></p><br><p>You may add a passage of up to five words as a Front-Cover Text, and a<br>passage of up to 25 words as a Back-Cover Text, to the end of the list<br>of Cover Texts in the Modified Version.  Only one passage of<br>Front-Cover Text and one of Back-Cover Text may be added by (or<br>through arrangements made by) any one entity.  If the Document already<br>includes a cover text for the same cover, previously added by you or<br>by arrangement made by the same entity you are acting on behalf of,<br>you may not add another; but you may replace the old one, on explicit<br>permission from the previous publisher that added the old one.<br></p><br><p>The author(s) and publisher(s) of the Document do not by this License<br>give permission to use their names for publicity for or to assert or<br>imply endorsement of any Modified Version.<br></p><br></li><li> COMBINING DOCUMENTS<br><br><p>You may combine the Document with other documents released under this<br>License, under the terms defined in section 4 above for modified<br>versions, provided that you include in the combination all of the<br>Invariant Sections of all of the original documents, unmodified, and<br>list them all as Invariant Sections of your combined work in its<br>license notice, and that you preserve all their Warranty Disclaimers.<br></p><br><p>The combined work need only contain one copy of this License, and<br>multiple identical Invariant Sections may be replaced with a single<br>copy.  If there are multiple Invariant Sections with the same name but<br>different contents, make the title of each such section unique by<br>adding at the end of it, in parentheses, the name of the original<br>author or publisher of that section if known, or else a unique number.<br>Make the same adjustment to the section titles in the list of<br>Invariant Sections in the license notice of the combined work.<br></p><br><p>In the combination, you must combine any sections Entitled “History”<br>in the various original documents, forming one section Entitled<br>“History”; likewise combine any sections Entitled “Acknowledgements”,<br>and any sections Entitled “Dedications”.  You must delete all<br>sections Entitled “Endorsements.”<br></p><br></li><li> COLLECTIONS OF DOCUMENTS<br><br><p>You may make a collection consisting of the Document and other documents<br>released under this License, and replace the individual copies of this<br>License in the various documents with a single copy that is included in<br>the collection, provided that you follow the rules of this License for<br>verbatim copying of each of the documents in all other respects.<br></p><br><p>You may extract a single document from such a collection, and distribute<br>it individually under this License, provided you insert a copy of this<br>License into the extracted document, and follow this License in all<br>other respects regarding verbatim copying of that document.<br></p><br></li><li> AGGREGATION WITH INDEPENDENT WORKS<br><br><p>A compilation of the Document or its derivatives with other separate<br>and independent documents or works, in or on a volume of a storage or<br>distribution medium, is called an “aggregate” if the copyright<br>resulting from the compilation is not used to limit the legal rights<br>of the compilation’s users beyond what the individual works permit.<br>When the Document is included in an aggregate, this License does not<br>apply to the other works in the aggregate which are not themselves<br>derivative works of the Document.<br></p><br><p>If the Cover Text requirement of section 3 is applicable to these<br>copies of the Document, then if the Document is less than one half of<br>the entire aggregate, the Document’s Cover Texts may be placed on<br>covers that bracket the Document within the aggregate, or the<br>electronic equivalent of covers if the Document is in electronic form.<br>Otherwise they must appear on printed covers that bracket the whole<br>aggregate.<br></p><br></li><li> TRANSLATION<br><br><p>Translation is considered a kind of modification, so you may<br>distribute translations of the Document under the terms of section 4.<br>Replacing Invariant Sections with translations requires special<br>permission from their copyright holders, but you may include<br>translations of some or all Invariant Sections in addition to the<br>original versions of these Invariant Sections.  You may include a<br>translation of this License, and all the license notices in the<br>Document, and any Warranty Disclaimers, provided that you also include<br>the original English version of this License and the original versions<br>of those notices and disclaimers.  In case of a disagreement between<br>the translation and the original version of this License or a notice<br>or disclaimer, the original version will prevail.<br></p><br><p>If a section in the Document is Entitled “Acknowledgements”,<br>“Dedications”, or “History”, the requirement (section 4) to Preserve<br>its Title (section 1) will typically require changing the actual<br>title.<br></p><br></li><li> TERMINATION<br><br><p>You may not copy, modify, sublicense, or distribute the Document<br>except as expressly provided under this License.  Any attempt<br>otherwise to copy, modify, sublicense, or distribute it is void, and<br>will automatically terminate your rights under this License.<br></p><br><p>However, if you cease all violation of this License, then your license<br>from a particular copyright holder is reinstated (a) provisionally,<br>unless and until the copyright holder explicitly and finally<br>terminates your license, and (b) permanently, if the copyright holder<br>fails to notify you of the violation by some reasonable means prior to<br>60 days after the cessation.<br></p><br><p>Moreover, your license from a particular copyright holder is<br>reinstated permanently if the copyright holder notifies you of the<br>violation by some reasonable means, this is the first time you have<br>received notice of violation of this License (for any work) from that<br>copyright holder, and you cure the violation prior to 30 days after<br>your receipt of the notice.<br></p><br><p>Termination of your rights under this section does not terminate the<br>licenses of parties who have received copies or rights from you under<br>this License.  If your rights have been terminated and not permanently<br>reinstated, receipt of a copy of some or all of the same material does<br>not give you any rights to use it.<br></p><br></li><li> FUTURE REVISIONS OF THIS LICENSE<br><br><p>The Free Software Foundation may publish new, revised versions<br>of the GNU Free Documentation License from time to time.  Such new<br>versions will be similar in spirit to the present version, but may<br>differ in detail to address new problems or concerns.  See<br><a href="http://www.gnu.org/copyleft/" target="_blank" rel="external">http://www.gnu.org/copyleft/</a>.<br></p><br><p>Each version of the License is given a distinguishing version number.<br>If the Document specifies that a particular numbered version of this<br>License “or any later version” applies to it, you have the option of<br>following the terms and conditions either of that specified version or<br>of any later version that has been published (not as a draft) by the<br>Free Software Foundation.  If the Document does not specify a version<br>number of this License, you may choose any version ever published (not<br>as a draft) by the Free Software Foundation.  If the Document<br>specifies that a proxy can decide which future versions of this<br>License can be used, that proxy’s public statement of acceptance of a<br>version permanently authorizes you to choose that version for the<br>Document.<br></p><br></li><li> RELICENSING<br><br><p>“Massive Multiauthor Collaboration Site” (or “MMC Site”) means any<br>World Wide Web server that publishes copyrightable works and also<br>provides prominent facilities for anybody to edit those works.  A<br>public wiki that anybody can edit is an example of such a server.  A<br>“Massive Multiauthor Collaboration” (or “MMC”) contained in the<br>site means any set of copyrightable works thus published on the MMC<br>site.<br></p><br><p>“CC-BY-SA” means the Creative Commons Attribution-Share Alike 3.0<br>license published by Creative Commons Corporation, a not-for-profit<br>corporation with a principal place of business in San Francisco,<br>California, as well as future copyleft versions of that license<br>published by that same organization.<br></p><br><p>“Incorporate” means to publish or republish a Document, in whole or<br>in part, as part of another Document.<br></p><br><p>An MMC is “eligible for relicensing” if it is licensed under this<br>License, and if all works that were first published under this License<br>somewhere other than this MMC, and subsequently incorporated in whole<br>or in part into the MMC, (1) had no cover texts or invariant sections,<br>and (2) were thus incorporated prior to November 1, 2008.<br></p><br><p>The operator of an MMC Site may republish an MMC contained in the site<br>under CC-BY-SA on the same site at any time before August 1, 2009,<br>provided the MMC is eligible for relicensing.<br></p><br></li></ol><br><br><a name="ADDENDUM_003a-How-to-use-this-License-for-your-documents"></a><br><h3 class="heading">ADDENDUM: How to use this License for your documents</h3><br><br><p>To use this License in a document you have written, include a copy of<br>the License in the document and put the following copyright and<br>license notices just after the title page:<br></p><br><div class="smallexample"><br><pre class="smallexample">  Copyright (C)  <var>year</var>  <var>your name</var>.<br>  Permission is granted to copy, distribute and/or modify this document<br>  under the terms of the GNU Free Documentation License, Version 1.3<br>  or any later version published by the Free Software Foundation;<br>  with no Invariant Sections, no Front-Cover Texts, and no Back-Cover<br>  Texts.  A copy of the license is included in the section entitled ``GNU<br>  Free Documentation License’’.<br></pre></div><br><br><p>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,<br>replace the “with…Texts.” line with this:<br></p><br><div class="smallexample"><br><pre class="smallexample">    with the Invariant Sections being <var>list their titles</var>, with<br>    the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts<br>    being <var>list</var>.<br></pre></div><br><br><p>If you have Invariant Sections without Cover Texts, or some other<br>combination of the three, merge those two alternatives to suit the<br>situation.<br></p><br><p>If your document contains nontrivial examples of program code, we<br>recommend releasing these examples in parallel under your choice of<br>free software license, such as the GNU General Public License,<br>to permit their use in free software.<br></p><br><br><hr><br><a name="Concept-Index"></a><br><div class="header"><br><p><br>Next: <a href="#Name-Index" accesskey="n" rel="next">Name Index</a>, Previous: <a href="#GNU-Free-Documentation-License" accesskey="p" rel="prev">GNU Free Documentation License</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Index-of-Concepts"></a><br><h2 class="unnumbered">Index of Concepts</h2><br><br><table><tbody><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Concept-Index_cp_symbol-1"><b>!</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-2"><b>#</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-3"><b>$</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-4"><b>%</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-5"><b></b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-6"><b>+</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-7"><b>,</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-8"><b>-</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-9"><b>.</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-10"><b>:</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-11"><b>=</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-12"><b>?</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-13"><b>@</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-14"><b>[</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-15"><b>\</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-16"><b>_</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-17"><b>~</b></a><br> &nbsp;<br><br><br><a class="summary-letter" href="#Concept-Index_cp_letter-A"><b>A</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-B"><b>B</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-C"><b>C</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-D"><b>D</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-E"><b>E</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-F"><b>F</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-G"><b>G</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-H"><b>H</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-I"><b>I</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-J"><b>J</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-K"><b>K</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-L"><b>L</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-M"><b>M</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-N"><b>N</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-O"><b>O</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-P"><b>P</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-Q"><b>Q</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-R"><b>R</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-S"><b>S</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-T"><b>T</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-U"><b>U</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-V"><b>V</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-W"><b>W</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-Y"><b>Y</b></a><br> &nbsp;<br></td></tr></tbody></table><br><table class="index-cp" border="0"><br><tbody><tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_symbol-1">!</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0021_003d">!=</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Setting">Setting</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0021_003d_002c-expansion">!=, expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reading-Makefiles">Reading Makefiles</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_symbol-2">#</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0023-_0028comments_0029_002c-in-makefile"><code>#</code> (comments), in makefile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Contents">Makefile Contents</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0023-_0028comments_0029_002c-in-recipes"><code>#</code> (comments), in recipes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Recipe-Syntax">Recipe Syntax</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0023include"><code>#include</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Prerequisites">Automatic Prerequisites</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_symbol-3">$</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_002c-in-function-call"><code>$</code>, in function call</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Syntax-of-Functions">Syntax of Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_002c-in-rules"><code>$</code>, in rules</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rule-Syntax">Rule Syntax</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_002c-in-variable-name"><code>$</code>, in variable name</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Computed-Names">Computed Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_002c-in-variable-reference"><code>$</code>, in variable reference</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reference">Reference</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_symbol-4">%</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0025_002c-in-pattern-rules"><code>%</code>, in pattern rules</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pattern-Intro">Pattern Intro</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0025_002c-quoting-in-patsubst"><code>%</code>, quoting in <code>patsubst</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0025_002c-quoting-in-static-pattern"><code>%</code>, quoting in static pattern</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Static-Usage">Static Usage</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0025_002c-quoting-in-vpath"><code>%</code>, quoting in <code>vpath</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Selective-Search">Selective Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0025_002c-quoting-with-_005c-_0028backslash_0029"><code>%</code>, quoting with <code>\</code> (backslash)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Selective-Search">Selective Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0025_002c-quoting-with-_005c-_0028backslash_0029-1"><code>%</code>, quoting with <code>\</code> (backslash)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Static-Usage">Static Usage</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0025_002c-quoting-with-_005c-_0028backslash_0029-2"><code>%</code>, quoting with <code>\</code> (backslash)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_symbol-5"><em></em></a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002a-_0028wildcard-character_0029"><code></code> (wildcard character)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Wildcards">Wildcards</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_symbol-6">+</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002b_002c-and-define">+, and <code>define</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Canned-Recipes">Canned Recipes</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002b_002c-and-recipe-execution">+, and recipe execution</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instead-of-Execution">Instead of Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002b_002c-and-recipes">+, and recipes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#MAKE-Variable">MAKE Variable</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002b_003d">+=</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Appending">Appending</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002b_003d_002c-expansion">+=, expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reading-Makefiles">Reading Makefiles</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002b_003d_002c-expansion-1">+=, expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reading-Makefiles">Reading Makefiles</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_symbol-7">,</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002cv-_0028RCS-file-extension_0029"><code>,v <span class="roman">(RCS file extension)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_symbol-8">-</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d-_0028in-recipes_0029"><code>-</code> (in recipes)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Errors">Errors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002c-and-define">-, and <code>define</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Canned-Recipes">Canned Recipes</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dalways_002dmake"><code>–always-make</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dassume_002dnew"><code>–assume-new</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instead-of-Execution">Instead of Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dassume_002dnew-1"><code>–assume-new</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dassume_002dnew_002c-and-recursion"><code>–assume-new</code>, and recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dassume_002dold"><code>–assume-old</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Avoiding-Compilation">Avoiding Compilation</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dassume_002dold-1"><code>–assume-old</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dassume_002dold_002c-and-recursion"><code>–assume-old</code>, and recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dcheck_002dsymlink_002dtimes"><code>–check-symlink-times</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002ddebug"><code>–debug</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002ddirectory"><code>–directory</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Recursion">Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002ddirectory-1"><code>–directory</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002ddirectory_002c-and-_002d_002dprint_002ddirectory"><code>–directory</code>, and <code>–print-directory</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#g_t_002dw-Option">-w Option</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002ddirectory_002c-and-recursion"><code>–directory</code>, and recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002ddry_002drun"><code>–dry-run</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Echoing">Echoing</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002ddry_002drun-1"><code>–dry-run</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instead-of-Execution">Instead of Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002ddry_002drun-2"><code>–dry-run</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002denvironment_002doverrides"><code>–environment-overrides</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002deval"><code>–eval</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dfile"><code>–file</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Names">Makefile Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dfile-1"><code>–file</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Arguments">Makefile Arguments</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dfile-2"><code>–file</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dfile_002c-and-recursion"><code>–file</code>, and recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dhelp"><code>–help</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dignore_002derrors"><code>–ignore-errors</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Errors">Errors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dignore_002derrors-1"><code>–ignore-errors</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dinclude_002ddir"><code>–include-dir</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Include">Include</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dinclude_002ddir-1"><code>–include-dir</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002djobs"><code>–jobs</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parallel">Parallel</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002djobs-1"><code>–jobs</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002djobs_002c-and-recursion"><code>–jobs</code>, and recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002djust_002dprint"><code>–just-print</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Echoing">Echoing</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002djust_002dprint-1"><code>–just-print</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instead-of-Execution">Instead of Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002djust_002dprint-2"><code>–just-print</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dkeep_002dgoing"><code>–keep-going</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Errors">Errors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dkeep_002dgoing-1"><code>–keep-going</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Testing">Testing</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dkeep_002dgoing-2"><code>–keep-going</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dload_002daverage"><code>–load-average</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parallel">Parallel</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dload_002daverage-1"><code>–load-average</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dmakefile"><code>–makefile</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Names">Makefile Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dmakefile-1"><code>–makefile</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Arguments">Makefile Arguments</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dmakefile-2"><code>–makefile</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dmax_002dload"><code>–max-load</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parallel">Parallel</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dmax_002dload-1"><code>–max-load</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dnew_002dfile"><code>–new-file</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instead-of-Execution">Instead of Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dnew_002dfile-1"><code>–new-file</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dnew_002dfile_002c-and-recursion"><code>–new-file</code>, and recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dno_002dbuiltin_002drules"><code>–no-builtin-rules</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dno_002dbuiltin_002dvariables"><code>–no-builtin-variables</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dno_002dkeep_002dgoing"><code>–no-keep-going</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dno_002dprint_002ddirectory"><code>–no-print-directory</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#g_t_002dw-Option">-w Option</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dno_002dprint_002ddirectory-1"><code>–no-print-directory</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dold_002dfile"><code>–old-file</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Avoiding-Compilation">Avoiding Compilation</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dold_002dfile-1"><code>–old-file</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dold_002dfile_002c-and-recursion"><code>–old-file</code>, and recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002doutput_002dsync"><code>–output-sync</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parallel-Output">Parallel Output</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002doutput_002dsync-1"><code>–output-sync</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dprint_002ddata_002dbase"><code>–print-data-base</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dprint_002ddirectory"><code>–print-directory</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dprint_002ddirectory_002c-and-_002d_002ddirectory"><code>–print-directory</code>, and <code>–directory</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#g_t_002dw-Option">-w Option</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dprint_002ddirectory_002c-and-recursion"><code>–print-directory</code>, and recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#g_t_002dw-Option">-w Option</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dprint_002ddirectory_002c-disabling"><code>–print-directory</code>, disabling</a>:</td><td>&nbsp;</td><td valign="top"><a href="#g_t_002dw-Option">-w Option</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dquestion"><code>–question</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instead-of-Execution">Instead of Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dquestion-1"><code>–question</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dquiet"><code>–quiet</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Echoing">Echoing</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dquiet-1"><code>–quiet</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002drecon"><code>–recon</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Echoing">Echoing</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002drecon-1"><code>–recon</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instead-of-Execution">Instead of Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002drecon-2"><code>–recon</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dsilent"><code>–silent</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Echoing">Echoing</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dsilent-1"><code>–silent</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dstop"><code>–stop</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dtouch"><code>–touch</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instead-of-Execution">Instead of Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dtouch-1"><code>–touch</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dtouch_002c-and-recursion"><code>–touch</code>, and recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#MAKE-Variable">MAKE Variable</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dtrace"><code>–trace</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dversion"><code>–version</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dwarn_002dundefined_002dvariables"><code>–warn-undefined-variables</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dwhat_002dif"><code>–what-if</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instead-of-Execution">Instead of Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002d_002dwhat_002dif-1"><code>–what-if</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002db"><code>-b</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dB"><code>-B</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dC"><code>-C</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Recursion">Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dC-1"><code>-C</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dC_002c-and-_002dw"><code>-C</code>, and <code>-w</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#g_t_002dw-Option">-w Option</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dC_002c-and-recursion"><code>-C</code>, and recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dd"><code>-d</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002de"><code>-e</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002de-_0028shell-flag_0029"><code>-e</code> (shell flag)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Prerequisites">Automatic Prerequisites</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002df"><code>-f</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Names">Makefile Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002df-1"><code>-f</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Arguments">Makefile Arguments</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002df-2"><code>-f</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002df_002c-and-recursion"><code>-f</code>, and recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dh"><code>-h</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dI"><code>-I</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Include">Include</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002di"><code>-i</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Errors">Errors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002di-1"><code>-i</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dI-1"><code>-I</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dj"><code>-j</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parallel">Parallel</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dj-1"><code>-j</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dj_002c-and-archive-update"><code>-j</code>, and archive update</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Archive-Pitfalls">Archive Pitfalls</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dj_002c-and-recursion"><code>-j</code>, and recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dk"><code>-k</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Errors">Errors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dk-1"><code>-k</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Testing">Testing</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dk-2"><code>-k</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dl"><code>-l</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dL"><code>-L</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dl-_0028library-search_0029"><code>-l</code> (library search)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Libraries_002fSearch">Libraries/Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dl-_0028load-average_0029"><code>-l</code> (load average)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parallel">Parallel</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dm"><code>-m</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dM-_0028to-compiler_0029"><code>-M</code> (to compiler)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Prerequisites">Automatic Prerequisites</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dMM-_0028to-GNU-compiler_0029"><code>-MM</code> (to GNU compiler)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Prerequisites">Automatic Prerequisites</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dn"><code>-n</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Echoing">Echoing</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dn-1"><code>-n</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instead-of-Execution">Instead of Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dn-2"><code>-n</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dO"><code>-O</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parallel-Output">Parallel Output</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002do"><code>-o</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Avoiding-Compilation">Avoiding Compilation</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002do-1"><code>-o</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dO-1"><code>-O</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002do_002c-and-recursion"><code>-o</code>, and recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dp"><code>-p</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dq"><code>-q</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instead-of-Execution">Instead of Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dq-1"><code>-q</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dr"><code>-r</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dR"><code>-R</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002ds"><code>-s</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Echoing">Echoing</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002ds-1"><code>-s</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dS"><code>-S</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dt"><code>-t</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instead-of-Execution">Instead of Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dt-1"><code>-t</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dt_002c-and-recursion"><code>-t</code>, and recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#MAKE-Variable">MAKE Variable</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dv"><code>-v</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dW"><code>-W</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instead-of-Execution">Instead of Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dw"><code>-w</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dW-1"><code>-W</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dw_002c-and-_002dC"><code>-w</code>, and <code>-C</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#g_t_002dw-Option">-w Option</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dW_002c-and-recursion"><code>-W</code>, and recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dw_002c-and-recursion"><code>-w</code>, and recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#g_t_002dw-Option">-w Option</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dw_002c-disabling"><code>-w</code>, disabling</a>:</td><td>&nbsp;</td><td valign="top"><a href="#g_t_002dw-Option">-w Option</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_symbol-9">.</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002ea-_0028archives_0029"><code>.a</code> (archives)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Archive-Suffix-Rules">Archive Suffix Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002ec"><code>.c</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eC"><code>.C</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002ecc"><code>.cc</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002ech"><code>.ch</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002ecpp"><code>.cpp</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002ed"><code>.d</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Prerequisites">Automatic Prerequisites</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002edef"><code>.def</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002edvi"><code>.dvi</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002ef"><code>.f</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eF"><code>.F</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002einfo"><code>.info</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002el"><code>.l</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eLIBPATTERNS_002c-and-link-libraries"><code>.LIBPATTERNS</code>, and link libraries</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Libraries_002fSearch">Libraries/Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eln"><code>.ln</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002emod"><code>.mod</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eo"><code>.o</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eo-1"><code>.o</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eONESHELL_002c-use-of"><code>.ONESHELL</code>, use of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#One-Shell">One Shell</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002ep"><code>.p</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002ePRECIOUS-intermediate-files"><code>.PRECIOUS</code> intermediate files</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Chained-Rules">Chained Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002er"><code>.r</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002es"><code>.s</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eS"><code>.S</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002esh"><code>.sh</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eSHELLFLAGS_002c-value-of"><code>.SHELLFLAGS</code>, value of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Choosing-the-Shell">Choosing the Shell</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002esym"><code>.sym</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002etex"><code>.tex</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002etexi"><code>.texi</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002etexinfo"><code>.texinfo</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002etxinfo"><code>.txinfo</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002ew"><code>.w</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eweb"><code>.web</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002ey"><code>.y</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_symbol-10">:</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_003a_003a-rules-_0028double_002dcolon_0029"><code>::</code> rules (double-colon)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Double_002dColon">Double-Colon</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_003a_003a_003d">::=</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavors">Flavors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_003a_003a_003d-1">::=</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Setting">Setting</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_003a_003d">:=</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavors">Flavors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_003a_003d-1">:=</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Setting">Setting</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_symbol-11">=</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_003d">=</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavors">Flavors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_003d-1">=</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Setting">Setting</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_003d_002c-expansion">=, expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reading-Makefiles">Reading Makefiles</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_symbol-12">?</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_003f-_0028wildcard-character_0029"><code>?</code> (wildcard character)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Wildcards">Wildcards</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_003f_003d">?=</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavors">Flavors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_003f_003d-1">?=</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Setting">Setting</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_003f_003d_002c-expansion">?=, expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reading-Makefiles">Reading Makefiles</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_symbol-13">@</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0040-_0028in-recipes_0029"><code>@</code> (in recipes)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Echoing">Echoing</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0040_002c-and-define">@, and <code>define</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Canned-Recipes">Canned Recipes</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_symbol-14">[</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_005b_2026_005d-_0028wildcard-characters_0029"><code>[…]</code> (wildcard characters)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Wildcards">Wildcards</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_symbol-15">\</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_005c-_0028backslash_0029_002c-for-continuation-lines"><code>\</code> (backslash), for continuation lines</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Simple-Makefile">Simple Makefile</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_005c-_0028backslash_0029_002c-in-recipes"><code>\</code> (backslash), in recipes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Splitting-Recipe-Lines">Splitting Recipe Lines</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_005c-_0028backslash_0029_002c-to-quote-_0025"><code>\</code> (backslash), to quote <code>%</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Selective-Search">Selective Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_005c-_0028backslash_0029_002c-to-quote-_0025-1"><code>\</code> (backslash), to quote <code>%</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Static-Usage">Static Usage</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_005c-_0028backslash_0029_002c-to-quote-_0025-2"><code>\</code> (backslash), to quote <code>%</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_symbol-16">_</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_005f_005f_002eSYMDEF"><code>__.SYMDEF</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Archive-Symbols">Archive Symbols</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_symbol-17">~</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_007e-_0028tilde_0029"><code>~</code> (tilde)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Wildcards">Wildcards</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-A">A</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-abspath">abspath</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-algorithm-for-directory-search">algorithm for directory search</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Search-Algorithm">Search Algorithm</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-all-_0028standard-target_0029"><code>all</code> <span class="roman">(standard target)</span></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Goals">Goals</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-appending-to-variables">appending to variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Appending">Appending</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-ar"><code>ar</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-archive">archive</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Archives">Archives</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-archive-member-targets">archive member targets</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Archive-Members">Archive Members</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-archive-symbol-directory-updating">archive symbol directory updating</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Archive-Symbols">Archive Symbols</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-archive_002c-and-_002dj">archive, and <code>-j</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Archive-Pitfalls">Archive Pitfalls</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-archive_002c-and-parallel-execution">archive, and parallel execution</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Archive-Pitfalls">Archive Pitfalls</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-archive_002c-suffix-rule-for">archive, suffix rule for</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Archive-Suffix-Rules">Archive Suffix Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-Arg-list-too-long">Arg list too long</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-arguments-of-functions">arguments of functions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Syntax-of-Functions">Syntax of Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-as"><code>as</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-as-1"><code>as</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-assembly_002c-rule-to-compile">assembly, rule to compile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-automatic-generation-of-prerequisites">automatic generation of prerequisites</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Include">Include</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-automatic-generation-of-prerequisites-1">automatic generation of prerequisites</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Prerequisites">Automatic Prerequisites</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-automatic-variables">automatic variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-automatic-variables-in-prerequisites">automatic variables in prerequisites</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-B">B</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-backquotes">backquotes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Shell-Function">Shell Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-backslash-_0028_005c_0029_002c-for-continuation-lines">backslash (<code>\</code>), for continuation lines</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Simple-Makefile">Simple Makefile</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-backslash-_0028_005c_0029_002c-in-recipes">backslash (<code>\</code>), in recipes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Splitting-Recipe-Lines">Splitting Recipe Lines</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-backslash-_0028_005c_0029_002c-to-quote-_0025">backslash (<code>\</code>), to quote <code>%</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Selective-Search">Selective Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-backslash-_0028_005c_0029_002c-to-quote-_0025-1">backslash (<code>\</code>), to quote <code>%</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Static-Usage">Static Usage</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-backslash-_0028_005c_0029_002c-to-quote-_0025-2">backslash (<code>\</code>), to quote <code>%</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-backslash-_0028_005c_0029_002c-to-quote-newlines">backslash (<code>\</code>), to quote newlines</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Splitting-Lines">Splitting Lines</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-backslashes-in-pathnames-and-wildcard-expansion">backslashes in pathnames and wildcard expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Wildcard-Pitfall">Wildcard Pitfall</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-basename">basename</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-binary-packages">binary packages</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Install-Command-Categories">Install Command Categories</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-broken-pipe">broken pipe</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parallel-Input">Parallel Input</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-bugs_002c-reporting">bugs, reporting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Bugs">Bugs</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-built_002din-special-targets">built-in special targets</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-C">C</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-C_002b_002b_002c-rule-to-compile">C++, rule to compile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-C_002c-rule-to-compile">C, rule to compile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-canned-recipes">canned recipes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Canned-Recipes">Canned Recipes</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-cc"><code>cc</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-cc-1"><code>cc</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-cd-_0028shell-command_0029"><code>cd</code> (shell command)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Execution">Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-cd-_0028shell-command_0029-1"><code>cd</code> (shell command)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#MAKE-Variable">MAKE Variable</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-chains-of-rules">chains of rules</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Chained-Rules">Chained Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-check-_0028standard-target_0029"><code>check</code> <span class="roman">(standard target)</span></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Goals">Goals</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-clean-_0028standard-target_0029"><code>clean</code> <span class="roman">(standard target)</span></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Goals">Goals</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-clean-target"><code>clean</code> target</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Simple-Makefile">Simple Makefile</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-clean-target-1"><code>clean</code> target</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Cleanup">Cleanup</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-cleaning-up">cleaning up</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Cleanup">Cleanup</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-clobber-_0028standard-target_0029"><code>clobber</code> <span class="roman">(standard target)</span></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Goals">Goals</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-co"><code>co</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-co-1"><code>co</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-combining-rules-by-prerequisite">combining rules by prerequisite</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Combine-By-Prerequisite">Combine By Prerequisite</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-command-expansion">command expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Shell-Function">Shell Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-command-line-variable-definitions_002c-and-recursion">command line variable definitions, and recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-command-line-variables">command line variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overriding">Overriding</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-commands_002c-sequences-of">commands, sequences of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Canned-Recipes">Canned Recipes</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-comments_002c-in-makefile">comments, in makefile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Contents">Makefile Contents</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-comments_002c-in-recipes">comments, in recipes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Recipe-Syntax">Recipe Syntax</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-compatibility">compatibility</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Features">Features</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-compatibility-in-exporting">compatibility in exporting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_002fRecursion">Variables/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-compilation_002c-testing">compilation, testing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Testing">Testing</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-computed-variable-name">computed variable name</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Computed-Names">Computed Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-conditional-expansion">conditional expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Conditional-Functions">Conditional Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-conditional-variable-assignment">conditional variable assignment</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavors">Flavors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-conditionals">conditionals</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Conditionals">Conditionals</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-continuation-lines">continuation lines</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Simple-Makefile">Simple Makefile</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-controlling-make">controlling make</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Make-Control-Functions">Make Control Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-conventions-for-makefiles">conventions for makefiles</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Conventions">Makefile Conventions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-convert-guile-types">convert guile types</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Guile-Types">Guile Types</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-ctangle"><code>ctangle</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-ctangle-1"><code>ctangle</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-cweave"><code>cweave</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-cweave-1"><code>cweave</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-D">D</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-data-base-of-make-rules">data base of <code>make</code> rules</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-deducing-recipes-_0028implicit-rules_0029">deducing recipes (implicit rules)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#make-Deduces">make Deduces</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-default-directories-for-included-makefiles">default directories for included makefiles</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Include">Include</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-default-goal">default goal</a>:</td><td>&nbsp;</td><td valign="top"><a href="#How-Make-Works">How Make Works</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-default-goal-1">default goal</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rules">Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-default-makefile-name">default makefile name</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Names">Makefile Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-default-rules_002c-last_002dresort">default rules, last-resort</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Last-Resort">Last Resort</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-define_002c-expansion">define, expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reading-Makefiles">Reading Makefiles</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-defining-variables-verbatim">defining variables verbatim</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dLine">Multi-Line</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-deletion-of-target-files">deletion of target files</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Errors">Errors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-deletion-of-target-files-1">deletion of target files</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Interrupts">Interrupts</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-directive">directive</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Contents">Makefile Contents</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-directories_002c-creating-installation">directories, creating installation</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Directory-Variables">Directory Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-directories_002c-printing-them">directories, printing them</a>:</td><td>&nbsp;</td><td valign="top"><a href="#g_t_002dw-Option">-w Option</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-directories_002c-updating-archive-symbol">directories, updating archive symbol</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Archive-Symbols">Archive Symbols</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-directory-part">directory part</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-directory-search-_0028VPATH_0029">directory search (<code>VPATH</code>)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Directory-Search">Directory Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-directory-search-_0028VPATH_0029_002c-and-implicit-rules">directory search (<code>VPATH</code>), and implicit rules</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit_002fSearch">Implicit/Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-directory-search-_0028VPATH_0029_002c-and-link-libraries">directory search (<code>VPATH</code>), and link libraries</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Libraries_002fSearch">Libraries/Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-directory-search-_0028VPATH_0029_002c-and-recipes">directory search (<code>VPATH</code>), and recipes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Recipes_002fSearch">Recipes/Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-directory-search-algorithm">directory search algorithm</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Search-Algorithm">Search Algorithm</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-directory-search_002c-traditional-_0028GPATH_0029">directory search, traditional (GPATH)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Search-Algorithm">Search Algorithm</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-dist-_0028standard-target_0029"><code>dist</code> <span class="roman">(standard target)</span></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Goals">Goals</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-distclean-_0028standard-target_0029"><code>distclean</code> <span class="roman">(standard target)</span></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Goals">Goals</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-dollar-sign-_0028_0024_0029_002c-in-function-call">dollar sign (<code>$</code>), in function call</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Syntax-of-Functions">Syntax of Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-dollar-sign-_0028_0024_0029_002c-in-rules">dollar sign (<code>$</code>), in rules</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rule-Syntax">Rule Syntax</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-dollar-sign-_0028_0024_0029_002c-in-variable-name">dollar sign (<code>$</code>), in variable name</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Computed-Names">Computed Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-dollar-sign-_0028_0024_0029_002c-in-variable-reference">dollar sign (<code>$</code>), in variable reference</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reference">Reference</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-DOS_002c-choosing-a-shell-in">DOS, choosing a shell in</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Choosing-the-Shell">Choosing the Shell</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-double_002dcolon-rules">double-colon rules</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Double_002dColon">Double-Colon</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-duplicate-words_002c-removing">duplicate words, removing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-E">E</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-E2BIG">E2BIG</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-echoing-of-recipes">echoing of recipes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Echoing">Echoing</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-editor">editor</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Introduction">Introduction</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-Emacs-_0028M_002dx-compile_0029">Emacs (<code>M-x compile</code>)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Errors">Errors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-empty-recipes">empty recipes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Empty-Recipes">Empty Recipes</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-empty-targets">empty targets</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Empty-Targets">Empty Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-environment">environment</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Environment">Environment</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-environment_002c-and-recursion">environment, and recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_002fRecursion">Variables/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-environment_002c-SHELL-in">environment, <code>SHELL</code> in</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Choosing-the-Shell">Choosing the Shell</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-error_002c-stopping-on">error, stopping on</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Make-Control-Functions">Make Control Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-errors-_0028in-recipes_0029">errors (in recipes)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Errors">Errors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-errors-with-wildcards">errors with wildcards</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Wildcard-Pitfall">Wildcard Pitfall</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-evaluating-makefile-syntax">evaluating makefile syntax</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Eval-Function">Eval Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-example-of-loaded-objects">example of loaded objects</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Loaded-Object-Example">Loaded Object Example</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-example-using-Guile">example using Guile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Guile-Example">Guile Example</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-execution_002c-in-parallel">execution, in parallel</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parallel">Parallel</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-execution_002c-instead-of">execution, instead of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instead-of-Execution">Instead of Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-execution_002c-of-recipes">execution, of recipes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Execution">Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-exit-status-_0028errors_0029">exit status (errors)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Errors">Errors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-exit-status-of-make">exit status of make</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Running">Running</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-expansion_002c-secondary">expansion, secondary</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Secondary-Expansion">Secondary Expansion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-explicit-rule_002c-definition-of">explicit rule, definition of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Contents">Makefile Contents</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-explicit-rule_002c-expansion">explicit rule, expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reading-Makefiles">Reading Makefiles</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-explicit-rules_002c-secondary-expansion-of">explicit rules, secondary expansion of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Secondary-Expansion">Secondary Expansion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-exporting-variables">exporting variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_002fRecursion">Variables/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-extensions_002c-Guile">extensions, Guile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Guile-Integration">Guile Integration</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-extensions_002c-load-directive">extensions, load directive</a>:</td><td>&nbsp;</td><td valign="top"><a href="#load-Directive">load Directive</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-extensions_002c-loading">extensions, loading</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Loading-Objects">Loading Objects</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-F">F</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-f77"><code>f77</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-f77-1"><code>f77</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-FDL_002c-GNU-Free-Documentation-License">FDL, GNU Free Documentation License</a>:</td><td>&nbsp;</td><td valign="top"><a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-features-of-GNU-make">features of GNU <code>make</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Features">Features</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-features_002c-missing">features, missing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Missing">Missing</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-file-name-functions">file name functions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-file-name-of-makefile">file name of makefile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Names">Makefile Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-file-name-of-makefile_002c-how-to-specify">file name of makefile, how to specify</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Names">Makefile Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-file-name-prefix_002c-adding">file name prefix, adding</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-file-name-suffix">file name suffix</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-file-name-suffix_002c-adding">file name suffix, adding</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-file-name-with-wildcards">file name with wildcards</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Wildcards">Wildcards</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-file-name_002c-abspath-of">file name, abspath of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-file-name_002c-basename-of">file name, basename of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-file-name_002c-directory-part">file name, directory part</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-file-name_002c-nondirectory-part">file name, nondirectory part</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-file-name_002c-realpath-of">file name, realpath of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-file_002c-reading-from">file, reading from</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Function">File Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-file_002c-writing-to">file, writing to</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Function">File Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-files_002c-assuming-new">files, assuming new</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instead-of-Execution">Instead of Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-files_002c-assuming-old">files, assuming old</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Avoiding-Compilation">Avoiding Compilation</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-files_002c-avoiding-recompilation-of">files, avoiding recompilation of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Avoiding-Compilation">Avoiding Compilation</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-files_002c-intermediate">files, intermediate</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Chained-Rules">Chained Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-filtering-out-words">filtering out words</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-filtering-words">filtering words</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-finding-strings">finding strings</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-flags">flags</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-flags-for-compilers">flags for compilers</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-flavor-of-variable">flavor of variable</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavor-Function">Flavor Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-flavors-of-variables">flavors of variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavors">Flavors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-FORCE"><code>FORCE</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Force-Targets">Force Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-force-targets">force targets</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Force-Targets">Force Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-Fortran_002c-rule-to-compile">Fortran, rule to compile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-functions">functions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Functions">Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-functions_002c-for-controlling-make">functions, for controlling make</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Make-Control-Functions">Make Control Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-functions_002c-for-file-names">functions, for file names</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-functions_002c-for-text">functions, for text</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-functions_002c-syntax-of">functions, syntax of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Syntax-of-Functions">Syntax of Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-functions_002c-user-defined">functions, user defined</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Call-Function">Call Function</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-G">G</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-g_002b_002b"><code>g++</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-g_002b_002b-1"><code>g++</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-gcc"><code>gcc</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-generating-prerequisites-automatically">generating prerequisites automatically</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Include">Include</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-generating-prerequisites-automatically-1">generating prerequisites automatically</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Prerequisites">Automatic Prerequisites</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-get"><code>get</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-get-1"><code>get</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-globbing-_0028wildcards_0029">globbing (wildcards)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Wildcards">Wildcards</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-goal">goal</a>:</td><td>&nbsp;</td><td valign="top"><a href="#How-Make-Works">How Make Works</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-goal_002c-default">goal, default</a>:</td><td>&nbsp;</td><td valign="top"><a href="#How-Make-Works">How Make Works</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-goal_002c-default-1">goal, default</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rules">Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-goal_002c-how-to-specify">goal, how to specify</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Goals">Goals</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-Guile">Guile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Guile-Function">Guile Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-Guile-1">Guile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Guile-Integration">Guile Integration</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-Guile-example">Guile example</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Guile-Example">Guile Example</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-guile_002c-conversion-of-types">guile, conversion of types</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Guile-Types">Guile Types</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-H">H</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-home-directory">home directory</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Wildcards">Wildcards</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-I">I</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-IEEE-Standard-1003_002e2">IEEE Standard 1003.2</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview">Overview</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-ifdef_002c-expansion">ifdef, expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reading-Makefiles">Reading Makefiles</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-ifeq_002c-expansion">ifeq, expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reading-Makefiles">Reading Makefiles</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-ifndef_002c-expansion">ifndef, expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reading-Makefiles">Reading Makefiles</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-ifneq_002c-expansion">ifneq, expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reading-Makefiles">Reading Makefiles</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-implicit-rule">implicit rule</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Rules">Implicit Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-implicit-rule_002c-and-directory-search">implicit rule, and directory search</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit_002fSearch">Implicit/Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-implicit-rule_002c-and-VPATH">implicit rule, and <code>VPATH</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit_002fSearch">Implicit/Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-implicit-rule_002c-definition-of">implicit rule, definition of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Contents">Makefile Contents</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-implicit-rule_002c-expansion">implicit rule, expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reading-Makefiles">Reading Makefiles</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-implicit-rule_002c-how-to-use">implicit rule, how to use</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Using-Implicit">Using Implicit</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-implicit-rule_002c-introduction-to">implicit rule, introduction to</a>:</td><td>&nbsp;</td><td valign="top"><a href="#make-Deduces">make Deduces</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-implicit-rule_002c-predefined">implicit rule, predefined</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-implicit-rule_002c-search-algorithm">implicit rule, search algorithm</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Rule-Search">Implicit Rule Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-implicit-rules_002c-secondary-expansion-of">implicit rules, secondary expansion of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Secondary-Expansion">Secondary Expansion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-included-makefiles_002c-default-directories">included makefiles, default directories</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Include">Include</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-including-_0028MAKEFILES-variable_0029">including (<code>MAKEFILES</code> variable)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#MAKEFILES-Variable">MAKEFILES Variable</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-including-_0028MAKEFILE_005fLIST-variable_0029">including (<code>MAKEFILE_LIST</code> variable)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Variables">Special Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-including-other-makefiles">including other makefiles</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Include">Include</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-incompatibilities">incompatibilities</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Missing">Missing</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-Info_002c-rule-to-format">Info, rule to format</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-inheritance_002c-suppressing">inheritance, suppressing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Suppressing-Inheritance">Suppressing Inheritance</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-input-during-parallel-execution">input during parallel execution</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parallel-Input">Parallel Input</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-install-_0028standard-target_0029"><code>install</code> <span class="roman">(standard target)</span></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Goals">Goals</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-installation-directories_002c-creating">installation directories, creating</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Directory-Variables">Directory Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-installations_002c-staged">installations, staged</a>:</td><td>&nbsp;</td><td valign="top"><a href="#DESTDIR">DESTDIR</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-interface-for-loaded-objects">interface for loaded objects</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Loaded-Object-API">Loaded Object API</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-intermediate-files">intermediate files</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Chained-Rules">Chained Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-intermediate-files_002c-preserving">intermediate files, preserving</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Chained-Rules">Chained Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-intermediate-targets_002c-explicit">intermediate targets, explicit</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-interrupt">interrupt</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Interrupts">Interrupts</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-J">J</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-job-slots">job slots</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parallel">Parallel</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-job-slots_002c-and-recursion">job slots, and recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-job-slots_002c-sharing">job slots, sharing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Job-Slots">Job Slots</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-jobs_002c-limiting-based-on-load">jobs, limiting based on load</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parallel">Parallel</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-jobserver">jobserver</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Job-Slots">Job Slots</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-jobserver-on-POSIX">jobserver on POSIX</a>:</td><td>&nbsp;</td><td valign="top"><a href="#POSIX-Jobserver">POSIX Jobserver</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-jobserver-on-Windows">jobserver on Windows</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Windows-Jobserver">Windows Jobserver</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-joining-lists-of-words">joining lists of words</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-K">K</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-killing-_0028interruption_0029">killing (interruption)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Interrupts">Interrupts</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-L">L</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-last_002dresort-default-rules">last-resort default rules</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Last-Resort">Last Resort</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-ld"><code>ld</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-lex"><code>lex</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-lex-1"><code>lex</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-Lex_002c-rule-to-run">Lex, rule to run</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-libraries-for-linking_002c-directory-search">libraries for linking, directory search</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Libraries_002fSearch">Libraries/Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-library-archive_002c-suffix-rule-for">library archive, suffix rule for</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Archive-Suffix-Rules">Archive Suffix Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-limiting-jobs-based-on-load">limiting jobs based on load</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parallel">Parallel</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-link-libraries_002c-and-directory-search">link libraries, and directory search</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Libraries_002fSearch">Libraries/Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-link-libraries_002c-patterns-matching">link libraries, patterns matching</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Libraries_002fSearch">Libraries/Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-linking_002c-predefined-rule-for">linking, predefined rule for</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-lint"><code>lint</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-lint-1"><code>lint</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-lint_002c-rule-to-run"><code>lint</code>, rule to run</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-list-of-all-prerequisites">list of all prerequisites</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-list-of-changed-prerequisites">list of changed prerequisites</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-load-average">load average</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parallel">Parallel</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-load-directive">load directive</a>:</td><td>&nbsp;</td><td valign="top"><a href="#load-Directive">load Directive</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-loaded-object-API">loaded object API</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Loaded-Object-API">Loaded Object API</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-loaded-object-example">loaded object example</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Loaded-Object-Example">Loaded Object Example</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-loaded-object-licensing">loaded object licensing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Loaded-Object-API">Loaded Object API</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-loaded-objects">loaded objects</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Loading-Objects">Loading Objects</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-loaded-objects_002c-remaking-of">loaded objects, remaking of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Remaking-Loaded-Objects">Remaking Loaded Objects</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-long-lines_002c-splitting">long lines, splitting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Splitting-Lines">Splitting Lines</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-loops-in-variable-expansion">loops in variable expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavors">Flavors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-lpr-_0028shell-command_0029"><code>lpr</code> (shell command)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Wildcard-Examples">Wildcard Examples</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-lpr-_0028shell-command_0029-1"><code>lpr</code> (shell command)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Empty-Targets">Empty Targets</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-M">M</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-m2c"><code>m2c</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-m2c-1"><code>m2c</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-macro">macro</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Using-Variables">Using Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-make-depend"><code>make depend</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Prerequisites">Automatic Prerequisites</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-make-extensions">make extensions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extending-make">Extending make</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-make-integration">make integration</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Integrating-make">Integrating make</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-make-interface-to-guile">make interface to guile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Guile-Interface">Guile Interface</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-make-procedures-in-guile">make procedures in guile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Guile-Interface">Guile Interface</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-makefile">makefile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Introduction">Introduction</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-makefile-name">makefile name</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Names">Makefile Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-makefile-name_002c-how-to-specify">makefile name, how to specify</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Names">Makefile Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-makefile-rule-parts">makefile rule parts</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rule-Introduction">Rule Introduction</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-makefile-syntax_002c-evaluating">makefile syntax, evaluating</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Eval-Function">Eval Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-makefile_002c-and-MAKEFILES-variable">makefile, and <code>MAKEFILES</code> variable</a>:</td><td>&nbsp;</td><td valign="top"><a href="#MAKEFILES-Variable">MAKEFILES Variable</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-makefile_002c-conventions-for">makefile, conventions for</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Conventions">Makefile Conventions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-makefile_002c-how-make-processes">makefile, how <code>make</code> processes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#How-Make-Works">How Make Works</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-makefile_002c-how-to-write">makefile, how to write</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefiles">Makefiles</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-makefile_002c-including">makefile, including</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Include">Include</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-makefile_002c-overriding">makefile, overriding</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overriding-Makefiles">Overriding Makefiles</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-makefile_002c-parsing">makefile, parsing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reading-Makefiles">Reading Makefiles</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-makefile_002c-remaking-of">makefile, remaking of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Remaking-Makefiles">Remaking Makefiles</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-makefile_002c-simple">makefile, simple</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Simple-Makefile">Simple Makefile</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-makefiles_002c-and-MAKEFILE_005fLIST-variable">makefiles, and <code>MAKEFILE_LIST</code> variable</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Variables">Special Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-makefiles_002c-and-special-variables">makefiles, and special variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Variables">Special Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-makeinfo"><code>makeinfo</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-makeinfo-1"><code>makeinfo</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-match_002danything-rule">match-anything rule</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Match_002dAnything-Rules">Match-Anything Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-match_002danything-rule_002c-used-to-override">match-anything rule, used to override</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overriding-Makefiles">Overriding Makefiles</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-missing-features">missing features</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Missing">Missing</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-mistakes-with-wildcards">mistakes with wildcards</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Wildcard-Pitfall">Wildcard Pitfall</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-modified-variable-reference">modified variable reference</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Substitution-Refs">Substitution Refs</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-Modula_002d2_002c-rule-to-compile">Modula-2, rule to compile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-mostlyclean-_0028standard-target_0029"><code>mostlyclean</code> <span class="roman">(standard target)</span></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Goals">Goals</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-multi_002dline-variable-definition">multi-line variable definition</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dLine">Multi-Line</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-multiple-rules-for-one-target">multiple rules for one target</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multiple-Rules">Multiple Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-multiple-rules-for-one-target-_0028_003a_003a_0029">multiple rules for one target (<code>::</code>)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Double_002dColon">Double-Colon</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-multiple-targets">multiple targets</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multiple-Targets">Multiple Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-multiple-targets_002c-in-pattern-rule">multiple targets, in pattern rule</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pattern-Intro">Pattern Intro</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-N">N</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-name-of-makefile">name of makefile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Names">Makefile Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-name-of-makefile_002c-how-to-specify">name of makefile, how to specify</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Names">Makefile Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-nested-variable-reference">nested variable reference</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Computed-Names">Computed Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-newline_002c-quoting_002c-in-makefile">newline, quoting, in makefile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Simple-Makefile">Simple Makefile</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-newline_002c-quoting_002c-in-recipes">newline, quoting, in recipes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Splitting-Recipe-Lines">Splitting Recipe Lines</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-nondirectory-part">nondirectory part</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-normal-prerequisites">normal prerequisites</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Prerequisite-Types">Prerequisite Types</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-O">O</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-obj"><code>obj</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables-Simplify">Variables Simplify</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-OBJ"><code>OBJ</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables-Simplify">Variables Simplify</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-objects"><code>objects</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables-Simplify">Variables Simplify</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-OBJECTS"><code>OBJECTS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables-Simplify">Variables Simplify</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-objects_002c-loaded">objects, loaded</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Loading-Objects">Loading Objects</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-objs"><code>objs</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables-Simplify">Variables Simplify</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-OBJS"><code>OBJS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables-Simplify">Variables Simplify</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-old_002dfashioned-suffix-rules">old-fashioned suffix rules</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Suffix-Rules">Suffix Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-options">options</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-options_002c-and-recursion">options, and recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-options_002c-setting-from-environment">options, setting from environment</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-options_002c-setting-in-makefiles">options, setting in makefiles</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-order-of-pattern-rules">order of pattern rules</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pattern-Match">Pattern Match</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-order_002donly-prerequisites">order-only prerequisites</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Prerequisite-Types">Prerequisite Types</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-origin-of-variable">origin of variable</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Origin-Function">Origin Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-output-during-parallel-execution">output during parallel execution</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parallel-Output">Parallel Output</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-output-during-parallel-execution-1">output during parallel execution</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-overriding-makefiles">overriding makefiles</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overriding-Makefiles">Overriding Makefiles</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-overriding-variables-with-arguments">overriding variables with arguments</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overriding">Overriding</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-overriding-with-override">overriding with <code>override</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Override-Directive">Override Directive</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-P">P</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-parallel-execution">parallel execution</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parallel">Parallel</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-parallel-execution_002c-and-archive-update">parallel execution, and archive update</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Archive-Pitfalls">Archive Pitfalls</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-parallel-execution_002c-input-during">parallel execution, input during</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parallel-Input">Parallel Input</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-parallel-execution_002c-output-during">parallel execution, output during</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parallel-Output">Parallel Output</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-parallel-execution_002c-output-during-1">parallel execution, output during</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-parallel-execution_002c-overriding">parallel execution, overriding</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-parallel-output-to-terminal">parallel output to terminal</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Terminal-Output">Terminal Output</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-parts-of-makefile-rule">parts of makefile rule</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rule-Introduction">Rule Introduction</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-Pascal_002c-rule-to-compile">Pascal, rule to compile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-pattern-rule">pattern rule</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pattern-Intro">Pattern Intro</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-pattern-rule_002c-expansion">pattern rule, expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reading-Makefiles">Reading Makefiles</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-pattern-rules_002c-order-of">pattern rules, order of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pattern-Match">Pattern Match</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-pattern-rules_002c-static-_0028not-implicit_0029">pattern rules, static (not implicit)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Static-Pattern">Static Pattern</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-pattern-rules_002c-static_002c-syntax-of">pattern rules, static, syntax of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Static-Usage">Static Usage</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-pattern_002dspecific-variables">pattern-specific variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pattern_002dspecific">Pattern-specific</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-pc"><code>pc</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-pc-1"><code>pc</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-phony-targets">phony targets</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Phony-Targets">Phony Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-phony-targets-and-recipe-execution">phony targets and recipe execution</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instead-of-Execution">Instead of Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-pitfalls-of-wildcards">pitfalls of wildcards</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Wildcard-Pitfall">Wildcard Pitfall</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-plugin_005fis_005fGPL_005fcompatible">plugin_is_GPL_compatible</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Loaded-Object-API">Loaded Object API</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-portability">portability</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Features">Features</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-POSIX">POSIX</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview">Overview</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-POSIX-1">POSIX</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-POSIX_002dconforming-mode_002c-setting">POSIX-conforming mode, setting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-post_002dinstallation-commands">post-installation commands</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Install-Command-Categories">Install Command Categories</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-pre_002dinstallation-commands">pre-installation commands</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Install-Command-Categories">Install Command Categories</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-precious-targets">precious targets</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-predefined-rules-and-variables_002c-printing">predefined rules and variables, printing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-prefix_002c-adding">prefix, adding</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-prerequisite">prerequisite</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rules">Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-prerequisite-pattern_002c-implicit">prerequisite pattern, implicit</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pattern-Intro">Pattern Intro</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-prerequisite-pattern_002c-static-_0028not-implicit_0029">prerequisite pattern, static (not implicit)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Static-Usage">Static Usage</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-prerequisite-types">prerequisite types</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Prerequisite-Types">Prerequisite Types</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-prerequisite_002c-expansion">prerequisite, expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reading-Makefiles">Reading Makefiles</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-prerequisites">prerequisites</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rule-Syntax">Rule Syntax</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-prerequisites_002c-and-automatic-variables">prerequisites, and automatic variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-prerequisites_002c-automatic-generation">prerequisites, automatic generation</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Include">Include</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-prerequisites_002c-automatic-generation-1">prerequisites, automatic generation</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Prerequisites">Automatic Prerequisites</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-prerequisites_002c-introduction-to">prerequisites, introduction to</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rule-Introduction">Rule Introduction</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-prerequisites_002c-list-of-all">prerequisites, list of all</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-prerequisites_002c-list-of-changed">prerequisites, list of changed</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-prerequisites_002c-normal">prerequisites, normal</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Prerequisite-Types">Prerequisite Types</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-prerequisites_002c-order_002donly">prerequisites, order-only</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Prerequisite-Types">Prerequisite Types</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-prerequisites_002c-varying-_0028static-pattern_0029">prerequisites, varying (static pattern)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Static-Pattern">Static Pattern</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-preserving-intermediate-files">preserving intermediate files</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Chained-Rules">Chained Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-preserving-with-_002ePRECIOUS">preserving with <code>.PRECIOUS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-preserving-with-_002ePRECIOUS-1">preserving with <code>.PRECIOUS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Chained-Rules">Chained Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-preserving-with-_002eSECONDARY">preserving with <code>.SECONDARY</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-print-_0028standard-target_0029"><code>print</code> <span class="roman">(standard target)</span></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Goals">Goals</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-print-target"><code>print</code> target</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Wildcard-Examples">Wildcard Examples</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-print-target-1"><code>print</code> target</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Empty-Targets">Empty Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-printing-directories">printing directories</a>:</td><td>&nbsp;</td><td valign="top"><a href="#g_t_002dw-Option">-w Option</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-printing-messages">printing messages</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Make-Control-Functions">Make Control Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-printing-of-recipes">printing of recipes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Echoing">Echoing</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-printing-user-warnings">printing user warnings</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Make-Control-Functions">Make Control Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-problems-and-bugs_002c-reporting">problems and bugs, reporting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Bugs">Bugs</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-problems-with-wildcards">problems with wildcards</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Wildcard-Pitfall">Wildcard Pitfall</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-processing-a-makefile">processing a makefile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#How-Make-Works">How Make Works</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-Q">Q</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-question-mode">question mode</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instead-of-Execution">Instead of Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-quoting-_0025_002c-in-patsubst">quoting <code>%</code>, in <code>patsubst</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-quoting-_0025_002c-in-static-pattern">quoting <code>%</code>, in static pattern</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Static-Usage">Static Usage</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-quoting-_0025_002c-in-vpath">quoting <code>%</code>, in <code>vpath</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Selective-Search">Selective Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-quoting-newline_002c-in-makefile">quoting newline, in makefile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Simple-Makefile">Simple Makefile</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-quoting-newline_002c-in-recipes">quoting newline, in recipes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Splitting-Recipe-Lines">Splitting Recipe Lines</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-R">R</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-Ratfor_002c-rule-to-compile">Ratfor, rule to compile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-RCS_002c-rule-to-extract-from">RCS, rule to extract from</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-reading-from-a-file">reading from a file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Function">File Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-reading-makefiles">reading makefiles</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reading-Makefiles">Reading Makefiles</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-README"><code>README</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Names">Makefile Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-realclean-_0028standard-target_0029"><code>realclean</code> <span class="roman">(standard target)</span></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Goals">Goals</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-realpath">realpath</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipe">recipe</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Simple-Makefile">Simple Makefile</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipe-execution_002c-single-invocation">recipe execution, single invocation</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipe-lines_002c-single-shell">recipe lines, single shell</a>:</td><td>&nbsp;</td><td valign="top"><a href="#One-Shell">One Shell</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipe-syntax">recipe syntax</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Recipe-Syntax">Recipe Syntax</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipe_002c-execution">recipe, execution</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Execution">Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipes">recipes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rule-Syntax">Rule Syntax</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipes-1">recipes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Recipes">Recipes</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipes-setting-shell-variables">recipes setting shell variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Execution">Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipes_002c-and-directory-search">recipes, and directory search</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Recipes_002fSearch">Recipes/Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipes_002c-backslash-_0028_005c_0029-in">recipes, backslash (<code>\</code>) in</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Splitting-Recipe-Lines">Splitting Recipe Lines</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipes_002c-canned">recipes, canned</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Canned-Recipes">Canned Recipes</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipes_002c-comments-in">recipes, comments in</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Recipe-Syntax">Recipe Syntax</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipes_002c-echoing">recipes, echoing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Echoing">Echoing</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipes_002c-empty">recipes, empty</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Empty-Recipes">Empty Recipes</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipes_002c-errors-in">recipes, errors in</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Errors">Errors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipes_002c-execution-in-parallel">recipes, execution in parallel</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parallel">Parallel</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipes_002c-how-to-write">recipes, how to write</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Recipes">Recipes</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipes_002c-instead-of-executing">recipes, instead of executing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instead-of-Execution">Instead of Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipes_002c-introduction-to">recipes, introduction to</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rule-Introduction">Rule Introduction</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipes_002c-quoting-newlines-in">recipes, quoting newlines in</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Splitting-Recipe-Lines">Splitting Recipe Lines</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipes_002c-splitting">recipes, splitting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Splitting-Recipe-Lines">Splitting Recipe Lines</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recipes_002c-using-variables-in">recipes, using variables in</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables-in-Recipes">Variables in Recipes</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recompilation">recompilation</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Introduction">Introduction</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recompilation_002c-avoiding">recompilation, avoiding</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Avoiding-Compilation">Avoiding Compilation</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recording-events-with-empty-targets">recording events with empty targets</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Empty-Targets">Empty Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recursion">recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Recursion">Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recursion_002c-and-_002dC">recursion, and <code>-C</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recursion_002c-and-_002df">recursion, and <code>-f</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recursion_002c-and-_002dj">recursion, and <code>-j</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recursion_002c-and-_002do">recursion, and <code>-o</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recursion_002c-and-_002dt">recursion, and <code>-t</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#MAKE-Variable">MAKE Variable</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recursion_002c-and-_002dW">recursion, and <code>-W</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recursion_002c-and-_002dw">recursion, and <code>-w</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#g_t_002dw-Option">-w Option</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recursion_002c-and-command-line-variable-definitions">recursion, and command line variable definitions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recursion_002c-and-environment">recursion, and environment</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_002fRecursion">Variables/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recursion_002c-and-MAKE-variable">recursion, and <code>MAKE</code> variable</a>:</td><td>&nbsp;</td><td valign="top"><a href="#MAKE-Variable">MAKE Variable</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recursion_002c-and-MAKEFILES-variable">recursion, and <code>MAKEFILES</code> variable</a>:</td><td>&nbsp;</td><td valign="top"><a href="#MAKEFILES-Variable">MAKEFILES Variable</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recursion_002c-and-options">recursion, and options</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recursion_002c-and-printing-directories">recursion, and printing directories</a>:</td><td>&nbsp;</td><td valign="top"><a href="#g_t_002dw-Option">-w Option</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recursion_002c-and-variables">recursion, and variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_002fRecursion">Variables/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recursion_002c-level-of">recursion, level of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_002fRecursion">Variables/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recursive-variable-expansion">recursive variable expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Using-Variables">Using Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recursive-variable-expansion-1">recursive variable expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavors">Flavors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-recursively-expanded-variables">recursively expanded variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavors">Flavors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-reference-to-variables">reference to variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reference">Reference</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-reference-to-variables-1">reference to variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Advanced">Advanced</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-relinking">relinking</a>:</td><td>&nbsp;</td><td valign="top"><a href="#How-Make-Works">How Make Works</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-remaking-loaded-objects">remaking loaded objects</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Remaking-Loaded-Objects">Remaking Loaded Objects</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-remaking-makefiles">remaking makefiles</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Remaking-Makefiles">Remaking Makefiles</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-removal-of-target-files">removal of target files</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Errors">Errors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-removal-of-target-files-1">removal of target files</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Interrupts">Interrupts</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-removing-duplicate-words">removing duplicate words</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-removing-targets-on-failure">removing targets on failure</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-removing_002c-to-clean-up">removing, to clean up</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Cleanup">Cleanup</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-reporting-bugs">reporting bugs</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Bugs">Bugs</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rm"><code>rm</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rm-_0028shell-command_0029"><code>rm</code> (shell command)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Simple-Makefile">Simple Makefile</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rm-_0028shell-command_0029-1"><code>rm</code> (shell command)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Wildcard-Examples">Wildcard Examples</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rm-_0028shell-command_0029-2"><code>rm</code> (shell command)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Phony-Targets">Phony Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rm-_0028shell-command_0029-3"><code>rm</code> (shell command)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Errors">Errors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rule-prerequisites">rule prerequisites</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rule-Syntax">Rule Syntax</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rule-syntax">rule syntax</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rule-Syntax">Rule Syntax</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rule-targets">rule targets</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rule-Syntax">Rule Syntax</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rule_002c-double_002dcolon-_0028_003a_003a_0029">rule, double-colon (<code>::</code>)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Double_002dColon">Double-Colon</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rule_002c-explicit_002c-definition-of">rule, explicit, definition of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Contents">Makefile Contents</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rule_002c-how-to-write">rule, how to write</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rules">Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rule_002c-implicit">rule, implicit</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Rules">Implicit Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rule_002c-implicit_002c-and-directory-search">rule, implicit, and directory search</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit_002fSearch">Implicit/Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rule_002c-implicit_002c-and-VPATH">rule, implicit, and <code>VPATH</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit_002fSearch">Implicit/Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rule_002c-implicit_002c-chains-of">rule, implicit, chains of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Chained-Rules">Chained Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rule_002c-implicit_002c-definition-of">rule, implicit, definition of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Contents">Makefile Contents</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rule_002c-implicit_002c-how-to-use">rule, implicit, how to use</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Using-Implicit">Using Implicit</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rule_002c-implicit_002c-introduction-to">rule, implicit, introduction to</a>:</td><td>&nbsp;</td><td valign="top"><a href="#make-Deduces">make Deduces</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rule_002c-implicit_002c-predefined">rule, implicit, predefined</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rule_002c-introduction-to">rule, introduction to</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rule-Introduction">Rule Introduction</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rule_002c-multiple-for-one-target">rule, multiple for one target</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multiple-Rules">Multiple Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rule_002c-no-recipe-or-prerequisites">rule, no recipe or prerequisites</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Force-Targets">Force Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rule_002c-pattern">rule, pattern</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pattern-Intro">Pattern Intro</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rule_002c-static-pattern">rule, static pattern</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Static-Pattern">Static Pattern</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rule_002c-static-pattern-versus-implicit">rule, static pattern versus implicit</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Static-versus-Implicit">Static versus Implicit</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rule_002c-with-multiple-targets">rule, with multiple targets</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multiple-Targets">Multiple Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-rules_002c-and-_0024">rules, and <code>$</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rule-Syntax">Rule Syntax</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-S">S</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-s_002e-_0028SCCS-file-prefix_0029"><code>s. <span class="roman">(SCCS file prefix)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-SCCS_002c-rule-to-extract-from">SCCS, rule to extract from</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-search-algorithm_002c-implicit-rule">search algorithm, implicit rule</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Rule-Search">Implicit Rule Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-search-path-for-prerequisites-_0028VPATH_0029">search path for prerequisites (<code>VPATH</code>)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Directory-Search">Directory Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-search-path-for-prerequisites-_0028VPATH_0029_002c-and-implicit-rules">search path for prerequisites (<code>VPATH</code>), and implicit rules</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit_002fSearch">Implicit/Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-search-path-for-prerequisites-_0028VPATH_0029_002c-and-link-libraries">search path for prerequisites (<code>VPATH</code>), and link libraries</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Libraries_002fSearch">Libraries/Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-searching-for-strings">searching for strings</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-secondary-expansion">secondary expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Secondary-Expansion">Secondary Expansion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-secondary-expansion-and-explicit-rules">secondary expansion and explicit rules</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Secondary-Expansion">Secondary Expansion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-secondary-expansion-and-implicit-rules">secondary expansion and implicit rules</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Secondary-Expansion">Secondary Expansion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-secondary-expansion-and-static-pattern-rules">secondary expansion and static pattern rules</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Secondary-Expansion">Secondary Expansion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-secondary-files">secondary files</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Chained-Rules">Chained Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-secondary-targets">secondary targets</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-sed-_0028shell-command_0029"><code>sed</code> (shell command)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Prerequisites">Automatic Prerequisites</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-selecting-a-word">selecting a word</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-selecting-word-lists">selecting word lists</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-sequences-of-commands">sequences of commands</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Canned-Recipes">Canned Recipes</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-setting-options-from-environment">setting options from environment</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-setting-options-in-makefiles">setting options in makefiles</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-setting-variables">setting variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Setting">Setting</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-several-rules-for-one-target">several rules for one target</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multiple-Rules">Multiple Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-several-targets-in-a-rule">several targets in a rule</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multiple-Targets">Multiple Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-shar-_0028standard-target_0029"><code>shar</code> <span class="roman">(standard target)</span></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Goals">Goals</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-shell-command_002c-function-for">shell command, function for</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Shell-Function">Shell Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-shell-file-name-pattern-_0028in-include_0029">shell file name pattern (in <code>include</code>)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Include">Include</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-shell-variables_002c-setting-in-recipes">shell variables, setting in recipes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Execution">Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-shell-wildcards-_0028in-include_0029">shell wildcards (in <code>include</code>)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Include">Include</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-shell_002c-choosing-the">shell, choosing the</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Choosing-the-Shell">Choosing the Shell</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-SHELL_002c-exported-value">SHELL, exported value</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_002fRecursion">Variables/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-SHELL_002c-import-from-environment">SHELL, import from environment</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Environment">Environment</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-shell_002c-in-DOS-and-Windows">shell, in DOS and Windows</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Choosing-the-Shell">Choosing the Shell</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-SHELL_002c-MS_002dDOS-specifics"><code>SHELL</code>, MS-DOS specifics</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Choosing-the-Shell">Choosing the Shell</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-SHELL_002c-value-of"><code>SHELL</code>, value of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Choosing-the-Shell">Choosing the Shell</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-signal">signal</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Interrupts">Interrupts</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-silent-operation">silent operation</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Echoing">Echoing</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-simple-makefile">simple makefile</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Simple-Makefile">Simple Makefile</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-simple-variable-expansion">simple variable expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Using-Variables">Using Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-simplifying-with-variables">simplifying with variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables-Simplify">Variables Simplify</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-simply-expanded-variables">simply expanded variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavors">Flavors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-sorting-words">sorting words</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-spaces_002c-in-variable-values">spaces, in variable values</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavors">Flavors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-spaces_002c-stripping">spaces, stripping</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-special-targets">special targets</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-special-variables">special variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Variables">Special Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-specifying-makefile-name">specifying makefile name</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Names">Makefile Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-splitting-long-lines">splitting long lines</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Splitting-Lines">Splitting Lines</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-splitting-recipes">splitting recipes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Splitting-Recipe-Lines">Splitting Recipe Lines</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-staged-installs">staged installs</a>:</td><td>&nbsp;</td><td valign="top"><a href="#DESTDIR">DESTDIR</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-standard-input">standard input</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parallel-Input">Parallel Input</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-standards-conformance">standards conformance</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview">Overview</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-standards-for-makefiles">standards for makefiles</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Conventions">Makefile Conventions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-static-pattern-rule">static pattern rule</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Static-Pattern">Static Pattern</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-static-pattern-rule_002c-syntax-of">static pattern rule, syntax of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Static-Usage">Static Usage</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-static-pattern-rule_002c-versus-implicit">static pattern rule, versus implicit</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Static-versus-Implicit">Static versus Implicit</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-static-pattern-rules_002c-secondary-expansion-of">static pattern rules, secondary expansion of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Secondary-Expansion">Secondary Expansion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-stem">stem</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Static-Usage">Static Usage</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-stem-1">stem</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pattern-Match">Pattern Match</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-stem_002c-shortest">stem, shortest</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pattern-Match">Pattern Match</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-stem_002c-variable-for">stem, variable for</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-stopping-make">stopping make</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Make-Control-Functions">Make Control Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-strings_002c-searching-for">strings, searching for</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-stripping-whitespace">stripping whitespace</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-sub_002dmake">sub-<code>make</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_002fRecursion">Variables/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-subdirectories_002c-recursion-for">subdirectories, recursion for</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Recursion">Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-substitution-variable-reference">substitution variable reference</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Substitution-Refs">Substitution Refs</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-suffix-rule">suffix rule</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Suffix-Rules">Suffix Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-suffix-rule_002c-for-archive">suffix rule, for archive</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Archive-Suffix-Rules">Archive Suffix Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-suffix_002c-adding">suffix, adding</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-suffix_002c-function-to-find">suffix, function to find</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-suffix_002c-substituting-in-variables">suffix, substituting in variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Substitution-Refs">Substitution Refs</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-suppressing-inheritance">suppressing inheritance</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Suppressing-Inheritance">Suppressing Inheritance</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-switches">switches</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-symbol-directories_002c-updating-archive">symbol directories, updating archive</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Archive-Symbols">Archive Symbols</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-syntax-of-recipe">syntax of recipe</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Recipe-Syntax">Recipe Syntax</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-syntax-of-rules">syntax of rules</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rule-Syntax">Rule Syntax</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-T">T</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-tab-character-_0028in-commands_0029">tab character (in commands)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rule-Syntax">Rule Syntax</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-tabs-in-rules">tabs in rules</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rule-Introduction">Rule Introduction</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-TAGS-_0028standard-target_0029"><code>TAGS</code> <span class="roman">(standard target)</span></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Goals">Goals</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-tangle"><code>tangle</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-tangle-1"><code>tangle</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-tar-_0028standard-target_0029"><code>tar</code> <span class="roman">(standard target)</span></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Goals">Goals</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-target">target</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rules">Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-target-pattern_002c-implicit">target pattern, implicit</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pattern-Intro">Pattern Intro</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-target-pattern_002c-static-_0028not-implicit_0029">target pattern, static (not implicit)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Static-Usage">Static Usage</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-target_002c-deleting-on-error">target, deleting on error</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Errors">Errors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-target_002c-deleting-on-interrupt">target, deleting on interrupt</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Interrupts">Interrupts</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-target_002c-expansion">target, expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reading-Makefiles">Reading Makefiles</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-target_002c-multiple-in-pattern-rule">target, multiple in pattern rule</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pattern-Intro">Pattern Intro</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-target_002c-multiple-rules-for-one">target, multiple rules for one</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multiple-Rules">Multiple Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-target_002c-touching">target, touching</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instead-of-Execution">Instead of Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-target_002dspecific-variables">target-specific variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Target_002dspecific">Target-specific</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-targets">targets</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rule-Syntax">Rule Syntax</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-targets-without-a-file">targets without a file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Phony-Targets">Phony Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-targets_002c-built_002din-special">targets, built-in special</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-targets_002c-empty">targets, empty</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Empty-Targets">Empty Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-targets_002c-force">targets, force</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Force-Targets">Force Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-targets_002c-introduction-to">targets, introduction to</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rule-Introduction">Rule Introduction</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-targets_002c-multiple">targets, multiple</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multiple-Targets">Multiple Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-targets_002c-phony">targets, phony</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Phony-Targets">Phony Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-terminal-rule">terminal rule</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Match_002dAnything-Rules">Match-Anything Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-terminal_002c-output-to">terminal, output to</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Terminal-Output">Terminal Output</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-test-_0028standard-target_0029"><code>test</code> <span class="roman">(standard target)</span></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Goals">Goals</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-testing-compilation">testing compilation</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Testing">Testing</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-tex"><code>tex</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-tex-1"><code>tex</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-TeX_002c-rule-to-run">TeX, rule to run</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-texi2dvi"><code>texi2dvi</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-texi2dvi-1"><code>texi2dvi</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-Texinfo_002c-rule-to-format">Texinfo, rule to format</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-tilde-_0028_007e_0029">tilde (<code>~</code>)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Wildcards">Wildcards</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-tools_002c-sharing-job-slots">tools, sharing job slots</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Job-Slots">Job Slots</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-touch-_0028shell-command_0029"><code>touch</code> (shell command)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Wildcard-Examples">Wildcard Examples</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-touch-_0028shell-command_0029-1"><code>touch</code> (shell command)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Empty-Targets">Empty Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-touching-files">touching files</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instead-of-Execution">Instead of Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-traditional-directory-search-_0028GPATH_0029">traditional directory search (GPATH)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Search-Algorithm">Search Algorithm</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-types-of-prerequisites">types of prerequisites</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Prerequisite-Types">Prerequisite Types</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-types_002c-conversion-of">types, conversion of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Guile-Types">Guile Types</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-U">U</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-undefined-variables_002c-warning-message">undefined variables, warning message</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-undefining-variable">undefining variable</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Undefine-Directive">Undefine Directive</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-updating-archive-symbol-directories">updating archive symbol directories</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Archive-Symbols">Archive Symbols</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-updating-loaded-objects">updating loaded objects</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Remaking-Loaded-Objects">Remaking Loaded Objects</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-updating-makefiles">updating makefiles</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Remaking-Makefiles">Remaking Makefiles</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-user-defined-functions">user defined functions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Call-Function">Call Function</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-V">V</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-value">value</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Using-Variables">Using Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-value_002c-how-a-variable-gets-it">value, how a variable gets it</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Values">Values</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variable">variable</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Using-Variables">Using Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variable-definition">variable definition</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Contents">Makefile Contents</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variable-references-in-recipes">variable references in recipes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables-in-Recipes">Variables in Recipes</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables">variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables-Simplify">Variables Simplify</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-_0024-in-name">variables, ‘<samp>$</samp>’ in name</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Computed-Names">Computed Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-and-implicit-rule">variables, and implicit rule</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-appending-to">variables, appending to</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Appending">Appending</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-automatic">variables, automatic</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-command-line">variables, command line</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overriding">Overriding</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-command-line_002c-and-recursion">variables, command line, and recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-computed-names">variables, computed names</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Computed-Names">Computed Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-conditional-assignment">variables, conditional assignment</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavors">Flavors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-defining-verbatim">variables, defining verbatim</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dLine">Multi-Line</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-environment">variables, environment</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_002fRecursion">Variables/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-environment-1">variables, environment</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Environment">Environment</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-exporting">variables, exporting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_002fRecursion">Variables/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-flavor-of">variables, flavor of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavor-Function">Flavor Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-flavors">variables, flavors</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavors">Flavors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-how-they-get-their-values">variables, how they get their values</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Values">Values</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-how-to-reference">variables, how to reference</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reference">Reference</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-loops-in-expansion">variables, loops in expansion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavors">Flavors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-modified-reference">variables, modified reference</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Substitution-Refs">Substitution Refs</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-multi_002dline">variables, multi-line</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dLine">Multi-Line</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-nested-references">variables, nested references</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Computed-Names">Computed Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-origin-of">variables, origin of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Origin-Function">Origin Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-overriding">variables, overriding</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Override-Directive">Override Directive</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-overriding-with-arguments">variables, overriding with arguments</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overriding">Overriding</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-pattern_002dspecific">variables, pattern-specific</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pattern_002dspecific">Pattern-specific</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-recursively-expanded">variables, recursively expanded</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavors">Flavors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-setting">variables, setting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Setting">Setting</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-simply-expanded">variables, simply expanded</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavors">Flavors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-spaces-in-values">variables, spaces in values</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavors">Flavors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-substituting-suffix-in">variables, substituting suffix in</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Substitution-Refs">Substitution Refs</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-substitution-reference">variables, substitution reference</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Substitution-Refs">Substitution Refs</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-target_002dspecific">variables, target-specific</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Target_002dspecific">Target-specific</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-unexpanded-value">variables, unexpanded value</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Value-Function">Value Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-variables_002c-warning-for-undefined">variables, warning for undefined</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options-Summary">Options Summary</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-varying-prerequisites">varying prerequisites</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Static-Pattern">Static Pattern</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-verbatim-variable-definition">verbatim variable definition</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dLine">Multi-Line</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-vpath">vpath</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Directory-Search">Directory Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-VPATH_002c-and-implicit-rules"><code>VPATH</code>, and implicit rules</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit_002fSearch">Implicit/Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-VPATH_002c-and-link-libraries"><code>VPATH</code>, and link libraries</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Libraries_002fSearch">Libraries/Search</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-W">W</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-warnings_002c-printing">warnings, printing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Make-Control-Functions">Make Control Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-weave"><code>weave</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-weave-1"><code>weave</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-Web_002c-rule-to-run">Web, rule to run</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-what-if">what if</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instead-of-Execution">Instead of Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-whitespace_002c-in-variable-values">whitespace, in variable values</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavors">Flavors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-whitespace_002c-stripping">whitespace, stripping</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-wildcard">wildcard</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Wildcards">Wildcards</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-wildcard-pitfalls">wildcard pitfalls</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Wildcard-Pitfall">Wildcard Pitfall</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-wildcard_002c-function">wildcard, function</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-wildcard_002c-in-archive-member">wildcard, in archive member</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Archive-Members">Archive Members</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-wildcard_002c-in-include">wildcard, in <code>include</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Include">Include</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-wildcards-and-MS_002dDOS_002fMS_002dWindows-backslashes">wildcards and MS-DOS/MS-Windows backslashes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Wildcard-Pitfall">Wildcard Pitfall</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-Windows_002c-choosing-a-shell-in">Windows, choosing a shell in</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Choosing-the-Shell">Choosing the Shell</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-word_002c-selecting-a">word, selecting a</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-words_002c-extracting-first">words, extracting first</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-words_002c-extracting-last">words, extracting last</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-words_002c-filtering">words, filtering</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-words_002c-filtering-out">words, filtering out</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-words_002c-finding-number">words, finding number</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-words_002c-iterating-over">words, iterating over</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Foreach-Function">Foreach Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-words_002c-joining-lists">words, joining lists</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-words_002c-removing-duplicates">words, removing duplicates</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-words_002c-selecting-lists-of">words, selecting lists of</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-writing-recipes">writing recipes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Recipes">Recipes</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-writing-rules">writing rules</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Rules">Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-writing-to-a-file">writing to a file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Function">File Function</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Concept-Index_cp_letter-Y">Y</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-yacc-1"><code>yacc</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-yacc-2"><code>yacc</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-yacc"><code>yacc</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Canned-Recipes">Canned Recipes</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-Yacc_002c-rule-to-run">Yacc, rule to run</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br></tbody></table><br><table><tbody><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Concept-Index_cp_symbol-1"><b>!</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-2"><b>#</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-3"><b>$</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-4"><b>%</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-5"><b><em></em></b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-6"><b>+</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-7"><b>,</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-8"><b>-</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-9"><b>.</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-10"><b>:</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-11"><b>=</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-12"><b>?</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-13"><b>@</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-14"><b>[</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-15"><b>\</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-16"><b>_</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_symbol-17"><b>~</b></a><br> &nbsp;<br><br><br><a class="summary-letter" href="#Concept-Index_cp_letter-A"><b>A</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-B"><b>B</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-C"><b>C</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-D"><b>D</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-E"><b>E</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-F"><b>F</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-G"><b>G</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-H"><b>H</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-I"><b>I</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-J"><b>J</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-K"><b>K</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-L"><b>L</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-M"><b>M</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-N"><b>N</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-O"><b>O</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-P"><b>P</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-Q"><b>Q</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-R"><b>R</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-S"><b>S</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-T"><b>T</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-U"><b>U</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-V"><b>V</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-W"><b>W</b></a><br> &nbsp;<br><a class="summary-letter" href="#Concept-Index_cp_letter-Y"><b>Y</b></a><br> &nbsp;<br></td></tr></tbody></table><br><br><hr><br><a name="Name-Index"></a><br><div class="header"><br><p><br>Previous: <a href="#Concept-Index" accesskey="p" rel="prev">Concept Index</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p><br></div><br><a name="Index-of-Functions_002c-Variables_002c-_0026-Directives"></a><br><h2 class="unnumbered">Index of Functions, Variables, &amp; Directives</h2><br><br><table><tbody><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Name-Index_fn_symbol-1"><b>$</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-2"><b>%</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-3"><b></b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-4"><b>+</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-5"><b>-</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-6"><b>.</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-7"><b>/</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-8"><b>&lt;</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-9"><b>?</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-10"><b>@</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-11"><b>^</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-12"><b>|</b></a><br> &nbsp;<br><br><br><a class="summary-letter" href="#Name-Index_fn_letter-A"><b>A</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-B"><b>B</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-C"><b>C</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-D"><b>D</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-E"><b>E</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-F"><b>F</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-G"><b>G</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-I"><b>I</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-J"><b>J</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-L"><b>L</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-M"><b>M</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-N"><b>N</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-O"><b>O</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-P"><b>P</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-R"><b>R</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-S"><b>S</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-T"><b>T</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-U"><b>U</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-V"><b>V</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-W"><b>W</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-Y"><b>Y</b></a><br> &nbsp;<br></td></tr></tbody></table><br><table class="index-fn" border="0"><br><tbody><tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_symbol-1">$</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_0025"><code>$%</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_0028_0025D_0029"><code>$(%D)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_0028_0025F_0029"><code>$(%F)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_0028_002aD_0029"><code>$(<em>D)</em></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_0028_002aF_0029"><code>$(F)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_0028_002bD_0029"><code>$(+D)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_0028_002bF_0029"><code>$(+F)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_0028_003cD_0029"><code>$(&lt;D)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_0028_003cF_0029"><code>$(&lt;F)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_0028_003fD_0029"><code>$(?D)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_0028_003fF_0029"><code>$(?F)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_0028_0040D_0029"><code>$(@D)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_0028_0040F_0029"><code>$(@F)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_0028_005eD_0029"><code>$(^D)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_0028_005eF_0029"><code>$(^F)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_002a"><code>$<em></em></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_002a_002c-and-static-pattern"><code>$<span class="roman">, and static pattern</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Static-Usage">Static Usage</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_002b"><code>$+</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_003c"><code>$&lt;</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_003f"><code>$?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_0040"><code>$@</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_005e"><code>$^</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0024_007c"><code>$|</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_symbol-2">%</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0025-_0028automatic-variable_0029"><code>% <span class="roman">(automatic variable)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0025D-_0028automatic-variable_0029"><code>%D <span class="roman">(automatic variable)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0025F-_0028automatic-variable_0029"><code>%F <span class="roman">(automatic variable)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_symbol-3"><em></em></a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002a-_0028automatic-variable_0029"><code> <span class="roman">(automatic variable)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002a-_0028automatic-variable_0029_002c-unsupported-bizarre-usage"><code><em> <span class="roman">(automatic variable), unsupported bizarre usage</span></em></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Missing">Missing</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002aD-_0028automatic-variable_0029"><code>D <span class="roman">(automatic variable)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002aF-_0028automatic-variable_0029"><code><em>F <span class="roman">(automatic variable)</span></em></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_symbol-4">+</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002b-_0028automatic-variable_0029"><code>+ <span class="roman">(automatic variable)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002bD-_0028automatic-variable_0029"><code>+D <span class="roman">(automatic variable)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002bF-_0028automatic-variable_0029"><code>+F <span class="roman">(automatic variable)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_symbol-5">-</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002dload"><code>-load</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#load-Directive">load Directive</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_symbol-6">.</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eDEFAULT"><code>.DEFAULT</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eDEFAULT-1"><code>.DEFAULT</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Last-Resort">Last Resort</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eDEFAULT_002c-and-empty-recipes"><code>.DEFAULT<span class="roman">, and empty recipes</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Empty-Recipes">Empty Recipes</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eDEFAULT_005fGOAL-_0028define-default-goal_0029"><code>.DEFAULT_GOAL <span class="roman">(define default goal)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Variables">Special Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eDELETE_005fON_005fERROR"><code>.DELETE_ON_ERROR</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eDELETE_005fON_005fERROR-1"><code>.DELETE_ON_ERROR</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Errors">Errors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eEXPORT_005fALL_005fVARIABLES"><code>.EXPORT_ALL_VARIABLES</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eEXPORT_005fALL_005fVARIABLES-1"><code>.EXPORT_ALL_VARIABLES</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_002fRecursion">Variables/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eFEATURES-_0028list-of-supported-features_0029"><code>.FEATURES <span class="roman">(list of supported features)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Variables">Special Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eIGNORE"><code>.IGNORE</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eIGNORE-1"><code>.IGNORE</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Errors">Errors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eINCLUDE_005fDIRS-_0028list-of-include-directories_0029"><code>.INCLUDE_DIRS <span class="roman">(list of include directories)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Variables">Special Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eINTERMEDIATE"><code>.INTERMEDIATE</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eLIBPATTERNS"><code>.LIBPATTERNS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Libraries_002fSearch">Libraries/Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eLOADED"><code>.LOADED</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#load-Directive">load Directive</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eLOW_005fRESOLUTION_005fTIME"><code>.LOW_RESOLUTION_TIME</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eNOTPARALLEL"><code>.NOTPARALLEL</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eONESHELL"><code>.ONESHELL</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eONESHELL-1"><code>.ONESHELL</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#One-Shell">One Shell</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002ePHONY"><code>.PHONY</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Phony-Targets">Phony Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002ePHONY-1"><code>.PHONY</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002ePOSIX"><code>.POSIX</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002ePOSIX-1"><code>.POSIX</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002ePRECIOUS"><code>.PRECIOUS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002ePRECIOUS-1"><code>.PRECIOUS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Interrupts">Interrupts</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eRECIPEPREFIX-_0028change-the-recipe-prefix-character_0029"><code>.RECIPEPREFIX <span class="roman">(change the recipe prefix character)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Variables">Special Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eSECONDARY"><code>.SECONDARY</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eSECONDEXPANSION"><code>.SECONDEXPANSION</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Secondary-Expansion">Secondary Expansion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eSECONDEXPANSION-1"><code>.SECONDEXPANSION</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eSHELLFLAGS"><code>.SHELLFLAGS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Choosing-the-Shell">Choosing the Shell</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eSHELLFLAGS-1"><code>.SHELLFLAGS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Choosing-the-Shell">Choosing the Shell</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eSHELLSTATUS"><code>.SHELLSTATUS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Shell-Function">Shell Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eSILENT"><code>.SILENT</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eSILENT-1"><code>.SILENT</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Echoing">Echoing</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eSUFFIXES"><code>.SUFFIXES</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Targets">Special Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eSUFFIXES-1"><code>.SUFFIXES</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Suffix-Rules">Suffix Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002eVARIABLES-_0028list-of-variables_0029"><code>.VARIABLES <span class="roman">(list of variables)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Variables">Special Variables</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_symbol-7">/</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002fusr_002fgnu_002finclude"><code>/usr/gnu/include</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Include">Include</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002fusr_002finclude"><code>/usr/include</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Include">Include</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_002fusr_002flocal_002finclude"><code>/usr/local/include</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Include">Include</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_symbol-8">&lt;</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_003c-_0028automatic-variable_0029"><code>&lt; <span class="roman">(automatic variable)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_003cD-_0028automatic-variable_0029"><code>&lt;D <span class="roman">(automatic variable)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_003cF-_0028automatic-variable_0029"><code>&lt;F <span class="roman">(automatic variable)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_symbol-9">?</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_003f-_0028automatic-variable_0029"><code>? <span class="roman">(automatic variable)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_003fD-_0028automatic-variable_0029"><code>?D <span class="roman">(automatic variable)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_003fF-_0028automatic-variable_0029"><code>?F <span class="roman">(automatic variable)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_symbol-10">@</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0040-_0028automatic-variable_0029"><code>@ <span class="roman">(automatic variable)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0040D-_0028automatic-variable_0029"><code>@D <span class="roman">(automatic variable)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_0040F-_0028automatic-variable_0029"><code>@F <span class="roman">(automatic variable)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_symbol-11">^</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_005e-_0028automatic-variable_0029"><code>^ <span class="roman">(automatic variable)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_005eD-_0028automatic-variable_0029"><code>^D <span class="roman">(automatic variable)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-_005eF-_0028automatic-variable_0029"><code>^F <span class="roman">(automatic variable)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_symbol-12">|</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-_007c-_0028automatic-variable_0029"><code>| <span class="roman">(automatic variable)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Automatic-Variables">Automatic Variables</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_letter-A">A</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-abspath-1"><code>abspath</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-addprefix"><code>addprefix</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-addsuffix"><code>addsuffix</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-and"><code>and</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Conditional-Functions">Conditional Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-AR"><code>AR</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-ARFLAGS"><code>ARFLAGS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-AS"><code>AS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-ASFLAGS"><code>ASFLAGS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_letter-B">B</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-basename-1"><code>basename</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-bindir"><code>bindir</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Directory-Variables">Directory Variables</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_letter-C">C</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-call"><code>call</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Call-Function">Call Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-CC"><code>CC</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-CFLAGS"><code>CFLAGS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-CO"><code>CO</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-COFLAGS"><code>COFLAGS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-COMSPEC"><code>COMSPEC</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Choosing-the-Shell">Choosing the Shell</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-CPP"><code>CPP</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-CPPFLAGS"><code>CPPFLAGS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-CTANGLE"><code>CTANGLE</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-CURDIR"><code><code>CURDIR</code></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Recursion">Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-CWEAVE"><code>CWEAVE</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-CXX"><code>CXX</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-CXXFLAGS"><code>CXXFLAGS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_letter-D">D</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-define"><code>define</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dLine">Multi-Line</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-DESTDIR"><code>DESTDIR</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#DESTDIR">DESTDIR</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-dir"><code>dir</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_letter-E">E</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-else"><code>else</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Conditional-Syntax">Conditional Syntax</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-endef"><code>endef</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dLine">Multi-Line</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-endif"><code>endif</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Conditional-Syntax">Conditional Syntax</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-error"><code>error</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Make-Control-Functions">Make Control Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-eval"><code>eval</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Eval-Function">Eval Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-exec_005fprefix"><code>exec_prefix</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Directory-Variables">Directory Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-export"><code>export</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_002fRecursion">Variables/Recursion</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_letter-F">F</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-FC"><code>FC</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-FFLAGS"><code>FFLAGS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-file"><code>file</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Function">File Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-filter"><code>filter</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-filter_002dout"><code>filter-out</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-findstring"><code>findstring</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-firstword"><code>firstword</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-flavor"><code>flavor</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavor-Function">Flavor Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-foreach"><code>foreach</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Foreach-Function">Foreach Function</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_letter-G">G</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-GET"><code>GET</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-GFLAGS"><code>GFLAGS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-gmk_002deval"><code>gmk-eval</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Guile-Interface">Guile Interface</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-gmk_002dexpand"><code>gmk-expand</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Guile-Interface">Guile Interface</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-gmk_005fadd_005ffunction"><code>gmk_add_function</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Loaded-Object-API">Loaded Object API</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-gmk_005falloc"><code>gmk_alloc</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Loaded-Object-API">Loaded Object API</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-gmk_005feval"><code>gmk_eval</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Loaded-Object-API">Loaded Object API</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-gmk_005fexpand"><code>gmk_expand</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Loaded-Object-API">Loaded Object API</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-gmk_005ffree"><code>gmk_free</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Loaded-Object-API">Loaded Object API</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-gmk_005ffunc_005fptr"><code>gmk_func_ptr</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Loaded-Object-API">Loaded Object API</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-GNUmakefile"><code>GNUmakefile</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Names">Makefile Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-GPATH"><code>GPATH</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Search-Algorithm">Search Algorithm</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-guile"><code>guile</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Guile-Function">Guile Function</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_letter-I">I</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-if"><code>if</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Conditional-Functions">Conditional Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-if-1"><code>if</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Conditional-Functions">Conditional Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-ifdef"><code>ifdef</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Conditional-Syntax">Conditional Syntax</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-ifeq"><code>ifeq</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Conditional-Syntax">Conditional Syntax</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-ifndef"><code>ifndef</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Conditional-Syntax">Conditional Syntax</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-ifneq"><code>ifneq</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Conditional-Syntax">Conditional Syntax</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-include"><code>include</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Include">Include</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-info"><code>info</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Make-Control-Functions">Make Control Functions</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_letter-J">J</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-join"><code>join</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_letter-L">L</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-lastword"><code>lastword</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-LDFLAGS"><code>LDFLAGS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-LDLIBS"><code>LDLIBS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-LEX"><code>LEX</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-LFLAGS"><code>LFLAGS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-libexecdir"><code>libexecdir</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Directory-Variables">Directory Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-LINT"><code>LINT</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-LINTFLAGS"><code>LINTFLAGS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-load"><code>load</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#load-Directive">load Directive</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-LOADLIBES"><code>LOADLIBES</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_letter-M">M</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-M2C"><code>M2C</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-MAKE"><code>MAKE</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#MAKE-Variable">MAKE Variable</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-MAKE-1"><code>MAKE</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavors">Flavors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-MAKECMDGOALS"><code>MAKECMDGOALS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Goals">Goals</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-Makefile"><code>Makefile</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Names">Makefile Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-makefile-1"><code>makefile</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Makefile-Names">Makefile Names</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-MAKEFILES"><code>MAKEFILES</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#MAKEFILES-Variable">MAKEFILES Variable</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-MAKEFILES-1"><code>MAKEFILES</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_002fRecursion">Variables/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-MAKEFILE_005fLIST-_0028list-of-parsed-makefiles_0029"><code>MAKEFILE_LIST <span class="roman">(list of parsed makefiles)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Variables">Special Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-MAKEFLAGS"><code>MAKEFLAGS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-MAKEINFO"><code>MAKEINFO</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-MAKELEVEL"><code>MAKELEVEL</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_002fRecursion">Variables/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-MAKELEVEL-1"><code>MAKELEVEL</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Flavors">Flavors</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-MAKEOVERRIDES"><code>MAKEOVERRIDES</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-MAKESHELL-_0028MS_002dDOS-alternative-to-SHELL_0029"><code><code>MAKESHELL</code> <span class="roman">(MS-DOS alternative to <code>SHELL</code>)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Choosing-the-Shell">Choosing the Shell</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-MAKE_005fHOST"><code>MAKE_HOST</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Quick-Reference">Quick Reference</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-MAKE_005fRESTARTS-_0028number-of-times-make-has-restarted_0029"><code>MAKE_RESTARTS <span class="roman">(number of times <code>make</code> has restarted)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Variables">Special Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-MAKE_005fTERMERR-_0028whether-stderr-is-a-terminal_0029"><code>MAKE_TERMERR <span class="roman">(whether stderr is a terminal)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Variables">Special Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-MAKE_005fTERMOUT-_0028whether-stdout-is-a-terminal_0029"><code>MAKE_TERMOUT <span class="roman">(whether stdout is a terminal)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Variables">Special Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-MAKE_005fVERSION"><code>MAKE_VERSION</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Quick-Reference">Quick Reference</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-MFLAGS"><code>MFLAGS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Options_002fRecursion">Options/Recursion</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_letter-N">N</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-notdir"><code>notdir</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_letter-O">O</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-or"><code>or</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Conditional-Functions">Conditional Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-origin"><code>origin</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Origin-Function">Origin Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-OUTPUT_005fOPTION"><code>OUTPUT_OPTION</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Catalogue-of-Rules">Catalogue of Rules</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-override"><code>override</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Override-Directive">Override Directive</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_letter-P">P</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-patsubst"><code>patsubst</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Substitution-Refs">Substitution Refs</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-patsubst-1"><code>patsubst</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-PC"><code>PC</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-PFLAGS"><code>PFLAGS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-prefix"><code>prefix</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Directory-Variables">Directory Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-private"><code>private</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Suppressing-Inheritance">Suppressing Inheritance</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_letter-R">R</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-realpath-1"><code>realpath</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-RFLAGS"><code>RFLAGS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-RM"><code>RM</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_letter-S">S</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-sbindir"><code>sbindir</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Directory-Variables">Directory Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-SHELL"><code>SHELL</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Choosing-the-Shell">Choosing the Shell</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-SHELL-1"><code>SHELL</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Choosing-the-Shell">Choosing the Shell</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-shell"><code>shell</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Shell-Function">Shell Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-SHELL-_0028recipe-execution_0029"><code><code>SHELL</code> <span class="roman">(recipe execution)</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Execution">Execution</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-sort"><code>sort</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-strip"><code>strip</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-subst"><code>subst</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multiple-Targets">Multiple Targets</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-subst-1"><code>subst</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-suffix"><code>suffix</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-SUFFIXES"><code>SUFFIXES</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Suffix-Rules">Suffix Rules</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_letter-T">T</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-TANGLE"><code>TANGLE</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-TEX"><code>TEX</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-TEXI2DVI"><code>TEXI2DVI</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_letter-U">U</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-undefine"><code>undefine</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Undefine-Directive">Undefine Directive</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-unexport"><code>unexport</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_002fRecursion">Variables/Recursion</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_letter-V">V</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-value-1"><code>value</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Value-Function">Value Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-VPATH"><code>VPATH</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Directory-Search">Directory Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-VPATH-1"><code>VPATH</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#General-Search">General Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-vpath-1"><code>vpath</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Directory-Search">Directory Search</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-vpath-2"><code>vpath</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Selective-Search">Selective Search</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_letter-W">W</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-warning"><code>warning</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Make-Control-Functions">Make Control Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-WEAVE"><code>WEAVE</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-wildcard-1"><code>wildcard</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Wildcard-Function">Wildcard Function</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-wildcard-2"><code>wildcard</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-Name-Functions">File Name Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-word"><code>word</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-wordlist"><code>wordlist</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-words"><code>words</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Text-Functions">Text Functions</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br><tr><th><a name="Name-Index_fn_letter-Y">Y</a></th><td></td><td></td></tr><br><tr><td></td><td valign="top"><a href="#index-YACC"><code>YACC</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td></td><td valign="top"><a href="#index-YFLAGS"><code>YFLAGS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implicit-Variables">Implicit Variables</a></td></tr><br><tr><td colspan="4"> <hr></td></tr><br></tbody></table><br><table><tbody><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Name-Index_fn_symbol-1"><b>$</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-2"><b>%</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-3"><b></b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-4"><b>+</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-5"><b>-</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-6"><b>.</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-7"><b>/</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-8"><b>&lt;</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-9"><b>?</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-10"><b>@</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-11"><b>^</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_symbol-12"><b>|</b></a><br> &nbsp;<br><br><br><a class="summary-letter" href="#Name-Index_fn_letter-A"><b>A</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-B"><b>B</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-C"><b>C</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-D"><b>D</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-E"><b>E</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-F"><b>F</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-G"><b>G</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-I"><b>I</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-J"><b>J</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-L"><b>L</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-M"><b>M</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-N"><b>N</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-O"><b>O</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-P"><b>P</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-R"><b>R</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-S"><b>S</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-T"><b>T</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-U"><b>U</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-V"><b>V</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-W"><b>W</b></a><br> &nbsp;<br><a class="summary-letter" href="#Name-Index_fn_letter-Y"><b>Y</b></a><br> &nbsp;<br></td></tr></tbody></table><br><br><div class="footnote"><br><hr><br><h4 class="footnotes-heading">Footnotes</h4><br><br><h3><a name="FOOT1" href="#DOCF1">(1)</a></h3><br><p>GNU Make compiled for MS-DOS and MS-Windows behaves as if<br><var>prefix</var> has been defined to be the root of the DJGPP tree<br>hierarchy.</p><br><h3><a name="FOOT2" href="#DOCF2">(2)</a></h3><br><p>On<br>MS-DOS, the value of current working directory is <strong>global</strong>, so<br>changing it <em>will</em> affect the following recipe lines on those<br>systems.</p><br></div><br><hr><br><br><br><br><br><br></body></html>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://wangdongen.cn/2016/09/18/makefile/" data-id="cit8b7aej000qfqa5ikrcr05s" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/makefile/">makefile</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2016/06/29/DiskLruCache/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">UIL之DiskLruCache 源码分析</div>
    </a>
  
</nav>

  
</article>


  <section id="comments">
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="post-makefile" data-title="makefile" data-url="http://wangdongen.cn/2016/09/18/makefile/"></div>
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:'smallsilver'};
      (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
      })();
      </script>
    <!-- 多说公共JS代码 end -->
  </section>
  
</section>
        
          <aside id="sidebar">
  
    

  
    <div class="widget-wrap">
    <h3 class="widget-title">轻松一下</h3>
    <ul class="entry"> 
      <li><object type="application/x-shockwave-flash" style="outline:none;" data="http://cdn.abowman.com/widgets/fish/fish.swf?" width="270" height="240"><param name="movie" value="http://cdn.abowman.com/widgets/fish/fish.swf?"></param><param name="AllowScriptAccess" value="always"></param><param name="wmode" value="opaque"></param><param name="scale" value="noscale"/><param name="salign" value="tl"/></object></li> 
    </ul> 
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LruCache/">LruCache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/">c++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cache/">cache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/makefile/">makefile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/memory/">memory</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/图片框架/">图片框架</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/LruCache/" style="font-size: 10px;">LruCache</a> <a href="/tags/c/" style="font-size: 10px;">c++</a> <a href="/tags/cache/" style="font-size: 10px;">cache</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/linux/" style="font-size: 20px;">linux</a> <a href="/tags/makefile/" style="font-size: 10px;">makefile</a> <a href="/tags/memory/" style="font-size: 10px;">memory</a> <a href="/tags/vim/" style="font-size: 10px;">vim</a> <a href="/tags/图片框架/" style="font-size: 10px;">图片框架</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/09/18/makefile/">makefile</a>
          </li>
        
          <li>
            <a href="/2016/06/29/DiskLruCache/">UIL之DiskLruCache 源码分析</a>
          </li>
        
          <li>
            <a href="/2016/06/21/use-SoftReference-and-WeakReference/">Java 如何有效地避免OOM：善于利用软引用和弱引用</a>
          </li>
        
          <li>
            <a href="/2016/06/19/UniversalImageLoader/">图片框架系列（一）UIL介绍篇</a>
          </li>
        
          <li>
            <a href="/2016/06/15/vim入门基础/">Vim入门基础</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    <div class="widget-wrap">
    <h3 class="widget-title">friend's blog</h3>
    <div class="widget">
    <ul class="entry"> 
      <li><a href="http://liugangqiang.com" title="e">小强</a></li> 
      <li><a href="http://note.dagger.cc" title="e">汪主席</a></li> 
    </ul> 
    </div>
</div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 dongen_wang@163.com<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>